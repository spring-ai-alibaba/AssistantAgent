2026-01-22T12:00:04.931+08:00  INFO --- [           main] c.a.a.a.start.AssistantAgentApplication  : Starting AssistantAgentApplication using Java 21.0.9 with PID 25980 (D:\devfive\AssistantAgent\assistant-agent-start\target\classes started by zhou_ in D:\devfive\AssistantAgent)
2026-01-22T12:00:04.933+08:00 DEBUG --- [           main] c.a.a.a.start.AssistantAgentApplication  : Running with Spring Boot v3.4.8, Spring v6.2.9
2026-01-22T12:00:04.935+08:00  INFO --- [           main] c.a.a.a.start.AssistantAgentApplication  : No active profile set, falling back to 1 default profile: "default"
2026-01-22T12:00:07.221+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Elasticsearch repositories in DEFAULT mode.
2026-01-22T12:00:07.273+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 38 ms. Found 0 Elasticsearch repository interfaces.
2026-01-22T12:00:07.284+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Reactive Elasticsearch repositories in DEFAULT mode.
2026-01-22T12:00:07.296+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 8 ms. Found 0 Reactive Elasticsearch repository interfaces.
2026-01-22T12:00:07.513+08:00  WARN --- [           main] o.m.s.mapper.ClassPathMapperScanner      : Skipping MapperFactoryBean with name 'learningRecordMapper' and 'com.alibaba.assistant.agent.start.persistence.learning.mapper.LearningRecordMapper' mapperInterface. Bean already defined with the same name!
2026-01-22T12:00:07.513+08:00  WARN --- [           main] o.m.s.mapper.ClassPathMapperScanner      : Skipping MapperFactoryBean with name 'triggerDefinitionMapper' and 'com.alibaba.assistant.agent.start.persistence.trigger.mapper.TriggerDefinitionMapper' mapperInterface. Bean already defined with the same name!
2026-01-22T12:00:07.514+08:00  WARN --- [           main] o.m.s.mapper.ClassPathMapperScanner      : Skipping MapperFactoryBean with name 'triggerExecutionRecordMapper' and 'com.alibaba.assistant.agent.start.persistence.trigger.mapper.TriggerExecutionRecordMapper' mapperInterface. Bean already defined with the same name!
2026-01-22T12:00:07.515+08:00  WARN --- [           main] o.m.s.mapper.ClassPathMapperScanner      : Skipping MapperFactoryBean with name 'actionRegistryMapper' and 'com.alibaba.assistant.agent.planning.persistence.mapper.ActionRegistryMapper' mapperInterface. Bean already defined with the same name!
2026-01-22T12:00:10.426+08:00  INFO --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2026-01-22T12:00:10.476+08:00  INFO --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2026-01-22T12:00:10.477+08:00  INFO --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.43]
2026-01-22T12:00:10.645+08:00  INFO --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2026-01-22T12:00:10.646+08:00  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 5602 ms
2026-01-22T12:00:10.730+08:00  INFO --- [           main] c.a.a.a.s.a.security.JwtTokenProvider    : JwtTokenProvider#init - JWT 密钥已初始化
2026-01-22T12:00:10.870+08:00 DEBUG --- [           main] c.a.a.a.s.a.s.JwtAuthenticationFilter    : Filter 'jwtAuthenticationFilter' configured for use
2026-01-22T12:00:11.802+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#init - reason=search extension framework is enabled
2026-01-22T12:00:11.804+08:00  INFO --- [           main] c.a.a.a.s.s.MockBaiduWebSearchProvider   : MockBaiduWebSearchProvider#init - reason=使用简单模式初始化
2026-01-22T12:00:11.812+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#unifiedSearchCodeactTool - reason=创建统一搜索工具, providerCount=3
2026-01-22T12:00:12.010+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#init - reason=planning extension is enabled
2026-01-22T12:00:12.013+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#init - reason=ES configuration class loaded (elasticsearch.enabled=true)
2026-01-22T12:00:12.016+08:00  INFO --- [           main] toConfiguration$MybatisPlusConfiguration : MybatisPlusConfiguration#init - reason=MySQL configuration class loaded (mysql.enabled=true, MyBatisPlus present)
2026-01-22T12:00:12.085+08:00  INFO --- [           main] toConfiguration$MybatisPlusConfiguration : MybatisPlusConfiguration#actionEntityConverter - reason=creating entity converter
2026-01-22T12:00:12.086+08:00  INFO --- [           main] toConfiguration$MybatisPlusConfiguration : MybatisPlusConfiguration#mybatisPlusActionRepository - reason=ActionRegistryMapper found, creating MySQL repository
2026-01-22T12:00:13.777+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#actionVectorizationService - reason=creating ES vectorization service
2026-01-22T12:00:14.104+08:00  INFO --- [           main] c.a.a.a.p.v.ActionVectorizationService   : ActionVectorizationService#init - reason=ES index initialized on startup
2026-01-22T12:00:14.137+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#semanticActionProvider - reason=creating semantic action provider, semanticWeight=0.6, keywordWeight=0.4, matchThreshold=0.5
2026-01-22T12:00:14.147+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#defaultPlanGenerator - reason=creating default plan generator
2026-01-22T12:00:14.152+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#planActionCodeactTool - reason=creating plan_action tool
2026-01-22T12:00:14.155+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#queryStepExecutor - reason=creating query step executor
2026-01-22T12:00:14.160+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#inputStepExecutor - reason=creating input step executor
2026-01-22T12:00:14.164+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#executeStepExecutor - reason=creating execute step executor
2026-01-22T12:00:14.174+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#apiCallStepExecutor - reason=creating api call step executor
2026-01-22T12:00:14.197+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#validationStepExecutor - reason=creating validation step executor
2026-01-22T12:00:14.201+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#stepExecutorRegistry - reason=creating executor registry, executorCount=5
2026-01-22T12:00:14.205+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=QUERY, executorClass=QueryStepExecutor
2026-01-22T12:00:14.205+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=INPUT, executorClass=InputStepExecutor
2026-01-22T12:00:14.205+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=EXECUTE, executorClass=ExecuteStepExecutor
2026-01-22T12:00:14.205+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=API_CALL, executorClass=ApiCallStepExecutor
2026-01-22T12:00:14.205+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=VALIDATION, executorClass=ValidationStepExecutor
2026-01-22T12:00:14.206+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#defaultPlanExecutor - reason=creating default plan executor
2026-01-22T12:00:14.215+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#executeActionCodeactTool - reason=creating execute_action tool
2026-01-22T12:00:14.217+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#listActionsCodeactTool - reason=creating list_actions tool
2026-01-22T12:00:14.219+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#getActionDetailsCodeactTool - reason=creating get_action_details tool
2026-01-22T12:00:14.221+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#executeSystemActionCodeactTool - reason=creating execute_system_action tool
2026-01-22T12:00:14.377+08:00  INFO --- [           main] c.a.a.a.start.config.PersistenceConfig   : PersistenceConfig#init - reason=persistence configuration loaded
2026-01-22T12:00:14.379+08:00  INFO --- [           main] c.a.a.a.start.config.PersistenceConfig   : PersistenceConfig#elasticsearchExperienceProvider - reason=creating Elasticsearch experience provider (PRIMARY), indexName=experiences
2026-01-22T12:00:14.396+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#<init> - reason=初始化默认评估套件配置, experienceProviderAvailable=true
2026-01-22T12:00:14.399+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#evaluatorRegistry - reason=创建 EvaluatorRegistry Bean
2026-01-22T12:00:14.402+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'llm-based' of type LLMBasedEvaluator
2026-01-22T12:00:14.406+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'passthrough' of type RuleBasedEvaluator
2026-01-22T12:00:14.415+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'react_experience_evaluator' of type RuleBasedEvaluator
2026-01-22T12:00:14.416+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createDefaultEvaluatorRegistry - reason=注册 React 阶段经验检索评估器
2026-01-22T12:00:14.416+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'codeact_experience_evaluator' of type RuleBasedEvaluator
2026-01-22T12:00:14.416+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createDefaultEvaluatorRegistry - reason=注册 CodeAct 阶段经验检索评估器
2026-01-22T12:00:14.417+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#evaluationService - reason=创建默认 EvaluationService, sharedRegistryEvaluators=[llm-based, passthrough, codeact_experience_evaluator, react_experience_evaluator]
2026-01-22T12:00:14.422+08:00 DEBUG --- [           main] c.a.a.a.e.e.GraphBasedEvaluationExecutor : Created default ExecutorService for batch processing
2026-01-22T12:00:14.424+08:00  INFO --- [           main] .c.ExperienceEvaluationCriterionProvider : ExperienceEvaluationCriterionProvider#<init> - reason=初始化经验评估 Criterion 提供者
2026-01-22T12:00:14.427+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#structuredParamExtractor - reason=creating structured param extractor
2026-01-22T12:00:14.449+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#parameterValidator - reason=creating parameter validator
2026-01-22T12:00:14.452+08:00  INFO --- [           main] f.a.AutowiredAnnotationBeanPostProcessor : Inconsistent constructor declaration on bean with name 'actionExecutorFactory': single autowire-marked constructor flagged as optional - this constructor is effectively required since there is no default constructor to fall back to: public com.alibaba.assistant.agent.planning.executor.ActionExecutorFactory(java.util.List,com.alibaba.assistant.agent.planning.permission.interceptor.PermissionInterceptor)
2026-01-22T12:00:14.455+08:00  INFO --- [           main] .a.a.a.p.c.ParamOptionsAutoConfiguration : ParamOptionsAutoConfiguration - Parameter options module initialized
2026-01-22T12:00:14.456+08:00  INFO --- [           main] .a.a.a.p.c.ParamOptionsAutoConfiguration : ParamOptionsAutoConfiguration - Creating RestTemplate for HTTP handlers
2026-01-22T12:00:14.463+08:00  INFO --- [           main] c.a.a.a.planning.executor.HttpExecutor   : HttpExecutor#init - initialized
2026-01-22T12:00:14.464+08:00  INFO --- [           main] c.a.a.a.p.executor.InternalExecutor      : InternalExecutor#init - initialized
2026-01-22T12:00:14.474+08:00  INFO --- [           main] c.a.a.a.p.p.a.PermissionAdapterRegistry  : PermissionAdapterRegistry#registerAdapter - registered adapter: system=gov-platform, name=政务服务平台权限适配器
2026-01-22T12:00:14.474+08:00  INFO --- [           main] c.a.a.a.p.p.a.PermissionAdapterRegistry  : PermissionAdapterRegistry#registerAdapter - registered adapter: system=oa-system, name=OA办公系统权限适配器
2026-01-22T12:00:14.474+08:00  INFO --- [           main] c.a.a.a.p.p.a.PermissionAdapterRegistry  : PermissionAdapterRegistry initialized with 2 adapters: [gov-platform, oa-system]
2026-01-22T12:00:14.481+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U001, system=oa-system, externalUser=zhang.san@company.com
2026-01-22T12:00:14.483+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U001, system=gov-platform, externalUser=320102199001011234
2026-01-22T12:00:14.483+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U002, system=oa-system, externalUser=li.si@company.com
2026-01-22T12:00:14.483+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U003, system=oa-system, externalUser=wang.wu@company.com
2026-01-22T12:00:14.483+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U003, system=gov-platform, externalUser=leader_001
2026-01-22T12:00:14.484+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U004, system=gov-platform, externalUser=staff_001
2026-01-22T12:00:14.484+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U005, system=oa-system, externalUser=sun.qi@company.com
2026-01-22T12:00:14.484+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService initialized with demo data
2026-01-22T12:00:14.486+08:00  INFO --- [           main] c.a.a.a.p.c.PermissionAutoConfiguration  : PermissionAutoConfiguration - creating PermissionInterceptor
2026-01-22T12:00:14.489+08:00  INFO --- [           main] c.a.a.a.p.e.ActionExecutorFactory        : ActionExecutorFactory#init - initialized executors: INTERNAL(InternalExecutor), HTTP(HttpExecutor), DATA_AGENT(DataAgentExecutor), MCP(McpExecutor)
2026-01-22T12:00:14.489+08:00  INFO --- [           main] c.a.a.a.p.e.ActionExecutorFactory        : ActionExecutorFactory#init - permission interceptor enabled
2026-01-22T12:00:14.490+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#sessionProvider - reason=creating in-memory session provider
2026-01-22T12:00:14.492+08:00  INFO --- [           main] c.a.a.a.p.s.InMemorySessionProvider      : InMemorySessionProvider#init - initialized
2026-01-22T12:00:14.497+08:00  INFO --- [           main] c.a.a.a.p.s.ParamCollectionService       : ParamCollectionService#init - sessionProvider=InMemory
2026-01-22T12:00:14.504+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'action_intent_evaluator' of type ActionIntentEvaluator
2026-01-22T12:00:14.504+08:00  INFO --- [           main] p.i.PlanningIntegrationAutoConfiguration : PlanningIntegrationAutoConfiguration#actionIntentEvaluator - initialized and registered, paramCollection=true, llmVerification=true, maxCandidates=5
2026-01-22T12:00:14.505+08:00  INFO --- [           main] .p.i.PlanningEvaluationCriterionProvider : PlanningEvaluationCriterionProvider#init - initialized, llmVerificationEnabled=true
2026-01-22T12:00:14.505+08:00  INFO --- [           main] p.i.PlanningIntegrationAutoConfiguration : PlanningIntegrationAutoConfiguration#planningEvaluationCriterionProvider - registered planning evaluation criterion provider
2026-01-22T12:00:14.506+08:00  INFO --- [           main] .c.ExperienceEvaluationCriterionProvider : ExperienceEvaluationCriterionProvider#getReactPhaseCriteria - reason=提供 React 阶段评估 Criteria
2026-01-22T12:00:14.513+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createReactPhaseSuite - reason=添加自定义 Criterion, provider=ExperienceEvaluationCriterionProvider, count=3
2026-01-22T12:00:14.516+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createReactPhaseSuite - reason=添加自定义 Criterion, provider=PlanningEvaluationCriterionProvider, count=2
2026-01-22T12:00:14.523+08:00  INFO --- [           main] a.a.e.a.BatchAggregationStrategyRegistry : Registered batch aggregation strategy: ANY_TRUE
2026-01-22T12:00:14.525+08:00  INFO --- [           main] a.a.e.a.BatchAggregationStrategyRegistry : Registered batch aggregation strategy: ALL_TRUE
2026-01-22T12:00:14.701+08:00  INFO --- [           main] c.a.c.a.g.internal.node.ParallelNode     : Calculated core pool size: 32 (CPU cores: 16)
2026-01-22T12:00:14.701+08:00  INFO --- [           main] c.a.c.a.g.internal.node.ParallelNode     : Calculated maximum pool size: 64 (CPU cores: 16)
2026-01-22T12:00:14.701+08:00  INFO --- [           main] c.a.c.a.g.internal.node.ParallelNode     : Calculated queue capacity: 1000
2026-01-22T12:00:14.706+08:00  INFO --- [           main] c.a.a.a.e.DefaultEvaluationService       : Registered evaluation suite: react-phase-suite
2026-01-22T12:00:14.706+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#evaluationService - reason=注册 React Phase Suite, suiteId=react-phase-suite
2026-01-22T12:00:14.706+08:00  INFO --- [           main] .c.ExperienceEvaluationCriterionProvider : ExperienceEvaluationCriterionProvider#getCodeActPhaseCriteria - reason=提供 CodeAct 阶段评估 Criteria
2026-01-22T12:00:14.707+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createCodeActPhaseSuite - reason=添加自定义 Criterion, provider=ExperienceEvaluationCriterionProvider, count=3
2026-01-22T12:00:14.707+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createCodeActPhaseSuite - reason=添加自定义 Criterion, provider=PlanningEvaluationCriterionProvider, count=2
2026-01-22T12:00:14.707+08:00  INFO --- [           main] a.a.e.a.BatchAggregationStrategyRegistry : Registered batch aggregation strategy: ANY_TRUE
2026-01-22T12:00:14.707+08:00  INFO --- [           main] a.a.e.a.BatchAggregationStrategyRegistry : Registered batch aggregation strategy: ALL_TRUE
2026-01-22T12:00:14.708+08:00  INFO --- [           main] c.a.a.a.e.DefaultEvaluationService       : Registered evaluation suite: codeact-phase-suite
2026-01-22T12:00:14.708+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#evaluationService - reason=注册 CodeAct Phase Suite, suiteId=codeact-phase-suite
2026-01-22T12:00:14.710+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#codeactEvaluationContextFactory - reason=创建 EvaluationContextFactory
2026-01-22T12:00:14.711+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#codeactEvaluationResultAttacher - reason=创建 EvaluationResultAttacher
2026-01-22T12:00:14.718+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#reactPhaseEvaluationHooks - reason=创建 React Phase ModelInputEvaluationHook
2026-01-22T12:00:14.724+08:00  INFO --- [           main] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#<init> - reason=初始化, phase=REACT, providerCount=1
2026-01-22T12:00:14.724+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#reactPhaseEvaluationHooks - reason=创建 React Phase EvaluationPromptInjectionHook, providersCount=2
2026-01-22T12:00:14.726+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#codeactPhaseEvaluationHooks - reason=创建 CodeAct Phase ModelInputEvaluationHook
2026-01-22T12:00:14.726+08:00  INFO --- [           main] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#<init> - reason=初始化, phase=CODEACT, providerCount=1
2026-01-22T12:00:14.726+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#codeactPhaseEvaluationHooks - reason=创建 CodeAct Phase EvaluationPromptInjectionHook, providersCount=2
2026-01-22T12:00:14.730+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#keywordMatcher - reason=creating keyword matcher
2026-01-22T12:00:14.734+08:00  INFO --- [           main] .ParamCollectionSessionAutoConfiguration : ParamCollectionSessionAutoConfiguration#inMemoryParamCollectionSessionStore - reason=creating in-memory session store (Redis not available), ttl=PT30M
2026-01-22T12:00:14.734+08:00  WARN --- [           main] .ParamCollectionSessionAutoConfiguration : ParamCollectionSessionAutoConfiguration#inMemoryParamCollectionSessionStore - reason=WARNING: In-memory session store is not suitable for distributed environment!
2026-01-22T12:00:14.744+08:00  INFO --- [           main] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#<init> - reason=initialized, defaultTtl=PT30M
2026-01-22T12:00:14.744+08:00  WARN --- [           main] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#<init> - reason=WARNING: Using in-memory session store, not suitable for distributed environment!
2026-01-22T12:00:14.757+08:00  INFO --- [           main] iguration$UnifiedIntentHookConfiguration : UnifiedIntentHookConfiguration#unifiedIntentRecognitionHook - reason=creating unified intent hook, experienceProviderPresent=true, chatModelPresent=true, sessionStorePresent=true, directExecuteThreshold=0.95, hintThreshold=0.5
2026-01-22T12:00:15.098+08:00  INFO --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2026-01-22T12:00:15.702+08:00  INFO --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@4db45d
2026-01-22T12:00:15.715+08:00  INFO --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2026-01-22T12:00:16.080+08:00  WARN --- [           main] c.a.a.a.p.p.c.ActionEntityConverter      : ActionEntityConverter#parseActionType - reason=unknown action type, type=INTERNAL
2026-01-22T12:00:16.142+08:00 DEBUG --- [           main] c.a.a.a.planning.intent.KeywordMatcher   : KeywordMatcher#registerAction - actionId=oa:leave:request, keywords=57
2026-01-22T12:00:16.143+08:00  INFO --- [           main] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#initKeywordMatcher - reason=initialized, actionCount=1, keywordIndexSize=57
2026-01-22T12:00:16.148+08:00  INFO --- [           main] c.a.a.a.start.config.PersistenceConfig   : PersistenceConfig#elasticsearchExperienceRepository - reason=creating Elasticsearch experience repository (PRIMARY), indexName=experiences
2026-01-22T12:00:16.161+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#init - reason=reply module enabled
2026-01-22T12:00:16.164+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactToolFactory - reason=创建CodeactTool工厂, channels=1
2026-01-22T12:00:16.164+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#init - reason=工厂初始化完成, channels=1
2026-01-22T12:00:16.180+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=开始创建Reply工具
2026-01-22T12:00:16.193+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#createTools - reason=创建工具成功, toolName=send_success_message, channelCode=IDE_TEXT
2026-01-22T12:00:16.193+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#createTools - reason=创建工具成功, toolName=send_error_message, channelCode=IDE_TEXT
2026-01-22T12:00:16.194+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#createTools - reason=创建工具成功, toolName=send_notification, channelCode=IDE_TEXT
2026-01-22T12:00:16.194+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#createTools - reason=工具创建完成, totalCount=3
2026-01-22T12:00:16.194+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=Reply工具创建完成, count=3
2026-01-22T12:00:16.194+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=创建Reply工具, index=1, name=send_success_message, description=Send a success message to the IDE console
2026-01-22T12:00:16.195+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=创建Reply工具, index=2, name=send_error_message, description=Send an error message to the IDE console
2026-01-22T12:00:16.195+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=创建Reply工具, index=3, name=send_notification, description=Send a notification message
2026-01-22T12:00:16.197+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactToolFactory - reason=创建SearchCodeactTool工厂, providerCount=3
2026-01-22T12:00:16.233+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactToolFactory - reason=创建TriggerCodeactTool工厂
2026-01-22T12:00:16.233+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=开始创建Trigger工具
2026-01-22T12:00:16.236+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=创建SubscribeTriggerCodeactTool成功
2026-01-22T12:00:16.238+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=创建UnsubscribeTriggerCodeactTool成功
2026-01-22T12:00:16.240+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=创建ListTriggersCodeactTool成功
2026-01-22T12:00:16.242+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=创建GetTriggerDetailCodeactTool成功
2026-01-22T12:00:16.242+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=触发器工具创建完成, count=4
2026-01-22T12:00:16.242+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=Trigger工具创建完成, count=4
2026-01-22T12:00:16.243+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=创建Trigger工具, index=1, name=subscribe_trigger, description=创建并订阅一个新的触发器
2026-01-22T12:00:16.243+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=创建Trigger工具, index=2, name=unsubscribe_trigger, description=取消订阅并删除一个触发器
2026-01-22T12:00:16.243+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=创建Trigger工具, index=3, name=list_triggers, description=列出所有触发器
2026-01-22T12:00:16.243+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=创建Trigger工具, index=4, name=get_trigger_detail, description=获取指定触发器的详细信息
2026-01-22T12:00:16.254+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#planningCodeactTools - reason=creating planning tools list
2026-01-22T12:00:16.254+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#planningCodeactTools - reason=created planning tools, count=5
2026-01-22T12:00:16.267+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=创建 CodeactAgent
2026-01-22T12:00:16.267+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=配置 MemorySaver 以支持多轮对话上下文保持
2026-01-22T12:00:16.267+08:00  WARN --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=临时禁用 streaming 模式以排查循环问题
2026-01-22T12:00:16.267+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加UnifiedSearchCodeactTool
2026-01-22T12:00:16.272+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockBaiduWebSearchProvider, toolName=search_web
2026-01-22T12:00:16.274+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockKnowledgeStoreSearchProvider, toolName=search_knowledge
2026-01-22T12:00:16.275+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockProjectContextSearchProvider, toolName=search_project
2026-01-22T12:00:16.275+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=搜索工具创建完成, totalCount=3
2026-01-22T12:00:16.275+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加SearchCodeactTools, count=3
2026-01-22T12:00:16.275+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加ReplyCodeactTools, count=3
2026-01-22T12:00:16.275+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加TriggerCodeactTools, count=4
2026-01-22T12:00:16.275+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加PlanningCodeactTools, count=5
2026-01-22T12:00:16.275+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#createMcpDynamicTools - reason=Creating MCP dynamic tools
2026-01-22T12:00:16.282+08:00  INFO --- [           main] c.a.a.a.e.d.mcp.McpDynamicToolFactory    : McpDynamicToolFactory#createTools - reason=开始创建MCP动态工具
2026-01-22T12:00:16.287+08:00  INFO --- [           main] c.a.a.a.e.d.mcp.McpDynamicToolFactory    : McpDynamicToolFactory#createTools - reason=无可用的MCP工具
2026-01-22T12:00:16.288+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#createMcpDynamicTools - reason=MCP dynamic tools created, count=0
2026-01-22T12:00:16.288+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=Added MCP dynamic tools, count=0
2026-01-22T12:00:16.288+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#createHttpDynamicTools - reason=HTTP dynamic tools disabled by default
2026-01-22T12:00:16.289+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=合并后CodeactTool总数, count=16
2026-01-22T12:00:16.289+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=React阶段使用内置工具(write_code, execute_code, write_condition_code)
2026-01-22T12:00:16.289+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=注入 React Phase 评估 Hooks, count=2
2026-01-22T12:00:16.289+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=注入 CodeAct Phase 评估 Hooks, count=2
2026-01-22T12:00:16.289+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=已准备注入UnifiedIntentRecognitionHook
2026-01-22T12:00:16.293+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 开始构建CodeactAgent
2026-01-22T12:00:16.297+08:00  INFO --- [           main] .a.a.a.c.t.s.DefaultReturnSchemaRegistry : DefaultReturnSchemaRegistry#<init> - reason=创建新实例, hashCode=2076427679
2026-01-22T12:00:16.300+08:00 DEBUG --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#<init> - reason=创建注册表, returnSchemaRegistry=DefaultReturnSchemaRegistry
2026-01-22T12:00:16.300+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=创建默认CodeactToolRegistry
2026-01-22T12:00:16.300+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=开始注册CodeactTool, count=16
2026-01-22T12:00:16.300+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=unified_search
2026-01-22T12:00:16.300+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=unified_search
2026-01-22T12:00:16.300+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=search_web
2026-01-22T12:00:16.300+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=search_web
2026-01-22T12:00:16.300+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=search_knowledge
2026-01-22T12:00:16.300+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=search_knowledge
2026-01-22T12:00:16.300+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=search_project
2026-01-22T12:00:16.300+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=search_project
2026-01-22T12:00:16.300+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=send_success_message
2026-01-22T12:00:16.300+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=send_success_message
2026-01-22T12:00:16.300+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=send_error_message
2026-01-22T12:00:16.300+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=send_error_message
2026-01-22T12:00:16.300+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=send_notification
2026-01-22T12:00:16.301+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=send_notification
2026-01-22T12:00:16.301+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=subscribe_trigger
2026-01-22T12:00:16.301+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=subscribe_trigger
2026-01-22T12:00:16.301+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=unsubscribe_trigger
2026-01-22T12:00:16.301+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=unsubscribe_trigger
2026-01-22T12:00:16.301+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=list_triggers
2026-01-22T12:00:16.301+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=list_triggers
2026-01-22T12:00:16.301+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=get_trigger_detail
2026-01-22T12:00:16.301+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=get_trigger_detail
2026-01-22T12:00:16.306+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=plan_action
2026-01-22T12:00:16.306+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=plan_action
2026-01-22T12:00:16.307+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=execute_action
2026-01-22T12:00:16.307+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=execute_action
2026-01-22T12:00:16.308+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=list_actions
2026-01-22T12:00:16.308+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=list_actions
2026-01-22T12:00:16.309+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=get_action_details
2026-01-22T12:00:16.309+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=get_action_details
2026-01-22T12:00:16.310+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=execute_system_action
2026-01-22T12:00:16.310+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=execute_system_action
2026-01-22T12:00:16.310+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册完成, count=16
2026-01-22T12:00:16.311+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 创建默认CodeContext: language=PYTHON
2026-01-22T12:00:16.317+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 创建默认RuntimeEnvironmentManager: language=PYTHON
2026-01-22T12:00:16.322+08:00 DEBUG --- [           main] c.a.a.a.c.e.bridge.AgentToolBridge       : AgentToolBridge#<init> 初始化: 注册了0个工具
2026-01-22T12:00:16.324+08:00 DEBUG --- [           main] c.a.a.a.c.executor.bridge.StateBridge    : StateBridge#<init> 初始化完成
2026-01-22T12:00:16.326+08:00  INFO --- [           main] c.a.a.a.core.executor.GraalCodeExecutor  : GraalCodeExecutor#<init> 初始化完成: language=PYTHON, allowIO=false, timeout=30000ms, executableTools=true, customBridgeFactory=false
2026-01-22T12:00:16.326+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#createCodeactSubAgentInterceptor 创建子Agent拦截器
2026-01-22T12:00:16.340+08:00  INFO --- [           main] c.a.a.a.a.subagent.CodeactSubAgent       : CodeactSubAgent#<init> 初始化: name=code-generator
2026-01-22T12:00:16.340+08:00  INFO --- [           main] c.a.a.a.a.subagent.CodeactSubAgent       : CodeactSubAgent#<init> 初始化: name=condition-code-generator
2026-01-22T12:00:16.340+08:00  INFO --- [           main] c.a.a.a.a.s.CodeactSubAgentInterceptor   : CodeactSubAgentInterceptor#<init> 创建默认代码生成子Agent
2026-01-22T12:00:16.920+08:00  INFO --- [           main] c.a.a.a.a.s.CodeactSubAgentInterceptor   : CodeactSubAgentInterceptor#<init> 初始化完成: subAgentCount=2
2026-01-22T12:00:16.923+08:00  INFO --- [           main] c.a.a.a.a.tools.ExecuteCodeTool          : ExecuteCodeTool#<init> 初始化完成
2026-01-22T12:00:16.928+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 拦截器分类完成: modelInterceptors=1, toolInterceptors=0
2026-01-22T12:00:16.928+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 从拦截器提取工具: interceptor=CodeactSubAgent, toolCount=2
2026-01-22T12:00:16.959+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 工具收集完成: interceptorTools=2, regularTools=3, total=6
2026-01-22T12:00:16.965+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 设置ModelInterceptors到LlmNode: count=1
2026-01-22T12:00:16.968+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build CodeactAgent构建完成
2026-01-22T12:00:16.969+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=开始罗列已注册的工具
2026-01-22T12:00:16.969+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct阶段工具数量, count=16
2026-01-22T12:00:16.969+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=1, name=send_success_message, description=Send a success message to the IDE console
2026-01-22T12:00:16.969+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=2, name=get_trigger_detail, description=获取指定触发器的详细信息
2026-01-22T12:00:16.969+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=3, name=get_action_details, description=获取指定动作的完整定义，包括参数、步骤等详细信息。
2026-01-22T12:00:16.969+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=4, name=search_project, description=搜索项目上下文信息，包括代码、配置、文档等
2026-01-22T12:00:16.969+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=5, name=subscribe_trigger, description=创建并订阅一个新的触发器
2026-01-22T12:00:16.969+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=6, name=search_knowledge, description=搜索团队知识库，包括FAQ、规范、最佳实践等
2026-01-22T12:00:16.969+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=7, name=unified_search, description=统一搜索工具，可同时搜索项目、知识库、Web等多个数据源
2026-01-22T12:00:16.969+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=8, name=unsubscribe_trigger, description=取消订阅并删除一个触发器
2026-01-22T12:00:16.969+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=9, name=search_web, description=执行Web搜索，获取公开互联网信息
2026-01-22T12:00:16.969+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=10, name=list_actions, description=列出所有可用的动作，支持按分类和标签筛选。
2026-01-22T12:00:16.969+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=11, name=plan_action, description=根据用户输入匹配动作并生成执行计划。返回匹配的动作列表和生成的执行计划。
2026-01-22T12:00:16.969+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=12, name=execute_system_action, description=执行系统Action（如OA请假、ERP操作等）。根据action_id调用相应的系统Handler。
2026-01-22T12:00:16.969+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=13, name=send_error_message, description=Send an error message to the IDE console
2026-01-22T12:00:16.969+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=14, name=execute_action, description=执行指定的执行计划，返回执行结果。支持继续执行等待用户输入的计划。
2026-01-22T12:00:16.969+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=15, name=send_notification, description=Send a notification message
2026-01-22T12:00:16.969+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=16, name=list_triggers, description=列出所有触发器
2026-01-22T12:00:16.969+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React阶段工具数量, count=6
2026-01-22T12:00:16.969+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=1, name=write_code, description=Generate and register a new function with specified name and parameters. IMPORTANT: You MUST provide both 'functionName' and 'parameters' fields. Example: write_code(requirement='calculate sum', functionName='calculate_sum', parameters=['a', 'b'])
2026-01-22T12:00:16.969+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=2, name=write_condition_code, description=Generate and register a condition check function for triggers. This function MUST return a boolean value (True/False). Example: write_condition_code(requirement='check if it is a working day', functionName='check_is_working_day', parameters=['date'])
2026-01-22T12:00:16.969+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=3, name=send_success_message, description=Send a success message to the IDE console
2026-01-22T12:00:16.970+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=4, name=send_error_message, description=Send an error message to the IDE console
2026-01-22T12:00:16.970+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=5, name=send_notification, description=Send a notification message
2026-01-22T12:00:16.970+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=6, name=execute_code, description=Execute a previously generated function by its exact name with matching parameters. CRITICAL: The functionName MUST exactly match the name used in write_code. The 'args' parameter names MUST exactly match the 'parameters' specified in write_code. Example: If you called write_code with functionName='calculate_sum' and parameters=['a', 'b'], then you must call execute_code with functionName='calculate_sum' and args={'a': 10, 'b': 20}. Parameter value types supported: String, Number, Boolean, List, Map/Object.
2026-01-22T12:00:16.970+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=工具罗列完成
2026-01-22T12:00:16.973+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgent#<init> 初始化完成: language=PYTHON
2026-01-22T12:00:16.978+08:00  INFO --- [           main] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#<init> 初始化 Agent 加载器
2026-01-22T12:00:17.028+08:00 DEBUG --- [           main] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#<init> Agent 图结构:
@startuml CodeactAgent
skinparam usecaseFontSize 14
skinparam usecaseStereotypeFontSize 12
skinparam hexagonFontSize 14
skinparam hexagonStereotypeFontSize 12
title "CodeactAgent"
footer

powered by spring-ai-alibaba
end footer
circle start<<input>> as __START__
circle stop as __END__
usecase "_AGENT_MODEL_"<<Node>>
usecase "_AGENT_TOOL_"<<Node>>
usecase "_AGENT_HOOK_UnifiedIntentRecognitionHook.before"<<Node>>
usecase "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"<<Node>>
usecase "_AGENT_HOOK_EvaluationPromptInjectionHook-REACT.beforeModel"<<Node>>
hexagon "check state" as condition1<<Condition>>
hexagon "check state" as condition2<<Condition>>
hexagon "check state" as condition3<<Condition>>
"__START__" -down-> "_AGENT_HOOK_UnifiedIntentRecognitionHook.before"
"_AGENT_HOOK_UnifiedIntentRecognitionHook.before" .down.> "condition1"
"condition1" .down.> "__END__"
'"_AGENT_HOOK_UnifiedIntentRecognitionHook.before" .down.> "__END__"
"condition1" .down.> "_AGENT_TOOL_"
'"_AGENT_HOOK_UnifiedIntentRecognitionHook.before" .down.> "_AGENT_TOOL_"
"condition1" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
'"_AGENT_HOOK_UnifiedIntentRecognitionHook.before" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
"_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel" -down-> "_AGENT_HOOK_EvaluationPromptInjectionHook-REACT.beforeModel"
"_AGENT_HOOK_EvaluationPromptInjectionHook-REACT.beforeModel" -down-> "_AGENT_MODEL_"
"_AGENT_MODEL_" .down.> "condition2"
"condition2" .down.> "__END__"
'"_AGENT_MODEL_" .down.> "__END__"
"condition2" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
'"_AGENT_MODEL_" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
"condition2" .down.> "_AGENT_TOOL_"
'"_AGENT_MODEL_" .down.> "_AGENT_TOOL_"
"_AGENT_TOOL_" .down.> "condition3"
"condition3" .down.> "__END__"
'"_AGENT_TOOL_" .down.> "__END__"
"condition3" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
'"_AGENT_TOOL_" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
@enduml

2026-01-22T12:00:17.029+08:00  INFO --- [           main] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#<init> 已注册 agent: grayscale_agent
2026-01-22T12:00:17.039+08:00  INFO --- [           main] .a.a.a.p.c.ParamOptionsAutoConfiguration : ParamOptionsAutoConfiguration - Creating OptionsCache with TTL: 300000ms
2026-01-22T12:00:17.043+08:00  INFO --- [           main] a.a.a.p.s.DefaultParameterOptionsService : DefaultParameterOptionsService initialized with 3 handlers
2026-01-22T12:00:17.045+08:00  INFO --- [           main] c.a.a.a.planning.system.OaSystemHandler  : OaSystemHandler#init - initialized
2026-01-22T12:00:17.063+08:00 DEBUG --- [           main] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#listAgents 列出所有 agent
2026-01-22T12:00:17.064+08:00  INFO --- [           main] c.a.c.a.a.s.controller.AgentController   : AgentController initialized with 1 dynamic agents: [grayscale_agent]
2026-01-22T12:00:17.212+08:00  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 22898ecd-3bf1-4a9a-812a-6bf46e7912bc

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2026-01-22T12:00:17.274+08:00  INFO --- [           main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2026-01-22T12:00:18.070+08:00  INFO --- [           main] e.e.c.CodeactEvaluationAutoConfiguration : CodeactEvaluationAutoConfiguration#inputRoutingEvaluationHook - reason=创建输入路由评估 Hook
2026-01-22T12:00:18.072+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchFacade - reason=creating search facade with 3 providers
2026-01-22T12:00:18.074+08:00  INFO --- [           main] c.a.a.a.e.s.i.DefaultSearchFacade        : DefaultSearchFacade#init - reason=initialized with 3 providers
2026-01-22T12:00:18.075+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=开始创建Search工具
2026-01-22T12:00:18.076+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockBaiduWebSearchProvider, toolName=search_web
2026-01-22T12:00:18.077+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockKnowledgeStoreSearchProvider, toolName=search_knowledge
2026-01-22T12:00:18.078+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockProjectContextSearchProvider, toolName=search_project
2026-01-22T12:00:18.078+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=搜索工具创建完成, totalCount=3
2026-01-22T12:00:18.078+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=Search工具创建完成, count=3
2026-01-22T12:00:18.078+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=创建Search工具, index=1, name=search_web, description=执行Web搜索，获取公开互联网信息
2026-01-22T12:00:18.078+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=创建Search工具, index=2, name=search_knowledge, description=搜索团队知识库，包括FAQ、规范、最佳实践等
2026-01-22T12:00:18.078+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=创建Search工具, index=3, name=search_project, description=搜索项目上下文信息，包括代码、配置、文档等
2026-01-22T12:00:18.080+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#diagnostics - reason=ElasticsearchClient bean found
2026-01-22T12:00:18.081+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#diagnostics - reason=EmbeddingModel bean found
2026-01-22T12:00:18.087+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#diagnostics - Planning module status:
2026-01-22T12:00:18.087+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration :   - ActionRepository: MybatisPlusActionRepository
2026-01-22T12:00:18.087+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration :   - ActionProvider: SemanticActionProvider
2026-01-22T12:00:18.087+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration :   - PlanGenerator: DefaultPlanGenerator
2026-01-22T12:00:18.087+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration :   - PlanExecutor: DefaultPlanExecutor
2026-01-22T12:00:18.366+08:00  INFO --- [           main] c.a.a.a.c.c.CodeactCoreAutoConfiguration : CodeactCoreAutoConfiguration#returnSchemaRegistry - reason=创建ReturnSchemaRegistry单例Bean
2026-01-22T12:00:18.366+08:00  INFO --- [           main] .a.a.a.c.t.s.DefaultReturnSchemaRegistry : DefaultReturnSchemaRegistry#<init> - reason=创建新实例, hashCode=1585430546
2026-01-22T12:00:19.405+08:00  WARN --- [           main] o.s.m.p.s.SyncMcpSamplingProvider        : No sampling methods found
2026-01-22T12:00:19.412+08:00  WARN --- [           main] o.s.m.p.e.SyncMcpElicitationProvider     : No elicitation methods found
2026-01-22T12:00:19.495+08:00  INFO --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2026-01-22T12:00:19.509+08:00  INFO --- [           main] c.a.a.a.start.AssistantAgentApplication  : Started AssistantAgentApplication in 16.051 seconds (process running for 19.01)
2026-01-22T12:00:19.524+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#run - reason=Starting experience module validation
2026-01-22T12:00:19.687+08:00 DEBUG --- [           main] .p.e.r.ElasticsearchExperienceRepository : ElasticsearchExperienceRepository#count - reason=count completed, count=0
2026-01-22T12:00:19.739+08:00 DEBUG --- [           main] .p.e.r.ElasticsearchExperienceRepository : ElasticsearchExperienceRepository#countByTypeAndScope - reason=count completed, type=CODE, scope=null, count=0
2026-01-22T12:00:19.749+08:00 DEBUG --- [           main] .p.e.r.ElasticsearchExperienceRepository : ElasticsearchExperienceRepository#countByTypeAndScope - reason=count completed, type=REACT, scope=null, count=0
2026-01-22T12:00:19.759+08:00 DEBUG --- [           main] .p.e.r.ElasticsearchExperienceRepository : ElasticsearchExperienceRepository#countByTypeAndScope - reason=count completed, type=COMMON, scope=null, count=0
2026-01-22T12:00:19.759+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testExperienceCount - reason=Experience stats: total=0, code=0, react=0, common=0
2026-01-22T12:00:19.759+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCommonExperienceQuery - reason=Testing common experience query
2026-01-22T12:00:20.323+08:00 DEBUG --- [           main] .s.p.e.p.ElasticsearchExperienceProvider : ElasticsearchExperienceProvider#query - reason=query completed, type=COMMON, text=null, count=0
2026-01-22T12:00:20.324+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCommonExperienceQuery - reason=Found 0 common experiences
2026-01-22T12:00:20.325+08:00  WARN --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCommonExperienceQuery - reason=❌ MoLiHong identity experience not found
2026-01-22T12:00:20.325+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCodeExperienceQuery - reason=Testing code experience query (demo keyword)
2026-01-22T12:00:20.343+08:00 DEBUG --- [           main] .s.p.e.p.ElasticsearchExperienceProvider : ElasticsearchExperienceProvider#query - reason=query completed, type=CODE, text=null, count=0
2026-01-22T12:00:20.344+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCodeExperienceQuery - reason=Found 0 demo code experiences
2026-01-22T12:00:20.345+08:00  WARN --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCodeExperienceQuery - reason=❌ Demo code experience not found
2026-01-22T12:00:20.345+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testReactExperienceQuery - reason=Testing react experience query
2026-01-22T12:00:20.358+08:00 DEBUG --- [           main] .s.p.e.p.ElasticsearchExperienceProvider : ElasticsearchExperienceProvider#query - reason=query completed, type=REACT, text=null, count=0
2026-01-22T12:00:20.358+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testReactExperienceQuery - reason=Found 0 react experiences
2026-01-22T12:00:20.359+08:00  WARN --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testReactExperienceQuery - reason=❌ Ambiguous intent strategy not found
2026-01-22T12:00:20.360+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#run - reason=Experience module validation completed
2026-01-22T12:00:20.362+08:00  INFO --- [           main] c.a.a.a.s.a.config.AuthInitialization    : AuthInitialization#run - 初始化认证系统
2026-01-22T12:00:20.395+08:00 DEBUG --- [           main] c.a.a.a.s.a.s.AuthenticationService      : AuthenticationService#initDefaultAdmin - 管理员账户已存在
2026-01-22T12:00:20.395+08:00  INFO --- [           main] c.a.a.a.s.a.config.AuthInitialization    : AuthInitialization#run - 认证系统初始化完成
2026-01-22T12:51:45.684+08:00  INFO --- [r-shutdown-hook] c.a.c.a.g.internal.node.ParallelNode     : Shutting down ParallelNode default executor
2026-01-22T12:51:45.684+08:00  INFO --- [r-shutdown-hook] c.a.c.a.g.internal.node.ParallelNode     : ParallelNode default thread pool terminated
2026-01-22T12:51:45.684+08:00  INFO --- [r-shutdown-hook] c.a.c.a.g.internal.node.ParallelNode     : ParallelNode default executor shut down successfully
2026-01-22T12:51:45.688+08:00  INFO --- [ionShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2026-01-22T12:51:45.700+08:00  INFO --- [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2026-01-22T12:51:45.710+08:00  INFO --- [ionShutdownHook] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#shutdown - reason=shutdown completed
2026-01-22T12:51:45.711+08:00  INFO --- [ionShutdownHook] c.a.a.a.e.e.GraphBasedEvaluationExecutor : Shutting down ExecutorService
2026-01-22T12:51:45.714+08:00  INFO --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2026-01-22T12:51:45.723+08:00  INFO --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2026-01-22T12:51:54.065+08:00  INFO --- [           main] c.a.a.a.start.AssistantAgentApplication  : Starting AssistantAgentApplication using Java 21.0.9 with PID 14512 (D:\devfive\AssistantAgent\assistant-agent-start\target\classes started by zhou_ in D:\devfive\AssistantAgent)
2026-01-22T12:51:54.068+08:00 DEBUG --- [           main] c.a.a.a.start.AssistantAgentApplication  : Running with Spring Boot v3.4.8, Spring v6.2.9
2026-01-22T12:51:54.070+08:00  INFO --- [           main] c.a.a.a.start.AssistantAgentApplication  : No active profile set, falling back to 1 default profile: "default"
2026-01-22T12:51:56.976+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Elasticsearch repositories in DEFAULT mode.
2026-01-22T12:51:57.029+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 37 ms. Found 0 Elasticsearch repository interfaces.
2026-01-22T12:51:57.040+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Reactive Elasticsearch repositories in DEFAULT mode.
2026-01-22T12:51:57.053+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 9 ms. Found 0 Reactive Elasticsearch repository interfaces.
2026-01-22T12:51:57.324+08:00  WARN --- [           main] o.m.s.mapper.ClassPathMapperScanner      : Skipping MapperFactoryBean with name 'learningRecordMapper' and 'com.alibaba.assistant.agent.start.persistence.learning.mapper.LearningRecordMapper' mapperInterface. Bean already defined with the same name!
2026-01-22T12:51:57.325+08:00  WARN --- [           main] o.m.s.mapper.ClassPathMapperScanner      : Skipping MapperFactoryBean with name 'triggerDefinitionMapper' and 'com.alibaba.assistant.agent.start.persistence.trigger.mapper.TriggerDefinitionMapper' mapperInterface. Bean already defined with the same name!
2026-01-22T12:51:57.326+08:00  WARN --- [           main] o.m.s.mapper.ClassPathMapperScanner      : Skipping MapperFactoryBean with name 'triggerExecutionRecordMapper' and 'com.alibaba.assistant.agent.start.persistence.trigger.mapper.TriggerExecutionRecordMapper' mapperInterface. Bean already defined with the same name!
2026-01-22T12:51:57.329+08:00  WARN --- [           main] o.m.s.mapper.ClassPathMapperScanner      : Skipping MapperFactoryBean with name 'actionRegistryMapper' and 'com.alibaba.assistant.agent.planning.persistence.mapper.ActionRegistryMapper' mapperInterface. Bean already defined with the same name!
2026-01-22T12:52:01.468+08:00  INFO --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2026-01-22T12:52:01.528+08:00  INFO --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2026-01-22T12:52:01.528+08:00  INFO --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.43]
2026-01-22T12:52:01.732+08:00  INFO --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2026-01-22T12:52:01.732+08:00  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 7523 ms
2026-01-22T12:52:01.812+08:00  INFO --- [           main] c.a.a.a.s.a.security.JwtTokenProvider    : JwtTokenProvider#init - JWT 密钥已初始化
2026-01-22T12:52:01.981+08:00 DEBUG --- [           main] c.a.a.a.s.a.s.JwtAuthenticationFilter    : Filter 'jwtAuthenticationFilter' configured for use
2026-01-22T12:52:03.187+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#init - reason=search extension framework is enabled
2026-01-22T12:52:03.189+08:00  INFO --- [           main] c.a.a.a.s.s.MockBaiduWebSearchProvider   : MockBaiduWebSearchProvider#init - reason=使用简单模式初始化
2026-01-22T12:52:03.192+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#unifiedSearchCodeactTool - reason=创建统一搜索工具, providerCount=3
2026-01-22T12:52:03.427+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#init - reason=planning extension is enabled
2026-01-22T12:52:03.431+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#init - reason=ES configuration class loaded (elasticsearch.enabled=true)
2026-01-22T12:52:03.432+08:00  INFO --- [           main] toConfiguration$MybatisPlusConfiguration : MybatisPlusConfiguration#init - reason=MySQL configuration class loaded (mysql.enabled=true, MyBatisPlus present)
2026-01-22T12:52:03.499+08:00  INFO --- [           main] toConfiguration$MybatisPlusConfiguration : MybatisPlusConfiguration#actionEntityConverter - reason=creating entity converter
2026-01-22T12:52:03.509+08:00  INFO --- [           main] toConfiguration$MybatisPlusConfiguration : MybatisPlusConfiguration#mybatisPlusActionRepository - reason=ActionRegistryMapper found, creating MySQL repository
2026-01-22T12:52:06.242+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#actionVectorizationService - reason=creating ES vectorization service
2026-01-22T12:52:06.645+08:00  INFO --- [           main] c.a.a.a.p.v.ActionVectorizationService   : ActionVectorizationService#init - reason=ES index initialized on startup
2026-01-22T12:52:06.695+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#semanticActionProvider - reason=creating semantic action provider, semanticWeight=0.6, keywordWeight=0.4, matchThreshold=0.5
2026-01-22T12:52:06.706+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#defaultPlanGenerator - reason=creating default plan generator
2026-01-22T12:52:06.711+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#planActionCodeactTool - reason=creating plan_action tool
2026-01-22T12:52:06.717+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#queryStepExecutor - reason=creating query step executor
2026-01-22T12:52:06.722+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#inputStepExecutor - reason=creating input step executor
2026-01-22T12:52:06.726+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#executeStepExecutor - reason=creating execute step executor
2026-01-22T12:52:06.730+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#apiCallStepExecutor - reason=creating api call step executor
2026-01-22T12:52:06.766+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#validationStepExecutor - reason=creating validation step executor
2026-01-22T12:52:06.770+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#stepExecutorRegistry - reason=creating executor registry, executorCount=5
2026-01-22T12:52:06.775+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=QUERY, executorClass=QueryStepExecutor
2026-01-22T12:52:06.776+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=INPUT, executorClass=InputStepExecutor
2026-01-22T12:52:06.776+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=EXECUTE, executorClass=ExecuteStepExecutor
2026-01-22T12:52:06.776+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=API_CALL, executorClass=ApiCallStepExecutor
2026-01-22T12:52:06.776+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=VALIDATION, executorClass=ValidationStepExecutor
2026-01-22T12:52:06.777+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#defaultPlanExecutor - reason=creating default plan executor
2026-01-22T12:52:06.791+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#executeActionCodeactTool - reason=creating execute_action tool
2026-01-22T12:52:06.793+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#listActionsCodeactTool - reason=creating list_actions tool
2026-01-22T12:52:06.796+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#getActionDetailsCodeactTool - reason=creating get_action_details tool
2026-01-22T12:52:06.798+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#executeSystemActionCodeactTool - reason=creating execute_system_action tool
2026-01-22T12:52:07.015+08:00  INFO --- [           main] c.a.a.a.start.config.PersistenceConfig   : PersistenceConfig#init - reason=persistence configuration loaded
2026-01-22T12:52:07.017+08:00  INFO --- [           main] c.a.a.a.start.config.PersistenceConfig   : PersistenceConfig#elasticsearchExperienceProvider - reason=creating Elasticsearch experience provider (PRIMARY), indexName=experiences
2026-01-22T12:52:07.030+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#<init> - reason=初始化默认评估套件配置, experienceProviderAvailable=true
2026-01-22T12:52:07.033+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#evaluatorRegistry - reason=创建 EvaluatorRegistry Bean
2026-01-22T12:52:07.036+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'llm-based' of type LLMBasedEvaluator
2026-01-22T12:52:07.039+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'passthrough' of type RuleBasedEvaluator
2026-01-22T12:52:07.051+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'react_experience_evaluator' of type RuleBasedEvaluator
2026-01-22T12:52:07.051+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createDefaultEvaluatorRegistry - reason=注册 React 阶段经验检索评估器
2026-01-22T12:52:07.051+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'codeact_experience_evaluator' of type RuleBasedEvaluator
2026-01-22T12:52:07.051+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createDefaultEvaluatorRegistry - reason=注册 CodeAct 阶段经验检索评估器
2026-01-22T12:52:07.052+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#evaluationService - reason=创建默认 EvaluationService, sharedRegistryEvaluators=[llm-based, passthrough, codeact_experience_evaluator, react_experience_evaluator]
2026-01-22T12:52:07.058+08:00 DEBUG --- [           main] c.a.a.a.e.e.GraphBasedEvaluationExecutor : Created default ExecutorService for batch processing
2026-01-22T12:52:07.060+08:00  INFO --- [           main] .c.ExperienceEvaluationCriterionProvider : ExperienceEvaluationCriterionProvider#<init> - reason=初始化经验评估 Criterion 提供者
2026-01-22T12:52:07.066+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#structuredParamExtractor - reason=creating structured param extractor
2026-01-22T12:52:07.097+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#parameterValidator - reason=creating parameter validator
2026-01-22T12:52:07.098+08:00  INFO --- [           main] f.a.AutowiredAnnotationBeanPostProcessor : Inconsistent constructor declaration on bean with name 'actionExecutorFactory': single autowire-marked constructor flagged as optional - this constructor is effectively required since there is no default constructor to fall back to: public com.alibaba.assistant.agent.planning.executor.ActionExecutorFactory(java.util.List,com.alibaba.assistant.agent.planning.permission.interceptor.PermissionInterceptor)
2026-01-22T12:52:07.101+08:00  INFO --- [           main] .a.a.a.p.c.ParamOptionsAutoConfiguration : ParamOptionsAutoConfiguration - Parameter options module initialized
2026-01-22T12:52:07.103+08:00  INFO --- [           main] .a.a.a.p.c.ParamOptionsAutoConfiguration : ParamOptionsAutoConfiguration - Creating RestTemplate for HTTP handlers
2026-01-22T12:52:07.110+08:00  INFO --- [           main] c.a.a.a.planning.executor.HttpExecutor   : HttpExecutor#init - initialized
2026-01-22T12:52:07.111+08:00  INFO --- [           main] c.a.a.a.p.executor.InternalExecutor      : InternalExecutor#init - initialized
2026-01-22T12:52:07.120+08:00  INFO --- [           main] c.a.a.a.p.p.a.PermissionAdapterRegistry  : PermissionAdapterRegistry#registerAdapter - registered adapter: system=gov-platform, name=政务服务平台权限适配器
2026-01-22T12:52:07.121+08:00  INFO --- [           main] c.a.a.a.p.p.a.PermissionAdapterRegistry  : PermissionAdapterRegistry#registerAdapter - registered adapter: system=oa-system, name=OA办公系统权限适配器
2026-01-22T12:52:07.121+08:00  INFO --- [           main] c.a.a.a.p.p.a.PermissionAdapterRegistry  : PermissionAdapterRegistry initialized with 2 adapters: [gov-platform, oa-system]
2026-01-22T12:52:07.128+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U001, system=oa-system, externalUser=zhang.san@company.com
2026-01-22T12:52:07.130+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U001, system=gov-platform, externalUser=320102199001011234
2026-01-22T12:52:07.130+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U002, system=oa-system, externalUser=li.si@company.com
2026-01-22T12:52:07.130+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U003, system=oa-system, externalUser=wang.wu@company.com
2026-01-22T12:52:07.130+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U003, system=gov-platform, externalUser=leader_001
2026-01-22T12:52:07.130+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U004, system=gov-platform, externalUser=staff_001
2026-01-22T12:52:07.130+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U005, system=oa-system, externalUser=sun.qi@company.com
2026-01-22T12:52:07.131+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService initialized with demo data
2026-01-22T12:52:07.133+08:00  INFO --- [           main] c.a.a.a.p.c.PermissionAutoConfiguration  : PermissionAutoConfiguration - creating PermissionInterceptor
2026-01-22T12:52:07.136+08:00  INFO --- [           main] c.a.a.a.p.e.ActionExecutorFactory        : ActionExecutorFactory#init - initialized executors: INTERNAL(InternalExecutor), HTTP(HttpExecutor), DATA_AGENT(DataAgentExecutor), MCP(McpExecutor)
2026-01-22T12:52:07.137+08:00  INFO --- [           main] c.a.a.a.p.e.ActionExecutorFactory        : ActionExecutorFactory#init - permission interceptor enabled
2026-01-22T12:52:07.138+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#sessionProvider - reason=creating in-memory session provider
2026-01-22T12:52:07.140+08:00  INFO --- [           main] c.a.a.a.p.s.InMemorySessionProvider      : InMemorySessionProvider#init - initialized
2026-01-22T12:52:07.149+08:00  INFO --- [           main] c.a.a.a.p.s.ParamCollectionService       : ParamCollectionService#init - sessionProvider=InMemory
2026-01-22T12:52:07.160+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'action_intent_evaluator' of type ActionIntentEvaluator
2026-01-22T12:52:07.160+08:00  INFO --- [           main] p.i.PlanningIntegrationAutoConfiguration : PlanningIntegrationAutoConfiguration#actionIntentEvaluator - initialized and registered, paramCollection=true, llmVerification=true, maxCandidates=5
2026-01-22T12:52:07.161+08:00  INFO --- [           main] .p.i.PlanningEvaluationCriterionProvider : PlanningEvaluationCriterionProvider#init - initialized, llmVerificationEnabled=true
2026-01-22T12:52:07.161+08:00  INFO --- [           main] p.i.PlanningIntegrationAutoConfiguration : PlanningIntegrationAutoConfiguration#planningEvaluationCriterionProvider - registered planning evaluation criterion provider
2026-01-22T12:52:07.162+08:00  INFO --- [           main] .c.ExperienceEvaluationCriterionProvider : ExperienceEvaluationCriterionProvider#getReactPhaseCriteria - reason=提供 React 阶段评估 Criteria
2026-01-22T12:52:07.173+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createReactPhaseSuite - reason=添加自定义 Criterion, provider=ExperienceEvaluationCriterionProvider, count=3
2026-01-22T12:52:07.175+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createReactPhaseSuite - reason=添加自定义 Criterion, provider=PlanningEvaluationCriterionProvider, count=2
2026-01-22T12:52:07.185+08:00  INFO --- [           main] a.a.e.a.BatchAggregationStrategyRegistry : Registered batch aggregation strategy: ANY_TRUE
2026-01-22T12:52:07.188+08:00  INFO --- [           main] a.a.e.a.BatchAggregationStrategyRegistry : Registered batch aggregation strategy: ALL_TRUE
2026-01-22T12:52:07.414+08:00  INFO --- [           main] c.a.c.a.g.internal.node.ParallelNode     : Calculated core pool size: 32 (CPU cores: 16)
2026-01-22T12:52:07.414+08:00  INFO --- [           main] c.a.c.a.g.internal.node.ParallelNode     : Calculated maximum pool size: 64 (CPU cores: 16)
2026-01-22T12:52:07.414+08:00  INFO --- [           main] c.a.c.a.g.internal.node.ParallelNode     : Calculated queue capacity: 1000
2026-01-22T12:52:07.419+08:00  INFO --- [           main] c.a.a.a.e.DefaultEvaluationService       : Registered evaluation suite: react-phase-suite
2026-01-22T12:52:07.419+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#evaluationService - reason=注册 React Phase Suite, suiteId=react-phase-suite
2026-01-22T12:52:07.420+08:00  INFO --- [           main] .c.ExperienceEvaluationCriterionProvider : ExperienceEvaluationCriterionProvider#getCodeActPhaseCriteria - reason=提供 CodeAct 阶段评估 Criteria
2026-01-22T12:52:07.420+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createCodeActPhaseSuite - reason=添加自定义 Criterion, provider=ExperienceEvaluationCriterionProvider, count=3
2026-01-22T12:52:07.420+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createCodeActPhaseSuite - reason=添加自定义 Criterion, provider=PlanningEvaluationCriterionProvider, count=2
2026-01-22T12:52:07.420+08:00  INFO --- [           main] a.a.e.a.BatchAggregationStrategyRegistry : Registered batch aggregation strategy: ANY_TRUE
2026-01-22T12:52:07.420+08:00  INFO --- [           main] a.a.e.a.BatchAggregationStrategyRegistry : Registered batch aggregation strategy: ALL_TRUE
2026-01-22T12:52:07.421+08:00  INFO --- [           main] c.a.a.a.e.DefaultEvaluationService       : Registered evaluation suite: codeact-phase-suite
2026-01-22T12:52:07.421+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#evaluationService - reason=注册 CodeAct Phase Suite, suiteId=codeact-phase-suite
2026-01-22T12:52:07.424+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#codeactEvaluationContextFactory - reason=创建 EvaluationContextFactory
2026-01-22T12:52:07.425+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#codeactEvaluationResultAttacher - reason=创建 EvaluationResultAttacher
2026-01-22T12:52:07.437+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#reactPhaseEvaluationHooks - reason=创建 React Phase ModelInputEvaluationHook
2026-01-22T12:52:07.444+08:00  INFO --- [           main] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#<init> - reason=初始化, phase=REACT, providerCount=1
2026-01-22T12:52:07.444+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#reactPhaseEvaluationHooks - reason=创建 React Phase EvaluationPromptInjectionHook, providersCount=2
2026-01-22T12:52:07.446+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#codeactPhaseEvaluationHooks - reason=创建 CodeAct Phase ModelInputEvaluationHook
2026-01-22T12:52:07.447+08:00  INFO --- [           main] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#<init> - reason=初始化, phase=CODEACT, providerCount=1
2026-01-22T12:52:07.447+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#codeactPhaseEvaluationHooks - reason=创建 CodeAct Phase EvaluationPromptInjectionHook, providersCount=2
2026-01-22T12:52:07.450+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#keywordMatcher - reason=creating keyword matcher
2026-01-22T12:52:07.453+08:00  INFO --- [           main] .ParamCollectionSessionAutoConfiguration : ParamCollectionSessionAutoConfiguration#inMemoryParamCollectionSessionStore - reason=creating in-memory session store (Redis not available), ttl=PT30M
2026-01-22T12:52:07.454+08:00  WARN --- [           main] .ParamCollectionSessionAutoConfiguration : ParamCollectionSessionAutoConfiguration#inMemoryParamCollectionSessionStore - reason=WARNING: In-memory session store is not suitable for distributed environment!
2026-01-22T12:52:07.465+08:00  INFO --- [           main] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#<init> - reason=initialized, defaultTtl=PT30M
2026-01-22T12:52:07.465+08:00  WARN --- [           main] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#<init> - reason=WARNING: Using in-memory session store, not suitable for distributed environment!
2026-01-22T12:52:07.482+08:00  INFO --- [           main] iguration$UnifiedIntentHookConfiguration : UnifiedIntentHookConfiguration#unifiedIntentRecognitionHook - reason=creating unified intent hook, experienceProviderPresent=true, chatModelPresent=true, sessionStorePresent=true, directExecuteThreshold=0.95, hintThreshold=0.5
2026-01-22T12:52:07.978+08:00  INFO --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2026-01-22T12:52:08.844+08:00  INFO --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@3f919230
2026-01-22T12:52:08.855+08:00  INFO --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2026-01-22T12:52:09.330+08:00  WARN --- [           main] c.a.a.a.p.p.c.ActionEntityConverter      : ActionEntityConverter#parseActionType - reason=unknown action type, type=INTERNAL
2026-01-22T12:52:09.403+08:00 DEBUG --- [           main] c.a.a.a.planning.intent.KeywordMatcher   : KeywordMatcher#registerAction - actionId=oa:leave:request, keywords=57
2026-01-22T12:52:09.403+08:00  INFO --- [           main] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#initKeywordMatcher - reason=initialized, actionCount=1, keywordIndexSize=57
2026-01-22T12:52:09.409+08:00  INFO --- [           main] c.a.a.a.start.config.PersistenceConfig   : PersistenceConfig#elasticsearchExperienceRepository - reason=creating Elasticsearch experience repository (PRIMARY), indexName=experiences
2026-01-22T12:52:09.420+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#init - reason=reply module enabled
2026-01-22T12:52:09.423+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactToolFactory - reason=创建CodeactTool工厂, channels=1
2026-01-22T12:52:09.424+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#init - reason=工厂初始化完成, channels=1
2026-01-22T12:52:09.437+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=开始创建Reply工具
2026-01-22T12:52:09.452+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#createTools - reason=创建工具成功, toolName=send_success_message, channelCode=IDE_TEXT
2026-01-22T12:52:09.453+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#createTools - reason=创建工具成功, toolName=send_error_message, channelCode=IDE_TEXT
2026-01-22T12:52:09.453+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#createTools - reason=创建工具成功, toolName=send_notification, channelCode=IDE_TEXT
2026-01-22T12:52:09.453+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#createTools - reason=工具创建完成, totalCount=3
2026-01-22T12:52:09.454+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=Reply工具创建完成, count=3
2026-01-22T12:52:09.454+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=创建Reply工具, index=1, name=send_success_message, description=Send a success message to the IDE console
2026-01-22T12:52:09.454+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=创建Reply工具, index=2, name=send_error_message, description=Send an error message to the IDE console
2026-01-22T12:52:09.454+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=创建Reply工具, index=3, name=send_notification, description=Send a notification message
2026-01-22T12:52:09.456+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactToolFactory - reason=创建SearchCodeactTool工厂, providerCount=3
2026-01-22T12:52:09.498+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactToolFactory - reason=创建TriggerCodeactTool工厂
2026-01-22T12:52:09.499+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=开始创建Trigger工具
2026-01-22T12:52:09.502+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=创建SubscribeTriggerCodeactTool成功
2026-01-22T12:52:09.505+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=创建UnsubscribeTriggerCodeactTool成功
2026-01-22T12:52:09.508+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=创建ListTriggersCodeactTool成功
2026-01-22T12:52:09.511+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=创建GetTriggerDetailCodeactTool成功
2026-01-22T12:52:09.511+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=触发器工具创建完成, count=4
2026-01-22T12:52:09.511+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=Trigger工具创建完成, count=4
2026-01-22T12:52:09.511+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=创建Trigger工具, index=1, name=subscribe_trigger, description=创建并订阅一个新的触发器
2026-01-22T12:52:09.512+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=创建Trigger工具, index=2, name=unsubscribe_trigger, description=取消订阅并删除一个触发器
2026-01-22T12:52:09.512+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=创建Trigger工具, index=3, name=list_triggers, description=列出所有触发器
2026-01-22T12:52:09.512+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=创建Trigger工具, index=4, name=get_trigger_detail, description=获取指定触发器的详细信息
2026-01-22T12:52:09.528+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#planningCodeactTools - reason=creating planning tools list
2026-01-22T12:52:09.529+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#planningCodeactTools - reason=created planning tools, count=5
2026-01-22T12:52:09.553+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=创建 CodeactAgent
2026-01-22T12:52:09.553+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=配置 MemorySaver 以支持多轮对话上下文保持
2026-01-22T12:52:09.554+08:00  WARN --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=临时禁用 streaming 模式以排查循环问题
2026-01-22T12:52:09.554+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加UnifiedSearchCodeactTool
2026-01-22T12:52:09.563+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockBaiduWebSearchProvider, toolName=search_web
2026-01-22T12:52:09.565+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockKnowledgeStoreSearchProvider, toolName=search_knowledge
2026-01-22T12:52:09.567+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockProjectContextSearchProvider, toolName=search_project
2026-01-22T12:52:09.567+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=搜索工具创建完成, totalCount=3
2026-01-22T12:52:09.567+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加SearchCodeactTools, count=3
2026-01-22T12:52:09.567+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加ReplyCodeactTools, count=3
2026-01-22T12:52:09.567+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加TriggerCodeactTools, count=4
2026-01-22T12:52:09.567+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加PlanningCodeactTools, count=5
2026-01-22T12:52:09.568+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#createMcpDynamicTools - reason=Creating MCP dynamic tools
2026-01-22T12:52:09.581+08:00  INFO --- [           main] c.a.a.a.e.d.mcp.McpDynamicToolFactory    : McpDynamicToolFactory#createTools - reason=开始创建MCP动态工具
2026-01-22T12:52:09.592+08:00  INFO --- [           main] c.a.a.a.e.d.mcp.McpDynamicToolFactory    : McpDynamicToolFactory#createTools - reason=无可用的MCP工具
2026-01-22T12:52:09.592+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#createMcpDynamicTools - reason=MCP dynamic tools created, count=0
2026-01-22T12:52:09.592+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=Added MCP dynamic tools, count=0
2026-01-22T12:52:09.592+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#createHttpDynamicTools - reason=HTTP dynamic tools disabled by default
2026-01-22T12:52:09.592+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=合并后CodeactTool总数, count=16
2026-01-22T12:52:09.593+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=React阶段使用内置工具(write_code, execute_code, write_condition_code)
2026-01-22T12:52:09.593+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=注入 React Phase 评估 Hooks, count=2
2026-01-22T12:52:09.593+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=注入 CodeAct Phase 评估 Hooks, count=2
2026-01-22T12:52:09.593+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=已准备注入UnifiedIntentRecognitionHook
2026-01-22T12:52:09.599+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 开始构建CodeactAgent
2026-01-22T12:52:09.608+08:00  INFO --- [           main] .a.a.a.c.t.s.DefaultReturnSchemaRegistry : DefaultReturnSchemaRegistry#<init> - reason=创建新实例, hashCode=1270236380
2026-01-22T12:52:09.612+08:00 DEBUG --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#<init> - reason=创建注册表, returnSchemaRegistry=DefaultReturnSchemaRegistry
2026-01-22T12:52:09.613+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=创建默认CodeactToolRegistry
2026-01-22T12:52:09.613+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=开始注册CodeactTool, count=16
2026-01-22T12:52:09.613+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=unified_search
2026-01-22T12:52:09.613+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=unified_search
2026-01-22T12:52:09.613+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=search_web
2026-01-22T12:52:09.613+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=search_web
2026-01-22T12:52:09.613+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=search_knowledge
2026-01-22T12:52:09.613+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=search_knowledge
2026-01-22T12:52:09.613+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=search_project
2026-01-22T12:52:09.613+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=search_project
2026-01-22T12:52:09.613+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=send_success_message
2026-01-22T12:52:09.613+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=send_success_message
2026-01-22T12:52:09.613+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=send_error_message
2026-01-22T12:52:09.613+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=send_error_message
2026-01-22T12:52:09.613+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=send_notification
2026-01-22T12:52:09.613+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=send_notification
2026-01-22T12:52:09.614+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=subscribe_trigger
2026-01-22T12:52:09.614+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=subscribe_trigger
2026-01-22T12:52:09.614+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=unsubscribe_trigger
2026-01-22T12:52:09.614+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=unsubscribe_trigger
2026-01-22T12:52:09.614+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=list_triggers
2026-01-22T12:52:09.614+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=list_triggers
2026-01-22T12:52:09.614+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=get_trigger_detail
2026-01-22T12:52:09.614+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=get_trigger_detail
2026-01-22T12:52:09.621+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=plan_action
2026-01-22T12:52:09.621+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=plan_action
2026-01-22T12:52:09.622+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=execute_action
2026-01-22T12:52:09.622+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=execute_action
2026-01-22T12:52:09.623+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=list_actions
2026-01-22T12:52:09.623+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=list_actions
2026-01-22T12:52:09.624+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=get_action_details
2026-01-22T12:52:09.624+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=get_action_details
2026-01-22T12:52:09.625+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=execute_system_action
2026-01-22T12:52:09.625+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=execute_system_action
2026-01-22T12:52:09.625+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册完成, count=16
2026-01-22T12:52:09.626+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 创建默认CodeContext: language=PYTHON
2026-01-22T12:52:09.632+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 创建默认RuntimeEnvironmentManager: language=PYTHON
2026-01-22T12:52:09.641+08:00 DEBUG --- [           main] c.a.a.a.c.e.bridge.AgentToolBridge       : AgentToolBridge#<init> 初始化: 注册了0个工具
2026-01-22T12:52:09.644+08:00 DEBUG --- [           main] c.a.a.a.c.executor.bridge.StateBridge    : StateBridge#<init> 初始化完成
2026-01-22T12:52:09.646+08:00  INFO --- [           main] c.a.a.a.core.executor.GraalCodeExecutor  : GraalCodeExecutor#<init> 初始化完成: language=PYTHON, allowIO=false, timeout=30000ms, executableTools=true, customBridgeFactory=false
2026-01-22T12:52:09.646+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#createCodeactSubAgentInterceptor 创建子Agent拦截器
2026-01-22T12:52:09.669+08:00  INFO --- [           main] c.a.a.a.a.subagent.CodeactSubAgent       : CodeactSubAgent#<init> 初始化: name=code-generator
2026-01-22T12:52:09.669+08:00  INFO --- [           main] c.a.a.a.a.subagent.CodeactSubAgent       : CodeactSubAgent#<init> 初始化: name=condition-code-generator
2026-01-22T12:52:09.669+08:00  INFO --- [           main] c.a.a.a.a.s.CodeactSubAgentInterceptor   : CodeactSubAgentInterceptor#<init> 创建默认代码生成子Agent
2026-01-22T12:52:10.504+08:00  INFO --- [           main] c.a.a.a.a.s.CodeactSubAgentInterceptor   : CodeactSubAgentInterceptor#<init> 初始化完成: subAgentCount=2
2026-01-22T12:52:10.507+08:00  INFO --- [           main] c.a.a.a.a.tools.ExecuteCodeTool          : ExecuteCodeTool#<init> 初始化完成
2026-01-22T12:52:10.513+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 拦截器分类完成: modelInterceptors=1, toolInterceptors=0
2026-01-22T12:52:10.513+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 从拦截器提取工具: interceptor=CodeactSubAgent, toolCount=2
2026-01-22T12:52:10.555+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 工具收集完成: interceptorTools=2, regularTools=3, total=6
2026-01-22T12:52:10.560+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 设置ModelInterceptors到LlmNode: count=1
2026-01-22T12:52:10.563+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build CodeactAgent构建完成
2026-01-22T12:52:10.563+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=开始罗列已注册的工具
2026-01-22T12:52:10.563+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct阶段工具数量, count=16
2026-01-22T12:52:10.563+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=1, name=send_success_message, description=Send a success message to the IDE console
2026-01-22T12:52:10.563+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=2, name=get_trigger_detail, description=获取指定触发器的详细信息
2026-01-22T12:52:10.563+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=3, name=get_action_details, description=获取指定动作的完整定义，包括参数、步骤等详细信息。
2026-01-22T12:52:10.563+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=4, name=search_project, description=搜索项目上下文信息，包括代码、配置、文档等
2026-01-22T12:52:10.564+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=5, name=subscribe_trigger, description=创建并订阅一个新的触发器
2026-01-22T12:52:10.564+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=6, name=search_knowledge, description=搜索团队知识库，包括FAQ、规范、最佳实践等
2026-01-22T12:52:10.564+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=7, name=unified_search, description=统一搜索工具，可同时搜索项目、知识库、Web等多个数据源
2026-01-22T12:52:10.564+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=8, name=unsubscribe_trigger, description=取消订阅并删除一个触发器
2026-01-22T12:52:10.564+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=9, name=search_web, description=执行Web搜索，获取公开互联网信息
2026-01-22T12:52:10.564+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=10, name=list_actions, description=列出所有可用的动作，支持按分类和标签筛选。
2026-01-22T12:52:10.564+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=11, name=plan_action, description=根据用户输入匹配动作并生成执行计划。返回匹配的动作列表和生成的执行计划。
2026-01-22T12:52:10.564+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=12, name=execute_system_action, description=执行系统Action（如OA请假、ERP操作等）。根据action_id调用相应的系统Handler。
2026-01-22T12:52:10.564+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=13, name=send_error_message, description=Send an error message to the IDE console
2026-01-22T12:52:10.564+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=14, name=execute_action, description=执行指定的执行计划，返回执行结果。支持继续执行等待用户输入的计划。
2026-01-22T12:52:10.564+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=15, name=send_notification, description=Send a notification message
2026-01-22T12:52:10.564+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=16, name=list_triggers, description=列出所有触发器
2026-01-22T12:52:10.564+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React阶段工具数量, count=6
2026-01-22T12:52:10.564+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=1, name=write_code, description=Generate and register a new function with specified name and parameters. IMPORTANT: You MUST provide both 'functionName' and 'parameters' fields. Example: write_code(requirement='calculate sum', functionName='calculate_sum', parameters=['a', 'b'])
2026-01-22T12:52:10.564+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=2, name=write_condition_code, description=Generate and register a condition check function for triggers. This function MUST return a boolean value (True/False). Example: write_condition_code(requirement='check if it is a working day', functionName='check_is_working_day', parameters=['date'])
2026-01-22T12:52:10.564+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=3, name=send_success_message, description=Send a success message to the IDE console
2026-01-22T12:52:10.564+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=4, name=send_error_message, description=Send an error message to the IDE console
2026-01-22T12:52:10.564+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=5, name=send_notification, description=Send a notification message
2026-01-22T12:52:10.564+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=6, name=execute_code, description=Execute a previously generated function by its exact name with matching parameters. CRITICAL: The functionName MUST exactly match the name used in write_code. The 'args' parameter names MUST exactly match the 'parameters' specified in write_code. Example: If you called write_code with functionName='calculate_sum' and parameters=['a', 'b'], then you must call execute_code with functionName='calculate_sum' and args={'a': 10, 'b': 20}. Parameter value types supported: String, Number, Boolean, List, Map/Object.
2026-01-22T12:52:10.565+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=工具罗列完成
2026-01-22T12:52:10.570+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgent#<init> 初始化完成: language=PYTHON
2026-01-22T12:52:10.575+08:00  INFO --- [           main] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#<init> 初始化 Agent 加载器
2026-01-22T12:52:10.630+08:00 DEBUG --- [           main] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#<init> Agent 图结构:
@startuml CodeactAgent
skinparam usecaseFontSize 14
skinparam usecaseStereotypeFontSize 12
skinparam hexagonFontSize 14
skinparam hexagonStereotypeFontSize 12
title "CodeactAgent"
footer

powered by spring-ai-alibaba
end footer
circle start<<input>> as __START__
circle stop as __END__
usecase "_AGENT_MODEL_"<<Node>>
usecase "_AGENT_TOOL_"<<Node>>
usecase "_AGENT_HOOK_UnifiedIntentRecognitionHook.before"<<Node>>
usecase "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"<<Node>>
usecase "_AGENT_HOOK_EvaluationPromptInjectionHook-REACT.beforeModel"<<Node>>
hexagon "check state" as condition1<<Condition>>
hexagon "check state" as condition2<<Condition>>
hexagon "check state" as condition3<<Condition>>
"__START__" -down-> "_AGENT_HOOK_UnifiedIntentRecognitionHook.before"
"_AGENT_HOOK_UnifiedIntentRecognitionHook.before" .down.> "condition1"
"condition1" .down.> "__END__"
'"_AGENT_HOOK_UnifiedIntentRecognitionHook.before" .down.> "__END__"
"condition1" .down.> "_AGENT_TOOL_"
'"_AGENT_HOOK_UnifiedIntentRecognitionHook.before" .down.> "_AGENT_TOOL_"
"condition1" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
'"_AGENT_HOOK_UnifiedIntentRecognitionHook.before" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
"_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel" -down-> "_AGENT_HOOK_EvaluationPromptInjectionHook-REACT.beforeModel"
"_AGENT_HOOK_EvaluationPromptInjectionHook-REACT.beforeModel" -down-> "_AGENT_MODEL_"
"_AGENT_MODEL_" .down.> "condition2"
"condition2" .down.> "_AGENT_TOOL_"
'"_AGENT_MODEL_" .down.> "_AGENT_TOOL_"
"condition2" .down.> "__END__"
'"_AGENT_MODEL_" .down.> "__END__"
"condition2" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
'"_AGENT_MODEL_" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
"_AGENT_TOOL_" .down.> "condition3"
"condition3" .down.> "__END__"
'"_AGENT_TOOL_" .down.> "__END__"
"condition3" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
'"_AGENT_TOOL_" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
@enduml

2026-01-22T12:52:10.631+08:00  INFO --- [           main] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#<init> 已注册 agent: grayscale_agent
2026-01-22T12:52:10.642+08:00  INFO --- [           main] .a.a.a.p.c.ParamOptionsAutoConfiguration : ParamOptionsAutoConfiguration - Creating OptionsCache with TTL: 300000ms
2026-01-22T12:52:10.647+08:00  INFO --- [           main] a.a.a.p.s.DefaultParameterOptionsService : DefaultParameterOptionsService initialized with 3 handlers
2026-01-22T12:52:10.649+08:00  INFO --- [           main] c.a.a.a.planning.system.OaSystemHandler  : OaSystemHandler#init - initialized
2026-01-22T12:52:10.669+08:00 DEBUG --- [           main] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#listAgents 列出所有 agent
2026-01-22T12:52:10.670+08:00  INFO --- [           main] c.a.c.a.a.s.controller.AgentController   : AgentController initialized with 1 dynamic agents: [grayscale_agent]
2026-01-22T12:52:10.849+08:00  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 2b22c1e2-9d08-4dc2-baae-591a0b59c14b

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2026-01-22T12:52:10.948+08:00  INFO --- [           main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2026-01-22T12:52:11.967+08:00  INFO --- [           main] e.e.c.CodeactEvaluationAutoConfiguration : CodeactEvaluationAutoConfiguration#inputRoutingEvaluationHook - reason=创建输入路由评估 Hook
2026-01-22T12:52:11.969+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchFacade - reason=creating search facade with 3 providers
2026-01-22T12:52:11.971+08:00  INFO --- [           main] c.a.a.a.e.s.i.DefaultSearchFacade        : DefaultSearchFacade#init - reason=initialized with 3 providers
2026-01-22T12:52:11.973+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=开始创建Search工具
2026-01-22T12:52:11.974+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockBaiduWebSearchProvider, toolName=search_web
2026-01-22T12:52:11.975+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockKnowledgeStoreSearchProvider, toolName=search_knowledge
2026-01-22T12:52:11.977+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockProjectContextSearchProvider, toolName=search_project
2026-01-22T12:52:11.977+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=搜索工具创建完成, totalCount=3
2026-01-22T12:52:11.977+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=Search工具创建完成, count=3
2026-01-22T12:52:11.977+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=创建Search工具, index=1, name=search_web, description=执行Web搜索，获取公开互联网信息
2026-01-22T12:52:11.977+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=创建Search工具, index=2, name=search_knowledge, description=搜索团队知识库，包括FAQ、规范、最佳实践等
2026-01-22T12:52:11.977+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=创建Search工具, index=3, name=search_project, description=搜索项目上下文信息，包括代码、配置、文档等
2026-01-22T12:52:11.980+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#diagnostics - reason=ElasticsearchClient bean found
2026-01-22T12:52:11.980+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#diagnostics - reason=EmbeddingModel bean found
2026-01-22T12:52:11.986+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#diagnostics - Planning module status:
2026-01-22T12:52:11.986+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration :   - ActionRepository: MybatisPlusActionRepository
2026-01-22T12:52:11.986+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration :   - ActionProvider: SemanticActionProvider
2026-01-22T12:52:11.986+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration :   - PlanGenerator: DefaultPlanGenerator
2026-01-22T12:52:11.986+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration :   - PlanExecutor: DefaultPlanExecutor
2026-01-22T12:52:12.390+08:00  INFO --- [           main] c.a.a.a.c.c.CodeactCoreAutoConfiguration : CodeactCoreAutoConfiguration#returnSchemaRegistry - reason=创建ReturnSchemaRegistry单例Bean
2026-01-22T12:52:12.390+08:00  INFO --- [           main] .a.a.a.c.t.s.DefaultReturnSchemaRegistry : DefaultReturnSchemaRegistry#<init> - reason=创建新实例, hashCode=543835743
2026-01-22T12:52:13.675+08:00  WARN --- [           main] o.s.m.p.s.SyncMcpSamplingProvider        : No sampling methods found
2026-01-22T12:52:13.681+08:00  WARN --- [           main] o.s.m.p.e.SyncMcpElicitationProvider     : No elicitation methods found
2026-01-22T12:52:13.803+08:00  INFO --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2026-01-22T12:52:13.828+08:00  INFO --- [           main] c.a.a.a.start.AssistantAgentApplication  : Started AssistantAgentApplication in 21.522 seconds (process running for 24.345)
2026-01-22T12:52:13.852+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#run - reason=Starting experience module validation
2026-01-22T12:52:14.079+08:00  INFO --- [nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-01-22T12:52:14.080+08:00  INFO --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2026-01-22T12:52:14.081+08:00  INFO --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2026-01-22T12:52:14.106+08:00 DEBUG --- [           main] .p.e.r.ElasticsearchExperienceRepository : ElasticsearchExperienceRepository#count - reason=count completed, count=0
2026-01-22T12:52:14.178+08:00 DEBUG --- [           main] .p.e.r.ElasticsearchExperienceRepository : ElasticsearchExperienceRepository#countByTypeAndScope - reason=count completed, type=CODE, scope=null, count=0
2026-01-22T12:52:14.190+08:00 DEBUG --- [           main] .p.e.r.ElasticsearchExperienceRepository : ElasticsearchExperienceRepository#countByTypeAndScope - reason=count completed, type=REACT, scope=null, count=0
2026-01-22T12:52:14.201+08:00 DEBUG --- [           main] .p.e.r.ElasticsearchExperienceRepository : ElasticsearchExperienceRepository#countByTypeAndScope - reason=count completed, type=COMMON, scope=null, count=0
2026-01-22T12:52:14.201+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testExperienceCount - reason=Experience stats: total=0, code=0, react=0, common=0
2026-01-22T12:52:14.201+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCommonExperienceQuery - reason=Testing common experience query
2026-01-22T12:52:14.867+08:00 DEBUG --- [nio-8080-exec-2] c.a.a.a.s.a.s.JwtAuthenticationFilter    : JwtAuthenticationFilter#doFilterInternal - 设置用户认证: username=admin, roles=[ADMIN, USER]
2026-01-22T12:52:15.051+08:00  INFO --- [nio-8080-exec-2] c.a.c.a.a.s.controller.ThreadController  : Request received for POST /apps/research_agent/users/user-001/threads (service generates ID) with state: {}
2026-01-22T12:52:15.057+08:00  INFO --- [nio-8080-exec-2] c.a.c.a.a.s.service.ThreadServiceImpl    : Created thread: 513368a1-c098-425d-a9a5-e955b9626743 for app=research_agent, user=user-001
2026-01-22T12:52:15.057+08:00  INFO --- [nio-8080-exec-2] c.a.c.a.a.s.controller.ThreadController  : Thread created successfully with generated id: 513368a1-c098-425d-a9a5-e955b9626743
2026-01-22T12:52:15.063+08:00 DEBUG --- [           main] .s.p.e.p.ElasticsearchExperienceProvider : ElasticsearchExperienceProvider#query - reason=query completed, type=COMMON, text=null, count=0
2026-01-22T12:52:15.063+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCommonExperienceQuery - reason=Found 0 common experiences
2026-01-22T12:52:15.075+08:00  WARN --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCommonExperienceQuery - reason=❌ MoLiHong identity experience not found
2026-01-22T12:52:15.075+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCodeExperienceQuery - reason=Testing code experience query (demo keyword)
2026-01-22T12:52:15.101+08:00 DEBUG --- [           main] .s.p.e.p.ElasticsearchExperienceProvider : ElasticsearchExperienceProvider#query - reason=query completed, type=CODE, text=null, count=0
2026-01-22T12:52:15.102+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCodeExperienceQuery - reason=Found 0 demo code experiences
2026-01-22T12:52:15.104+08:00  WARN --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCodeExperienceQuery - reason=❌ Demo code experience not found
2026-01-22T12:52:15.104+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testReactExperienceQuery - reason=Testing react experience query
2026-01-22T12:52:15.117+08:00 DEBUG --- [           main] .s.p.e.p.ElasticsearchExperienceProvider : ElasticsearchExperienceProvider#query - reason=query completed, type=REACT, text=null, count=0
2026-01-22T12:52:15.118+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testReactExperienceQuery - reason=Found 0 react experiences
2026-01-22T12:52:15.119+08:00  WARN --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testReactExperienceQuery - reason=❌ Ambiguous intent strategy not found
2026-01-22T12:52:15.119+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#run - reason=Experience module validation completed
2026-01-22T12:52:15.125+08:00  INFO --- [           main] c.a.a.a.s.a.config.AuthInitialization    : AuthInitialization#run - 初始化认证系统
2026-01-22T12:52:15.165+08:00 DEBUG --- [           main] c.a.a.a.s.a.s.AuthenticationService      : AuthenticationService#initDefaultAdmin - 管理员账户已存在
2026-01-22T12:52:15.166+08:00  INFO --- [           main] c.a.a.a.s.a.config.AuthInitialization    : AuthInitialization#run - 认证系统初始化完成
2026-01-22T12:52:15.201+08:00 DEBUG --- [nio-8080-exec-4] c.a.a.a.s.a.s.JwtAuthenticationFilter    : JwtAuthenticationFilter#doFilterInternal - 设置用户认证: username=admin, roles=[ADMIN, USER]
2026-01-22T12:52:15.227+08:00 DEBUG --- [io-8080-exec-10] c.a.a.a.s.a.s.JwtAuthenticationFilter    : JwtAuthenticationFilter#doFilterInternal - 设置用户认证: username=admin, roles=[ADMIN, USER]
2026-01-22T12:52:15.232+08:00  INFO --- [io-8080-exec-10] c.a.c.a.a.s.controller.ThreadController  : Request received for GET /apps/research_agent/users/user-001/threads/513368a1-c098-425d-a9a5-e955b9626743
2026-01-22T12:52:15.238+08:00  INFO --- [nio-8080-exec-4] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#loadAgent 加载 agent: research_agent
2026-01-22T12:52:15.238+08:00  INFO --- [nio-8080-exec-4] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#loadAgent 成功加载 agent: research_agent
2026-01-22T12:52:15.557+08:00 DEBUG --- [nio-8080-exec-4] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#beforeAgent - reason=checking unified intent
2026-01-22T12:52:15.557+08:00 DEBUG --- [nio-8080-exec-4] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#get - reason=session not found, sessionId=513368a1-c098-425d-a9a5-e955b9626743
2026-01-22T12:52:15.563+08:00 DEBUG --- [nio-8080-exec-4] c.a.a.a.p.i.SemanticActionProvider       : SemanticActionProvider#matchActions - reason=matching actions, userInput=我要请假
2026-01-22T12:52:17.571+08:00 DEBUG --- [nio-8080-exec-4] c.a.a.a.p.v.ActionVectorizationService   : ActionVectorizationService#hybridSearch - actionId=erp:product-unit:create, rawScore=1.3716414, maxScore=1.3716414, normalizedScore=0.95
2026-01-22T12:52:17.583+08:00  WARN --- [nio-8080-exec-4] c.a.a.a.p.p.c.ActionEntityConverter      : ActionEntityConverter#parseActionType - reason=unknown action type, type=INTERNAL
2026-01-22T12:52:17.593+08:00  WARN --- [nio-8080-exec-4] c.a.a.a.p.p.c.ActionEntityConverter      : ActionEntityConverter#parseActionType - reason=unknown action type, type=INTERNAL
2026-01-22T12:52:17.602+08:00  INFO --- [nio-8080-exec-4] c.a.a.a.p.i.SemanticActionProvider       : SemanticActionProvider#matchActions - reason=matching completed, userInput=我要请假, matchCount=1
2026-01-22T12:52:17.603+08:00  INFO --- [nio-8080-exec-4] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#beforeAgent - reason=match found, actionId=oa:leave:request, confidence=0.95, matchType=KEYWORD_EXACT
2026-01-22T12:52:17.621+08:00 DEBUG --- [nio-8080-exec-4] .s.p.e.p.ElasticsearchExperienceProvider : ElasticsearchExperienceProvider#query - reason=query completed, type=REACT, text=null, count=0
2026-01-22T12:52:17.621+08:00  INFO --- [nio-8080-exec-4] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#beforeAgent - reason=high confidence, injecting hint to use plan_action tool, actionId=oa:leave:request, confidence=0.95
2026-01-22T12:52:17.621+08:00  INFO --- [nio-8080-exec-4] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handleToolBasedHintInjection - reason=injecting tool-based hint, actionId=oa:leave:request, confidence=0.95
2026-01-22T12:52:17.623+08:00  INFO --- [nio-8080-exec-4] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handleToolBasedHintInjection - reason=tool-based hint injected, actionId=oa:leave:request, hintLength=585
2026-01-22T12:52:17.679+08:00  INFO --- [nio-8080-exec-4] c.a.a.a.e.e.h.ModelInputEvaluationHook   : ModelInputEvaluationHook#beforeModel - reason=开始模型输入评估, phase=REACT
2026-01-22T12:52:17.679+08:00 DEBUG --- [nio-8080-exec-4] .a.e.e.c.CodeactEvaluationContextFactory : CodeactEvaluationContextFactory#createInputRoutingContext - reason=开始构造输入路由评估上下文
2026-01-22T12:52:17.686+08:00  INFO --- [pool-3-thread-1] c.a.a.a.e.DefaultEvaluationService       : Starting evaluation for suite: React Phase Evaluation Suite
2026-01-22T12:52:17.796+08:00  INFO --- [pool-2-thread-2] c.a.a.a.e.e.CriterionEvaluationAction    : Executing criterion: is_fuzzy
2026-01-22T12:52:17.796+08:00  INFO --- [pool-2-thread-3] c.a.a.a.e.e.CriterionEvaluationAction    : Executing criterion: action_intent_match
2026-01-22T12:52:17.796+08:00  INFO --- [pool-2-thread-1] c.a.a.a.e.e.CriterionEvaluationAction    : Executing criterion: enhanced_user_input
2026-01-22T12:52:17.797+08:00 DEBUG --- [pool-2-thread-1] c.a.a.a.e.e.CriterionEvaluationAction    : Batching not enabled for criterion: enhanced_user_input
2026-01-22T12:52:17.797+08:00 DEBUG --- [pool-2-thread-2] c.a.a.a.e.e.CriterionEvaluationAction    : Batching not enabled for criterion: is_fuzzy
2026-01-22T12:52:17.797+08:00 DEBUG --- [pool-2-thread-3] c.a.a.a.e.e.CriterionEvaluationAction    : Batching not enabled for criterion: action_intent_match
2026-01-22T12:52:17.802+08:00 DEBUG --- [pool-2-thread-3] c.a.a.a.p.i.SemanticActionProvider       : SemanticActionProvider#matchActions - reason=matching actions, userInput=我要请假
2026-01-22T12:52:17.808+08:00 DEBUG --- [pool-2-thread-2] c.a.a.a.e.evaluator.LLMBasedEvaluator    : Evaluating criterion is_fuzzy with LLM, prompt: You are an evaluator performing the following evaluation task:

Evaluation Criterion Description: 判断用户输入是否模糊，是否需要向用户澄清

Working Mechanism:
你是一个用户意图清晰度判断专家。请判断用户输入是否明确。

【模糊】的特征：
- 没有具体指明要做什么操作
- 使用模糊词汇如'帮我看看'、'处理一下'
- 请求可能有多种理解方式
- 缺少必要的参数或信息

【清晰】的特征：
- 明确提到要查询、搜索、获取某个具体信息
- 提供了具体的查询关键词或目标
- 意图明确，执行路径清晰

请直接输出'模糊'或'清晰'，不要添加任何解释。

Output your response in the following format:

RESULT: (one of: 模糊, 清晰)
(No reasoning required for this evaluation)

Context:
- userInput: null

Your evaluation result:

2026-01-22T12:52:17.808+08:00 DEBUG --- [pool-2-thread-1] c.a.a.a.e.evaluator.LLMBasedEvaluator    : Evaluating criterion enhanced_user_input with LLM, prompt: You are an evaluator performing the following evaluation task:

Evaluation Criterion Description: 改写用户输入，使其更加清晰、完整

Working Mechanism:
你是一个用户输入优化专家。请根据用户输入，改写并完善需求。改写要求：1. 补全隐含的约束条件2. 明确输入输出格式3. 保持原始意图不变4. 直接输出改写后的内容，不要添加任何解释

Output your response in the following format:

RESULT: (your evaluation result)
(No reasoning required for this evaluation)

Context:
- userInput: null

Your evaluation result:

2026-01-22T12:52:18.138+08:00 DEBUG --- [pool-2-thread-3] c.a.a.a.p.v.ActionVectorizationService   : ActionVectorizationService#hybridSearch - actionId=erp:product-unit:create, rawScore=1.3716414, maxScore=1.3716414, normalizedScore=0.95
2026-01-22T12:52:18.145+08:00  WARN --- [pool-2-thread-3] c.a.a.a.p.p.c.ActionEntityConverter      : ActionEntityConverter#parseActionType - reason=unknown action type, type=INTERNAL
2026-01-22T12:52:18.154+08:00  WARN --- [pool-2-thread-3] c.a.a.a.p.p.c.ActionEntityConverter      : ActionEntityConverter#parseActionType - reason=unknown action type, type=INTERNAL
2026-01-22T12:52:18.154+08:00  INFO --- [pool-2-thread-3] c.a.a.a.p.i.SemanticActionProvider       : SemanticActionProvider#matchActions - reason=matching completed, userInput=我要请假, matchCount=1
2026-01-22T12:52:18.158+08:00  INFO --- [pool-2-thread-3] c.a.a.a.p.i.ActionIntentEvaluator        : ActionIntentEvaluator#buildCandidatesResult - reason=candidates built for LLM verification, userInput=我要请假, candidateCount=1
2026-01-22T12:52:18.158+08:00  INFO --- [pool-2-thread-3] c.a.a.a.e.e.CriterionEvaluationAction    : Criterion action_intent_match completed with result: {"candidates":[{"matchType":"KEYWORD_EXACT","confidence":0.95,"actionId":"oa:leave:request","description":"向OA系统提交请假申请，支持事假、病假、年假、调休","parameters":[{"name":"start_date","description":"格式: yyyy-MM-dd HH:mm","label":"开始日期","type":"STRING","required":true},{"name":"end_date","description":"格式: yyyy-MM-dd HH:mm","label":"结束日期","type":"STRING","required":true},{"name":"types","description":"1=事假, 2=病假, 3=年假, 4=调休","label":"请假类型","type":"INTEGER","required":true},{"name":"reason","description":"请详细说明请假原因","label":"请假理由","type":"STRING","required":true},{"name":"check_uids","description":"审批人的OA用户ID","label":"审批人ID","type":"STRING","required":true}],"actionName":"提交OA请假申请"}],"userInput":"我要请假","candidateCount":1,"status":"CANDIDATES"}
2026-01-22T12:52:18.573+08:00  INFO --- [pool-2-thread-2] c.a.a.a.e.e.CriterionEvaluationAction    : Criterion is_fuzzy completed with result: 模糊
2026-01-22T12:52:18.798+08:00  INFO --- [pool-2-thread-1] c.a.a.a.e.e.CriterionEvaluationAction    : Criterion enhanced_user_input completed with result: 请提供具体的用户输入内容，以便进行优化改写。
2026-01-22T12:52:18.912+08:00  INFO --- [action-thread-1] c.a.a.a.e.e.CriterionEvaluationAction    : Executing criterion: react_experience_retrieval
2026-01-22T12:52:18.912+08:00  INFO --- [action-thread-2] c.a.a.a.e.e.CriterionEvaluationAction    : Executing criterion: action_intent_llm_verify
2026-01-22T12:52:18.912+08:00 DEBUG --- [action-thread-1] c.a.a.a.e.e.CriterionEvaluationAction    : Batching not enabled for criterion: react_experience_retrieval
2026-01-22T12:52:18.912+08:00 DEBUG --- [action-thread-2] c.a.a.a.e.e.CriterionEvaluationAction    : Batching not enabled for criterion: action_intent_llm_verify
2026-01-22T12:52:18.913+08:00 DEBUG --- [action-thread-2] c.a.a.a.e.evaluator.LLMBasedEvaluator    : Evaluating criterion action_intent_llm_verify with LLM, prompt: 你是一个意图识别和参数提取专家。请根据用户输入和候选动作列表：
1. 判断用户最可能想要执行的动作
2. 从用户输入中提取动作所需的参数
3. 检查是否有缺失的必填参数

## 用户输入
我要请假

## 候选动作列表（包含参数定义）
{"candidates":[{"matchType":"KEYWORD_EXACT","confidence":0.95,"actionId":"oa:leave:request","description":"向OA系统提交请假申请，支持事假、病假、年假、调休","parameters":[{"name":"start_date","description":"格式: yyyy-MM-dd HH:mm","label":"开始日期","type":"STRING","required":true},{"name":"end_date","description":"格式: yyyy-MM-dd HH:mm","label":"结束日期","type":"STRING","required":true},{"name":"types","description":"1=事假, 2=病假, 3=年假, 4=调休","label":"请假类型","type":"INTEGER","required":true},{"name":"reason","description":"请详细说明请假原因","label":"请假理由","type":"STRING","required":true},{"name":"check_uids","description":"审批人的OA用户ID","label":"审批人ID","type":"STRING","required":true}],"actionName":"提交OA请假申请"}],"userInput":"我要请假","candidateCount":1,"status":"CANDIDATES"}

## 处理要求
1. 仔细分析用户输入的语义和意图
2. 选择最匹配的动作，如果没有合适的动作则返回 NO_MATCH
3. 如果选中了动作，从用户输入中提取该动作需要的参数值
4. 检查必填参数（required=true）是否都已提取到，如果有缺失则生成追问问题

## 返回格式（严格 JSON）
如果匹配到动作：
RESULT: {
    "actionId": "选中的动作ID",
    "actionName": "动作名称",
    "confidence": 0.95,
    "reason": "判断理由",
    "extractedParams": {"参数名": "提取到的值", ...},
    "missingParams": ["缺失的必填参数名", ...],
    "nextQuestion": "如果有缺失参数，生成追问问题，否则为null"
}

如果未匹配到动作：
RESULT: {"actionId": "NO_MATCH", "confidence": 0.95, "reason": "判断理由"}

2026-01-22T12:52:18.923+08:00 DEBUG --- [action-thread-1] .s.p.e.p.ElasticsearchExperienceProvider : ElasticsearchExperienceProvider#query - reason=query completed, type=COMMON, text=null, count=0
2026-01-22T12:52:18.935+08:00 DEBUG --- [action-thread-1] .s.p.e.p.ElasticsearchExperienceProvider : ElasticsearchExperienceProvider#query - reason=query completed, type=REACT, text=null, count=0
2026-01-22T12:52:18.935+08:00  INFO --- [action-thread-1] .e.e.ExperienceRetrievalEvaluatorFactory : ExperienceRetrievalEvaluatorFactory#react_experience_evaluator - reason=未检索到经验
2026-01-22T12:52:18.935+08:00  INFO --- [action-thread-1] c.a.a.a.e.e.CriterionEvaluationAction    : Criterion react_experience_retrieval completed with result: 
2026-01-22T12:52:28.798+08:00  WARN --- [action-thread-2] c.a.a.a.e.evaluator.LLMBasedEvaluator    : Failed to parse JSON from response: 根据用户输入“我要请假”，可以判断用户的意图是想要提交一个请假申请。候选动作列表中有一个与请假相关的动作：“提交OA请假申请”。因此，我们选择这个动作为最可能的动作。

但是，从用户提供的信息来看，并没有直接提供开始日期、结束日期、请假类型、请假理由以及审批人ID这些必填参数的具体值。这意味着我们需要进一步向用户询问以获取这些必要信息。

基于以上分析，返回结果如下：

```json
{
    "actionId": "oa:leave:request",
    "actionName": "提交OA请假申请",
    "confidence": 0.95,
    "reason": "用户明确表达了想要请假的意愿，这与候选动作中的'提交OA请假申请'相匹配。",
    "extractedParams": {},
    "missingParams": ["start_date", "end_date", "types", "reason", "check_uids"],
    "nextQuestion": "请告诉我您的请假开始日期（格式：yyyy-MM-dd HH:mm）、结束日期（格式：yyyy-MM-dd HH:mm）、请假类型（1=事假, 2=病假, 3=年假, 4=调休）、请假理由及审批人的OA用户ID。"
}
```

这里，`nextQuestion`字段包含了对所有缺失参数的一次性请求，以便于用户能够一次性提供完整的信息。如果希望更细致地逐步引导用户提供信息，则可以考虑设计一系列更加具体的追问问题。
2026-01-22T12:52:28.799+08:00  INFO --- [action-thread-2] c.a.a.a.e.e.CriterionEvaluationAction    : Criterion action_intent_llm_verify completed with result: 根据用户输入“我要请假”，可以判断用户的意图是想要提交一个请假申请。候选动作列表中有一个与请假相关的动作：“提交OA请假申请”。因此，我们选择这个动作为最可能的动作。

但是，从用户提供的信息来看，并没有直接提供开始日期、结束日期、请假类型、请假理由以及审批人ID这些必填参数的具体值。这意味着我们需要进一步向用户询问以获取这些必要信息。

基于以上分析，返回结果如下：

```json
{
    "actionId": "oa:leave:request",
    "actionName": "提交OA请假申请",
    "confidence": 0.95,
    "reason": "用户明确表达了想要请假的意愿，这与候选动作中的'提交OA请假申请'相匹配。",
    "extractedParams": {},
    "missingParams": ["start_date", "end_date", "types", "reason", "check_uids"],
    "nextQuestion": "请告诉我您的请假开始日期（格式：yyyy-MM-dd HH:mm）、结束日期（格式：yyyy-MM-dd HH:mm）、请假类型（1=事假, 2=病假, 3=年假, 4=调休）、请假理由及审批人的OA用户ID。"
}
```

这里，`nextQuestion`字段包含了对所有缺失参数的一次性请求，以便于用户能够一次性提供完整的信息。如果希望更细致地逐步引导用户提供信息，则可以考虑设计一系列更加具体的追问问题。
2026-01-22T12:52:28.852+08:00 DEBUG --- [pool-3-thread-1] c.a.a.a.e.e.GraphBasedEvaluationExecutor : Collected result for criterion 'enhanced_user_input': status=SUCCESS, value=请提供具体的用户输入内容，以便进行优化改写。
2026-01-22T12:52:28.852+08:00 DEBUG --- [pool-3-thread-1] c.a.a.a.e.e.GraphBasedEvaluationExecutor : Collected result for criterion 'is_fuzzy': status=SUCCESS, value=模糊
2026-01-22T12:52:28.852+08:00 DEBUG --- [pool-3-thread-1] c.a.a.a.e.e.GraphBasedEvaluationExecutor : Collected result for criterion 'react_experience_retrieval': status=SUCCESS, value=
2026-01-22T12:52:28.852+08:00 DEBUG --- [pool-3-thread-1] c.a.a.a.e.e.GraphBasedEvaluationExecutor : Collected result for criterion 'action_intent_match': status=SUCCESS, value={"candidates":[{"matchType":"KEYWORD_EXACT","confidence":0.95,"actionId":"oa:leave:request","description":"向OA系统提交请假申请，支持事假、病假、年假、调休","parameters":[{"name":"start_date","description":"格式: yyyy-MM-dd HH:mm","label":"开始日期","type":"STRING","required":true},{"name":"end_date","description":"格式: yyyy-MM-dd HH:mm","label":"结束日期","type":"STRING","required":true},{"name":"types","description":"1=事假, 2=病假, 3=年假, 4=调休","label":"请假类型","type":"INTEGER","required":true},{"name":"reason","description":"请详细说明请假原因","label":"请假理由","type":"STRING","required":true},{"name":"check_uids","description":"审批人的OA用户ID","label":"审批人ID","type":"STRING","required":true}],"actionName":"提交OA请假申请"}],"userInput":"我要请假","candidateCount":1,"status":"CANDIDATES"}
2026-01-22T12:52:28.852+08:00 DEBUG --- [pool-3-thread-1] c.a.a.a.e.e.GraphBasedEvaluationExecutor : Collected result for criterion 'action_intent_llm_verify': status=SUCCESS, value=根据用户输入“我要请假”，可以判断用户的意图是想要提交一个请假申请。候选动作列表中有一个与请假相关的动作：“提交OA请假申请”。因此，我们选择这个动作为最可能的动作。

但是，从用户提供的信息来看，并没有直接提供开始日期、结束日期、请假类型、请假理由以及审批人ID这些必填参数的具体值。这意味着我们需要进一步向用户询问以获取这些必要信息。

基于以上分析，返回结果如下：

```json
{
    "actionId": "oa:leave:request",
    "actionName": "提交OA请假申请",
    "confidence": 0.95,
    "reason": "用户明确表达了想要请假的意愿，这与候选动作中的'提交OA请假申请'相匹配。",
    "extractedParams": {},
    "missingParams": ["start_date", "end_date", "types", "reason", "check_uids"],
    "nextQuestion": "请告诉我您的请假开始日期（格式：yyyy-MM-dd HH:mm）、结束日期（格式：yyyy-MM-dd HH:mm）、请假类型（1=事假, 2=病假, 3=年假, 4=调休）、请假理由及审批人的OA用户ID。"
}
```

这里，`nextQuestion`字段包含了对所有缺失参数的一次性请求，以便于用户能够一次性提供完整的信息。如果希望更细致地逐步引导用户提供信息，则可以考虑设计一系列更加具体的追问问题。
2026-01-22T12:52:28.852+08:00  INFO --- [pool-3-thread-1] c.a.a.a.e.e.GraphBasedEvaluationExecutor : Collected 5 criterion results from final state
2026-01-22T12:52:28.852+08:00  INFO --- [pool-3-thread-1] c.a.a.a.e.DefaultEvaluationService       : Evaluation completed for suite: React Phase Evaluation Suite
2026-01-22T12:52:28.852+08:00  INFO --- [pool-3-thread-1] c.a.a.a.e.e.h.ModelInputEvaluationHook   : ModelInputEvaluationHook#beforeModel - reason=评估完成, phase=REACT
2026-01-22T12:52:28.852+08:00 DEBUG --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#attachInputRoutingResult - reason=写入输入路由评估结果
2026-01-22T12:52:28.852+08:00  INFO --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#appendEvaluationResultToMessages - reason=开始处理评估结果注入
2026-01-22T12:52:28.852+08:00  INFO --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#appendEvaluationResultToMessages - reason=已解析历史评估结果, 历史条目数=0
2026-01-22T12:52:28.852+08:00 DEBUG --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#appendEvaluationResultToMessages - reason=检查criterion metadata, criterion=action_intent_match, metadata=[topActionId, topConfidence, needsLLMVerification, candidateCount]
2026-01-22T12:52:28.852+08:00 DEBUG --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#appendEvaluationResultToMessages - reason=添加无ref-id的criterion, criterion=action_intent_match
2026-01-22T12:52:28.852+08:00 DEBUG --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#appendEvaluationResultToMessages - reason=检查criterion metadata, criterion=react_experience_retrieval, metadata=[is_empty]
2026-01-22T12:52:28.852+08:00 DEBUG --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#appendEvaluationResultToMessages - reason=跳过空结果的criterion, criterion=react_experience_retrieval
2026-01-22T12:52:28.852+08:00 DEBUG --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#appendEvaluationResultToMessages - reason=检查criterion metadata, criterion=enhanced_user_input, metadata=[]
2026-01-22T12:52:28.852+08:00 DEBUG --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#appendEvaluationResultToMessages - reason=添加无ref-id的criterion, criterion=enhanced_user_input
2026-01-22T12:52:28.852+08:00 DEBUG --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#appendEvaluationResultToMessages - reason=检查criterion metadata, criterion=is_fuzzy, metadata=[]
2026-01-22T12:52:28.852+08:00 DEBUG --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#appendEvaluationResultToMessages - reason=添加无ref-id的criterion, criterion=is_fuzzy
2026-01-22T12:52:28.852+08:00 DEBUG --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#appendEvaluationResultToMessages - reason=检查criterion metadata, criterion=action_intent_llm_verify, metadata=[]
2026-01-22T12:52:28.852+08:00 DEBUG --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#appendEvaluationResultToMessages - reason=添加无ref-id的criterion, criterion=action_intent_llm_verify
2026-01-22T12:52:28.852+08:00  INFO --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#appendEvaluationResultToMessages - reason=筛选出新评估条目, 新条目数=4
2026-01-22T12:52:28.869+08:00  INFO --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#appendEvaluationResultToMessages - reason=已创建增量评估消息对, 新消息数=2
2026-01-22T12:52:28.869+08:00  INFO --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#attachResult - reason=评估结果已写入, path=evaluation.inputRouting, suiteId=react-phase-suite
2026-01-22T12:52:28.902+08:00  INFO --- [pool-3-thread-1] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#beforeModel - reason=开始处理评估结果prompt注入, phase=REACT
2026-01-22T12:52:28.902+08:00 DEBUG --- [pool-3-thread-1] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#findLatestEvaluationResult - reason=找到评估结果, index=2
2026-01-22T12:52:28.902+08:00 DEBUG --- [pool-3-thread-1] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#beforeModel - reason=找到评估结果XML, phase=REACT, xmlLength=1788
2026-01-22T12:52:28.902+08:00 DEBUG --- [pool-3-thread-1] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#parseEvaluationXml - reason=解析到criterion, name=enhanced_user_input, valueLength=22
2026-01-22T12:52:28.902+08:00 DEBUG --- [pool-3-thread-1] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#parseEvaluationXml - reason=解析到criterion, name=action_intent_match, valueLength=737
2026-01-22T12:52:28.902+08:00 DEBUG --- [pool-3-thread-1] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#parseEvaluationXml - reason=解析到criterion, name=is_fuzzy, valueLength=2
2026-01-22T12:52:28.902+08:00 DEBUG --- [pool-3-thread-1] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#parseEvaluationXml - reason=解析到criterion, name=action_intent_llm_verify, valueLength=679
2026-01-22T12:52:28.902+08:00 DEBUG --- [pool-3-thread-1] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#beforeModel - reason=解析评估结果, phase=REACT, results={action_intent_match={"candidates":[{"matchType":"KEYWORD_EXACT","confidence":0.95,"actionId":"oa:leave:request","description":"向OA系统提交请假申请，支持事假、病假、年假、调休","parameters":[{"name":"start_date","description":"格式: yyyy-MM-dd HH:mm","label":"开始日期","type":"STRING","required":true},{"name":"end_date","description":"格式: yyyy-MM-dd HH:mm","label":"结束日期","type":"STRING","required":true},{"name":"types","description":"1=事假, 2=病假, 3=年假, 4=调休","label":"请假类型","type":"INTEGER","required":true},{"name":"reason","description":"请详细说明请假原因","label":"请假理由","type":"STRING","required":true},{"name":"check_uids","description":"审批人的OA用户ID","label":"审批人ID","type":"STRING","required":true}],"actionName":"提交OA请假申请"}],"userInput":"我要请假","candidateCount":1,"status":"CANDIDATES"}, enhanced_user_input=请提供具体的用户输入内容，以便进行优化改写。, is_fuzzy=模糊, action_intent_llm_verify=根据用户输入“我要请假”，可以判断用户的意图是想要提交一个请假申请。候选动作列表中有一个与请假相关的动作：“提交OA请假申请”。因此，我们选择这个动作为最可能的动作。

但是，从用户提供的信息来看，并没有直接提供开始日期、结束日期、请假类型、请假理由以及审批人ID这些必填参数的具体值。这意味着我们需要进一步向用户询问以获取这些必要信息。

基于以上分析，返回结果如下：

```json
{
    "actionId": "oa:leave:request",
    "actionName": "提交OA请假申请",
    "confidence": 0.95,
    "reason": "用户明确表达了想要请假的意愿，这与候选动作中的'提交OA请假申请'相匹配。",
    "extractedParams": {},
    "missingParams": ["start_date", "end_date", "types", "reason", "check_uids"],
    "nextQuestion": "请告诉我您的请假开始日期（格式：yyyy-MM-dd HH:mm）、结束日期（格式：yyyy-MM-dd HH:mm）、请假类型（1=事假, 2=病假, 3=年假, 4=调休）、请假理由及审批人的OA用户ID。"
}
```

这里，`nextQuestion`字段包含了对所有缺失参数的一次性请求，以便于用户能够一次性提供完整的信息。如果希望更细致地逐步引导用户提供信息，则可以考虑设计一系列更加具体的追问问题。}
2026-01-22T12:52:28.902+08:00  INFO --- [pool-3-thread-1] a.a.s.c.ReactPhasePromptGuidanceProvider : ReactPhasePromptGuidanceProvider#generateGuidance - reason=生成React阶段指导, is_fuzzy=模糊
2026-01-22T12:52:28.902+08:00 DEBUG --- [pool-3-thread-1] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#generatePromptGuidance - reason=Provider生成了指导, provider=ReactPhasePromptGuidanceProvider, guidanceLength=189
2026-01-22T12:52:28.909+08:00 DEBUG --- [pool-3-thread-1] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#injectPromptGuidanceToMessages - reason=已创建prompt指导消息对
2026-01-22T12:52:28.909+08:00  INFO --- [pool-3-thread-1] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#beforeModel - reason=已注入评估结果prompt指导, phase=REACT, guidanceLength=189
2026-01-22T12:52:28.937+08:00  INFO --- [pool-3-thread-1] c.a.a.a.a.s.CodeactSubAgentInterceptor   : CodeactSubAgentInterceptor#interceptModel 拦截器被调用
2026-01-22T12:52:28.937+08:00  INFO --- [pool-3-thread-1] c.a.a.a.a.s.CodeactSubAgentInterceptor   : CodeactSubAgentInterceptor#interceptModel 追加拦截器提示词到原有系统提示词
2026-01-22T12:52:28.937+08:00  INFO --- [pool-3-thread-1] c.a.a.a.a.s.CodeactSubAgentInterceptor   : CodeactSubAgentInterceptor#interceptModel 系统提示词已增强，继续调用链
2026-01-22T12:52:32.300+08:00 ERROR --- [nio-8080-exec-7] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] threw exception

org.springframework.security.authorization.AuthorizationDeniedException: Access Denied
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:99)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:91)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$4(HandlerMappingIntrospector.java:267)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:612)
	at org.apache.catalina.core.ApplicationDispatcher.doDispatch(ApplicationDispatcher.java:540)
	at org.apache.catalina.core.ApplicationDispatcher.dispatch(ApplicationDispatcher.java:511)
	at org.apache.catalina.core.AsyncContextImpl$AsyncRunnable.run(AsyncContextImpl.java:599)
	at org.apache.catalina.core.AsyncContextImpl.doInternalDispatch(AsyncContextImpl.java:342)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.asyncDispatch(CoyoteAdapter.java:239)
	at org.apache.coyote.AbstractProcessor.dispatch(AbstractProcessor.java:243)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:57)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)

2026-01-22T12:52:32.300+08:00 ERROR --- [nio-8080-exec-7] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Unable to handle the Spring Security Exception because the response is already committed.] with root cause

org.springframework.security.authorization.AuthorizationDeniedException: Access Denied
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:99)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:91)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$4(HandlerMappingIntrospector.java:267)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:612)
	at org.apache.catalina.core.ApplicationDispatcher.doDispatch(ApplicationDispatcher.java:540)
	at org.apache.catalina.core.ApplicationDispatcher.dispatch(ApplicationDispatcher.java:511)
	at org.apache.catalina.core.AsyncContextImpl$AsyncRunnable.run(AsyncContextImpl.java:599)
	at org.apache.catalina.core.AsyncContextImpl.doInternalDispatch(AsyncContextImpl.java:342)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.asyncDispatch(CoyoteAdapter.java:239)
	at org.apache.coyote.AbstractProcessor.dispatch(AbstractProcessor.java:243)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:57)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)

2026-01-22T12:52:32.332+08:00 ERROR --- [nio-8080-exec-7] s.e.ErrorMvcAutoConfiguration$StaticView : Cannot render error page for request [null] as the response has already been committed. As a result, the response may have the wrong status code.
2026-01-22T12:52:38.674+08:00 DEBUG --- [nio-8080-exec-8] c.a.a.a.s.a.s.JwtAuthenticationFilter    : JwtAuthenticationFilter#doFilterInternal - 设置用户认证: username=admin, roles=[ADMIN, USER]
2026-01-22T12:52:38.676+08:00  INFO --- [nio-8080-exec-8] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#loadAgent 加载 agent: research_agent
2026-01-22T12:52:38.676+08:00  INFO --- [nio-8080-exec-8] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#loadAgent 成功加载 agent: research_agent
2026-01-22T12:52:38.703+08:00 DEBUG --- [nio-8080-exec-8] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#beforeAgent - reason=checking unified intent
2026-01-22T12:52:38.703+08:00 DEBUG --- [nio-8080-exec-8] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#get - reason=session not found, sessionId=513368a1-c098-425d-a9a5-e955b9626743
2026-01-22T12:52:38.703+08:00 DEBUG --- [nio-8080-exec-8] c.a.a.a.p.i.SemanticActionProvider       : SemanticActionProvider#matchActions - reason=matching actions, userInput=2026-1-22 2026-1-23 类型 事假 理由 aa 审批人 25明天 类型 事假 理由 aa 审批人 25
2026-01-22T12:52:39.029+08:00 DEBUG --- [nio-8080-exec-8] c.a.a.a.p.v.ActionVectorizationService   : ActionVectorizationService#hybridSearch - actionId=erp:product-unit:create, rawScore=1.3361491, maxScore=1.3361491, normalizedScore=0.95
2026-01-22T12:52:39.036+08:00  WARN --- [nio-8080-exec-8] c.a.a.a.p.p.c.ActionEntityConverter      : ActionEntityConverter#parseActionType - reason=unknown action type, type=INTERNAL
2026-01-22T12:52:39.036+08:00  INFO --- [nio-8080-exec-8] c.a.a.a.p.i.SemanticActionProvider       : SemanticActionProvider#matchActions - reason=matching completed, userInput=2026-1-22 2026-1-23 类型 事假 理由 aa 审批人 25明天 类型 事假 理由 aa 审批人 25, matchCount=0
2026-01-22T12:52:39.036+08:00 DEBUG --- [nio-8080-exec-8] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#beforeAgent - reason=semantic match: no match
2026-01-22T12:52:39.057+08:00  INFO --- [nio-8080-exec-8] c.a.a.a.e.e.h.ModelInputEvaluationHook   : ModelInputEvaluationHook#beforeModel - reason=开始模型输入评估, phase=REACT
2026-01-22T12:52:39.057+08:00 DEBUG --- [nio-8080-exec-8] .a.e.e.c.CodeactEvaluationContextFactory : CodeactEvaluationContextFactory#createInputRoutingContext - reason=开始构造输入路由评估上下文
2026-01-22T12:52:39.057+08:00  INFO --- [pool-3-thread-1] c.a.a.a.e.DefaultEvaluationService       : Starting evaluation for suite: React Phase Evaluation Suite
2026-01-22T12:52:39.079+08:00  INFO --- [pool-2-thread-1] c.a.a.a.e.e.CriterionEvaluationAction    : Executing criterion: enhanced_user_input
2026-01-22T12:52:39.079+08:00  INFO --- [pool-2-thread-2] c.a.a.a.e.e.CriterionEvaluationAction    : Executing criterion: is_fuzzy
2026-01-22T12:52:39.079+08:00 DEBUG --- [pool-2-thread-1] c.a.a.a.e.e.CriterionEvaluationAction    : Batching not enabled for criterion: enhanced_user_input
2026-01-22T12:52:39.079+08:00  INFO --- [pool-2-thread-3] c.a.a.a.e.e.CriterionEvaluationAction    : Executing criterion: action_intent_match
2026-01-22T12:52:39.079+08:00 DEBUG --- [pool-2-thread-2] c.a.a.a.e.e.CriterionEvaluationAction    : Batching not enabled for criterion: is_fuzzy
2026-01-22T12:52:39.079+08:00 DEBUG --- [pool-2-thread-3] c.a.a.a.e.e.CriterionEvaluationAction    : Batching not enabled for criterion: action_intent_match
2026-01-22T12:52:39.079+08:00 DEBUG --- [pool-2-thread-1] c.a.a.a.e.evaluator.LLMBasedEvaluator    : Evaluating criterion enhanced_user_input with LLM, prompt: You are an evaluator performing the following evaluation task:

Evaluation Criterion Description: 改写用户输入，使其更加清晰、完整

Working Mechanism:
你是一个用户输入优化专家。请根据用户输入，改写并完善需求。改写要求：1. 补全隐含的约束条件2. 明确输入输出格式3. 保持原始意图不变4. 直接输出改写后的内容，不要添加任何解释

Output your response in the following format:

RESULT: (your evaluation result)
(No reasoning required for this evaluation)

Context:
- userInput: null

Your evaluation result:

2026-01-22T12:52:39.079+08:00 DEBUG --- [pool-2-thread-3] c.a.a.a.p.i.SemanticActionProvider       : SemanticActionProvider#matchActions - reason=matching actions, userInput=2026-1-22 2026-1-23 类型 事假 理由 aa 审批人 25明天 类型 事假 理由 aa 审批人 25
2026-01-22T12:52:39.079+08:00 DEBUG --- [pool-2-thread-2] c.a.a.a.e.evaluator.LLMBasedEvaluator    : Evaluating criterion is_fuzzy with LLM, prompt: You are an evaluator performing the following evaluation task:

Evaluation Criterion Description: 判断用户输入是否模糊，是否需要向用户澄清

Working Mechanism:
你是一个用户意图清晰度判断专家。请判断用户输入是否明确。

【模糊】的特征：
- 没有具体指明要做什么操作
- 使用模糊词汇如'帮我看看'、'处理一下'
- 请求可能有多种理解方式
- 缺少必要的参数或信息

【清晰】的特征：
- 明确提到要查询、搜索、获取某个具体信息
- 提供了具体的查询关键词或目标
- 意图明确，执行路径清晰

请直接输出'模糊'或'清晰'，不要添加任何解释。

Output your response in the following format:

RESULT: (one of: 模糊, 清晰)
(No reasoning required for this evaluation)

Context:
- userInput: null

Your evaluation result:

2026-01-22T12:52:39.252+08:00 DEBUG --- [pool-2-thread-3] c.a.a.a.p.v.ActionVectorizationService   : ActionVectorizationService#hybridSearch - actionId=erp:product-unit:create, rawScore=1.3361491, maxScore=1.3361491, normalizedScore=0.95
2026-01-22T12:52:39.270+08:00  WARN --- [pool-2-thread-3] c.a.a.a.p.p.c.ActionEntityConverter      : ActionEntityConverter#parseActionType - reason=unknown action type, type=INTERNAL
2026-01-22T12:52:39.270+08:00  INFO --- [pool-2-thread-3] c.a.a.a.p.i.SemanticActionProvider       : SemanticActionProvider#matchActions - reason=matching completed, userInput=2026-1-22 2026-1-23 类型 事假 理由 aa 审批人 25明天 类型 事假 理由 aa 审批人 25, matchCount=0
2026-01-22T12:52:39.270+08:00 DEBUG --- [pool-2-thread-3] c.a.a.a.p.i.ActionIntentEvaluator        : ActionIntentEvaluator#evaluate - reason=no action matched, userInput=2026-1-22 2026-1-23 类型 事假 理由 aa 审批人 25明天 类型 事假 理由 aa 审批人 25
2026-01-22T12:52:39.270+08:00  INFO --- [pool-2-thread-3] c.a.a.a.e.e.CriterionEvaluationAction    : Criterion action_intent_match completed with result: NO_MATCH
2026-01-22T12:52:39.483+08:00  INFO --- [pool-2-thread-2] c.a.a.a.e.e.CriterionEvaluationAction    : Criterion is_fuzzy completed with result: 模糊
2026-01-22T12:52:40.592+08:00  INFO --- [pool-2-thread-1] c.a.a.a.e.e.CriterionEvaluationAction    : Criterion enhanced_user_input completed with result: 请提供具体的用户输入内容以便进行优化处理。
2026-01-22T12:52:40.652+08:00  INFO --- [action-thread-3] c.a.a.a.e.e.CriterionEvaluationAction    : Executing criterion: react_experience_retrieval
2026-01-22T12:52:40.652+08:00  INFO --- [action-thread-4] c.a.a.a.e.e.CriterionEvaluationAction    : Executing criterion: action_intent_llm_verify
2026-01-22T12:52:40.652+08:00 DEBUG --- [action-thread-3] c.a.a.a.e.e.CriterionEvaluationAction    : Batching not enabled for criterion: react_experience_retrieval
2026-01-22T12:52:40.652+08:00 DEBUG --- [action-thread-4] c.a.a.a.e.e.CriterionEvaluationAction    : Batching not enabled for criterion: action_intent_llm_verify
2026-01-22T12:52:40.653+08:00 DEBUG --- [action-thread-4] c.a.a.a.e.evaluator.LLMBasedEvaluator    : Evaluating criterion action_intent_llm_verify with LLM, prompt: 你是一个意图识别和参数提取专家。请根据用户输入和候选动作列表：
1. 判断用户最可能想要执行的动作
2. 从用户输入中提取动作所需的参数
3. 检查是否有缺失的必填参数

## 用户输入
2026-1-22 2026-1-23 类型 事假 理由 aa 审批人 25明天 类型 事假 理由 aa 审批人 25

## 候选动作列表（包含参数定义）
NO_MATCH

## 处理要求
1. 仔细分析用户输入的语义和意图
2. 选择最匹配的动作，如果没有合适的动作则返回 NO_MATCH
3. 如果选中了动作，从用户输入中提取该动作需要的参数值
4. 检查必填参数（required=true）是否都已提取到，如果有缺失则生成追问问题

## 返回格式（严格 JSON）
如果匹配到动作：
RESULT: {
    "actionId": "选中的动作ID",
    "actionName": "动作名称",
    "confidence": 0.95,
    "reason": "判断理由",
    "extractedParams": {"参数名": "提取到的值", ...},
    "missingParams": ["缺失的必填参数名", ...],
    "nextQuestion": "如果有缺失参数，生成追问问题，否则为null"
}

如果未匹配到动作：
RESULT: {"actionId": "NO_MATCH", "confidence": 0.95, "reason": "判断理由"}

2026-01-22T12:52:40.667+08:00 DEBUG --- [action-thread-3] .s.p.e.p.ElasticsearchExperienceProvider : ElasticsearchExperienceProvider#query - reason=query completed, type=COMMON, text=null, count=0
2026-01-22T12:52:40.670+08:00 DEBUG --- [action-thread-3] .s.p.e.p.ElasticsearchExperienceProvider : ElasticsearchExperienceProvider#query - reason=query completed, type=REACT, text=null, count=0
2026-01-22T12:52:40.670+08:00  INFO --- [action-thread-3] .e.e.ExperienceRetrievalEvaluatorFactory : ExperienceRetrievalEvaluatorFactory#react_experience_evaluator - reason=未检索到经验
2026-01-22T12:52:40.670+08:00  INFO --- [action-thread-3] c.a.a.a.e.e.CriterionEvaluationAction    : Criterion react_experience_retrieval completed with result: 
2026-01-22T12:52:53.410+08:00  INFO --- [action-thread-4] c.a.a.a.e.e.CriterionEvaluationAction    : Criterion action_intent_llm_verify completed with result: {actionId=NO_MATCH, confidence=0.95, reason=候选动作列表中没有与用户意图（可能是请假申请）相匹配的具体动作定义。, extractedParams={}, missingParams=[], nextQuestion=null}
2026-01-22T12:52:53.494+08:00 DEBUG --- [pool-3-thread-1] c.a.a.a.e.e.GraphBasedEvaluationExecutor : Collected result for criterion 'enhanced_user_input': status=SUCCESS, value=请提供具体的用户输入内容以便进行优化处理。
2026-01-22T12:52:53.494+08:00 DEBUG --- [pool-3-thread-1] c.a.a.a.e.e.GraphBasedEvaluationExecutor : Collected result for criterion 'is_fuzzy': status=SUCCESS, value=模糊
2026-01-22T12:52:53.494+08:00 DEBUG --- [pool-3-thread-1] c.a.a.a.e.e.GraphBasedEvaluationExecutor : Collected result for criterion 'react_experience_retrieval': status=SUCCESS, value=
2026-01-22T12:52:53.494+08:00 DEBUG --- [pool-3-thread-1] c.a.a.a.e.e.GraphBasedEvaluationExecutor : Collected result for criterion 'action_intent_match': status=SUCCESS, value=NO_MATCH
2026-01-22T12:52:53.494+08:00 DEBUG --- [pool-3-thread-1] c.a.a.a.e.e.GraphBasedEvaluationExecutor : Collected result for criterion 'action_intent_llm_verify': status=SUCCESS, value={reason=候选动作列表中没有与用户意图（可能是请假申请）相匹配的具体动作定义。, nextQuestion=null, @class=java.util.LinkedHashMap, confidence=0.95, actionId=NO_MATCH, missingParams=[], extractedParams={}}
2026-01-22T12:52:53.494+08:00  INFO --- [pool-3-thread-1] c.a.a.a.e.e.GraphBasedEvaluationExecutor : Collected 5 criterion results from final state
2026-01-22T12:52:53.494+08:00  INFO --- [pool-3-thread-1] c.a.a.a.e.DefaultEvaluationService       : Evaluation completed for suite: React Phase Evaluation Suite
2026-01-22T12:52:53.494+08:00  INFO --- [pool-3-thread-1] c.a.a.a.e.e.h.ModelInputEvaluationHook   : ModelInputEvaluationHook#beforeModel - reason=评估完成, phase=REACT
2026-01-22T12:52:53.494+08:00 DEBUG --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#attachInputRoutingResult - reason=写入输入路由评估结果
2026-01-22T12:52:53.494+08:00  INFO --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#appendEvaluationResultToMessages - reason=开始处理评估结果注入
2026-01-22T12:52:53.495+08:00  INFO --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#appendEvaluationResultToMessages - reason=已解析历史评估结果, 历史条目数=4
2026-01-22T12:52:53.495+08:00 DEBUG --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#appendEvaluationResultToMessages - reason=检查criterion metadata, criterion=action_intent_match, metadata=[]
2026-01-22T12:52:53.495+08:00 DEBUG --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#appendEvaluationResultToMessages - reason=跳过已存在的无ref-id criterion, criterion=action_intent_match
2026-01-22T12:52:53.496+08:00 DEBUG --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#appendEvaluationResultToMessages - reason=检查criterion metadata, criterion=react_experience_retrieval, metadata=[is_empty]
2026-01-22T12:52:53.496+08:00 DEBUG --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#appendEvaluationResultToMessages - reason=跳过空结果的criterion, criterion=react_experience_retrieval
2026-01-22T12:52:53.496+08:00 DEBUG --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#appendEvaluationResultToMessages - reason=检查criterion metadata, criterion=enhanced_user_input, metadata=[]
2026-01-22T12:52:53.496+08:00 DEBUG --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#appendEvaluationResultToMessages - reason=跳过已存在的无ref-id criterion, criterion=enhanced_user_input
2026-01-22T12:52:53.496+08:00 DEBUG --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#appendEvaluationResultToMessages - reason=检查criterion metadata, criterion=is_fuzzy, metadata=[]
2026-01-22T12:52:53.496+08:00 DEBUG --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#appendEvaluationResultToMessages - reason=跳过已存在的无ref-id criterion, criterion=is_fuzzy
2026-01-22T12:52:53.496+08:00 DEBUG --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#appendEvaluationResultToMessages - reason=检查criterion metadata, criterion=action_intent_llm_verify, metadata=[]
2026-01-22T12:52:53.496+08:00 DEBUG --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#appendEvaluationResultToMessages - reason=跳过已存在的无ref-id criterion, criterion=action_intent_llm_verify
2026-01-22T12:52:53.496+08:00  INFO --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#appendEvaluationResultToMessages - reason=没有新的评估内容需要注入
2026-01-22T12:52:53.496+08:00  INFO --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#attachResult - reason=评估结果已写入, path=evaluation.inputRouting, suiteId=react-phase-suite
2026-01-22T12:52:53.506+08:00 ERROR --- [pool-3-thread-1] c.a.c.a.a.s.c.ExecutionController        : Error occurred during agent stream execution

com.fasterxml.jackson.core.JsonParseException: Duplicate field '@class'
 at [Source: REDACTED (`StreamReadFeature.INCLUDE_SOURCE_IN_LOCATION` disabled); line: 1, column: 1787]
	at com.fasterxml.jackson.core.json.JsonReadContext._checkDup(JsonReadContext.java:250)
	at com.fasterxml.jackson.core.json.JsonReadContext.setCurrentName(JsonReadContext.java:244)
	at com.fasterxml.jackson.core.json.ReaderBasedJsonParser.nextFieldName(ReaderBasedJsonParser.java:940)
	at com.fasterxml.jackson.databind.deser.std.BaseNodeDeserializer._deserializeContainerNoRecursion(JsonNodeDeserializer.java:539)
	at com.fasterxml.jackson.databind.deser.std.JsonNodeDeserializer.deserialize(JsonNodeDeserializer.java:100)
	at com.fasterxml.jackson.databind.deser.std.JsonNodeDeserializer.deserialize(JsonNodeDeserializer.java:25)
	at com.fasterxml.jackson.databind.deser.DefaultDeserializationContext.readRootValue(DefaultDeserializationContext.java:342)
	at com.fasterxml.jackson.databind.ObjectMapper._readValue(ObjectMapper.java:4904)
	at com.fasterxml.jackson.databind.ObjectMapper.readTree(ObjectMapper.java:3146)
	at com.alibaba.cloud.ai.graph.serializer.plain_text.jackson.GenericMapDeserializer.deserialize(GenericMapDeserializer.java:42)
	at com.alibaba.cloud.ai.graph.serializer.plain_text.jackson.GenericMapDeserializer.deserialize(GenericMapDeserializer.java:30)
	at com.fasterxml.jackson.databind.deser.DefaultDeserializationContext.readRootValue(DefaultDeserializationContext.java:342)
	at com.fasterxml.jackson.databind.ObjectMapper._readMapAndClose(ObjectMapper.java:4931)
	at com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3868)
	at com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3851)
	at com.alibaba.cloud.ai.graph.serializer.plain_text.jackson.JacksonStateSerializer.readData(JacksonStateSerializer.java:106)
	at com.alibaba.cloud.ai.graph.serializer.StateSerializer.read(StateSerializer.java:60)
	at com.alibaba.cloud.ai.graph.serializer.StateSerializer.read(StateSerializer.java:31)
	at com.alibaba.cloud.ai.graph.serializer.Serializer.bytesToObject(Serializer.java:55)
	at com.alibaba.cloud.ai.graph.serializer.Serializer.readObject(Serializer.java:66)
	at com.alibaba.cloud.ai.graph.serializer.Serializer.cloneObject(Serializer.java:71)
	at com.alibaba.cloud.ai.graph.serializer.StateSerializer.cloneObject(StateSerializer.java:50)
	at com.alibaba.cloud.ai.graph.CompiledGraph.cloneState(CompiledGraph.java:407)
	at com.alibaba.cloud.ai.graph.GraphRunnerContext.cloneState(GraphRunnerContext.java:280)
	at com.alibaba.cloud.ai.graph.GraphRunnerContext.addCheckpoint(GraphRunnerContext.java:228)
	at com.alibaba.cloud.ai.graph.GraphRunnerContext.buildNodeOutputAndAddCheckpoint(GraphRunnerContext.java:428)
	at com.alibaba.cloud.ai.graph.executor.NodeExecutor.handleActionResult(NodeExecutor.java:178)
	at com.alibaba.cloud.ai.graph.executor.NodeExecutor.lambda$executeNode$1(NodeExecutor.java:126)
	at reactor.core.publisher.MonoFlatMapMany$FlatMapManyMain.onNext(MonoFlatMapMany.java:163)
	at reactor.core.publisher.MonoCompletionStage$MonoCompletionStageSubscription.apply(MonoCompletionStage.java:121)
	at reactor.core.publisher.MonoCompletionStage$MonoCompletionStageSubscription.apply(MonoCompletionStage.java:67)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire$$$capture(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run$$$capture(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)

2026-01-22T12:52:53.508+08:00 ERROR --- [nio-8080-exec-9] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] threw exception

org.springframework.security.authorization.AuthorizationDeniedException: Access Denied
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:99)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:91)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$4(HandlerMappingIntrospector.java:267)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:612)
	at org.apache.catalina.core.ApplicationDispatcher.doDispatch(ApplicationDispatcher.java:540)
	at org.apache.catalina.core.ApplicationDispatcher.dispatch(ApplicationDispatcher.java:511)
	at org.apache.catalina.core.AsyncContextImpl$AsyncRunnable.run(AsyncContextImpl.java:599)
	at org.apache.catalina.core.AsyncContextImpl.doInternalDispatch(AsyncContextImpl.java:342)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.asyncDispatch(CoyoteAdapter.java:239)
	at org.apache.coyote.AbstractProcessor.dispatch(AbstractProcessor.java:243)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:57)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)

2026-01-22T12:52:53.510+08:00 ERROR --- [nio-8080-exec-9] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Unable to handle the Spring Security Exception because the response is already committed.] with root cause

org.springframework.security.authorization.AuthorizationDeniedException: Access Denied
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:99)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:91)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$4(HandlerMappingIntrospector.java:267)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:612)
	at org.apache.catalina.core.ApplicationDispatcher.doDispatch(ApplicationDispatcher.java:540)
	at org.apache.catalina.core.ApplicationDispatcher.dispatch(ApplicationDispatcher.java:511)
	at org.apache.catalina.core.AsyncContextImpl$AsyncRunnable.run(AsyncContextImpl.java:599)
	at org.apache.catalina.core.AsyncContextImpl.doInternalDispatch(AsyncContextImpl.java:342)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.asyncDispatch(CoyoteAdapter.java:239)
	at org.apache.coyote.AbstractProcessor.dispatch(AbstractProcessor.java:243)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:57)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)

2026-01-22T12:52:53.513+08:00 ERROR --- [nio-8080-exec-9] s.e.ErrorMvcAutoConfiguration$StaticView : Cannot render error page for request [null] as the response has already been committed. As a result, the response may have the wrong status code.
2026-01-22T13:39:41.373+08:00  INFO --- [r-shutdown-hook] c.a.c.a.g.internal.node.ParallelNode     : Shutting down ParallelNode default executor
2026-01-22T13:39:41.374+08:00  INFO --- [action-thread-3] c.a.c.a.g.internal.node.ParallelNode     : ParallelNode default thread pool terminated
2026-01-22T13:39:41.375+08:00  INFO --- [r-shutdown-hook] c.a.c.a.g.internal.node.ParallelNode     : ParallelNode default executor shut down successfully
2026-01-22T13:39:41.378+08:00  INFO --- [ionShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2026-01-22T13:39:41.387+08:00  INFO --- [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2026-01-22T13:39:41.397+08:00  INFO --- [ionShutdownHook] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#shutdown - reason=shutdown completed
2026-01-22T13:39:41.398+08:00  INFO --- [ionShutdownHook] c.a.a.a.e.e.GraphBasedEvaluationExecutor : Shutting down ExecutorService
2026-01-22T13:39:41.401+08:00  INFO --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2026-01-22T13:39:41.408+08:00  INFO --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2026-01-22T13:39:51.423+08:00  INFO --- [           main] c.a.a.a.start.AssistantAgentApplication  : Starting AssistantAgentApplication using Java 21.0.9 with PID 23000 (D:\devfive\AssistantAgent\assistant-agent-start\target\classes started by zhou_ in D:\devfive\AssistantAgent)
2026-01-22T13:39:51.424+08:00 DEBUG --- [           main] c.a.a.a.start.AssistantAgentApplication  : Running with Spring Boot v3.4.8, Spring v6.2.9
2026-01-22T13:39:51.425+08:00  INFO --- [           main] c.a.a.a.start.AssistantAgentApplication  : No active profile set, falling back to 1 default profile: "default"
2026-01-22T13:39:53.205+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Elasticsearch repositories in DEFAULT mode.
2026-01-22T13:39:53.245+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 29 ms. Found 0 Elasticsearch repository interfaces.
2026-01-22T13:39:53.252+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Reactive Elasticsearch repositories in DEFAULT mode.
2026-01-22T13:39:53.261+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 6 ms. Found 0 Reactive Elasticsearch repository interfaces.
2026-01-22T13:39:53.412+08:00  WARN --- [           main] o.m.s.mapper.ClassPathMapperScanner      : Skipping MapperFactoryBean with name 'learningRecordMapper' and 'com.alibaba.assistant.agent.start.persistence.learning.mapper.LearningRecordMapper' mapperInterface. Bean already defined with the same name!
2026-01-22T13:39:53.413+08:00  WARN --- [           main] o.m.s.mapper.ClassPathMapperScanner      : Skipping MapperFactoryBean with name 'triggerDefinitionMapper' and 'com.alibaba.assistant.agent.start.persistence.trigger.mapper.TriggerDefinitionMapper' mapperInterface. Bean already defined with the same name!
2026-01-22T13:39:53.413+08:00  WARN --- [           main] o.m.s.mapper.ClassPathMapperScanner      : Skipping MapperFactoryBean with name 'triggerExecutionRecordMapper' and 'com.alibaba.assistant.agent.start.persistence.trigger.mapper.TriggerExecutionRecordMapper' mapperInterface. Bean already defined with the same name!
2026-01-22T13:39:53.415+08:00  WARN --- [           main] o.m.s.mapper.ClassPathMapperScanner      : Skipping MapperFactoryBean with name 'actionRegistryMapper' and 'com.alibaba.assistant.agent.planning.persistence.mapper.ActionRegistryMapper' mapperInterface. Bean already defined with the same name!
2026-01-22T13:39:55.916+08:00  INFO --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2026-01-22T13:39:55.975+08:00  INFO --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2026-01-22T13:39:55.975+08:00  INFO --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.43]
2026-01-22T13:39:56.127+08:00  INFO --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2026-01-22T13:39:56.128+08:00  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 4623 ms
2026-01-22T13:39:56.185+08:00  INFO --- [           main] c.a.a.a.s.a.security.JwtTokenProvider    : JwtTokenProvider#init - JWT 密钥已初始化
2026-01-22T13:39:56.298+08:00 DEBUG --- [           main] c.a.a.a.s.a.s.JwtAuthenticationFilter    : Filter 'jwtAuthenticationFilter' configured for use
2026-01-22T13:39:57.073+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#init - reason=search extension framework is enabled
2026-01-22T13:39:57.075+08:00  INFO --- [           main] c.a.a.a.s.s.MockBaiduWebSearchProvider   : MockBaiduWebSearchProvider#init - reason=使用简单模式初始化
2026-01-22T13:39:57.078+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#unifiedSearchCodeactTool - reason=创建统一搜索工具, providerCount=3
2026-01-22T13:39:57.220+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#init - reason=planning extension is enabled
2026-01-22T13:39:57.221+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#init - reason=ES configuration class loaded (elasticsearch.enabled=true)
2026-01-22T13:39:57.223+08:00  INFO --- [           main] toConfiguration$MybatisPlusConfiguration : MybatisPlusConfiguration#init - reason=MySQL configuration class loaded (mysql.enabled=true, MyBatisPlus present)
2026-01-22T13:39:57.280+08:00  INFO --- [           main] toConfiguration$MybatisPlusConfiguration : MybatisPlusConfiguration#actionEntityConverter - reason=creating entity converter
2026-01-22T13:39:57.282+08:00  INFO --- [           main] toConfiguration$MybatisPlusConfiguration : MybatisPlusConfiguration#mybatisPlusActionRepository - reason=ActionRegistryMapper found, creating MySQL repository
2026-01-22T13:39:58.610+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#actionVectorizationService - reason=creating ES vectorization service
2026-01-22T13:39:58.814+08:00  INFO --- [           main] c.a.a.a.p.v.ActionVectorizationService   : ActionVectorizationService#init - reason=ES index initialized on startup
2026-01-22T13:39:58.842+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#semanticActionProvider - reason=creating semantic action provider, semanticWeight=0.6, keywordWeight=0.4, matchThreshold=0.5
2026-01-22T13:39:58.850+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#defaultPlanGenerator - reason=creating default plan generator
2026-01-22T13:39:58.856+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#planActionCodeactTool - reason=creating plan_action tool
2026-01-22T13:39:58.858+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#queryStepExecutor - reason=creating query step executor
2026-01-22T13:39:58.862+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#inputStepExecutor - reason=creating input step executor
2026-01-22T13:39:58.866+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#executeStepExecutor - reason=creating execute step executor
2026-01-22T13:39:58.869+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#apiCallStepExecutor - reason=creating api call step executor
2026-01-22T13:39:58.895+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#validationStepExecutor - reason=creating validation step executor
2026-01-22T13:39:58.899+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#stepExecutorRegistry - reason=creating executor registry, executorCount=5
2026-01-22T13:39:58.903+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=QUERY, executorClass=QueryStepExecutor
2026-01-22T13:39:58.903+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=INPUT, executorClass=InputStepExecutor
2026-01-22T13:39:58.903+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=EXECUTE, executorClass=ExecuteStepExecutor
2026-01-22T13:39:58.903+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=API_CALL, executorClass=ApiCallStepExecutor
2026-01-22T13:39:58.903+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=VALIDATION, executorClass=ValidationStepExecutor
2026-01-22T13:39:58.904+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#defaultPlanExecutor - reason=creating default plan executor
2026-01-22T13:39:58.914+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#executeActionCodeactTool - reason=creating execute_action tool
2026-01-22T13:39:58.916+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#listActionsCodeactTool - reason=creating list_actions tool
2026-01-22T13:39:58.918+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#getActionDetailsCodeactTool - reason=creating get_action_details tool
2026-01-22T13:39:58.921+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#executeSystemActionCodeactTool - reason=creating execute_system_action tool
2026-01-22T13:39:59.086+08:00  INFO --- [           main] c.a.a.a.start.config.PersistenceConfig   : PersistenceConfig#init - reason=persistence configuration loaded
2026-01-22T13:39:59.088+08:00  INFO --- [           main] c.a.a.a.start.config.PersistenceConfig   : PersistenceConfig#elasticsearchExperienceProvider - reason=creating Elasticsearch experience provider (PRIMARY), indexName=experiences
2026-01-22T13:39:59.105+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#<init> - reason=初始化默认评估套件配置, experienceProviderAvailable=true
2026-01-22T13:39:59.108+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#evaluatorRegistry - reason=创建 EvaluatorRegistry Bean
2026-01-22T13:39:59.111+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'llm-based' of type LLMBasedEvaluator
2026-01-22T13:39:59.115+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'passthrough' of type RuleBasedEvaluator
2026-01-22T13:39:59.125+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'react_experience_evaluator' of type RuleBasedEvaluator
2026-01-22T13:39:59.126+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createDefaultEvaluatorRegistry - reason=注册 React 阶段经验检索评估器
2026-01-22T13:39:59.126+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'codeact_experience_evaluator' of type RuleBasedEvaluator
2026-01-22T13:39:59.126+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createDefaultEvaluatorRegistry - reason=注册 CodeAct 阶段经验检索评估器
2026-01-22T13:39:59.127+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#evaluationService - reason=创建默认 EvaluationService, sharedRegistryEvaluators=[llm-based, passthrough, codeact_experience_evaluator, react_experience_evaluator]
2026-01-22T13:39:59.134+08:00 DEBUG --- [           main] c.a.a.a.e.e.GraphBasedEvaluationExecutor : Created default ExecutorService for batch processing
2026-01-22T13:39:59.136+08:00  INFO --- [           main] .c.ExperienceEvaluationCriterionProvider : ExperienceEvaluationCriterionProvider#<init> - reason=初始化经验评估 Criterion 提供者
2026-01-22T13:39:59.140+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#structuredParamExtractor - reason=creating structured param extractor
2026-01-22T13:39:59.166+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#parameterValidator - reason=creating parameter validator
2026-01-22T13:39:59.168+08:00  INFO --- [           main] f.a.AutowiredAnnotationBeanPostProcessor : Inconsistent constructor declaration on bean with name 'actionExecutorFactory': single autowire-marked constructor flagged as optional - this constructor is effectively required since there is no default constructor to fall back to: public com.alibaba.assistant.agent.planning.executor.ActionExecutorFactory(java.util.List,com.alibaba.assistant.agent.planning.permission.interceptor.PermissionInterceptor)
2026-01-22T13:39:59.170+08:00  INFO --- [           main] .a.a.a.p.c.ParamOptionsAutoConfiguration : ParamOptionsAutoConfiguration - Parameter options module initialized
2026-01-22T13:39:59.172+08:00  INFO --- [           main] .a.a.a.p.c.ParamOptionsAutoConfiguration : ParamOptionsAutoConfiguration - Creating RestTemplate for HTTP handlers
2026-01-22T13:39:59.178+08:00  INFO --- [           main] c.a.a.a.planning.executor.HttpExecutor   : HttpExecutor#init - initialized
2026-01-22T13:39:59.180+08:00  INFO --- [           main] c.a.a.a.p.executor.InternalExecutor      : InternalExecutor#init - initialized
2026-01-22T13:39:59.199+08:00  INFO --- [           main] c.a.a.a.p.p.a.PermissionAdapterRegistry  : PermissionAdapterRegistry#registerAdapter - registered adapter: system=gov-platform, name=政务服务平台权限适配器
2026-01-22T13:39:59.200+08:00  INFO --- [           main] c.a.a.a.p.p.a.PermissionAdapterRegistry  : PermissionAdapterRegistry#registerAdapter - registered adapter: system=oa-system, name=OA办公系统权限适配器
2026-01-22T13:39:59.201+08:00  INFO --- [           main] c.a.a.a.p.p.a.PermissionAdapterRegistry  : PermissionAdapterRegistry initialized with 2 adapters: [gov-platform, oa-system]
2026-01-22T13:39:59.207+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U001, system=oa-system, externalUser=zhang.san@company.com
2026-01-22T13:39:59.208+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U001, system=gov-platform, externalUser=320102199001011234
2026-01-22T13:39:59.208+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U002, system=oa-system, externalUser=li.si@company.com
2026-01-22T13:39:59.209+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U003, system=oa-system, externalUser=wang.wu@company.com
2026-01-22T13:39:59.209+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U003, system=gov-platform, externalUser=leader_001
2026-01-22T13:39:59.209+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U004, system=gov-platform, externalUser=staff_001
2026-01-22T13:39:59.209+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U005, system=oa-system, externalUser=sun.qi@company.com
2026-01-22T13:39:59.209+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService initialized with demo data
2026-01-22T13:39:59.212+08:00  INFO --- [           main] c.a.a.a.p.c.PermissionAutoConfiguration  : PermissionAutoConfiguration - creating PermissionInterceptor
2026-01-22T13:39:59.214+08:00  INFO --- [           main] c.a.a.a.p.e.ActionExecutorFactory        : ActionExecutorFactory#init - initialized executors: INTERNAL(InternalExecutor), HTTP(HttpExecutor), DATA_AGENT(DataAgentExecutor), MCP(McpExecutor)
2026-01-22T13:39:59.215+08:00  INFO --- [           main] c.a.a.a.p.e.ActionExecutorFactory        : ActionExecutorFactory#init - permission interceptor enabled
2026-01-22T13:39:59.216+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#sessionProvider - reason=creating in-memory session provider
2026-01-22T13:39:59.218+08:00  INFO --- [           main] c.a.a.a.p.s.InMemorySessionProvider      : InMemorySessionProvider#init - initialized
2026-01-22T13:39:59.227+08:00  INFO --- [           main] c.a.a.a.p.s.ParamCollectionService       : ParamCollectionService#init - sessionProvider=InMemory
2026-01-22T13:39:59.234+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'action_intent_evaluator' of type ActionIntentEvaluator
2026-01-22T13:39:59.235+08:00  INFO --- [           main] p.i.PlanningIntegrationAutoConfiguration : PlanningIntegrationAutoConfiguration#actionIntentEvaluator - initialized and registered, paramCollection=true, llmVerification=true, maxCandidates=5
2026-01-22T13:39:59.236+08:00  INFO --- [           main] .p.i.PlanningEvaluationCriterionProvider : PlanningEvaluationCriterionProvider#init - initialized, llmVerificationEnabled=true
2026-01-22T13:39:59.236+08:00  INFO --- [           main] p.i.PlanningIntegrationAutoConfiguration : PlanningIntegrationAutoConfiguration#planningEvaluationCriterionProvider - registered planning evaluation criterion provider
2026-01-22T13:39:59.237+08:00  INFO --- [           main] .c.ExperienceEvaluationCriterionProvider : ExperienceEvaluationCriterionProvider#getReactPhaseCriteria - reason=提供 React 阶段评估 Criteria
2026-01-22T13:39:59.246+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createReactPhaseSuite - reason=添加自定义 Criterion, provider=ExperienceEvaluationCriterionProvider, count=3
2026-01-22T13:39:59.249+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createReactPhaseSuite - reason=添加自定义 Criterion, provider=PlanningEvaluationCriterionProvider, count=2
2026-01-22T13:39:59.257+08:00  INFO --- [           main] a.a.e.a.BatchAggregationStrategyRegistry : Registered batch aggregation strategy: ANY_TRUE
2026-01-22T13:39:59.259+08:00  INFO --- [           main] a.a.e.a.BatchAggregationStrategyRegistry : Registered batch aggregation strategy: ALL_TRUE
2026-01-22T13:39:59.434+08:00  INFO --- [           main] c.a.c.a.g.internal.node.ParallelNode     : Calculated core pool size: 32 (CPU cores: 16)
2026-01-22T13:39:59.434+08:00  INFO --- [           main] c.a.c.a.g.internal.node.ParallelNode     : Calculated maximum pool size: 64 (CPU cores: 16)
2026-01-22T13:39:59.434+08:00  INFO --- [           main] c.a.c.a.g.internal.node.ParallelNode     : Calculated queue capacity: 1000
2026-01-22T13:39:59.437+08:00  INFO --- [           main] c.a.a.a.e.DefaultEvaluationService       : Registered evaluation suite: react-phase-suite
2026-01-22T13:39:59.437+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#evaluationService - reason=注册 React Phase Suite, suiteId=react-phase-suite
2026-01-22T13:39:59.438+08:00  INFO --- [           main] .c.ExperienceEvaluationCriterionProvider : ExperienceEvaluationCriterionProvider#getCodeActPhaseCriteria - reason=提供 CodeAct 阶段评估 Criteria
2026-01-22T13:39:59.438+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createCodeActPhaseSuite - reason=添加自定义 Criterion, provider=ExperienceEvaluationCriterionProvider, count=3
2026-01-22T13:39:59.438+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createCodeActPhaseSuite - reason=添加自定义 Criterion, provider=PlanningEvaluationCriterionProvider, count=2
2026-01-22T13:39:59.438+08:00  INFO --- [           main] a.a.e.a.BatchAggregationStrategyRegistry : Registered batch aggregation strategy: ANY_TRUE
2026-01-22T13:39:59.438+08:00  INFO --- [           main] a.a.e.a.BatchAggregationStrategyRegistry : Registered batch aggregation strategy: ALL_TRUE
2026-01-22T13:39:59.439+08:00  INFO --- [           main] c.a.a.a.e.DefaultEvaluationService       : Registered evaluation suite: codeact-phase-suite
2026-01-22T13:39:59.439+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#evaluationService - reason=注册 CodeAct Phase Suite, suiteId=codeact-phase-suite
2026-01-22T13:39:59.441+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#codeactEvaluationContextFactory - reason=创建 EvaluationContextFactory
2026-01-22T13:39:59.442+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#codeactEvaluationResultAttacher - reason=创建 EvaluationResultAttacher
2026-01-22T13:39:59.452+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#reactPhaseEvaluationHooks - reason=创建 React Phase ModelInputEvaluationHook
2026-01-22T13:39:59.457+08:00  INFO --- [           main] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#<init> - reason=初始化, phase=REACT, providerCount=1
2026-01-22T13:39:59.457+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#reactPhaseEvaluationHooks - reason=创建 React Phase EvaluationPromptInjectionHook, providersCount=2
2026-01-22T13:39:59.459+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#codeactPhaseEvaluationHooks - reason=创建 CodeAct Phase ModelInputEvaluationHook
2026-01-22T13:39:59.459+08:00  INFO --- [           main] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#<init> - reason=初始化, phase=CODEACT, providerCount=1
2026-01-22T13:39:59.459+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#codeactPhaseEvaluationHooks - reason=创建 CodeAct Phase EvaluationPromptInjectionHook, providersCount=2
2026-01-22T13:39:59.462+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#keywordMatcher - reason=creating keyword matcher
2026-01-22T13:39:59.465+08:00  INFO --- [           main] .ParamCollectionSessionAutoConfiguration : ParamCollectionSessionAutoConfiguration#inMemoryParamCollectionSessionStore - reason=creating in-memory session store (Redis not available), ttl=PT30M
2026-01-22T13:39:59.465+08:00  WARN --- [           main] .ParamCollectionSessionAutoConfiguration : ParamCollectionSessionAutoConfiguration#inMemoryParamCollectionSessionStore - reason=WARNING: In-memory session store is not suitable for distributed environment!
2026-01-22T13:39:59.474+08:00  INFO --- [           main] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#<init> - reason=initialized, defaultTtl=PT30M
2026-01-22T13:39:59.474+08:00  WARN --- [           main] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#<init> - reason=WARNING: Using in-memory session store, not suitable for distributed environment!
2026-01-22T13:39:59.485+08:00  INFO --- [           main] iguration$UnifiedIntentHookConfiguration : UnifiedIntentHookConfiguration#unifiedIntentRecognitionHook - reason=creating unified intent hook, experienceProviderPresent=true, chatModelPresent=true, sessionStorePresent=true, directExecuteThreshold=0.95, hintThreshold=0.5
2026-01-22T13:39:59.807+08:00  INFO --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2026-01-22T13:40:00.370+08:00  INFO --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@7d6a9d5e
2026-01-22T13:40:00.376+08:00  INFO --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2026-01-22T13:40:00.710+08:00  WARN --- [           main] c.a.a.a.p.p.c.ActionEntityConverter      : ActionEntityConverter#parseActionType - reason=unknown action type, type=INTERNAL
2026-01-22T13:40:00.758+08:00 DEBUG --- [           main] c.a.a.a.planning.intent.KeywordMatcher   : KeywordMatcher#registerAction - actionId=oa:leave:request, keywords=57
2026-01-22T13:40:00.758+08:00  INFO --- [           main] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#initKeywordMatcher - reason=initialized, actionCount=1, keywordIndexSize=57
2026-01-22T13:40:00.763+08:00  INFO --- [           main] c.a.a.a.start.config.PersistenceConfig   : PersistenceConfig#elasticsearchExperienceRepository - reason=creating Elasticsearch experience repository (PRIMARY), indexName=experiences
2026-01-22T13:40:00.772+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#init - reason=reply module enabled
2026-01-22T13:40:00.775+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactToolFactory - reason=创建CodeactTool工厂, channels=1
2026-01-22T13:40:00.775+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#init - reason=工厂初始化完成, channels=1
2026-01-22T13:40:00.788+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=开始创建Reply工具
2026-01-22T13:40:00.800+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#createTools - reason=创建工具成功, toolName=send_success_message, channelCode=IDE_TEXT
2026-01-22T13:40:00.801+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#createTools - reason=创建工具成功, toolName=send_error_message, channelCode=IDE_TEXT
2026-01-22T13:40:00.801+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#createTools - reason=创建工具成功, toolName=send_notification, channelCode=IDE_TEXT
2026-01-22T13:40:00.801+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#createTools - reason=工具创建完成, totalCount=3
2026-01-22T13:40:00.801+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=Reply工具创建完成, count=3
2026-01-22T13:40:00.801+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=创建Reply工具, index=1, name=send_success_message, description=Send a success message to the IDE console
2026-01-22T13:40:00.801+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=创建Reply工具, index=2, name=send_error_message, description=Send an error message to the IDE console
2026-01-22T13:40:00.801+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=创建Reply工具, index=3, name=send_notification, description=Send a notification message
2026-01-22T13:40:00.803+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactToolFactory - reason=创建SearchCodeactTool工厂, providerCount=3
2026-01-22T13:40:00.840+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactToolFactory - reason=创建TriggerCodeactTool工厂
2026-01-22T13:40:00.841+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=开始创建Trigger工具
2026-01-22T13:40:00.844+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=创建SubscribeTriggerCodeactTool成功
2026-01-22T13:40:00.847+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=创建UnsubscribeTriggerCodeactTool成功
2026-01-22T13:40:00.850+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=创建ListTriggersCodeactTool成功
2026-01-22T13:40:00.852+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=创建GetTriggerDetailCodeactTool成功
2026-01-22T13:40:00.852+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=触发器工具创建完成, count=4
2026-01-22T13:40:00.852+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=Trigger工具创建完成, count=4
2026-01-22T13:40:00.852+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=创建Trigger工具, index=1, name=subscribe_trigger, description=创建并订阅一个新的触发器
2026-01-22T13:40:00.852+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=创建Trigger工具, index=2, name=unsubscribe_trigger, description=取消订阅并删除一个触发器
2026-01-22T13:40:00.852+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=创建Trigger工具, index=3, name=list_triggers, description=列出所有触发器
2026-01-22T13:40:00.852+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=创建Trigger工具, index=4, name=get_trigger_detail, description=获取指定触发器的详细信息
2026-01-22T13:40:00.865+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#planningCodeactTools - reason=creating planning tools list
2026-01-22T13:40:00.865+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#planningCodeactTools - reason=created planning tools, count=5
2026-01-22T13:40:00.881+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=创建 CodeactAgent
2026-01-22T13:40:00.881+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=配置 MemorySaver 以支持多轮对话上下文保持
2026-01-22T13:40:00.881+08:00  WARN --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=临时禁用 streaming 模式以排查循环问题
2026-01-22T13:40:00.881+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加UnifiedSearchCodeactTool
2026-01-22T13:40:00.886+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockBaiduWebSearchProvider, toolName=search_web
2026-01-22T13:40:00.887+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockKnowledgeStoreSearchProvider, toolName=search_knowledge
2026-01-22T13:40:00.889+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockProjectContextSearchProvider, toolName=search_project
2026-01-22T13:40:00.889+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=搜索工具创建完成, totalCount=3
2026-01-22T13:40:00.889+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加SearchCodeactTools, count=3
2026-01-22T13:40:00.889+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加ReplyCodeactTools, count=3
2026-01-22T13:40:00.889+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加TriggerCodeactTools, count=4
2026-01-22T13:40:00.889+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加PlanningCodeactTools, count=5
2026-01-22T13:40:00.889+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#createMcpDynamicTools - reason=Creating MCP dynamic tools
2026-01-22T13:40:00.896+08:00  INFO --- [           main] c.a.a.a.e.d.mcp.McpDynamicToolFactory    : McpDynamicToolFactory#createTools - reason=开始创建MCP动态工具
2026-01-22T13:40:00.902+08:00  INFO --- [           main] c.a.a.a.e.d.mcp.McpDynamicToolFactory    : McpDynamicToolFactory#createTools - reason=无可用的MCP工具
2026-01-22T13:40:00.902+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#createMcpDynamicTools - reason=MCP dynamic tools created, count=0
2026-01-22T13:40:00.902+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=Added MCP dynamic tools, count=0
2026-01-22T13:40:00.902+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#createHttpDynamicTools - reason=HTTP dynamic tools disabled by default
2026-01-22T13:40:00.902+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=合并后CodeactTool总数, count=16
2026-01-22T13:40:00.902+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=React阶段使用内置工具(write_code, execute_code, write_condition_code)
2026-01-22T13:40:00.902+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=注入 React Phase 评估 Hooks, count=2
2026-01-22T13:40:00.902+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=注入 CodeAct Phase 评估 Hooks, count=2
2026-01-22T13:40:00.902+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=已准备注入UnifiedIntentRecognitionHook
2026-01-22T13:40:00.905+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 开始构建CodeactAgent
2026-01-22T13:40:00.910+08:00  INFO --- [           main] .a.a.a.c.t.s.DefaultReturnSchemaRegistry : DefaultReturnSchemaRegistry#<init> - reason=创建新实例, hashCode=903227399
2026-01-22T13:40:00.912+08:00 DEBUG --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#<init> - reason=创建注册表, returnSchemaRegistry=DefaultReturnSchemaRegistry
2026-01-22T13:40:00.912+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=创建默认CodeactToolRegistry
2026-01-22T13:40:00.912+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=开始注册CodeactTool, count=16
2026-01-22T13:40:00.912+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=unified_search
2026-01-22T13:40:00.912+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=unified_search
2026-01-22T13:40:00.912+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=search_web
2026-01-22T13:40:00.912+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=search_web
2026-01-22T13:40:00.912+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=search_knowledge
2026-01-22T13:40:00.912+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=search_knowledge
2026-01-22T13:40:00.912+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=search_project
2026-01-22T13:40:00.912+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=search_project
2026-01-22T13:40:00.912+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=send_success_message
2026-01-22T13:40:00.912+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=send_success_message
2026-01-22T13:40:00.912+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=send_error_message
2026-01-22T13:40:00.912+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=send_error_message
2026-01-22T13:40:00.912+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=send_notification
2026-01-22T13:40:00.913+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=send_notification
2026-01-22T13:40:00.913+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=subscribe_trigger
2026-01-22T13:40:00.913+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=subscribe_trigger
2026-01-22T13:40:00.913+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=unsubscribe_trigger
2026-01-22T13:40:00.913+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=unsubscribe_trigger
2026-01-22T13:40:00.913+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=list_triggers
2026-01-22T13:40:00.913+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=list_triggers
2026-01-22T13:40:00.913+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=get_trigger_detail
2026-01-22T13:40:00.913+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=get_trigger_detail
2026-01-22T13:40:00.916+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=plan_action
2026-01-22T13:40:00.917+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=plan_action
2026-01-22T13:40:00.917+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=execute_action
2026-01-22T13:40:00.917+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=execute_action
2026-01-22T13:40:00.918+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=list_actions
2026-01-22T13:40:00.918+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=list_actions
2026-01-22T13:40:00.918+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=get_action_details
2026-01-22T13:40:00.918+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=get_action_details
2026-01-22T13:40:00.919+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=execute_system_action
2026-01-22T13:40:00.919+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=execute_system_action
2026-01-22T13:40:00.919+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册完成, count=16
2026-01-22T13:40:00.920+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 创建默认CodeContext: language=PYTHON
2026-01-22T13:40:00.924+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 创建默认RuntimeEnvironmentManager: language=PYTHON
2026-01-22T13:40:00.930+08:00 DEBUG --- [           main] c.a.a.a.c.e.bridge.AgentToolBridge       : AgentToolBridge#<init> 初始化: 注册了0个工具
2026-01-22T13:40:00.933+08:00 DEBUG --- [           main] c.a.a.a.c.executor.bridge.StateBridge    : StateBridge#<init> 初始化完成
2026-01-22T13:40:00.935+08:00  INFO --- [           main] c.a.a.a.core.executor.GraalCodeExecutor  : GraalCodeExecutor#<init> 初始化完成: language=PYTHON, allowIO=false, timeout=30000ms, executableTools=true, customBridgeFactory=false
2026-01-22T13:40:00.935+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#createCodeactSubAgentInterceptor 创建子Agent拦截器
2026-01-22T13:40:00.950+08:00  INFO --- [           main] c.a.a.a.a.subagent.CodeactSubAgent       : CodeactSubAgent#<init> 初始化: name=code-generator
2026-01-22T13:40:00.951+08:00  INFO --- [           main] c.a.a.a.a.subagent.CodeactSubAgent       : CodeactSubAgent#<init> 初始化: name=condition-code-generator
2026-01-22T13:40:00.951+08:00  INFO --- [           main] c.a.a.a.a.s.CodeactSubAgentInterceptor   : CodeactSubAgentInterceptor#<init> 创建默认代码生成子Agent
2026-01-22T13:40:01.488+08:00  INFO --- [           main] c.a.a.a.a.s.CodeactSubAgentInterceptor   : CodeactSubAgentInterceptor#<init> 初始化完成: subAgentCount=2
2026-01-22T13:40:01.490+08:00  INFO --- [           main] c.a.a.a.a.tools.ExecuteCodeTool          : ExecuteCodeTool#<init> 初始化完成
2026-01-22T13:40:01.494+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 拦截器分类完成: modelInterceptors=1, toolInterceptors=0
2026-01-22T13:40:01.494+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 从拦截器提取工具: interceptor=CodeactSubAgent, toolCount=2
2026-01-22T13:40:01.522+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 工具收集完成: interceptorTools=2, regularTools=3, total=6
2026-01-22T13:40:01.527+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 设置ModelInterceptors到LlmNode: count=1
2026-01-22T13:40:01.529+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build CodeactAgent构建完成
2026-01-22T13:40:01.529+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=开始罗列已注册的工具
2026-01-22T13:40:01.529+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct阶段工具数量, count=16
2026-01-22T13:40:01.529+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=1, name=send_success_message, description=Send a success message to the IDE console
2026-01-22T13:40:01.529+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=2, name=get_trigger_detail, description=获取指定触发器的详细信息
2026-01-22T13:40:01.529+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=3, name=get_action_details, description=获取指定动作的完整定义，包括参数、步骤等详细信息。
2026-01-22T13:40:01.529+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=4, name=search_project, description=搜索项目上下文信息，包括代码、配置、文档等
2026-01-22T13:40:01.529+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=5, name=subscribe_trigger, description=创建并订阅一个新的触发器
2026-01-22T13:40:01.529+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=6, name=search_knowledge, description=搜索团队知识库，包括FAQ、规范、最佳实践等
2026-01-22T13:40:01.529+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=7, name=unified_search, description=统一搜索工具，可同时搜索项目、知识库、Web等多个数据源
2026-01-22T13:40:01.529+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=8, name=unsubscribe_trigger, description=取消订阅并删除一个触发器
2026-01-22T13:40:01.529+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=9, name=search_web, description=执行Web搜索，获取公开互联网信息
2026-01-22T13:40:01.529+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=10, name=list_actions, description=列出所有可用的动作，支持按分类和标签筛选。
2026-01-22T13:40:01.529+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=11, name=plan_action, description=根据用户输入匹配动作并生成执行计划。返回匹配的动作列表和生成的执行计划。
2026-01-22T13:40:01.529+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=12, name=execute_system_action, description=执行系统Action（如OA请假、ERP操作等）。根据action_id调用相应的系统Handler。
2026-01-22T13:40:01.529+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=13, name=send_error_message, description=Send an error message to the IDE console
2026-01-22T13:40:01.529+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=14, name=execute_action, description=执行指定的执行计划，返回执行结果。支持继续执行等待用户输入的计划。
2026-01-22T13:40:01.529+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=15, name=send_notification, description=Send a notification message
2026-01-22T13:40:01.529+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=16, name=list_triggers, description=列出所有触发器
2026-01-22T13:40:01.530+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React阶段工具数量, count=6
2026-01-22T13:40:01.530+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=1, name=write_code, description=Generate and register a new function with specified name and parameters. IMPORTANT: You MUST provide both 'functionName' and 'parameters' fields. Example: write_code(requirement='calculate sum', functionName='calculate_sum', parameters=['a', 'b'])
2026-01-22T13:40:01.530+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=2, name=write_condition_code, description=Generate and register a condition check function for triggers. This function MUST return a boolean value (True/False). Example: write_condition_code(requirement='check if it is a working day', functionName='check_is_working_day', parameters=['date'])
2026-01-22T13:40:01.530+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=3, name=send_success_message, description=Send a success message to the IDE console
2026-01-22T13:40:01.530+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=4, name=send_error_message, description=Send an error message to the IDE console
2026-01-22T13:40:01.530+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=5, name=send_notification, description=Send a notification message
2026-01-22T13:40:01.530+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=6, name=execute_code, description=Execute a previously generated function by its exact name with matching parameters. CRITICAL: The functionName MUST exactly match the name used in write_code. The 'args' parameter names MUST exactly match the 'parameters' specified in write_code. Example: If you called write_code with functionName='calculate_sum' and parameters=['a', 'b'], then you must call execute_code with functionName='calculate_sum' and args={'a': 10, 'b': 20}. Parameter value types supported: String, Number, Boolean, List, Map/Object.
2026-01-22T13:40:01.530+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=工具罗列完成
2026-01-22T13:40:01.534+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgent#<init> 初始化完成: language=PYTHON
2026-01-22T13:40:01.537+08:00  INFO --- [           main] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#<init> 初始化 Agent 加载器
2026-01-22T13:40:01.574+08:00 DEBUG --- [           main] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#<init> Agent 图结构:
@startuml CodeactAgent
skinparam usecaseFontSize 14
skinparam usecaseStereotypeFontSize 12
skinparam hexagonFontSize 14
skinparam hexagonStereotypeFontSize 12
title "CodeactAgent"
footer

powered by spring-ai-alibaba
end footer
circle start<<input>> as __START__
circle stop as __END__
usecase "_AGENT_MODEL_"<<Node>>
usecase "_AGENT_TOOL_"<<Node>>
usecase "_AGENT_HOOK_UnifiedIntentRecognitionHook.before"<<Node>>
usecase "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"<<Node>>
usecase "_AGENT_HOOK_EvaluationPromptInjectionHook-REACT.beforeModel"<<Node>>
hexagon "check state" as condition1<<Condition>>
hexagon "check state" as condition2<<Condition>>
hexagon "check state" as condition3<<Condition>>
"__START__" -down-> "_AGENT_HOOK_UnifiedIntentRecognitionHook.before"
"_AGENT_HOOK_UnifiedIntentRecognitionHook.before" .down.> "condition1"
"condition1" .down.> "__END__"
'"_AGENT_HOOK_UnifiedIntentRecognitionHook.before" .down.> "__END__"
"condition1" .down.> "_AGENT_TOOL_"
'"_AGENT_HOOK_UnifiedIntentRecognitionHook.before" .down.> "_AGENT_TOOL_"
"condition1" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
'"_AGENT_HOOK_UnifiedIntentRecognitionHook.before" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
"_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel" -down-> "_AGENT_HOOK_EvaluationPromptInjectionHook-REACT.beforeModel"
"_AGENT_HOOK_EvaluationPromptInjectionHook-REACT.beforeModel" -down-> "_AGENT_MODEL_"
"_AGENT_MODEL_" .down.> "condition2"
"condition2" .down.> "__END__"
'"_AGENT_MODEL_" .down.> "__END__"
"condition2" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
'"_AGENT_MODEL_" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
"condition2" .down.> "_AGENT_TOOL_"
'"_AGENT_MODEL_" .down.> "_AGENT_TOOL_"
"_AGENT_TOOL_" .down.> "condition3"
"condition3" .down.> "__END__"
'"_AGENT_TOOL_" .down.> "__END__"
"condition3" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
'"_AGENT_TOOL_" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
@enduml

2026-01-22T13:40:01.575+08:00  INFO --- [           main] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#<init> 已注册 agent: grayscale_agent
2026-01-22T13:40:01.583+08:00  INFO --- [           main] .a.a.a.p.c.ParamOptionsAutoConfiguration : ParamOptionsAutoConfiguration - Creating OptionsCache with TTL: 300000ms
2026-01-22T13:40:01.586+08:00  INFO --- [           main] a.a.a.p.s.DefaultParameterOptionsService : DefaultParameterOptionsService initialized with 3 handlers
2026-01-22T13:40:01.587+08:00  INFO --- [           main] c.a.a.a.planning.system.OaSystemHandler  : OaSystemHandler#init - initialized
2026-01-22T13:40:01.599+08:00 DEBUG --- [           main] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#listAgents 列出所有 agent
2026-01-22T13:40:01.599+08:00  INFO --- [           main] c.a.c.a.a.s.controller.AgentController   : AgentController initialized with 1 dynamic agents: [grayscale_agent]
2026-01-22T13:40:01.732+08:00  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: b5941023-9386-403d-973c-1e2020c68d4d

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2026-01-22T13:40:01.815+08:00  INFO --- [           main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2026-01-22T13:40:02.535+08:00  INFO --- [           main] e.e.c.CodeactEvaluationAutoConfiguration : CodeactEvaluationAutoConfiguration#inputRoutingEvaluationHook - reason=创建输入路由评估 Hook
2026-01-22T13:40:02.536+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchFacade - reason=creating search facade with 3 providers
2026-01-22T13:40:02.538+08:00  INFO --- [           main] c.a.a.a.e.s.i.DefaultSearchFacade        : DefaultSearchFacade#init - reason=initialized with 3 providers
2026-01-22T13:40:02.538+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=开始创建Search工具
2026-01-22T13:40:02.540+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockBaiduWebSearchProvider, toolName=search_web
2026-01-22T13:40:02.541+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockKnowledgeStoreSearchProvider, toolName=search_knowledge
2026-01-22T13:40:02.542+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockProjectContextSearchProvider, toolName=search_project
2026-01-22T13:40:02.542+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=搜索工具创建完成, totalCount=3
2026-01-22T13:40:02.542+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=Search工具创建完成, count=3
2026-01-22T13:40:02.542+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=创建Search工具, index=1, name=search_web, description=执行Web搜索，获取公开互联网信息
2026-01-22T13:40:02.542+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=创建Search工具, index=2, name=search_knowledge, description=搜索团队知识库，包括FAQ、规范、最佳实践等
2026-01-22T13:40:02.542+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=创建Search工具, index=3, name=search_project, description=搜索项目上下文信息，包括代码、配置、文档等
2026-01-22T13:40:02.544+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#diagnostics - reason=ElasticsearchClient bean found
2026-01-22T13:40:02.545+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#diagnostics - reason=EmbeddingModel bean found
2026-01-22T13:40:02.550+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#diagnostics - Planning module status:
2026-01-22T13:40:02.550+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration :   - ActionRepository: MybatisPlusActionRepository
2026-01-22T13:40:02.550+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration :   - ActionProvider: SemanticActionProvider
2026-01-22T13:40:02.550+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration :   - PlanGenerator: DefaultPlanGenerator
2026-01-22T13:40:02.550+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration :   - PlanExecutor: DefaultPlanExecutor
2026-01-22T13:40:02.815+08:00  INFO --- [           main] c.a.a.a.c.c.CodeactCoreAutoConfiguration : CodeactCoreAutoConfiguration#returnSchemaRegistry - reason=创建ReturnSchemaRegistry单例Bean
2026-01-22T13:40:02.815+08:00  INFO --- [           main] .a.a.a.c.t.s.DefaultReturnSchemaRegistry : DefaultReturnSchemaRegistry#<init> - reason=创建新实例, hashCode=1568623803
2026-01-22T13:40:03.675+08:00  WARN --- [           main] o.s.m.p.s.SyncMcpSamplingProvider        : No sampling methods found
2026-01-22T13:40:03.679+08:00  WARN --- [           main] o.s.m.p.e.SyncMcpElicitationProvider     : No elicitation methods found
2026-01-22T13:40:03.750+08:00  INFO --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2026-01-22T13:40:03.765+08:00  INFO --- [           main] c.a.a.a.start.AssistantAgentApplication  : Started AssistantAgentApplication in 13.487 seconds (process running for 15.291)
2026-01-22T13:40:03.778+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#run - reason=Starting experience module validation
2026-01-22T13:40:03.941+08:00 DEBUG --- [           main] .p.e.r.ElasticsearchExperienceRepository : ElasticsearchExperienceRepository#count - reason=count completed, count=0
2026-01-22T13:40:03.990+08:00 DEBUG --- [           main] .p.e.r.ElasticsearchExperienceRepository : ElasticsearchExperienceRepository#countByTypeAndScope - reason=count completed, type=CODE, scope=null, count=0
2026-01-22T13:40:03.997+08:00 DEBUG --- [           main] .p.e.r.ElasticsearchExperienceRepository : ElasticsearchExperienceRepository#countByTypeAndScope - reason=count completed, type=REACT, scope=null, count=0
2026-01-22T13:40:04.006+08:00 DEBUG --- [           main] .p.e.r.ElasticsearchExperienceRepository : ElasticsearchExperienceRepository#countByTypeAndScope - reason=count completed, type=COMMON, scope=null, count=0
2026-01-22T13:40:04.007+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testExperienceCount - reason=Experience stats: total=0, code=0, react=0, common=0
2026-01-22T13:40:04.007+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCommonExperienceQuery - reason=Testing common experience query
2026-01-22T13:40:04.535+08:00 DEBUG --- [           main] .s.p.e.p.ElasticsearchExperienceProvider : ElasticsearchExperienceProvider#query - reason=query completed, type=COMMON, text=null, count=0
2026-01-22T13:40:04.535+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCommonExperienceQuery - reason=Found 0 common experiences
2026-01-22T13:40:04.536+08:00  WARN --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCommonExperienceQuery - reason=❌ MoLiHong identity experience not found
2026-01-22T13:40:04.536+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCodeExperienceQuery - reason=Testing code experience query (demo keyword)
2026-01-22T13:40:04.550+08:00 DEBUG --- [           main] .s.p.e.p.ElasticsearchExperienceProvider : ElasticsearchExperienceProvider#query - reason=query completed, type=CODE, text=null, count=0
2026-01-22T13:40:04.550+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCodeExperienceQuery - reason=Found 0 demo code experiences
2026-01-22T13:40:04.552+08:00  WARN --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCodeExperienceQuery - reason=❌ Demo code experience not found
2026-01-22T13:40:04.552+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testReactExperienceQuery - reason=Testing react experience query
2026-01-22T13:40:04.565+08:00 DEBUG --- [           main] .s.p.e.p.ElasticsearchExperienceProvider : ElasticsearchExperienceProvider#query - reason=query completed, type=REACT, text=null, count=0
2026-01-22T13:40:04.565+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testReactExperienceQuery - reason=Found 0 react experiences
2026-01-22T13:40:04.567+08:00  WARN --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testReactExperienceQuery - reason=❌ Ambiguous intent strategy not found
2026-01-22T13:40:04.567+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#run - reason=Experience module validation completed
2026-01-22T13:40:04.569+08:00  INFO --- [           main] c.a.a.a.s.a.config.AuthInitialization    : AuthInitialization#run - 初始化认证系统
2026-01-22T13:40:04.593+08:00 DEBUG --- [           main] c.a.a.a.s.a.s.AuthenticationService      : AuthenticationService#initDefaultAdmin - 管理员账户已存在
2026-01-22T13:40:04.593+08:00  INFO --- [           main] c.a.a.a.s.a.config.AuthInitialization    : AuthInitialization#run - 认证系统初始化完成
2026-01-22T13:40:21.581+08:00  INFO --- [nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-01-22T13:40:21.581+08:00  INFO --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2026-01-22T13:40:21.584+08:00  INFO --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 3 ms
2026-01-22T13:40:22.198+08:00 DEBUG --- [nio-8080-exec-1] c.a.a.a.s.a.s.JwtAuthenticationFilter    : JwtAuthenticationFilter#doFilterInternal - 设置用户认证: username=admin, roles=[ADMIN, USER]
2026-01-22T13:40:22.340+08:00  INFO --- [nio-8080-exec-1] c.a.c.a.a.s.controller.ThreadController  : Request received for POST /apps/research_agent/users/user-001/threads (service generates ID) with state: {}
2026-01-22T13:40:22.344+08:00  INFO --- [nio-8080-exec-1] c.a.c.a.a.s.service.ThreadServiceImpl    : Created thread: b75fe475-8672-4d80-97ed-c930fd6954fd for app=research_agent, user=user-001
2026-01-22T13:40:22.344+08:00  INFO --- [nio-8080-exec-1] c.a.c.a.a.s.controller.ThreadController  : Thread created successfully with generated id: b75fe475-8672-4d80-97ed-c930fd6954fd
2026-01-22T13:40:22.460+08:00 DEBUG --- [nio-8080-exec-4] c.a.a.a.s.a.s.JwtAuthenticationFilter    : JwtAuthenticationFilter#doFilterInternal - 设置用户认证: username=admin, roles=[ADMIN, USER]
2026-01-22T13:40:22.495+08:00  INFO --- [nio-8080-exec-4] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#loadAgent 加载 agent: research_agent
2026-01-22T13:40:22.495+08:00  INFO --- [nio-8080-exec-4] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#loadAgent 成功加载 agent: research_agent
2026-01-22T13:40:22.506+08:00 DEBUG --- [nio-8080-exec-2] c.a.a.a.s.a.s.JwtAuthenticationFilter    : JwtAuthenticationFilter#doFilterInternal - 设置用户认证: username=admin, roles=[ADMIN, USER]
2026-01-22T13:40:22.509+08:00  INFO --- [nio-8080-exec-2] c.a.c.a.a.s.controller.ThreadController  : Request received for GET /apps/research_agent/users/user-001/threads/b75fe475-8672-4d80-97ed-c930fd6954fd
2026-01-22T13:40:22.754+08:00 DEBUG --- [nio-8080-exec-4] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#beforeAgent - reason=checking unified intent
2026-01-22T13:40:22.755+08:00 DEBUG --- [nio-8080-exec-4] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#get - reason=session not found, sessionId=b75fe475-8672-4d80-97ed-c930fd6954fd
2026-01-22T13:40:22.760+08:00 DEBUG --- [nio-8080-exec-4] c.a.a.a.p.i.SemanticActionProvider       : SemanticActionProvider#matchActions - reason=matching actions, userInput=我要请假
2026-01-22T13:40:24.365+08:00 DEBUG --- [nio-8080-exec-4] c.a.a.a.p.v.ActionVectorizationService   : ActionVectorizationService#hybridSearch - actionId=erp:product-unit:create, rawScore=1.3716414, maxScore=1.3716414, normalizedScore=0.95
2026-01-22T13:40:24.376+08:00  WARN --- [nio-8080-exec-4] c.a.a.a.p.p.c.ActionEntityConverter      : ActionEntityConverter#parseActionType - reason=unknown action type, type=INTERNAL
2026-01-22T13:40:24.385+08:00  WARN --- [nio-8080-exec-4] c.a.a.a.p.p.c.ActionEntityConverter      : ActionEntityConverter#parseActionType - reason=unknown action type, type=INTERNAL
2026-01-22T13:40:24.392+08:00  INFO --- [nio-8080-exec-4] c.a.a.a.p.i.SemanticActionProvider       : SemanticActionProvider#matchActions - reason=matching completed, userInput=我要请假, matchCount=1
2026-01-22T13:40:24.393+08:00  INFO --- [nio-8080-exec-4] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#beforeAgent - reason=match found, actionId=oa:leave:request, confidence=0.95, matchType=KEYWORD_EXACT
2026-01-22T13:40:24.407+08:00 DEBUG --- [nio-8080-exec-4] .s.p.e.p.ElasticsearchExperienceProvider : ElasticsearchExperienceProvider#query - reason=query completed, type=REACT, text=null, count=0
2026-01-22T13:40:24.407+08:00  INFO --- [nio-8080-exec-4] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#beforeAgent - reason=high confidence, using Planning direct execution with param collection, actionId=oa:leave:request, confidence=0.95
2026-01-22T13:40:24.407+08:00  INFO --- [nio-8080-exec-4] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handlePlanningDirectExecution - reason=direct execution, actionId=oa:leave:request
2026-01-22T13:40:24.407+08:00  INFO --- [nio-8080-exec-4] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handlePlanningDirectExecution - reason=missing required params, count=5, actionId=oa:leave:request
2026-01-22T13:40:24.407+08:00  INFO --- [nio-8080-exec-4] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handleMissingParameters - reason=asking for param, paramName=start_date, actionId=oa:leave:request
2026-01-22T13:40:30.040+08:00 DEBUG --- [nio-8080-exec-4] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#save - reason=session saved, sessionId=b75fe475-8672-4d80-97ed-c930fd6954fd, ttl=PT30M
2026-01-22T13:40:30.040+08:00 DEBUG --- [nio-8080-exec-4] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#saveSession - reason=session saved, sessionId=b75fe475-8672-4d80-97ed-c930fd6954fd
2026-01-22T13:40:30.040+08:00  INFO --- [nio-8080-exec-4] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handleMissingParameters - reason=session saved to store, sessionId=b75fe475-8672-4d80-97ed-c930fd6954fd, actionId=oa:leave:request
2026-01-22T13:40:30.094+08:00 ERROR --- [nio-8080-exec-4] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] threw exception

org.springframework.security.authorization.AuthorizationDeniedException: Access Denied
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:99)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:91)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$4(HandlerMappingIntrospector.java:267)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:612)
	at org.apache.catalina.core.ApplicationDispatcher.doDispatch(ApplicationDispatcher.java:540)
	at org.apache.catalina.core.ApplicationDispatcher.dispatch(ApplicationDispatcher.java:511)
	at org.apache.catalina.core.AsyncContextImpl$AsyncRunnable.run(AsyncContextImpl.java:599)
	at org.apache.catalina.core.AsyncContextImpl.doInternalDispatch(AsyncContextImpl.java:342)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.asyncDispatch(CoyoteAdapter.java:239)
	at org.apache.coyote.AbstractProcessor.dispatch(AbstractProcessor.java:243)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:57)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)

2026-01-22T13:40:30.097+08:00 ERROR --- [nio-8080-exec-4] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Unable to handle the Spring Security Exception because the response is already committed.] with root cause

org.springframework.security.authorization.AuthorizationDeniedException: Access Denied
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:99)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:91)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$4(HandlerMappingIntrospector.java:267)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:612)
	at org.apache.catalina.core.ApplicationDispatcher.doDispatch(ApplicationDispatcher.java:540)
	at org.apache.catalina.core.ApplicationDispatcher.dispatch(ApplicationDispatcher.java:511)
	at org.apache.catalina.core.AsyncContextImpl$AsyncRunnable.run(AsyncContextImpl.java:599)
	at org.apache.catalina.core.AsyncContextImpl.doInternalDispatch(AsyncContextImpl.java:342)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.asyncDispatch(CoyoteAdapter.java:239)
	at org.apache.coyote.AbstractProcessor.dispatch(AbstractProcessor.java:243)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:57)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)

2026-01-22T13:40:30.107+08:00 ERROR --- [nio-8080-exec-4] s.e.ErrorMvcAutoConfiguration$StaticView : Cannot render error page for request [null] as the response has already been committed. As a result, the response may have the wrong status code.
2026-01-22T13:40:55.034+08:00  INFO --- [nio-8080-exec-7] c.a.a.a.s.a.controller.AuthController    : AuthController#logout - 用户登出
2026-01-22T13:41:10.982+08:00  INFO --- [nio-8080-exec-9] c.a.a.a.s.a.controller.AuthController    : AuthController#login - 登录请求: username=admin
2026-01-22T13:41:10.982+08:00  INFO --- [nio-8080-exec-9] c.a.a.a.s.a.s.AuthenticationService      : AuthenticationService#login - 用户登录请求: username=admin
2026-01-22T13:41:11.099+08:00  INFO --- [nio-8080-exec-9] c.a.a.a.s.a.s.AuthenticationService      : AuthenticationService#login - 用户登录成功: username=admin
2026-01-22T13:41:18.413+08:00 DEBUG --- [io-8080-exec-10] c.a.a.a.s.a.s.JwtAuthenticationFilter    : JwtAuthenticationFilter#doFilterInternal - 设置用户认证: username=admin, roles=[ADMIN, USER]
2026-01-22T13:41:18.416+08:00  INFO --- [io-8080-exec-10] c.a.c.a.a.s.controller.ThreadController  : Request received for POST /apps/research_agent/users/user-001/threads (service generates ID) with state: {}
2026-01-22T13:41:18.416+08:00  INFO --- [io-8080-exec-10] c.a.c.a.a.s.service.ThreadServiceImpl    : Created thread: 601699cb-b896-4d01-8455-93e0d075a802 for app=research_agent, user=user-001
2026-01-22T13:41:18.416+08:00  INFO --- [io-8080-exec-10] c.a.c.a.a.s.controller.ThreadController  : Thread created successfully with generated id: 601699cb-b896-4d01-8455-93e0d075a802
2026-01-22T13:41:18.428+08:00 DEBUG --- [nio-8080-exec-1] c.a.a.a.s.a.s.JwtAuthenticationFilter    : JwtAuthenticationFilter#doFilterInternal - 设置用户认证: username=admin, roles=[ADMIN, USER]
2026-01-22T13:41:18.430+08:00  INFO --- [nio-8080-exec-1] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#loadAgent 加载 agent: research_agent
2026-01-22T13:41:18.430+08:00  INFO --- [nio-8080-exec-1] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#loadAgent 成功加载 agent: research_agent
2026-01-22T13:41:18.433+08:00 DEBUG --- [nio-8080-exec-1] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#beforeAgent - reason=checking unified intent
2026-01-22T13:41:18.433+08:00 DEBUG --- [nio-8080-exec-1] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#get - reason=session not found, sessionId=601699cb-b896-4d01-8455-93e0d075a802
2026-01-22T13:41:18.433+08:00 DEBUG --- [nio-8080-exec-1] c.a.a.a.p.i.SemanticActionProvider       : SemanticActionProvider#matchActions - reason=matching actions, userInput=我要请假
2026-01-22T13:41:18.452+08:00 DEBUG --- [nio-8080-exec-2] c.a.a.a.s.a.s.JwtAuthenticationFilter    : JwtAuthenticationFilter#doFilterInternal - 设置用户认证: username=admin, roles=[ADMIN, USER]
2026-01-22T13:41:18.453+08:00  INFO --- [nio-8080-exec-2] c.a.c.a.a.s.controller.ThreadController  : Request received for GET /apps/research_agent/users/user-001/threads/601699cb-b896-4d01-8455-93e0d075a802
2026-01-22T13:41:18.770+08:00 DEBUG --- [nio-8080-exec-1] c.a.a.a.p.v.ActionVectorizationService   : ActionVectorizationService#hybridSearch - actionId=erp:product-unit:create, rawScore=1.3716414, maxScore=1.3716414, normalizedScore=0.95
2026-01-22T13:41:18.777+08:00  WARN --- [nio-8080-exec-1] c.a.a.a.p.p.c.ActionEntityConverter      : ActionEntityConverter#parseActionType - reason=unknown action type, type=INTERNAL
2026-01-22T13:41:18.785+08:00  WARN --- [nio-8080-exec-1] c.a.a.a.p.p.c.ActionEntityConverter      : ActionEntityConverter#parseActionType - reason=unknown action type, type=INTERNAL
2026-01-22T13:41:18.785+08:00  INFO --- [nio-8080-exec-1] c.a.a.a.p.i.SemanticActionProvider       : SemanticActionProvider#matchActions - reason=matching completed, userInput=我要请假, matchCount=1
2026-01-22T13:41:18.785+08:00  INFO --- [nio-8080-exec-1] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#beforeAgent - reason=match found, actionId=oa:leave:request, confidence=0.95, matchType=KEYWORD_EXACT
2026-01-22T13:41:18.794+08:00 DEBUG --- [nio-8080-exec-1] .s.p.e.p.ElasticsearchExperienceProvider : ElasticsearchExperienceProvider#query - reason=query completed, type=REACT, text=null, count=0
2026-01-22T13:41:18.794+08:00  INFO --- [nio-8080-exec-1] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#beforeAgent - reason=high confidence, using Planning direct execution with param collection, actionId=oa:leave:request, confidence=0.95
2026-01-22T13:41:18.794+08:00  INFO --- [nio-8080-exec-1] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handlePlanningDirectExecution - reason=direct execution, actionId=oa:leave:request
2026-01-22T13:41:18.794+08:00  INFO --- [nio-8080-exec-1] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handlePlanningDirectExecution - reason=missing required params, count=5, actionId=oa:leave:request
2026-01-22T13:41:18.794+08:00  INFO --- [nio-8080-exec-1] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handleMissingParameters - reason=asking for param, paramName=start_date, actionId=oa:leave:request
2026-01-22T13:41:18.794+08:00 DEBUG --- [nio-8080-exec-1] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#save - reason=session saved, sessionId=601699cb-b896-4d01-8455-93e0d075a802, ttl=PT30M
2026-01-22T13:41:18.794+08:00 DEBUG --- [nio-8080-exec-1] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#saveSession - reason=session saved, sessionId=601699cb-b896-4d01-8455-93e0d075a802
2026-01-22T13:41:18.794+08:00  INFO --- [nio-8080-exec-1] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handleMissingParameters - reason=session saved to store, sessionId=601699cb-b896-4d01-8455-93e0d075a802, actionId=oa:leave:request
2026-01-22T13:41:18.802+08:00 ERROR --- [nio-8080-exec-4] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] threw exception

org.springframework.security.authorization.AuthorizationDeniedException: Access Denied
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:99)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:91)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$4(HandlerMappingIntrospector.java:267)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:612)
	at org.apache.catalina.core.ApplicationDispatcher.doDispatch(ApplicationDispatcher.java:540)
	at org.apache.catalina.core.ApplicationDispatcher.dispatch(ApplicationDispatcher.java:511)
	at org.apache.catalina.core.AsyncContextImpl$AsyncRunnable.run(AsyncContextImpl.java:599)
	at org.apache.catalina.core.AsyncContextImpl.doInternalDispatch(AsyncContextImpl.java:342)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.asyncDispatch(CoyoteAdapter.java:239)
	at org.apache.coyote.AbstractProcessor.dispatch(AbstractProcessor.java:243)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:57)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)

2026-01-22T13:41:18.802+08:00 ERROR --- [nio-8080-exec-4] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Unable to handle the Spring Security Exception because the response is already committed.] with root cause

org.springframework.security.authorization.AuthorizationDeniedException: Access Denied
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:99)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:91)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$4(HandlerMappingIntrospector.java:267)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:612)
	at org.apache.catalina.core.ApplicationDispatcher.doDispatch(ApplicationDispatcher.java:540)
	at org.apache.catalina.core.ApplicationDispatcher.dispatch(ApplicationDispatcher.java:511)
	at org.apache.catalina.core.AsyncContextImpl$AsyncRunnable.run(AsyncContextImpl.java:599)
	at org.apache.catalina.core.AsyncContextImpl.doInternalDispatch(AsyncContextImpl.java:342)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.asyncDispatch(CoyoteAdapter.java:239)
	at org.apache.coyote.AbstractProcessor.dispatch(AbstractProcessor.java:243)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:57)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)

2026-01-22T13:41:18.804+08:00 ERROR --- [nio-8080-exec-4] s.e.ErrorMvcAutoConfiguration$StaticView : Cannot render error page for request [null] as the response has already been committed. As a result, the response may have the wrong status code.
2026-01-22T13:42:07.891+08:00 DEBUG --- [nio-8080-exec-5] c.a.a.a.s.a.s.JwtAuthenticationFilter    : JwtAuthenticationFilter#doFilterInternal - 设置用户认证: username=admin, roles=[ADMIN, USER]
2026-01-22T13:42:07.893+08:00  INFO --- [nio-8080-exec-5] c.a.c.a.a.s.controller.ThreadController  : Request received for POST /apps/research_agent/users/user-001/threads (service generates ID) with state: {}
2026-01-22T13:42:07.893+08:00  INFO --- [nio-8080-exec-5] c.a.c.a.a.s.service.ThreadServiceImpl    : Created thread: 4de3be13-9b2b-4001-855e-8a73e8d8a948 for app=research_agent, user=user-001
2026-01-22T13:42:07.893+08:00  INFO --- [nio-8080-exec-5] c.a.c.a.a.s.controller.ThreadController  : Thread created successfully with generated id: 4de3be13-9b2b-4001-855e-8a73e8d8a948
2026-01-22T13:42:07.909+08:00 DEBUG --- [nio-8080-exec-6] c.a.a.a.s.a.s.JwtAuthenticationFilter    : JwtAuthenticationFilter#doFilterInternal - 设置用户认证: username=admin, roles=[ADMIN, USER]
2026-01-22T13:42:07.911+08:00  INFO --- [nio-8080-exec-6] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#loadAgent 加载 agent: research_agent
2026-01-22T13:42:07.911+08:00  INFO --- [nio-8080-exec-6] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#loadAgent 成功加载 agent: research_agent
2026-01-22T13:42:07.915+08:00 DEBUG --- [nio-8080-exec-6] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#beforeAgent - reason=checking unified intent
2026-01-22T13:42:07.915+08:00 DEBUG --- [nio-8080-exec-6] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#get - reason=session not found, sessionId=4de3be13-9b2b-4001-855e-8a73e8d8a948
2026-01-22T13:42:07.915+08:00 DEBUG --- [nio-8080-exec-6] c.a.a.a.p.i.SemanticActionProvider       : SemanticActionProvider#matchActions - reason=matching actions, userInput=我要请假
2026-01-22T13:42:07.957+08:00 DEBUG --- [nio-8080-exec-8] c.a.a.a.s.a.s.JwtAuthenticationFilter    : JwtAuthenticationFilter#doFilterInternal - 设置用户认证: username=admin, roles=[ADMIN, USER]
2026-01-22T13:42:07.958+08:00  INFO --- [nio-8080-exec-8] c.a.c.a.a.s.controller.ThreadController  : Request received for GET /apps/research_agent/users/user-001/threads/4de3be13-9b2b-4001-855e-8a73e8d8a948
2026-01-22T13:42:08.284+08:00 DEBUG --- [nio-8080-exec-6] c.a.a.a.p.v.ActionVectorizationService   : ActionVectorizationService#hybridSearch - actionId=erp:product-unit:create, rawScore=1.3716414, maxScore=1.3716414, normalizedScore=0.95
2026-01-22T13:42:08.291+08:00  WARN --- [nio-8080-exec-6] c.a.a.a.p.p.c.ActionEntityConverter      : ActionEntityConverter#parseActionType - reason=unknown action type, type=INTERNAL
2026-01-22T13:42:08.298+08:00  WARN --- [nio-8080-exec-6] c.a.a.a.p.p.c.ActionEntityConverter      : ActionEntityConverter#parseActionType - reason=unknown action type, type=INTERNAL
2026-01-22T13:42:08.299+08:00  INFO --- [nio-8080-exec-6] c.a.a.a.p.i.SemanticActionProvider       : SemanticActionProvider#matchActions - reason=matching completed, userInput=我要请假, matchCount=1
2026-01-22T13:42:08.299+08:00  INFO --- [nio-8080-exec-6] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#beforeAgent - reason=match found, actionId=oa:leave:request, confidence=0.95, matchType=KEYWORD_EXACT
2026-01-22T13:42:08.307+08:00 DEBUG --- [nio-8080-exec-6] .s.p.e.p.ElasticsearchExperienceProvider : ElasticsearchExperienceProvider#query - reason=query completed, type=REACT, text=null, count=0
2026-01-22T13:42:08.307+08:00  INFO --- [nio-8080-exec-6] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#beforeAgent - reason=high confidence, using Planning direct execution with param collection, actionId=oa:leave:request, confidence=0.95
2026-01-22T13:42:08.307+08:00  INFO --- [nio-8080-exec-6] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handlePlanningDirectExecution - reason=direct execution, actionId=oa:leave:request
2026-01-22T13:42:08.307+08:00  INFO --- [nio-8080-exec-6] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handlePlanningDirectExecution - reason=missing required params, count=5, actionId=oa:leave:request
2026-01-22T13:42:08.307+08:00  INFO --- [nio-8080-exec-6] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handleMissingParameters - reason=asking for param, paramName=start_date, actionId=oa:leave:request
2026-01-22T13:42:08.307+08:00 DEBUG --- [nio-8080-exec-6] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#save - reason=session saved, sessionId=4de3be13-9b2b-4001-855e-8a73e8d8a948, ttl=PT30M
2026-01-22T13:42:08.307+08:00 DEBUG --- [nio-8080-exec-6] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#saveSession - reason=session saved, sessionId=4de3be13-9b2b-4001-855e-8a73e8d8a948
2026-01-22T13:42:08.307+08:00  INFO --- [nio-8080-exec-6] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handleMissingParameters - reason=session saved to store, sessionId=4de3be13-9b2b-4001-855e-8a73e8d8a948, actionId=oa:leave:request
2026-01-22T13:42:08.315+08:00 ERROR --- [nio-8080-exec-6] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] threw exception

org.springframework.security.authorization.AuthorizationDeniedException: Access Denied
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:99)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:91)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$4(HandlerMappingIntrospector.java:267)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:612)
	at org.apache.catalina.core.ApplicationDispatcher.doDispatch(ApplicationDispatcher.java:540)
	at org.apache.catalina.core.ApplicationDispatcher.dispatch(ApplicationDispatcher.java:511)
	at org.apache.catalina.core.AsyncContextImpl$AsyncRunnable.run(AsyncContextImpl.java:599)
	at org.apache.catalina.core.AsyncContextImpl.doInternalDispatch(AsyncContextImpl.java:342)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.asyncDispatch(CoyoteAdapter.java:239)
	at org.apache.coyote.AbstractProcessor.dispatch(AbstractProcessor.java:243)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:57)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)

2026-01-22T13:42:08.315+08:00 ERROR --- [nio-8080-exec-6] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Unable to handle the Spring Security Exception because the response is already committed.] with root cause

org.springframework.security.authorization.AuthorizationDeniedException: Access Denied
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:99)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:91)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$4(HandlerMappingIntrospector.java:267)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:612)
	at org.apache.catalina.core.ApplicationDispatcher.doDispatch(ApplicationDispatcher.java:540)
	at org.apache.catalina.core.ApplicationDispatcher.dispatch(ApplicationDispatcher.java:511)
	at org.apache.catalina.core.AsyncContextImpl$AsyncRunnable.run(AsyncContextImpl.java:599)
	at org.apache.catalina.core.AsyncContextImpl.doInternalDispatch(AsyncContextImpl.java:342)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.asyncDispatch(CoyoteAdapter.java:239)
	at org.apache.coyote.AbstractProcessor.dispatch(AbstractProcessor.java:243)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:57)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)

2026-01-22T13:42:08.318+08:00 ERROR --- [nio-8080-exec-6] s.e.ErrorMvcAutoConfiguration$StaticView : Cannot render error page for request [null] as the response has already been committed. As a result, the response may have the wrong status code.
2026-01-22T14:01:46.474+08:00  INFO --- [           main] c.a.a.a.start.AssistantAgentApplication  : Starting AssistantAgentApplication using Java 21.0.9 with PID 20292 (D:\devfive\AssistantAgent\assistant-agent-start\target\classes started by zhou_ in D:\devfive\AssistantAgent)
2026-01-22T14:01:46.474+08:00 DEBUG --- [           main] c.a.a.a.start.AssistantAgentApplication  : Running with Spring Boot v3.4.8, Spring v6.2.9
2026-01-22T14:01:46.474+08:00  INFO --- [           main] c.a.a.a.start.AssistantAgentApplication  : No active profile set, falling back to 1 default profile: "default"
2026-01-22T14:01:49.937+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Elasticsearch repositories in DEFAULT mode.
2026-01-22T14:01:50.002+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 41 ms. Found 0 Elasticsearch repository interfaces.
2026-01-22T14:01:50.011+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Reactive Elasticsearch repositories in DEFAULT mode.
2026-01-22T14:01:50.014+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 7 ms. Found 0 Reactive Elasticsearch repository interfaces.
2026-01-22T14:01:50.267+08:00  WARN --- [           main] o.m.s.mapper.ClassPathMapperScanner      : Skipping MapperFactoryBean with name 'learningRecordMapper' and 'com.alibaba.assistant.agent.start.persistence.learning.mapper.LearningRecordMapper' mapperInterface. Bean already defined with the same name!
2026-01-22T14:01:50.275+08:00  WARN --- [           main] o.m.s.mapper.ClassPathMapperScanner      : Skipping MapperFactoryBean with name 'triggerDefinitionMapper' and 'com.alibaba.assistant.agent.start.persistence.trigger.mapper.TriggerDefinitionMapper' mapperInterface. Bean already defined with the same name!
2026-01-22T14:01:50.276+08:00  WARN --- [           main] o.m.s.mapper.ClassPathMapperScanner      : Skipping MapperFactoryBean with name 'triggerExecutionRecordMapper' and 'com.alibaba.assistant.agent.start.persistence.trigger.mapper.TriggerExecutionRecordMapper' mapperInterface. Bean already defined with the same name!
2026-01-22T14:01:50.276+08:00  WARN --- [           main] o.m.s.mapper.ClassPathMapperScanner      : Skipping MapperFactoryBean with name 'actionRegistryMapper' and 'com.alibaba.assistant.agent.planning.persistence.mapper.ActionRegistryMapper' mapperInterface. Bean already defined with the same name!
2026-01-22T14:01:52.682+08:00  INFO --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2026-01-22T14:01:52.717+08:00  INFO --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2026-01-22T14:01:52.717+08:00  INFO --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.43]
2026-01-22T14:01:52.880+08:00  INFO --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2026-01-22T14:01:52.880+08:00  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 6266 ms
2026-01-22T14:01:52.934+08:00  INFO --- [           main] c.a.a.a.s.a.security.JwtTokenProvider    : JwtTokenProvider#init - JWT 密钥已初始化
2026-01-22T14:01:53.097+08:00 DEBUG --- [           main] c.a.a.a.s.a.s.JwtAuthenticationFilter    : Filter 'jwtAuthenticationFilter' configured for use
2026-01-22T14:01:53.906+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#init - reason=search extension framework is enabled
2026-01-22T14:01:53.910+08:00  INFO --- [           main] c.a.a.a.s.s.MockBaiduWebSearchProvider   : MockBaiduWebSearchProvider#init - reason=使用简单模式初始化
2026-01-22T14:01:53.917+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#unifiedSearchCodeactTool - reason=创建统一搜索工具, providerCount=3
2026-01-22T14:01:54.059+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#init - reason=planning extension is enabled
2026-01-22T14:01:54.063+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#init - reason=ES configuration class loaded (elasticsearch.enabled=true)
2026-01-22T14:01:54.066+08:00  INFO --- [           main] toConfiguration$MybatisPlusConfiguration : MybatisPlusConfiguration#init - reason=MySQL configuration class loaded (mysql.enabled=true, MyBatisPlus present)
2026-01-22T14:01:54.146+08:00  INFO --- [           main] toConfiguration$MybatisPlusConfiguration : MybatisPlusConfiguration#actionEntityConverter - reason=creating entity converter
2026-01-22T14:01:54.148+08:00  INFO --- [           main] toConfiguration$MybatisPlusConfiguration : MybatisPlusConfiguration#mybatisPlusActionRepository - reason=ActionRegistryMapper found, creating MySQL repository
2026-01-22T14:01:56.013+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#actionVectorizationService - reason=creating ES vectorization service
2026-01-22T14:01:56.352+08:00  INFO --- [           main] c.a.a.a.p.v.ActionVectorizationService   : ActionVectorizationService#init - reason=ES index initialized on startup
2026-01-22T14:01:56.415+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#semanticActionProvider - reason=creating semantic action provider, semanticWeight=0.6, keywordWeight=0.4, matchThreshold=0.5
2026-01-22T14:01:56.434+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#defaultPlanGenerator - reason=creating default plan generator
2026-01-22T14:01:56.442+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#planActionCodeactTool - reason=creating plan_action tool
2026-01-22T14:01:56.457+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#queryStepExecutor - reason=creating query step executor
2026-01-22T14:01:56.467+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#inputStepExecutor - reason=creating input step executor
2026-01-22T14:01:56.473+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#executeStepExecutor - reason=creating execute step executor
2026-01-22T14:01:56.478+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#apiCallStepExecutor - reason=creating api call step executor
2026-01-22T14:01:56.636+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#validationStepExecutor - reason=creating validation step executor
2026-01-22T14:01:56.641+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#stepExecutorRegistry - reason=creating executor registry, executorCount=5
2026-01-22T14:01:56.645+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=QUERY, executorClass=QueryStepExecutor
2026-01-22T14:01:56.646+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=INPUT, executorClass=InputStepExecutor
2026-01-22T14:01:56.646+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=EXECUTE, executorClass=ExecuteStepExecutor
2026-01-22T14:01:56.646+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=API_CALL, executorClass=ApiCallStepExecutor
2026-01-22T14:01:56.646+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=VALIDATION, executorClass=ValidationStepExecutor
2026-01-22T14:01:56.650+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#defaultPlanExecutor - reason=creating default plan executor
2026-01-22T14:01:56.790+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#executeActionCodeactTool - reason=creating execute_action tool
2026-01-22T14:01:56.794+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#listActionsCodeactTool - reason=creating list_actions tool
2026-01-22T14:01:56.798+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#getActionDetailsCodeactTool - reason=creating get_action_details tool
2026-01-22T14:01:56.803+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#executeSystemActionCodeactTool - reason=creating execute_system_action tool
2026-01-22T14:01:57.093+08:00  INFO --- [           main] c.a.a.a.start.config.PersistenceConfig   : PersistenceConfig#init - reason=persistence configuration loaded
2026-01-22T14:01:57.099+08:00  INFO --- [           main] c.a.a.a.start.config.PersistenceConfig   : PersistenceConfig#elasticsearchExperienceProvider - reason=creating Elasticsearch experience provider (PRIMARY), indexName=experiences
2026-01-22T14:01:57.123+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#<init> - reason=初始化默认评估套件配置, experienceProviderAvailable=true
2026-01-22T14:01:57.132+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#evaluatorRegistry - reason=创建 EvaluatorRegistry Bean
2026-01-22T14:01:57.136+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'llm-based' of type LLMBasedEvaluator
2026-01-22T14:01:57.141+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'passthrough' of type RuleBasedEvaluator
2026-01-22T14:01:57.145+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'react_experience_evaluator' of type RuleBasedEvaluator
2026-01-22T14:01:57.148+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createDefaultEvaluatorRegistry - reason=注册 React 阶段经验检索评估器
2026-01-22T14:01:57.148+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'codeact_experience_evaluator' of type RuleBasedEvaluator
2026-01-22T14:01:57.148+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createDefaultEvaluatorRegistry - reason=注册 CodeAct 阶段经验检索评估器
2026-01-22T14:01:57.150+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#evaluationService - reason=创建默认 EvaluationService, sharedRegistryEvaluators=[llm-based, passthrough, codeact_experience_evaluator, react_experience_evaluator]
2026-01-22T14:01:57.158+08:00 DEBUG --- [           main] c.a.a.a.e.e.GraphBasedEvaluationExecutor : Created default ExecutorService for batch processing
2026-01-22T14:01:57.158+08:00  INFO --- [           main] .c.ExperienceEvaluationCriterionProvider : ExperienceEvaluationCriterionProvider#<init> - reason=初始化经验评估 Criterion 提供者
2026-01-22T14:01:57.171+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#structuredParamExtractor - reason=creating structured param extractor
2026-01-22T14:01:57.204+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#parameterValidator - reason=creating parameter validator
2026-01-22T14:01:57.208+08:00  INFO --- [           main] f.a.AutowiredAnnotationBeanPostProcessor : Inconsistent constructor declaration on bean with name 'actionExecutorFactory': single autowire-marked constructor flagged as optional - this constructor is effectively required since there is no default constructor to fall back to: public com.alibaba.assistant.agent.planning.executor.ActionExecutorFactory(java.util.List,com.alibaba.assistant.agent.planning.permission.interceptor.PermissionInterceptor)
2026-01-22T14:01:57.214+08:00  INFO --- [           main] .a.a.a.p.c.ParamOptionsAutoConfiguration : ParamOptionsAutoConfiguration - Parameter options module initialized
2026-01-22T14:01:57.217+08:00  INFO --- [           main] .a.a.a.p.c.ParamOptionsAutoConfiguration : ParamOptionsAutoConfiguration - Creating RestTemplate for HTTP handlers
2026-01-22T14:01:57.231+08:00  INFO --- [           main] c.a.a.a.planning.executor.HttpExecutor   : HttpExecutor#init - initialized
2026-01-22T14:01:57.234+08:00  INFO --- [           main] c.a.a.a.p.executor.InternalExecutor      : InternalExecutor#init - initialized
2026-01-22T14:01:57.248+08:00  INFO --- [           main] c.a.a.a.p.p.a.PermissionAdapterRegistry  : PermissionAdapterRegistry#registerAdapter - registered adapter: system=gov-platform, name=政务服务平台权限适配器
2026-01-22T14:01:57.249+08:00  INFO --- [           main] c.a.a.a.p.p.a.PermissionAdapterRegistry  : PermissionAdapterRegistry#registerAdapter - registered adapter: system=oa-system, name=OA办公系统权限适配器
2026-01-22T14:01:57.249+08:00  INFO --- [           main] c.a.a.a.p.p.a.PermissionAdapterRegistry  : PermissionAdapterRegistry initialized with 2 adapters: [gov-platform, oa-system]
2026-01-22T14:01:57.255+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U001, system=oa-system, externalUser=zhang.san@company.com
2026-01-22T14:01:57.257+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U001, system=gov-platform, externalUser=320102199001011234
2026-01-22T14:01:57.257+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U002, system=oa-system, externalUser=li.si@company.com
2026-01-22T14:01:57.257+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U003, system=oa-system, externalUser=wang.wu@company.com
2026-01-22T14:01:57.258+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U003, system=gov-platform, externalUser=leader_001
2026-01-22T14:01:57.258+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U004, system=gov-platform, externalUser=staff_001
2026-01-22T14:01:57.258+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U005, system=oa-system, externalUser=sun.qi@company.com
2026-01-22T14:01:57.258+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService initialized with demo data
2026-01-22T14:01:57.263+08:00  INFO --- [           main] c.a.a.a.p.c.PermissionAutoConfiguration  : PermissionAutoConfiguration - creating PermissionInterceptor
2026-01-22T14:01:57.266+08:00  INFO --- [           main] c.a.a.a.p.e.ActionExecutorFactory        : ActionExecutorFactory#init - initialized executors: INTERNAL(InternalExecutor), HTTP(HttpExecutor), DATA_AGENT(DataAgentExecutor), MCP(McpExecutor)
2026-01-22T14:01:57.266+08:00  INFO --- [           main] c.a.a.a.p.e.ActionExecutorFactory        : ActionExecutorFactory#init - permission interceptor enabled
2026-01-22T14:01:57.269+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#sessionProvider - reason=creating in-memory session provider
2026-01-22T14:01:57.271+08:00  INFO --- [           main] c.a.a.a.p.s.InMemorySessionProvider      : InMemorySessionProvider#init - initialized
2026-01-22T14:01:57.277+08:00  INFO --- [           main] c.a.a.a.p.s.ParamCollectionService       : ParamCollectionService#init - sessionProvider=InMemory
2026-01-22T14:01:57.282+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'action_intent_evaluator' of type ActionIntentEvaluator
2026-01-22T14:01:57.282+08:00  INFO --- [           main] p.i.PlanningIntegrationAutoConfiguration : PlanningIntegrationAutoConfiguration#actionIntentEvaluator - initialized and registered, paramCollection=true, llmVerification=true, maxCandidates=5
2026-01-22T14:01:57.285+08:00  INFO --- [           main] .p.i.PlanningEvaluationCriterionProvider : PlanningEvaluationCriterionProvider#init - initialized, llmVerificationEnabled=true
2026-01-22T14:01:57.285+08:00  INFO --- [           main] p.i.PlanningIntegrationAutoConfiguration : PlanningIntegrationAutoConfiguration#planningEvaluationCriterionProvider - registered planning evaluation criterion provider
2026-01-22T14:01:57.287+08:00  INFO --- [           main] .c.ExperienceEvaluationCriterionProvider : ExperienceEvaluationCriterionProvider#getReactPhaseCriteria - reason=提供 React 阶段评估 Criteria
2026-01-22T14:01:57.299+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createReactPhaseSuite - reason=添加自定义 Criterion, provider=ExperienceEvaluationCriterionProvider, count=3
2026-01-22T14:01:57.302+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createReactPhaseSuite - reason=添加自定义 Criterion, provider=PlanningEvaluationCriterionProvider, count=2
2026-01-22T14:01:57.309+08:00  INFO --- [           main] a.a.e.a.BatchAggregationStrategyRegistry : Registered batch aggregation strategy: ANY_TRUE
2026-01-22T14:01:57.312+08:00  INFO --- [           main] a.a.e.a.BatchAggregationStrategyRegistry : Registered batch aggregation strategy: ALL_TRUE
2026-01-22T14:01:57.473+08:00  INFO --- [           main] c.a.c.a.g.internal.node.ParallelNode     : Calculated core pool size: 32 (CPU cores: 16)
2026-01-22T14:01:57.473+08:00  INFO --- [           main] c.a.c.a.g.internal.node.ParallelNode     : Calculated maximum pool size: 64 (CPU cores: 16)
2026-01-22T14:01:57.473+08:00  INFO --- [           main] c.a.c.a.g.internal.node.ParallelNode     : Calculated queue capacity: 1000
2026-01-22T14:01:57.476+08:00  INFO --- [           main] c.a.a.a.e.DefaultEvaluationService       : Registered evaluation suite: react-phase-suite
2026-01-22T14:01:57.476+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#evaluationService - reason=注册 React Phase Suite, suiteId=react-phase-suite
2026-01-22T14:01:57.477+08:00  INFO --- [           main] .c.ExperienceEvaluationCriterionProvider : ExperienceEvaluationCriterionProvider#getCodeActPhaseCriteria - reason=提供 CodeAct 阶段评估 Criteria
2026-01-22T14:01:57.478+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createCodeActPhaseSuite - reason=添加自定义 Criterion, provider=ExperienceEvaluationCriterionProvider, count=3
2026-01-22T14:01:57.478+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createCodeActPhaseSuite - reason=添加自定义 Criterion, provider=PlanningEvaluationCriterionProvider, count=2
2026-01-22T14:01:57.478+08:00  INFO --- [           main] a.a.e.a.BatchAggregationStrategyRegistry : Registered batch aggregation strategy: ANY_TRUE
2026-01-22T14:01:57.478+08:00  INFO --- [           main] a.a.e.a.BatchAggregationStrategyRegistry : Registered batch aggregation strategy: ALL_TRUE
2026-01-22T14:01:57.479+08:00  INFO --- [           main] c.a.a.a.e.DefaultEvaluationService       : Registered evaluation suite: codeact-phase-suite
2026-01-22T14:01:57.480+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#evaluationService - reason=注册 CodeAct Phase Suite, suiteId=codeact-phase-suite
2026-01-22T14:01:57.485+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#codeactEvaluationContextFactory - reason=创建 EvaluationContextFactory
2026-01-22T14:01:57.489+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#codeactEvaluationResultAttacher - reason=创建 EvaluationResultAttacher
2026-01-22T14:01:57.501+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#reactPhaseEvaluationHooks - reason=创建 React Phase ModelInputEvaluationHook
2026-01-22T14:01:57.505+08:00  INFO --- [           main] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#<init> - reason=初始化, phase=REACT, providerCount=1
2026-01-22T14:01:57.505+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#reactPhaseEvaluationHooks - reason=创建 React Phase EvaluationPromptInjectionHook, providersCount=2
2026-01-22T14:01:57.509+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#codeactPhaseEvaluationHooks - reason=创建 CodeAct Phase ModelInputEvaluationHook
2026-01-22T14:01:57.509+08:00  INFO --- [           main] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#<init> - reason=初始化, phase=CODEACT, providerCount=1
2026-01-22T14:01:57.509+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#codeactPhaseEvaluationHooks - reason=创建 CodeAct Phase EvaluationPromptInjectionHook, providersCount=2
2026-01-22T14:01:57.514+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#keywordMatcher - reason=creating keyword matcher
2026-01-22T14:01:57.519+08:00  INFO --- [           main] .ParamCollectionSessionAutoConfiguration : ParamCollectionSessionAutoConfiguration#inMemoryParamCollectionSessionStore - reason=creating in-memory session store (Redis not available), ttl=PT30M
2026-01-22T14:01:57.519+08:00  WARN --- [           main] .ParamCollectionSessionAutoConfiguration : ParamCollectionSessionAutoConfiguration#inMemoryParamCollectionSessionStore - reason=WARNING: In-memory session store is not suitable for distributed environment!
2026-01-22T14:01:57.524+08:00  INFO --- [           main] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#<init> - reason=initialized, defaultTtl=PT30M
2026-01-22T14:01:57.525+08:00  WARN --- [           main] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#<init> - reason=WARNING: Using in-memory session store, not suitable for distributed environment!
2026-01-22T14:01:57.534+08:00  INFO --- [           main] iguration$UnifiedIntentHookConfiguration : UnifiedIntentHookConfiguration#unifiedIntentRecognitionHook - reason=creating unified intent hook, experienceProviderPresent=true, chatModelPresent=true, sessionStorePresent=true, directExecuteThreshold=0.95, hintThreshold=0.5
2026-01-22T14:01:57.938+08:00  INFO --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2026-01-22T14:01:58.653+08:00  INFO --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@59509393
2026-01-22T14:01:58.661+08:00  INFO --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2026-01-22T14:01:59.075+08:00  WARN --- [           main] c.a.a.a.p.p.c.ActionEntityConverter      : ActionEntityConverter#parseActionType - reason=unknown action type, type=INTERNAL
2026-01-22T14:01:59.155+08:00 DEBUG --- [           main] c.a.a.a.planning.intent.KeywordMatcher   : KeywordMatcher#registerAction - actionId=oa:leave:request, keywords=57
2026-01-22T14:01:59.156+08:00  INFO --- [           main] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#initKeywordMatcher - reason=initialized, actionCount=1, keywordIndexSize=57
2026-01-22T14:01:59.167+08:00  INFO --- [           main] c.a.a.a.start.config.PersistenceConfig   : PersistenceConfig#elasticsearchExperienceRepository - reason=creating Elasticsearch experience repository (PRIMARY), indexName=experiences
2026-01-22T14:01:59.186+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#init - reason=reply module enabled
2026-01-22T14:01:59.194+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactToolFactory - reason=创建CodeactTool工厂, channels=1
2026-01-22T14:01:59.195+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#init - reason=工厂初始化完成, channels=1
2026-01-22T14:01:59.213+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=开始创建Reply工具
2026-01-22T14:01:59.222+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#createTools - reason=创建工具成功, toolName=send_success_message, channelCode=IDE_TEXT
2026-01-22T14:01:59.223+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#createTools - reason=创建工具成功, toolName=send_error_message, channelCode=IDE_TEXT
2026-01-22T14:01:59.225+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#createTools - reason=创建工具成功, toolName=send_notification, channelCode=IDE_TEXT
2026-01-22T14:01:59.225+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#createTools - reason=工具创建完成, totalCount=3
2026-01-22T14:01:59.225+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=Reply工具创建完成, count=3
2026-01-22T14:01:59.225+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=创建Reply工具, index=1, name=send_success_message, description=Send a success message to the IDE console
2026-01-22T14:01:59.226+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=创建Reply工具, index=2, name=send_error_message, description=Send an error message to the IDE console
2026-01-22T14:01:59.226+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=创建Reply工具, index=3, name=send_notification, description=Send a notification message
2026-01-22T14:01:59.230+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactToolFactory - reason=创建SearchCodeactTool工厂, providerCount=3
2026-01-22T14:01:59.280+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactToolFactory - reason=创建TriggerCodeactTool工厂
2026-01-22T14:01:59.282+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=开始创建Trigger工具
2026-01-22T14:01:59.285+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=创建SubscribeTriggerCodeactTool成功
2026-01-22T14:01:59.287+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=创建UnsubscribeTriggerCodeactTool成功
2026-01-22T14:01:59.289+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=创建ListTriggersCodeactTool成功
2026-01-22T14:01:59.292+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=创建GetTriggerDetailCodeactTool成功
2026-01-22T14:01:59.292+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=触发器工具创建完成, count=4
2026-01-22T14:01:59.292+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=Trigger工具创建完成, count=4
2026-01-22T14:01:59.292+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=创建Trigger工具, index=1, name=subscribe_trigger, description=创建并订阅一个新的触发器
2026-01-22T14:01:59.292+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=创建Trigger工具, index=2, name=unsubscribe_trigger, description=取消订阅并删除一个触发器
2026-01-22T14:01:59.292+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=创建Trigger工具, index=3, name=list_triggers, description=列出所有触发器
2026-01-22T14:01:59.292+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=创建Trigger工具, index=4, name=get_trigger_detail, description=获取指定触发器的详细信息
2026-01-22T14:01:59.305+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#planningCodeactTools - reason=creating planning tools list
2026-01-22T14:01:59.305+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#planningCodeactTools - reason=created planning tools, count=5
2026-01-22T14:01:59.315+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=创建 CodeactAgent
2026-01-22T14:01:59.315+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=配置 MemorySaver 以支持多轮对话上下文保持
2026-01-22T14:01:59.315+08:00  WARN --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=临时禁用 streaming 模式以排查循环问题
2026-01-22T14:01:59.315+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加UnifiedSearchCodeactTool
2026-01-22T14:01:59.320+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockBaiduWebSearchProvider, toolName=search_web
2026-01-22T14:01:59.323+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockKnowledgeStoreSearchProvider, toolName=search_knowledge
2026-01-22T14:01:59.326+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockProjectContextSearchProvider, toolName=search_project
2026-01-22T14:01:59.327+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=搜索工具创建完成, totalCount=3
2026-01-22T14:01:59.327+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加SearchCodeactTools, count=3
2026-01-22T14:01:59.327+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加ReplyCodeactTools, count=3
2026-01-22T14:01:59.327+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加TriggerCodeactTools, count=4
2026-01-22T14:01:59.327+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加PlanningCodeactTools, count=5
2026-01-22T14:01:59.327+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#createMcpDynamicTools - reason=Creating MCP dynamic tools
2026-01-22T14:01:59.334+08:00  INFO --- [           main] c.a.a.a.e.d.mcp.McpDynamicToolFactory    : McpDynamicToolFactory#createTools - reason=开始创建MCP动态工具
2026-01-22T14:01:59.339+08:00  INFO --- [           main] c.a.a.a.e.d.mcp.McpDynamicToolFactory    : McpDynamicToolFactory#createTools - reason=无可用的MCP工具
2026-01-22T14:01:59.339+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#createMcpDynamicTools - reason=MCP dynamic tools created, count=0
2026-01-22T14:01:59.339+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=Added MCP dynamic tools, count=0
2026-01-22T14:01:59.339+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#createHttpDynamicTools - reason=HTTP dynamic tools disabled by default
2026-01-22T14:01:59.340+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=合并后CodeactTool总数, count=16
2026-01-22T14:01:59.340+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=React阶段使用内置工具(write_code, execute_code, write_condition_code)
2026-01-22T14:01:59.340+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=注入 React Phase 评估 Hooks, count=2
2026-01-22T14:01:59.340+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=注入 CodeAct Phase 评估 Hooks, count=2
2026-01-22T14:01:59.340+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=已准备注入UnifiedIntentRecognitionHook
2026-01-22T14:01:59.346+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 开始构建CodeactAgent
2026-01-22T14:01:59.353+08:00  INFO --- [           main] .a.a.a.c.t.s.DefaultReturnSchemaRegistry : DefaultReturnSchemaRegistry#<init> - reason=创建新实例, hashCode=1342613143
2026-01-22T14:01:59.355+08:00 DEBUG --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#<init> - reason=创建注册表, returnSchemaRegistry=DefaultReturnSchemaRegistry
2026-01-22T14:01:59.355+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=创建默认CodeactToolRegistry
2026-01-22T14:01:59.355+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=开始注册CodeactTool, count=16
2026-01-22T14:01:59.355+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=unified_search
2026-01-22T14:01:59.355+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=unified_search
2026-01-22T14:01:59.355+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=search_web
2026-01-22T14:01:59.355+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=search_web
2026-01-22T14:01:59.355+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=search_knowledge
2026-01-22T14:01:59.355+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=search_knowledge
2026-01-22T14:01:59.355+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=search_project
2026-01-22T14:01:59.355+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=search_project
2026-01-22T14:01:59.355+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=send_success_message
2026-01-22T14:01:59.356+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=send_success_message
2026-01-22T14:01:59.356+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=send_error_message
2026-01-22T14:01:59.356+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=send_error_message
2026-01-22T14:01:59.356+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=send_notification
2026-01-22T14:01:59.356+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=send_notification
2026-01-22T14:01:59.356+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=subscribe_trigger
2026-01-22T14:01:59.356+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=subscribe_trigger
2026-01-22T14:01:59.356+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=unsubscribe_trigger
2026-01-22T14:01:59.356+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=unsubscribe_trigger
2026-01-22T14:01:59.357+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=list_triggers
2026-01-22T14:01:59.357+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=list_triggers
2026-01-22T14:01:59.357+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=get_trigger_detail
2026-01-22T14:01:59.357+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=get_trigger_detail
2026-01-22T14:01:59.360+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=plan_action
2026-01-22T14:01:59.361+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=plan_action
2026-01-22T14:01:59.361+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=execute_action
2026-01-22T14:01:59.361+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=execute_action
2026-01-22T14:01:59.361+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=list_actions
2026-01-22T14:01:59.361+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=list_actions
2026-01-22T14:01:59.361+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=get_action_details
2026-01-22T14:01:59.361+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=get_action_details
2026-01-22T14:01:59.361+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=execute_system_action
2026-01-22T14:01:59.361+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=execute_system_action
2026-01-22T14:01:59.361+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册完成, count=16
2026-01-22T14:01:59.361+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 创建默认CodeContext: language=PYTHON
2026-01-22T14:01:59.361+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 创建默认RuntimeEnvironmentManager: language=PYTHON
2026-01-22T14:01:59.376+08:00 DEBUG --- [           main] c.a.a.a.c.e.bridge.AgentToolBridge       : AgentToolBridge#<init> 初始化: 注册了0个工具
2026-01-22T14:01:59.379+08:00 DEBUG --- [           main] c.a.a.a.c.executor.bridge.StateBridge    : StateBridge#<init> 初始化完成
2026-01-22T14:01:59.381+08:00  INFO --- [           main] c.a.a.a.core.executor.GraalCodeExecutor  : GraalCodeExecutor#<init> 初始化完成: language=PYTHON, allowIO=false, timeout=30000ms, executableTools=true, customBridgeFactory=false
2026-01-22T14:01:59.381+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#createCodeactSubAgentInterceptor 创建子Agent拦截器
2026-01-22T14:01:59.387+08:00  INFO --- [           main] c.a.a.a.a.subagent.CodeactSubAgent       : CodeactSubAgent#<init> 初始化: name=code-generator
2026-01-22T14:01:59.387+08:00  INFO --- [           main] c.a.a.a.a.subagent.CodeactSubAgent       : CodeactSubAgent#<init> 初始化: name=condition-code-generator
2026-01-22T14:01:59.387+08:00  INFO --- [           main] c.a.a.a.a.s.CodeactSubAgentInterceptor   : CodeactSubAgentInterceptor#<init> 创建默认代码生成子Agent
2026-01-22T14:01:59.822+08:00  INFO --- [           main] c.a.a.a.a.s.CodeactSubAgentInterceptor   : CodeactSubAgentInterceptor#<init> 初始化完成: subAgentCount=2
2026-01-22T14:01:59.825+08:00  INFO --- [           main] c.a.a.a.a.tools.ExecuteCodeTool          : ExecuteCodeTool#<init> 初始化完成
2026-01-22T14:01:59.830+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 拦截器分类完成: modelInterceptors=1, toolInterceptors=0
2026-01-22T14:01:59.830+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 从拦截器提取工具: interceptor=CodeactSubAgent, toolCount=2
2026-01-22T14:01:59.848+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 工具收集完成: interceptorTools=2, regularTools=3, total=6
2026-01-22T14:01:59.850+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 设置ModelInterceptors到LlmNode: count=1
2026-01-22T14:01:59.851+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build CodeactAgent构建完成
2026-01-22T14:01:59.852+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=开始罗列已注册的工具
2026-01-22T14:01:59.852+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct阶段工具数量, count=16
2026-01-22T14:01:59.852+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=1, name=send_success_message, description=Send a success message to the IDE console
2026-01-22T14:01:59.852+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=2, name=get_trigger_detail, description=获取指定触发器的详细信息
2026-01-22T14:01:59.852+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=3, name=get_action_details, description=获取指定动作的完整定义，包括参数、步骤等详细信息。
2026-01-22T14:01:59.852+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=4, name=search_project, description=搜索项目上下文信息，包括代码、配置、文档等
2026-01-22T14:01:59.852+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=5, name=subscribe_trigger, description=创建并订阅一个新的触发器
2026-01-22T14:01:59.852+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=6, name=search_knowledge, description=搜索团队知识库，包括FAQ、规范、最佳实践等
2026-01-22T14:01:59.852+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=7, name=unified_search, description=统一搜索工具，可同时搜索项目、知识库、Web等多个数据源
2026-01-22T14:01:59.852+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=8, name=unsubscribe_trigger, description=取消订阅并删除一个触发器
2026-01-22T14:01:59.852+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=9, name=search_web, description=执行Web搜索，获取公开互联网信息
2026-01-22T14:01:59.852+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=10, name=list_actions, description=列出所有可用的动作，支持按分类和标签筛选。
2026-01-22T14:01:59.852+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=11, name=plan_action, description=根据用户输入匹配动作并生成执行计划。返回匹配的动作列表和生成的执行计划。
2026-01-22T14:01:59.852+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=12, name=execute_system_action, description=执行系统Action（如OA请假、ERP操作等）。根据action_id调用相应的系统Handler。
2026-01-22T14:01:59.852+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=13, name=send_error_message, description=Send an error message to the IDE console
2026-01-22T14:01:59.852+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=14, name=execute_action, description=执行指定的执行计划，返回执行结果。支持继续执行等待用户输入的计划。
2026-01-22T14:01:59.852+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=15, name=send_notification, description=Send a notification message
2026-01-22T14:01:59.853+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=16, name=list_triggers, description=列出所有触发器
2026-01-22T14:01:59.853+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React阶段工具数量, count=6
2026-01-22T14:01:59.853+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=1, name=write_code, description=Generate and register a new function with specified name and parameters. IMPORTANT: You MUST provide both 'functionName' and 'parameters' fields. Example: write_code(requirement='calculate sum', functionName='calculate_sum', parameters=['a', 'b'])
2026-01-22T14:01:59.854+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=2, name=write_condition_code, description=Generate and register a condition check function for triggers. This function MUST return a boolean value (True/False). Example: write_condition_code(requirement='check if it is a working day', functionName='check_is_working_day', parameters=['date'])
2026-01-22T14:01:59.854+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=3, name=send_success_message, description=Send a success message to the IDE console
2026-01-22T14:01:59.854+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=4, name=send_error_message, description=Send an error message to the IDE console
2026-01-22T14:01:59.854+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=5, name=send_notification, description=Send a notification message
2026-01-22T14:01:59.854+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=6, name=execute_code, description=Execute a previously generated function by its exact name with matching parameters. CRITICAL: The functionName MUST exactly match the name used in write_code. The 'args' parameter names MUST exactly match the 'parameters' specified in write_code. Example: If you called write_code with functionName='calculate_sum' and parameters=['a', 'b'], then you must call execute_code with functionName='calculate_sum' and args={'a': 10, 'b': 20}. Parameter value types supported: String, Number, Boolean, List, Map/Object.
2026-01-22T14:01:59.854+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=工具罗列完成
2026-01-22T14:01:59.857+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgent#<init> 初始化完成: language=PYTHON
2026-01-22T14:01:59.858+08:00  INFO --- [           main] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#<init> 初始化 Agent 加载器
2026-01-22T14:01:59.888+08:00 DEBUG --- [           main] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#<init> Agent 图结构:
@startuml CodeactAgent
skinparam usecaseFontSize 14
skinparam usecaseStereotypeFontSize 12
skinparam hexagonFontSize 14
skinparam hexagonStereotypeFontSize 12
title "CodeactAgent"
footer

powered by spring-ai-alibaba
end footer
circle start<<input>> as __START__
circle stop as __END__
usecase "_AGENT_MODEL_"<<Node>>
usecase "_AGENT_TOOL_"<<Node>>
usecase "_AGENT_HOOK_UnifiedIntentRecognitionHook.before"<<Node>>
usecase "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"<<Node>>
usecase "_AGENT_HOOK_EvaluationPromptInjectionHook-REACT.beforeModel"<<Node>>
hexagon "check state" as condition1<<Condition>>
hexagon "check state" as condition2<<Condition>>
hexagon "check state" as condition3<<Condition>>
"__START__" -down-> "_AGENT_HOOK_UnifiedIntentRecognitionHook.before"
"_AGENT_HOOK_UnifiedIntentRecognitionHook.before" .down.> "condition1"
"condition1" .down.> "__END__"
'"_AGENT_HOOK_UnifiedIntentRecognitionHook.before" .down.> "__END__"
"condition1" .down.> "_AGENT_TOOL_"
'"_AGENT_HOOK_UnifiedIntentRecognitionHook.before" .down.> "_AGENT_TOOL_"
"condition1" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
'"_AGENT_HOOK_UnifiedIntentRecognitionHook.before" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
"_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel" -down-> "_AGENT_HOOK_EvaluationPromptInjectionHook-REACT.beforeModel"
"_AGENT_HOOK_EvaluationPromptInjectionHook-REACT.beforeModel" -down-> "_AGENT_MODEL_"
"_AGENT_MODEL_" .down.> "condition2"
"condition2" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
'"_AGENT_MODEL_" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
"condition2" .down.> "__END__"
'"_AGENT_MODEL_" .down.> "__END__"
"condition2" .down.> "_AGENT_TOOL_"
'"_AGENT_MODEL_" .down.> "_AGENT_TOOL_"
"_AGENT_TOOL_" .down.> "condition3"
"condition3" .down.> "__END__"
'"_AGENT_TOOL_" .down.> "__END__"
"condition3" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
'"_AGENT_TOOL_" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
@enduml

2026-01-22T14:01:59.888+08:00  INFO --- [           main] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#<init> 已注册 agent: grayscale_agent
2026-01-22T14:01:59.892+08:00  INFO --- [           main] .a.a.a.p.c.ParamOptionsAutoConfiguration : ParamOptionsAutoConfiguration - Creating OptionsCache with TTL: 300000ms
2026-01-22T14:01:59.892+08:00  INFO --- [           main] a.a.a.p.s.DefaultParameterOptionsService : DefaultParameterOptionsService initialized with 3 handlers
2026-01-22T14:01:59.899+08:00  INFO --- [           main] c.a.a.a.planning.system.OaSystemHandler  : OaSystemHandler#init - initialized
2026-01-22T14:01:59.915+08:00 DEBUG --- [           main] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#listAgents 列出所有 agent
2026-01-22T14:01:59.916+08:00  INFO --- [           main] c.a.c.a.a.s.controller.AgentController   : AgentController initialized with 1 dynamic agents: [grayscale_agent]
2026-01-22T14:02:00.052+08:00  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: d3d6f679-d5d9-417f-921c-d3b4d2acb215

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2026-01-22T14:02:00.121+08:00  INFO --- [           main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2026-01-22T14:02:00.931+08:00  INFO --- [           main] e.e.c.CodeactEvaluationAutoConfiguration : CodeactEvaluationAutoConfiguration#inputRoutingEvaluationHook - reason=创建输入路由评估 Hook
2026-01-22T14:02:00.933+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchFacade - reason=creating search facade with 3 providers
2026-01-22T14:02:00.935+08:00  INFO --- [           main] c.a.a.a.e.s.i.DefaultSearchFacade        : DefaultSearchFacade#init - reason=initialized with 3 providers
2026-01-22T14:02:00.937+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=开始创建Search工具
2026-01-22T14:02:00.937+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockBaiduWebSearchProvider, toolName=search_web
2026-01-22T14:02:00.939+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockKnowledgeStoreSearchProvider, toolName=search_knowledge
2026-01-22T14:02:00.941+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockProjectContextSearchProvider, toolName=search_project
2026-01-22T14:02:00.941+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=搜索工具创建完成, totalCount=3
2026-01-22T14:02:00.941+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=Search工具创建完成, count=3
2026-01-22T14:02:00.941+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=创建Search工具, index=1, name=search_web, description=执行Web搜索，获取公开互联网信息
2026-01-22T14:02:00.941+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=创建Search工具, index=2, name=search_knowledge, description=搜索团队知识库，包括FAQ、规范、最佳实践等
2026-01-22T14:02:00.941+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=创建Search工具, index=3, name=search_project, description=搜索项目上下文信息，包括代码、配置、文档等
2026-01-22T14:02:00.949+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#diagnostics - reason=ElasticsearchClient bean found
2026-01-22T14:02:00.949+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#diagnostics - reason=EmbeddingModel bean found
2026-01-22T14:02:00.953+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#diagnostics - Planning module status:
2026-01-22T14:02:00.953+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration :   - ActionRepository: MybatisPlusActionRepository
2026-01-22T14:02:00.953+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration :   - ActionProvider: SemanticActionProvider
2026-01-22T14:02:00.953+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration :   - PlanGenerator: DefaultPlanGenerator
2026-01-22T14:02:00.953+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration :   - PlanExecutor: DefaultPlanExecutor
2026-01-22T14:02:01.309+08:00  INFO --- [           main] c.a.a.a.c.c.CodeactCoreAutoConfiguration : CodeactCoreAutoConfiguration#returnSchemaRegistry - reason=创建ReturnSchemaRegistry单例Bean
2026-01-22T14:02:01.309+08:00  INFO --- [           main] .a.a.a.c.t.s.DefaultReturnSchemaRegistry : DefaultReturnSchemaRegistry#<init> - reason=创建新实例, hashCode=1954139639
2026-01-22T14:02:02.489+08:00  WARN --- [           main] o.s.m.p.s.SyncMcpSamplingProvider        : No sampling methods found
2026-01-22T14:02:02.493+08:00  WARN --- [           main] o.s.m.p.e.SyncMcpElicitationProvider     : No elicitation methods found
2026-01-22T14:02:02.571+08:00  INFO --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2026-01-22T14:02:02.588+08:00  INFO --- [           main] c.a.a.a.start.AssistantAgentApplication  : Started AssistantAgentApplication in 17.848 seconds (process running for 21.801)
2026-01-22T14:02:02.598+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#run - reason=Starting experience module validation
2026-01-22T14:02:02.829+08:00 DEBUG --- [           main] .p.e.r.ElasticsearchExperienceRepository : ElasticsearchExperienceRepository#count - reason=count completed, count=0
2026-01-22T14:02:02.916+08:00 DEBUG --- [           main] .p.e.r.ElasticsearchExperienceRepository : ElasticsearchExperienceRepository#countByTypeAndScope - reason=count completed, type=CODE, scope=null, count=0
2026-01-22T14:02:02.947+08:00 DEBUG --- [           main] .p.e.r.ElasticsearchExperienceRepository : ElasticsearchExperienceRepository#countByTypeAndScope - reason=count completed, type=REACT, scope=null, count=0
2026-01-22T14:02:02.967+08:00 DEBUG --- [           main] .p.e.r.ElasticsearchExperienceRepository : ElasticsearchExperienceRepository#countByTypeAndScope - reason=count completed, type=COMMON, scope=null, count=0
2026-01-22T14:02:02.967+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testExperienceCount - reason=Experience stats: total=0, code=0, react=0, common=0
2026-01-22T14:02:02.967+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCommonExperienceQuery - reason=Testing common experience query
2026-01-22T14:02:03.582+08:00 DEBUG --- [           main] .s.p.e.p.ElasticsearchExperienceProvider : ElasticsearchExperienceProvider#query - reason=query completed, type=COMMON, text=null, count=0
2026-01-22T14:02:03.583+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCommonExperienceQuery - reason=Found 0 common experiences
2026-01-22T14:02:03.583+08:00  WARN --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCommonExperienceQuery - reason=❌ MoLiHong identity experience not found
2026-01-22T14:02:03.583+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCodeExperienceQuery - reason=Testing code experience query (demo keyword)
2026-01-22T14:02:03.602+08:00 DEBUG --- [           main] .s.p.e.p.ElasticsearchExperienceProvider : ElasticsearchExperienceProvider#query - reason=query completed, type=CODE, text=null, count=0
2026-01-22T14:02:03.602+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCodeExperienceQuery - reason=Found 0 demo code experiences
2026-01-22T14:02:03.604+08:00  WARN --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCodeExperienceQuery - reason=❌ Demo code experience not found
2026-01-22T14:02:03.604+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testReactExperienceQuery - reason=Testing react experience query
2026-01-22T14:02:03.618+08:00 DEBUG --- [           main] .s.p.e.p.ElasticsearchExperienceProvider : ElasticsearchExperienceProvider#query - reason=query completed, type=REACT, text=null, count=0
2026-01-22T14:02:03.618+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testReactExperienceQuery - reason=Found 0 react experiences
2026-01-22T14:02:03.618+08:00  WARN --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testReactExperienceQuery - reason=❌ Ambiguous intent strategy not found
2026-01-22T14:02:03.618+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#run - reason=Experience module validation completed
2026-01-22T14:02:03.619+08:00  INFO --- [           main] c.a.a.a.s.a.config.AuthInitialization    : AuthInitialization#run - 初始化认证系统
2026-01-22T14:02:03.647+08:00 DEBUG --- [           main] c.a.a.a.s.a.s.AuthenticationService      : AuthenticationService#initDefaultAdmin - 管理员账户已存在
2026-01-22T14:02:03.647+08:00  INFO --- [           main] c.a.a.a.s.a.config.AuthInitialization    : AuthInitialization#run - 认证系统初始化完成
2026-01-22T14:02:12.332+08:00  INFO --- [nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-01-22T14:02:12.332+08:00  INFO --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2026-01-22T14:02:12.332+08:00  INFO --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 0 ms
2026-01-22T14:02:12.704+08:00 DEBUG --- [nio-8080-exec-2] c.a.a.a.s.a.s.JwtAuthenticationFilter    : JwtAuthenticationFilter#doFilterInternal - 设置用户认证: username=admin, roles=[ADMIN, USER]
2026-01-22T14:02:12.789+08:00  INFO --- [nio-8080-exec-2] c.a.c.a.a.s.controller.ThreadController  : Request received for POST /apps/research_agent/users/user-001/threads (service generates ID) with state: {}
2026-01-22T14:02:12.789+08:00  INFO --- [nio-8080-exec-2] c.a.c.a.a.s.service.ThreadServiceImpl    : Created thread: a124d066-b5e2-4abe-99d3-acb488ca2c20 for app=research_agent, user=user-001
2026-01-22T14:02:12.789+08:00  INFO --- [nio-8080-exec-2] c.a.c.a.a.s.controller.ThreadController  : Thread created successfully with generated id: a124d066-b5e2-4abe-99d3-acb488ca2c20
2026-01-22T14:02:12.865+08:00 DEBUG --- [nio-8080-exec-4] c.a.a.a.s.a.s.JwtAuthenticationFilter    : JwtAuthenticationFilter#doFilterInternal - 设置用户认证: username=admin, roles=[ADMIN, USER]
2026-01-22T14:02:12.883+08:00  INFO --- [nio-8080-exec-4] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#loadAgent 加载 agent: research_agent
2026-01-22T14:02:12.883+08:00  INFO --- [nio-8080-exec-4] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#loadAgent 成功加载 agent: research_agent
2026-01-22T14:02:12.923+08:00 DEBUG --- [nio-8080-exec-6] c.a.a.a.s.a.s.JwtAuthenticationFilter    : JwtAuthenticationFilter#doFilterInternal - 设置用户认证: username=admin, roles=[ADMIN, USER]
2026-01-22T14:02:12.926+08:00  INFO --- [nio-8080-exec-6] c.a.c.a.a.s.controller.ThreadController  : Request received for GET /apps/research_agent/users/user-001/threads/a124d066-b5e2-4abe-99d3-acb488ca2c20
2026-01-22T14:02:13.080+08:00 DEBUG --- [nio-8080-exec-4] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#beforeAgent - reason=checking unified intent
2026-01-22T14:02:13.081+08:00 DEBUG --- [nio-8080-exec-4] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#get - reason=session not found, sessionId=a124d066-b5e2-4abe-99d3-acb488ca2c20
2026-01-22T14:02:13.083+08:00 DEBUG --- [nio-8080-exec-4] c.a.a.a.p.i.SemanticActionProvider       : SemanticActionProvider#matchActions - reason=matching actions, userInput=我要请假
2026-01-22T14:02:14.175+08:00  WARN --- [nio-8080-exec-4] c.a.a.a.p.p.c.ActionEntityConverter      : ActionEntityConverter#parseActionType - reason=unknown action type, type=INTERNAL
2026-01-22T14:02:14.175+08:00  WARN --- [nio-8080-exec-4] c.a.a.a.p.p.c.ActionEntityConverter      : ActionEntityConverter#parseActionType - reason=unknown action type, type=INTERNAL
2026-01-22T14:02:14.192+08:00  INFO --- [nio-8080-exec-4] c.a.a.a.p.i.SemanticActionProvider       : SemanticActionProvider#matchActions - reason=matching completed, userInput=我要请假, matchCount=1
2026-01-22T14:02:14.192+08:00  INFO --- [nio-8080-exec-4] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#beforeAgent - reason=match found, actionId=oa:leave:request, confidence=0.95, matchType=KEYWORD_EXACT
2026-01-22T14:02:14.208+08:00 DEBUG --- [nio-8080-exec-4] .s.p.e.p.ElasticsearchExperienceProvider : ElasticsearchExperienceProvider#query - reason=query completed, type=REACT, text=null, count=0
2026-01-22T14:02:14.208+08:00  INFO --- [nio-8080-exec-4] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#beforeAgent - reason=high confidence, using Planning direct execution with param collection, actionId=oa:leave:request, confidence=0.95
2026-01-22T14:02:14.208+08:00  INFO --- [nio-8080-exec-4] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handlePlanningDirectExecution - reason=direct execution, actionId=oa:leave:request
2026-01-22T14:02:14.208+08:00  INFO --- [nio-8080-exec-4] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handlePlanningDirectExecution - reason=missing required params, count=5, actionId=oa:leave:request
2026-01-22T14:02:14.208+08:00  INFO --- [nio-8080-exec-4] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handleMissingParameters - reason=asking for param, paramName=start_date, actionId=oa:leave:request
2026-01-22T14:02:14.208+08:00 DEBUG --- [nio-8080-exec-4] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#save - reason=session saved, sessionId=a124d066-b5e2-4abe-99d3-acb488ca2c20, ttl=PT30M
2026-01-22T14:02:14.208+08:00 DEBUG --- [nio-8080-exec-4] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#saveSession - reason=session saved, sessionId=a124d066-b5e2-4abe-99d3-acb488ca2c20
2026-01-22T14:02:14.208+08:00  INFO --- [nio-8080-exec-4] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handleMissingParameters - reason=session saved to store, sessionId=a124d066-b5e2-4abe-99d3-acb488ca2c20, actionId=oa:leave:request
2026-01-22T14:02:14.304+08:00 ERROR --- [nio-8080-exec-4] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] threw exception

org.springframework.security.authorization.AuthorizationDeniedException: Access Denied
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:99)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:91)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$4(HandlerMappingIntrospector.java:267)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:612)
	at org.apache.catalina.core.ApplicationDispatcher.doDispatch(ApplicationDispatcher.java:540)
	at org.apache.catalina.core.ApplicationDispatcher.dispatch(ApplicationDispatcher.java:511)
	at org.apache.catalina.core.AsyncContextImpl$AsyncRunnable.run(AsyncContextImpl.java:599)
	at org.apache.catalina.core.AsyncContextImpl.doInternalDispatch(AsyncContextImpl.java:342)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.asyncDispatch(CoyoteAdapter.java:239)
	at org.apache.coyote.AbstractProcessor.dispatch(AbstractProcessor.java:243)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:57)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)

2026-01-22T14:02:14.309+08:00 ERROR --- [nio-8080-exec-4] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Unable to handle the Spring Security Exception because the response is already committed.] with root cause

org.springframework.security.authorization.AuthorizationDeniedException: Access Denied
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:99)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:91)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$4(HandlerMappingIntrospector.java:267)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:612)
	at org.apache.catalina.core.ApplicationDispatcher.doDispatch(ApplicationDispatcher.java:540)
	at org.apache.catalina.core.ApplicationDispatcher.dispatch(ApplicationDispatcher.java:511)
	at org.apache.catalina.core.AsyncContextImpl$AsyncRunnable.run(AsyncContextImpl.java:599)
	at org.apache.catalina.core.AsyncContextImpl.doInternalDispatch(AsyncContextImpl.java:342)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.asyncDispatch(CoyoteAdapter.java:239)
	at org.apache.coyote.AbstractProcessor.dispatch(AbstractProcessor.java:243)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:57)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)

2026-01-22T14:02:14.328+08:00 ERROR --- [nio-8080-exec-4] s.e.ErrorMvcAutoConfiguration$StaticView : Cannot render error page for request [null] as the response has already been committed. As a result, the response may have the wrong status code.
2026-01-22T14:04:39.933+08:00  INFO --- [r-shutdown-hook] c.a.c.a.g.internal.node.ParallelNode     : Shutting down ParallelNode default executor
2026-01-22T14:04:39.933+08:00  INFO --- [r-shutdown-hook] c.a.c.a.g.internal.node.ParallelNode     : ParallelNode default thread pool terminated
2026-01-22T14:04:39.934+08:00  INFO --- [r-shutdown-hook] c.a.c.a.g.internal.node.ParallelNode     : ParallelNode default executor shut down successfully
2026-01-22T14:04:39.946+08:00  INFO --- [ionShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2026-01-22T14:04:39.964+08:00  INFO --- [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2026-01-22T14:04:39.989+08:00  INFO --- [ionShutdownHook] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#shutdown - reason=shutdown completed
2026-01-22T14:04:39.991+08:00  INFO --- [ionShutdownHook] c.a.a.a.e.e.GraphBasedEvaluationExecutor : Shutting down ExecutorService
2026-01-22T14:04:39.999+08:00  INFO --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2026-01-22T14:04:40.028+08:00  INFO --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2026-01-22T14:04:59.269+08:00  INFO --- [           main] c.a.a.a.start.AssistantAgentApplication  : Starting AssistantAgentApplication using Java 21.0.9 with PID 10400 (D:\devfive\AssistantAgent\assistant-agent-start\target\classes started by zhou_ in D:\devfive\AssistantAgent)
2026-01-22T14:04:59.273+08:00 DEBUG --- [           main] c.a.a.a.start.AssistantAgentApplication  : Running with Spring Boot v3.4.8, Spring v6.2.9
2026-01-22T14:04:59.276+08:00  INFO --- [           main] c.a.a.a.start.AssistantAgentApplication  : No active profile set, falling back to 1 default profile: "default"
2026-01-22T14:05:04.743+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Elasticsearch repositories in DEFAULT mode.
2026-01-22T14:05:04.898+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 118 ms. Found 0 Elasticsearch repository interfaces.
2026-01-22T14:05:04.924+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Reactive Elasticsearch repositories in DEFAULT mode.
2026-01-22T14:05:04.953+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 20 ms. Found 0 Reactive Elasticsearch repository interfaces.
2026-01-22T14:05:05.442+08:00  WARN --- [           main] o.m.s.mapper.ClassPathMapperScanner      : Skipping MapperFactoryBean with name 'learningRecordMapper' and 'com.alibaba.assistant.agent.start.persistence.learning.mapper.LearningRecordMapper' mapperInterface. Bean already defined with the same name!
2026-01-22T14:05:05.443+08:00  WARN --- [           main] o.m.s.mapper.ClassPathMapperScanner      : Skipping MapperFactoryBean with name 'triggerDefinitionMapper' and 'com.alibaba.assistant.agent.start.persistence.trigger.mapper.TriggerDefinitionMapper' mapperInterface. Bean already defined with the same name!
2026-01-22T14:05:05.443+08:00  WARN --- [           main] o.m.s.mapper.ClassPathMapperScanner      : Skipping MapperFactoryBean with name 'triggerExecutionRecordMapper' and 'com.alibaba.assistant.agent.start.persistence.trigger.mapper.TriggerExecutionRecordMapper' mapperInterface. Bean already defined with the same name!
2026-01-22T14:05:05.446+08:00  WARN --- [           main] o.m.s.mapper.ClassPathMapperScanner      : Skipping MapperFactoryBean with name 'actionRegistryMapper' and 'com.alibaba.assistant.agent.planning.persistence.mapper.ActionRegistryMapper' mapperInterface. Bean already defined with the same name!
2026-01-22T14:05:11.437+08:00  INFO --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2026-01-22T14:05:11.501+08:00  INFO --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2026-01-22T14:05:11.501+08:00  INFO --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.43]
2026-01-22T14:05:11.729+08:00  INFO --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2026-01-22T14:05:11.729+08:00  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 12245 ms
2026-01-22T14:05:11.794+08:00  INFO --- [           main] c.a.a.a.s.a.security.JwtTokenProvider    : JwtTokenProvider#init - JWT 密钥已初始化
2026-01-22T14:05:11.944+08:00 DEBUG --- [           main] c.a.a.a.s.a.s.JwtAuthenticationFilter    : Filter 'jwtAuthenticationFilter' configured for use
2026-01-22T14:05:12.769+08:00 ERROR --- [           main] o.m.spring.mapper.MapperFactoryBean      : Error while adding the mapper 'interface com.alibaba.assistant.agent.start.auth.mapper.UserMapper' to configuration.

java.lang.TypeNotPresentException: Type com.alibaba.assistant.agent.start.auth.entity.User not present
	at java.base/sun.reflect.generics.factory.CoreReflectionFactory.makeNamedType(CoreReflectionFactory.java:117)
	at java.base/sun.reflect.generics.visitor.Reifier.visitClassTypeSignature(Reifier.java:125)
	at java.base/sun.reflect.generics.tree.ClassTypeSignature.accept(ClassTypeSignature.java:49)
	at java.base/sun.reflect.generics.visitor.Reifier.reifyTypeArguments(Reifier.java:68)
	at java.base/sun.reflect.generics.visitor.Reifier.visitClassTypeSignature(Reifier.java:138)
	at java.base/sun.reflect.generics.tree.ClassTypeSignature.accept(ClassTypeSignature.java:49)
	at java.base/sun.reflect.generics.repository.ClassRepository.computeSuperInterfaces(ClassRepository.java:117)
	at java.base/sun.reflect.generics.repository.ClassRepository.getSuperInterfaces(ClassRepository.java:95)
	at java.base/java.lang.Class.getGenericInterfaces(Class.java:1298)
	at org.springframework.core.ResolvableType.getInterfaces(ResolvableType.java:553)
	at org.springframework.core.ResolvableType.as(ResolvableType.java:501)
	at org.springframework.core.GenericTypeResolver.resolveTypeArguments(GenericTypeResolver.java:140)
	at com.baomidou.mybatisplus.core.toolkit.reflect.SpringReflectionHelper.resolveTypeArguments(SpringReflectionHelper.java:30)
	at com.baomidou.mybatisplus.core.toolkit.reflect.GenericTypeUtils.resolveTypeArguments(GenericTypeUtils.java:51)
	at com.baomidou.mybatisplus.core.toolkit.ReflectionKit.getSuperClassGenericType(ReflectionKit.java:102)
	at com.baomidou.mybatisplus.core.injector.AbstractSqlInjector.inspectInject(AbstractSqlInjector.java:43)
	at com.baomidou.mybatisplus.core.MybatisMapperAnnotationBuilder.parserInjector(MybatisMapperAnnotationBuilder.java:130)
	at com.baomidou.mybatisplus.core.MybatisMapperAnnotationBuilder.parse(MybatisMapperAnnotationBuilder.java:120)
	at com.baomidou.mybatisplus.core.MybatisMapperRegistry.addMapper(MybatisMapperRegistry.java:90)
	at com.baomidou.mybatisplus.core.MybatisConfiguration.addMapper(MybatisConfiguration.java:129)
	at org.mybatis.spring.mapper.MapperFactoryBean.checkDaoConfig(MapperFactoryBean.java:80)
	at org.springframework.dao.support.DaoSupport.afterPropertiesSet(DaoSupport.java:44)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1683)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1628)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:785)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:768)
	at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:146)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:509)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1459)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:606)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1683)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1628)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:785)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:768)
	at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:146)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:509)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1459)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:606)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.instantiateSingleton(DefaultListableBeanFactory.java:1222)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingleton(DefaultListableBeanFactory.java:1188)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:1123)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:987)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.alibaba.assistant.agent.start.AssistantAgentApplication.main(AssistantAgentApplication.java:68)
Caused by: java.lang.ClassNotFoundException: com.alibaba.assistant.agent.start.auth.entity.User
	at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)
	at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)
	at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:526)
	at java.base/java.lang.Class.forName0(Native Method)
	at java.base/java.lang.Class.forName(Class.java:536)
	at java.base/java.lang.Class.forName(Class.java:515)
	at java.base/sun.reflect.generics.factory.CoreReflectionFactory.makeNamedType(CoreReflectionFactory.java:114)
	... 67 common frames omitted

2026-01-22T14:05:12.797+08:00  WARN --- [           main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'authInitialization': Unsatisfied dependency expressed through field 'authenticationService': Error creating bean with name 'authenticationService': Unsatisfied dependency expressed through field 'userMapper': Error creating bean with name 'userMapper' defined in file [D:\devfive\AssistantAgent\assistant-agent-start\target\classes\com\alibaba\assistant\agent\start\auth\mapper\UserMapper.class]: java.lang.TypeNotPresentException: Type com.alibaba.assistant.agent.start.auth.entity.User not present
2026-01-22T14:05:12.808+08:00  INFO --- [           main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2026-01-22T14:05:12.858+08:00  INFO --- [           main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2026-01-22T14:05:12.964+08:00 ERROR --- [           main] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'authInitialization': Unsatisfied dependency expressed through field 'authenticationService': Error creating bean with name 'authenticationService': Unsatisfied dependency expressed through field 'userMapper': Error creating bean with name 'userMapper' defined in file [D:\devfive\AssistantAgent\assistant-agent-start\target\classes\com\alibaba\assistant\agent\start\auth\mapper\UserMapper.class]: java.lang.TypeNotPresentException: Type com.alibaba.assistant.agent.start.auth.entity.User not present
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:788)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:768)
	at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:146)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:509)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1459)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:606)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.instantiateSingleton(DefaultListableBeanFactory.java:1222)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingleton(DefaultListableBeanFactory.java:1188)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:1123)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:987)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.alibaba.assistant.agent.start.AssistantAgentApplication.main(AssistantAgentApplication.java:68)
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'authenticationService': Unsatisfied dependency expressed through field 'userMapper': Error creating bean with name 'userMapper' defined in file [D:\devfive\AssistantAgent\assistant-agent-start\target\classes\com\alibaba\assistant\agent\start\auth\mapper\UserMapper.class]: java.lang.TypeNotPresentException: Type com.alibaba.assistant.agent.start.auth.entity.User not present
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:788)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:768)
	at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:146)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:509)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1459)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:606)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1683)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1628)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:785)
	... 22 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'userMapper' defined in file [D:\devfive\AssistantAgent\assistant-agent-start\target\classes\com\alibaba\assistant\agent\start\auth\mapper\UserMapper.class]: java.lang.TypeNotPresentException: Type com.alibaba.assistant.agent.start.auth.entity.User not present
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1826)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1683)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1628)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:785)
	... 35 common frames omitted
Caused by: java.lang.IllegalArgumentException: java.lang.TypeNotPresentException: Type com.alibaba.assistant.agent.start.auth.entity.User not present
	at org.mybatis.spring.mapper.MapperFactoryBean.checkDaoConfig(MapperFactoryBean.java:83)
	at org.springframework.dao.support.DaoSupport.afterPropertiesSet(DaoSupport.java:44)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1873)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1822)
	... 44 common frames omitted
Caused by: java.lang.TypeNotPresentException: Type com.alibaba.assistant.agent.start.auth.entity.User not present
	at java.base/sun.reflect.generics.factory.CoreReflectionFactory.makeNamedType(CoreReflectionFactory.java:117)
	at java.base/sun.reflect.generics.visitor.Reifier.visitClassTypeSignature(Reifier.java:125)
	at java.base/sun.reflect.generics.tree.ClassTypeSignature.accept(ClassTypeSignature.java:49)
	at java.base/sun.reflect.generics.visitor.Reifier.reifyTypeArguments(Reifier.java:68)
	at java.base/sun.reflect.generics.visitor.Reifier.visitClassTypeSignature(Reifier.java:138)
	at java.base/sun.reflect.generics.tree.ClassTypeSignature.accept(ClassTypeSignature.java:49)
	at java.base/sun.reflect.generics.repository.ClassRepository.computeSuperInterfaces(ClassRepository.java:117)
	at java.base/sun.reflect.generics.repository.ClassRepository.getSuperInterfaces(ClassRepository.java:95)
	at java.base/java.lang.Class.getGenericInterfaces(Class.java:1298)
	at org.springframework.core.ResolvableType.getInterfaces(ResolvableType.java:553)
	at org.springframework.core.ResolvableType.as(ResolvableType.java:501)
	at org.springframework.core.GenericTypeResolver.resolveTypeArguments(GenericTypeResolver.java:140)
	at com.baomidou.mybatisplus.core.toolkit.reflect.SpringReflectionHelper.resolveTypeArguments(SpringReflectionHelper.java:30)
	at com.baomidou.mybatisplus.core.toolkit.reflect.GenericTypeUtils.resolveTypeArguments(GenericTypeUtils.java:51)
	at com.baomidou.mybatisplus.core.toolkit.ReflectionKit.getSuperClassGenericType(ReflectionKit.java:102)
	at com.baomidou.mybatisplus.core.injector.AbstractSqlInjector.inspectInject(AbstractSqlInjector.java:43)
	at com.baomidou.mybatisplus.core.MybatisMapperAnnotationBuilder.parserInjector(MybatisMapperAnnotationBuilder.java:130)
	at com.baomidou.mybatisplus.core.MybatisMapperAnnotationBuilder.parse(MybatisMapperAnnotationBuilder.java:120)
	at com.baomidou.mybatisplus.core.MybatisMapperRegistry.addMapper(MybatisMapperRegistry.java:90)
	at com.baomidou.mybatisplus.core.MybatisConfiguration.addMapper(MybatisConfiguration.java:129)
	at org.mybatis.spring.mapper.MapperFactoryBean.checkDaoConfig(MapperFactoryBean.java:80)
	... 47 common frames omitted
Caused by: java.lang.ClassNotFoundException: com.alibaba.assistant.agent.start.auth.entity.User
	at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)
	at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)
	at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:526)
	at java.base/java.lang.Class.forName0(Native Method)
	at java.base/java.lang.Class.forName(Class.java:536)
	at java.base/java.lang.Class.forName(Class.java:515)
	at java.base/sun.reflect.generics.factory.CoreReflectionFactory.makeNamedType(CoreReflectionFactory.java:114)
	... 67 common frames omitted

2026-01-22T14:05:46.731+08:00  INFO --- [           main] c.a.a.a.start.AssistantAgentApplication  : Starting AssistantAgentApplication using Java 21.0.9 with PID 24628 (D:\devfive\AssistantAgent\assistant-agent-start\target\classes started by zhou_ in D:\devfive\AssistantAgent)
2026-01-22T14:05:46.733+08:00 DEBUG --- [           main] c.a.a.a.start.AssistantAgentApplication  : Running with Spring Boot v3.4.8, Spring v6.2.9
2026-01-22T14:05:46.734+08:00  INFO --- [           main] c.a.a.a.start.AssistantAgentApplication  : No active profile set, falling back to 1 default profile: "default"
2026-01-22T14:05:49.048+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Elasticsearch repositories in DEFAULT mode.
2026-01-22T14:05:49.100+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 38 ms. Found 0 Elasticsearch repository interfaces.
2026-01-22T14:05:49.111+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Reactive Elasticsearch repositories in DEFAULT mode.
2026-01-22T14:05:49.122+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 7 ms. Found 0 Reactive Elasticsearch repository interfaces.
2026-01-22T14:05:49.368+08:00  WARN --- [           main] o.m.s.mapper.ClassPathMapperScanner      : Skipping MapperFactoryBean with name 'learningRecordMapper' and 'com.alibaba.assistant.agent.start.persistence.learning.mapper.LearningRecordMapper' mapperInterface. Bean already defined with the same name!
2026-01-22T14:05:49.369+08:00  WARN --- [           main] o.m.s.mapper.ClassPathMapperScanner      : Skipping MapperFactoryBean with name 'triggerDefinitionMapper' and 'com.alibaba.assistant.agent.start.persistence.trigger.mapper.TriggerDefinitionMapper' mapperInterface. Bean already defined with the same name!
2026-01-22T14:05:49.369+08:00  WARN --- [           main] o.m.s.mapper.ClassPathMapperScanner      : Skipping MapperFactoryBean with name 'triggerExecutionRecordMapper' and 'com.alibaba.assistant.agent.start.persistence.trigger.mapper.TriggerExecutionRecordMapper' mapperInterface. Bean already defined with the same name!
2026-01-22T14:05:49.371+08:00  WARN --- [           main] o.m.s.mapper.ClassPathMapperScanner      : Skipping MapperFactoryBean with name 'actionRegistryMapper' and 'com.alibaba.assistant.agent.planning.persistence.mapper.ActionRegistryMapper' mapperInterface. Bean already defined with the same name!
2026-01-22T14:05:51.411+08:00  INFO --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2026-01-22T14:05:51.439+08:00  INFO --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2026-01-22T14:05:51.440+08:00  INFO --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.43]
2026-01-22T14:05:51.549+08:00  INFO --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2026-01-22T14:05:51.549+08:00  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 4716 ms
2026-01-22T14:05:51.587+08:00  INFO --- [           main] c.a.a.a.s.a.security.JwtTokenProvider    : JwtTokenProvider#init - JWT 密钥已初始化
2026-01-22T14:05:51.686+08:00 DEBUG --- [           main] c.a.a.a.s.a.s.JwtAuthenticationFilter    : Filter 'jwtAuthenticationFilter' configured for use
2026-01-22T14:05:52.245+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#init - reason=search extension framework is enabled
2026-01-22T14:05:52.247+08:00  INFO --- [           main] c.a.a.a.s.s.MockBaiduWebSearchProvider   : MockBaiduWebSearchProvider#init - reason=使用简单模式初始化
2026-01-22T14:05:52.250+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#unifiedSearchCodeactTool - reason=创建统一搜索工具, providerCount=3
2026-01-22T14:05:52.340+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#init - reason=planning extension is enabled
2026-01-22T14:05:52.342+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#init - reason=ES configuration class loaded (elasticsearch.enabled=true)
2026-01-22T14:05:52.345+08:00  INFO --- [           main] toConfiguration$MybatisPlusConfiguration : MybatisPlusConfiguration#init - reason=MySQL configuration class loaded (mysql.enabled=true, MyBatisPlus present)
2026-01-22T14:05:52.408+08:00  INFO --- [           main] toConfiguration$MybatisPlusConfiguration : MybatisPlusConfiguration#actionEntityConverter - reason=creating entity converter
2026-01-22T14:05:52.409+08:00  INFO --- [           main] toConfiguration$MybatisPlusConfiguration : MybatisPlusConfiguration#mybatisPlusActionRepository - reason=ActionRegistryMapper found, creating MySQL repository
2026-01-22T14:05:53.276+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#actionVectorizationService - reason=creating ES vectorization service
2026-01-22T14:05:53.405+08:00  INFO --- [           main] c.a.a.a.p.v.ActionVectorizationService   : ActionVectorizationService#init - reason=ES index initialized on startup
2026-01-22T14:05:53.423+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#semanticActionProvider - reason=creating semantic action provider, semanticWeight=0.6, keywordWeight=0.4, matchThreshold=0.5
2026-01-22T14:05:53.430+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#defaultPlanGenerator - reason=creating default plan generator
2026-01-22T14:05:53.433+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#planActionCodeactTool - reason=creating plan_action tool
2026-01-22T14:05:53.444+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#queryStepExecutor - reason=creating query step executor
2026-01-22T14:05:53.448+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#inputStepExecutor - reason=creating input step executor
2026-01-22T14:05:53.450+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#executeStepExecutor - reason=creating execute step executor
2026-01-22T14:05:53.453+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#apiCallStepExecutor - reason=creating api call step executor
2026-01-22T14:05:53.473+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#validationStepExecutor - reason=creating validation step executor
2026-01-22T14:05:53.475+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#stepExecutorRegistry - reason=creating executor registry, executorCount=5
2026-01-22T14:05:53.476+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=QUERY, executorClass=QueryStepExecutor
2026-01-22T14:05:53.477+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=INPUT, executorClass=InputStepExecutor
2026-01-22T14:05:53.477+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=EXECUTE, executorClass=ExecuteStepExecutor
2026-01-22T14:05:53.477+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=API_CALL, executorClass=ApiCallStepExecutor
2026-01-22T14:05:53.477+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=VALIDATION, executorClass=ValidationStepExecutor
2026-01-22T14:05:53.478+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#defaultPlanExecutor - reason=creating default plan executor
2026-01-22T14:05:53.492+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#executeActionCodeactTool - reason=creating execute_action tool
2026-01-22T14:05:53.496+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#listActionsCodeactTool - reason=creating list_actions tool
2026-01-22T14:05:53.499+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#getActionDetailsCodeactTool - reason=creating get_action_details tool
2026-01-22T14:05:53.502+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#executeSystemActionCodeactTool - reason=creating execute_system_action tool
2026-01-22T14:05:53.636+08:00  INFO --- [           main] c.a.a.a.start.config.PersistenceConfig   : PersistenceConfig#init - reason=persistence configuration loaded
2026-01-22T14:05:53.639+08:00  INFO --- [           main] c.a.a.a.start.config.PersistenceConfig   : PersistenceConfig#elasticsearchExperienceProvider - reason=creating Elasticsearch experience provider (PRIMARY), indexName=experiences
2026-01-22T14:05:53.651+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#<init> - reason=初始化默认评估套件配置, experienceProviderAvailable=true
2026-01-22T14:05:53.655+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#evaluatorRegistry - reason=创建 EvaluatorRegistry Bean
2026-01-22T14:05:53.657+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'llm-based' of type LLMBasedEvaluator
2026-01-22T14:05:53.659+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'passthrough' of type RuleBasedEvaluator
2026-01-22T14:05:53.663+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'react_experience_evaluator' of type RuleBasedEvaluator
2026-01-22T14:05:53.663+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createDefaultEvaluatorRegistry - reason=注册 React 阶段经验检索评估器
2026-01-22T14:05:53.663+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'codeact_experience_evaluator' of type RuleBasedEvaluator
2026-01-22T14:05:53.663+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createDefaultEvaluatorRegistry - reason=注册 CodeAct 阶段经验检索评估器
2026-01-22T14:05:53.664+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#evaluationService - reason=创建默认 EvaluationService, sharedRegistryEvaluators=[llm-based, passthrough, codeact_experience_evaluator, react_experience_evaluator]
2026-01-22T14:05:53.668+08:00 DEBUG --- [           main] c.a.a.a.e.e.GraphBasedEvaluationExecutor : Created default ExecutorService for batch processing
2026-01-22T14:05:53.670+08:00  INFO --- [           main] .c.ExperienceEvaluationCriterionProvider : ExperienceEvaluationCriterionProvider#<init> - reason=初始化经验评估 Criterion 提供者
2026-01-22T14:05:53.674+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#structuredParamExtractor - reason=creating structured param extractor
2026-01-22T14:05:53.693+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#parameterValidator - reason=creating parameter validator
2026-01-22T14:05:53.695+08:00  INFO --- [           main] f.a.AutowiredAnnotationBeanPostProcessor : Inconsistent constructor declaration on bean with name 'actionExecutorFactory': single autowire-marked constructor flagged as optional - this constructor is effectively required since there is no default constructor to fall back to: public com.alibaba.assistant.agent.planning.executor.ActionExecutorFactory(java.util.List,com.alibaba.assistant.agent.planning.permission.interceptor.PermissionInterceptor)
2026-01-22T14:05:53.700+08:00  INFO --- [           main] .a.a.a.p.c.ParamOptionsAutoConfiguration : ParamOptionsAutoConfiguration - Parameter options module initialized
2026-01-22T14:05:53.702+08:00  INFO --- [           main] .a.a.a.p.c.ParamOptionsAutoConfiguration : ParamOptionsAutoConfiguration - Creating RestTemplate for HTTP handlers
2026-01-22T14:05:53.713+08:00  INFO --- [           main] c.a.a.a.planning.executor.HttpExecutor   : HttpExecutor#init - initialized
2026-01-22T14:05:53.715+08:00  INFO --- [           main] c.a.a.a.p.executor.InternalExecutor      : InternalExecutor#init - initialized
2026-01-22T14:05:53.725+08:00  INFO --- [           main] c.a.a.a.p.p.a.PermissionAdapterRegistry  : PermissionAdapterRegistry#registerAdapter - registered adapter: system=gov-platform, name=政务服务平台权限适配器
2026-01-22T14:05:53.725+08:00  INFO --- [           main] c.a.a.a.p.p.a.PermissionAdapterRegistry  : PermissionAdapterRegistry#registerAdapter - registered adapter: system=oa-system, name=OA办公系统权限适配器
2026-01-22T14:05:53.726+08:00  INFO --- [           main] c.a.a.a.p.p.a.PermissionAdapterRegistry  : PermissionAdapterRegistry initialized with 2 adapters: [gov-platform, oa-system]
2026-01-22T14:05:53.730+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U001, system=oa-system, externalUser=zhang.san@company.com
2026-01-22T14:05:53.732+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U001, system=gov-platform, externalUser=320102199001011234
2026-01-22T14:05:53.732+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U002, system=oa-system, externalUser=li.si@company.com
2026-01-22T14:05:53.732+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U003, system=oa-system, externalUser=wang.wu@company.com
2026-01-22T14:05:53.732+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U003, system=gov-platform, externalUser=leader_001
2026-01-22T14:05:53.732+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U004, system=gov-platform, externalUser=staff_001
2026-01-22T14:05:53.733+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U005, system=oa-system, externalUser=sun.qi@company.com
2026-01-22T14:05:53.733+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService initialized with demo data
2026-01-22T14:05:53.736+08:00  INFO --- [           main] c.a.a.a.p.c.PermissionAutoConfiguration  : PermissionAutoConfiguration - creating PermissionInterceptor
2026-01-22T14:05:53.737+08:00  INFO --- [           main] c.a.a.a.p.e.ActionExecutorFactory        : ActionExecutorFactory#init - initialized executors: INTERNAL(InternalExecutor), HTTP(HttpExecutor), DATA_AGENT(DataAgentExecutor), MCP(McpExecutor)
2026-01-22T14:05:53.737+08:00  INFO --- [           main] c.a.a.a.p.e.ActionExecutorFactory        : ActionExecutorFactory#init - permission interceptor enabled
2026-01-22T14:05:53.740+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#sessionProvider - reason=creating in-memory session provider
2026-01-22T14:05:53.742+08:00  INFO --- [           main] c.a.a.a.p.s.InMemorySessionProvider      : InMemorySessionProvider#init - initialized
2026-01-22T14:05:53.745+08:00  INFO --- [           main] c.a.a.a.p.s.ParamCollectionService       : ParamCollectionService#init - sessionProvider=InMemory
2026-01-22T14:05:53.750+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'action_intent_evaluator' of type ActionIntentEvaluator
2026-01-22T14:05:53.750+08:00  INFO --- [           main] p.i.PlanningIntegrationAutoConfiguration : PlanningIntegrationAutoConfiguration#actionIntentEvaluator - initialized and registered, paramCollection=true, llmVerification=true, maxCandidates=5
2026-01-22T14:05:53.752+08:00  INFO --- [           main] .p.i.PlanningEvaluationCriterionProvider : PlanningEvaluationCriterionProvider#init - initialized, llmVerificationEnabled=true
2026-01-22T14:05:53.752+08:00  INFO --- [           main] p.i.PlanningIntegrationAutoConfiguration : PlanningIntegrationAutoConfiguration#planningEvaluationCriterionProvider - registered planning evaluation criterion provider
2026-01-22T14:05:53.753+08:00  INFO --- [           main] .c.ExperienceEvaluationCriterionProvider : ExperienceEvaluationCriterionProvider#getReactPhaseCriteria - reason=提供 React 阶段评估 Criteria
2026-01-22T14:05:53.759+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createReactPhaseSuite - reason=添加自定义 Criterion, provider=ExperienceEvaluationCriterionProvider, count=3
2026-01-22T14:05:53.760+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createReactPhaseSuite - reason=添加自定义 Criterion, provider=PlanningEvaluationCriterionProvider, count=2
2026-01-22T14:05:53.767+08:00  INFO --- [           main] a.a.e.a.BatchAggregationStrategyRegistry : Registered batch aggregation strategy: ANY_TRUE
2026-01-22T14:05:53.769+08:00  INFO --- [           main] a.a.e.a.BatchAggregationStrategyRegistry : Registered batch aggregation strategy: ALL_TRUE
2026-01-22T14:05:53.862+08:00  INFO --- [           main] c.a.c.a.g.internal.node.ParallelNode     : Calculated core pool size: 32 (CPU cores: 16)
2026-01-22T14:05:53.862+08:00  INFO --- [           main] c.a.c.a.g.internal.node.ParallelNode     : Calculated maximum pool size: 64 (CPU cores: 16)
2026-01-22T14:05:53.862+08:00  INFO --- [           main] c.a.c.a.g.internal.node.ParallelNode     : Calculated queue capacity: 1000
2026-01-22T14:05:53.865+08:00  INFO --- [           main] c.a.a.a.e.DefaultEvaluationService       : Registered evaluation suite: react-phase-suite
2026-01-22T14:05:53.865+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#evaluationService - reason=注册 React Phase Suite, suiteId=react-phase-suite
2026-01-22T14:05:53.866+08:00  INFO --- [           main] .c.ExperienceEvaluationCriterionProvider : ExperienceEvaluationCriterionProvider#getCodeActPhaseCriteria - reason=提供 CodeAct 阶段评估 Criteria
2026-01-22T14:05:53.866+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createCodeActPhaseSuite - reason=添加自定义 Criterion, provider=ExperienceEvaluationCriterionProvider, count=3
2026-01-22T14:05:53.866+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createCodeActPhaseSuite - reason=添加自定义 Criterion, provider=PlanningEvaluationCriterionProvider, count=2
2026-01-22T14:05:53.866+08:00  INFO --- [           main] a.a.e.a.BatchAggregationStrategyRegistry : Registered batch aggregation strategy: ANY_TRUE
2026-01-22T14:05:53.866+08:00  INFO --- [           main] a.a.e.a.BatchAggregationStrategyRegistry : Registered batch aggregation strategy: ALL_TRUE
2026-01-22T14:05:53.868+08:00  INFO --- [           main] c.a.a.a.e.DefaultEvaluationService       : Registered evaluation suite: codeact-phase-suite
2026-01-22T14:05:53.868+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#evaluationService - reason=注册 CodeAct Phase Suite, suiteId=codeact-phase-suite
2026-01-22T14:05:53.869+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#codeactEvaluationContextFactory - reason=创建 EvaluationContextFactory
2026-01-22T14:05:53.871+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#codeactEvaluationResultAttacher - reason=创建 EvaluationResultAttacher
2026-01-22T14:05:53.878+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#reactPhaseEvaluationHooks - reason=创建 React Phase ModelInputEvaluationHook
2026-01-22T14:05:53.881+08:00  INFO --- [           main] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#<init> - reason=初始化, phase=REACT, providerCount=1
2026-01-22T14:05:53.882+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#reactPhaseEvaluationHooks - reason=创建 React Phase EvaluationPromptInjectionHook, providersCount=2
2026-01-22T14:05:53.884+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#codeactPhaseEvaluationHooks - reason=创建 CodeAct Phase ModelInputEvaluationHook
2026-01-22T14:05:53.885+08:00  INFO --- [           main] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#<init> - reason=初始化, phase=CODEACT, providerCount=1
2026-01-22T14:05:53.885+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#codeactPhaseEvaluationHooks - reason=创建 CodeAct Phase EvaluationPromptInjectionHook, providersCount=2
2026-01-22T14:05:53.888+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#keywordMatcher - reason=creating keyword matcher
2026-01-22T14:05:53.892+08:00  INFO --- [           main] .ParamCollectionSessionAutoConfiguration : ParamCollectionSessionAutoConfiguration#inMemoryParamCollectionSessionStore - reason=creating in-memory session store (Redis not available), ttl=PT30M
2026-01-22T14:05:53.893+08:00  WARN --- [           main] .ParamCollectionSessionAutoConfiguration : ParamCollectionSessionAutoConfiguration#inMemoryParamCollectionSessionStore - reason=WARNING: In-memory session store is not suitable for distributed environment!
2026-01-22T14:05:53.896+08:00  INFO --- [           main] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#<init> - reason=initialized, defaultTtl=PT30M
2026-01-22T14:05:53.896+08:00  WARN --- [           main] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#<init> - reason=WARNING: Using in-memory session store, not suitable for distributed environment!
2026-01-22T14:05:53.902+08:00  INFO --- [           main] iguration$UnifiedIntentHookConfiguration : UnifiedIntentHookConfiguration#unifiedIntentRecognitionHook - reason=creating unified intent hook, experienceProviderPresent=true, chatModelPresent=true, sessionStorePresent=true, directExecuteThreshold=0.95, hintThreshold=0.5
2026-01-22T14:05:54.161+08:00  INFO --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2026-01-22T14:05:54.573+08:00  INFO --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@59509393
2026-01-22T14:05:54.577+08:00  INFO --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2026-01-22T14:05:54.793+08:00  WARN --- [           main] c.a.a.a.p.p.c.ActionEntityConverter      : ActionEntityConverter#parseActionType - reason=unknown action type, type=INTERNAL
2026-01-22T14:05:54.837+08:00 DEBUG --- [           main] c.a.a.a.planning.intent.KeywordMatcher   : KeywordMatcher#registerAction - actionId=oa:leave:request, keywords=57
2026-01-22T14:05:54.838+08:00  INFO --- [           main] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#initKeywordMatcher - reason=initialized, actionCount=1, keywordIndexSize=57
2026-01-22T14:05:54.847+08:00  INFO --- [           main] c.a.a.a.start.config.PersistenceConfig   : PersistenceConfig#elasticsearchExperienceRepository - reason=creating Elasticsearch experience repository (PRIMARY), indexName=experiences
2026-01-22T14:05:54.858+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#init - reason=reply module enabled
2026-01-22T14:05:54.861+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactToolFactory - reason=创建CodeactTool工厂, channels=1
2026-01-22T14:05:54.861+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#init - reason=工厂初始化完成, channels=1
2026-01-22T14:05:54.877+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=开始创建Reply工具
2026-01-22T14:05:54.884+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#createTools - reason=创建工具成功, toolName=send_success_message, channelCode=IDE_TEXT
2026-01-22T14:05:54.884+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#createTools - reason=创建工具成功, toolName=send_error_message, channelCode=IDE_TEXT
2026-01-22T14:05:54.885+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#createTools - reason=创建工具成功, toolName=send_notification, channelCode=IDE_TEXT
2026-01-22T14:05:54.885+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#createTools - reason=工具创建完成, totalCount=3
2026-01-22T14:05:54.885+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=Reply工具创建完成, count=3
2026-01-22T14:05:54.885+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=创建Reply工具, index=1, name=send_success_message, description=Send a success message to the IDE console
2026-01-22T14:05:54.885+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=创建Reply工具, index=2, name=send_error_message, description=Send an error message to the IDE console
2026-01-22T14:05:54.885+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=创建Reply工具, index=3, name=send_notification, description=Send a notification message
2026-01-22T14:05:54.887+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactToolFactory - reason=创建SearchCodeactTool工厂, providerCount=3
2026-01-22T14:05:54.917+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactToolFactory - reason=创建TriggerCodeactTool工厂
2026-01-22T14:05:54.919+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=开始创建Trigger工具
2026-01-22T14:05:54.921+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=创建SubscribeTriggerCodeactTool成功
2026-01-22T14:05:54.922+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=创建UnsubscribeTriggerCodeactTool成功
2026-01-22T14:05:54.924+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=创建ListTriggersCodeactTool成功
2026-01-22T14:05:54.925+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=创建GetTriggerDetailCodeactTool成功
2026-01-22T14:05:54.925+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=触发器工具创建完成, count=4
2026-01-22T14:05:54.925+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=Trigger工具创建完成, count=4
2026-01-22T14:05:54.925+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=创建Trigger工具, index=1, name=subscribe_trigger, description=创建并订阅一个新的触发器
2026-01-22T14:05:54.925+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=创建Trigger工具, index=2, name=unsubscribe_trigger, description=取消订阅并删除一个触发器
2026-01-22T14:05:54.925+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=创建Trigger工具, index=3, name=list_triggers, description=列出所有触发器
2026-01-22T14:05:54.925+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=创建Trigger工具, index=4, name=get_trigger_detail, description=获取指定触发器的详细信息
2026-01-22T14:05:54.932+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#planningCodeactTools - reason=creating planning tools list
2026-01-22T14:05:54.933+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#planningCodeactTools - reason=created planning tools, count=5
2026-01-22T14:05:54.941+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=创建 CodeactAgent
2026-01-22T14:05:54.941+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=配置 MemorySaver 以支持多轮对话上下文保持
2026-01-22T14:05:54.941+08:00  WARN --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=临时禁用 streaming 模式以排查循环问题
2026-01-22T14:05:54.943+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加UnifiedSearchCodeactTool
2026-01-22T14:05:54.947+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockBaiduWebSearchProvider, toolName=search_web
2026-01-22T14:05:54.950+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockKnowledgeStoreSearchProvider, toolName=search_knowledge
2026-01-22T14:05:54.952+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockProjectContextSearchProvider, toolName=search_project
2026-01-22T14:05:54.952+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=搜索工具创建完成, totalCount=3
2026-01-22T14:05:54.952+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加SearchCodeactTools, count=3
2026-01-22T14:05:54.952+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加ReplyCodeactTools, count=3
2026-01-22T14:05:54.952+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加TriggerCodeactTools, count=4
2026-01-22T14:05:54.952+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加PlanningCodeactTools, count=5
2026-01-22T14:05:54.952+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#createMcpDynamicTools - reason=Creating MCP dynamic tools
2026-01-22T14:05:54.958+08:00  INFO --- [           main] c.a.a.a.e.d.mcp.McpDynamicToolFactory    : McpDynamicToolFactory#createTools - reason=开始创建MCP动态工具
2026-01-22T14:05:54.962+08:00  INFO --- [           main] c.a.a.a.e.d.mcp.McpDynamicToolFactory    : McpDynamicToolFactory#createTools - reason=无可用的MCP工具
2026-01-22T14:05:54.962+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#createMcpDynamicTools - reason=MCP dynamic tools created, count=0
2026-01-22T14:05:54.962+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=Added MCP dynamic tools, count=0
2026-01-22T14:05:54.962+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#createHttpDynamicTools - reason=HTTP dynamic tools disabled by default
2026-01-22T14:05:54.962+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=合并后CodeactTool总数, count=16
2026-01-22T14:05:54.962+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=React阶段使用内置工具(write_code, execute_code, write_condition_code)
2026-01-22T14:05:54.962+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=注入 React Phase 评估 Hooks, count=2
2026-01-22T14:05:54.962+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=注入 CodeAct Phase 评估 Hooks, count=2
2026-01-22T14:05:54.962+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=已准备注入UnifiedIntentRecognitionHook
2026-01-22T14:05:54.965+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 开始构建CodeactAgent
2026-01-22T14:05:54.969+08:00  INFO --- [           main] .a.a.a.c.t.s.DefaultReturnSchemaRegistry : DefaultReturnSchemaRegistry#<init> - reason=创建新实例, hashCode=571309751
2026-01-22T14:05:54.971+08:00 DEBUG --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#<init> - reason=创建注册表, returnSchemaRegistry=DefaultReturnSchemaRegistry
2026-01-22T14:05:54.971+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=创建默认CodeactToolRegistry
2026-01-22T14:05:54.971+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=开始注册CodeactTool, count=16
2026-01-22T14:05:54.971+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=unified_search
2026-01-22T14:05:54.972+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=unified_search
2026-01-22T14:05:54.972+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=search_web
2026-01-22T14:05:54.972+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=search_web
2026-01-22T14:05:54.972+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=search_knowledge
2026-01-22T14:05:54.972+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=search_knowledge
2026-01-22T14:05:54.972+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=search_project
2026-01-22T14:05:54.972+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=search_project
2026-01-22T14:05:54.972+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=send_success_message
2026-01-22T14:05:54.972+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=send_success_message
2026-01-22T14:05:54.972+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=send_error_message
2026-01-22T14:05:54.972+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=send_error_message
2026-01-22T14:05:54.972+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=send_notification
2026-01-22T14:05:54.972+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=send_notification
2026-01-22T14:05:54.972+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=subscribe_trigger
2026-01-22T14:05:54.972+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=subscribe_trigger
2026-01-22T14:05:54.972+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=unsubscribe_trigger
2026-01-22T14:05:54.972+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=unsubscribe_trigger
2026-01-22T14:05:54.972+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=list_triggers
2026-01-22T14:05:54.972+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=list_triggers
2026-01-22T14:05:54.972+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=get_trigger_detail
2026-01-22T14:05:54.973+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=get_trigger_detail
2026-01-22T14:05:54.975+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=plan_action
2026-01-22T14:05:54.975+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=plan_action
2026-01-22T14:05:54.976+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=execute_action
2026-01-22T14:05:54.977+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=execute_action
2026-01-22T14:05:54.978+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=list_actions
2026-01-22T14:05:54.978+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=list_actions
2026-01-22T14:05:54.979+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=get_action_details
2026-01-22T14:05:54.979+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=get_action_details
2026-01-22T14:05:54.980+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=execute_system_action
2026-01-22T14:05:54.980+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=execute_system_action
2026-01-22T14:05:54.980+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册完成, count=16
2026-01-22T14:05:54.980+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 创建默认CodeContext: language=PYTHON
2026-01-22T14:05:54.982+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 创建默认RuntimeEnvironmentManager: language=PYTHON
2026-01-22T14:05:54.985+08:00 DEBUG --- [           main] c.a.a.a.c.e.bridge.AgentToolBridge       : AgentToolBridge#<init> 初始化: 注册了0个工具
2026-01-22T14:05:54.986+08:00 DEBUG --- [           main] c.a.a.a.c.executor.bridge.StateBridge    : StateBridge#<init> 初始化完成
2026-01-22T14:05:54.987+08:00  INFO --- [           main] c.a.a.a.core.executor.GraalCodeExecutor  : GraalCodeExecutor#<init> 初始化完成: language=PYTHON, allowIO=false, timeout=30000ms, executableTools=true, customBridgeFactory=false
2026-01-22T14:05:54.987+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#createCodeactSubAgentInterceptor 创建子Agent拦截器
2026-01-22T14:05:54.997+08:00  INFO --- [           main] c.a.a.a.a.subagent.CodeactSubAgent       : CodeactSubAgent#<init> 初始化: name=code-generator
2026-01-22T14:05:54.997+08:00  INFO --- [           main] c.a.a.a.a.subagent.CodeactSubAgent       : CodeactSubAgent#<init> 初始化: name=condition-code-generator
2026-01-22T14:05:54.997+08:00  INFO --- [           main] c.a.a.a.a.s.CodeactSubAgentInterceptor   : CodeactSubAgentInterceptor#<init> 创建默认代码生成子Agent
2026-01-22T14:05:55.308+08:00  INFO --- [           main] c.a.a.a.a.s.CodeactSubAgentInterceptor   : CodeactSubAgentInterceptor#<init> 初始化完成: subAgentCount=2
2026-01-22T14:05:55.309+08:00  INFO --- [           main] c.a.a.a.a.tools.ExecuteCodeTool          : ExecuteCodeTool#<init> 初始化完成
2026-01-22T14:05:55.312+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 拦截器分类完成: modelInterceptors=1, toolInterceptors=0
2026-01-22T14:05:55.312+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 从拦截器提取工具: interceptor=CodeactSubAgent, toolCount=2
2026-01-22T14:05:55.325+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 工具收集完成: interceptorTools=2, regularTools=3, total=6
2026-01-22T14:05:55.327+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 设置ModelInterceptors到LlmNode: count=1
2026-01-22T14:05:55.328+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build CodeactAgent构建完成
2026-01-22T14:05:55.329+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=开始罗列已注册的工具
2026-01-22T14:05:55.329+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct阶段工具数量, count=16
2026-01-22T14:05:55.329+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=1, name=send_success_message, description=Send a success message to the IDE console
2026-01-22T14:05:55.329+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=2, name=get_trigger_detail, description=获取指定触发器的详细信息
2026-01-22T14:05:55.329+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=3, name=get_action_details, description=获取指定动作的完整定义，包括参数、步骤等详细信息。
2026-01-22T14:05:55.329+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=4, name=search_project, description=搜索项目上下文信息，包括代码、配置、文档等
2026-01-22T14:05:55.329+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=5, name=subscribe_trigger, description=创建并订阅一个新的触发器
2026-01-22T14:05:55.329+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=6, name=search_knowledge, description=搜索团队知识库，包括FAQ、规范、最佳实践等
2026-01-22T14:05:55.329+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=7, name=unified_search, description=统一搜索工具，可同时搜索项目、知识库、Web等多个数据源
2026-01-22T14:05:55.329+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=8, name=unsubscribe_trigger, description=取消订阅并删除一个触发器
2026-01-22T14:05:55.329+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=9, name=search_web, description=执行Web搜索，获取公开互联网信息
2026-01-22T14:05:55.329+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=10, name=list_actions, description=列出所有可用的动作，支持按分类和标签筛选。
2026-01-22T14:05:55.329+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=11, name=plan_action, description=根据用户输入匹配动作并生成执行计划。返回匹配的动作列表和生成的执行计划。
2026-01-22T14:05:55.329+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=12, name=execute_system_action, description=执行系统Action（如OA请假、ERP操作等）。根据action_id调用相应的系统Handler。
2026-01-22T14:05:55.329+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=13, name=send_error_message, description=Send an error message to the IDE console
2026-01-22T14:05:55.329+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=14, name=execute_action, description=执行指定的执行计划，返回执行结果。支持继续执行等待用户输入的计划。
2026-01-22T14:05:55.329+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=15, name=send_notification, description=Send a notification message
2026-01-22T14:05:55.330+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=16, name=list_triggers, description=列出所有触发器
2026-01-22T14:05:55.330+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React阶段工具数量, count=6
2026-01-22T14:05:55.330+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=1, name=write_code, description=Generate and register a new function with specified name and parameters. IMPORTANT: You MUST provide both 'functionName' and 'parameters' fields. Example: write_code(requirement='calculate sum', functionName='calculate_sum', parameters=['a', 'b'])
2026-01-22T14:05:55.330+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=2, name=write_condition_code, description=Generate and register a condition check function for triggers. This function MUST return a boolean value (True/False). Example: write_condition_code(requirement='check if it is a working day', functionName='check_is_working_day', parameters=['date'])
2026-01-22T14:05:55.330+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=3, name=send_success_message, description=Send a success message to the IDE console
2026-01-22T14:05:55.330+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=4, name=send_error_message, description=Send an error message to the IDE console
2026-01-22T14:05:55.330+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=5, name=send_notification, description=Send a notification message
2026-01-22T14:05:55.330+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=6, name=execute_code, description=Execute a previously generated function by its exact name with matching parameters. CRITICAL: The functionName MUST exactly match the name used in write_code. The 'args' parameter names MUST exactly match the 'parameters' specified in write_code. Example: If you called write_code with functionName='calculate_sum' and parameters=['a', 'b'], then you must call execute_code with functionName='calculate_sum' and args={'a': 10, 'b': 20}. Parameter value types supported: String, Number, Boolean, List, Map/Object.
2026-01-22T14:05:55.330+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=工具罗列完成
2026-01-22T14:05:55.332+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgent#<init> 初始化完成: language=PYTHON
2026-01-22T14:05:55.337+08:00  INFO --- [           main] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#<init> 初始化 Agent 加载器
2026-01-22T14:05:55.359+08:00 DEBUG --- [           main] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#<init> Agent 图结构:
@startuml CodeactAgent
skinparam usecaseFontSize 14
skinparam usecaseStereotypeFontSize 12
skinparam hexagonFontSize 14
skinparam hexagonStereotypeFontSize 12
title "CodeactAgent"
footer

powered by spring-ai-alibaba
end footer
circle start<<input>> as __START__
circle stop as __END__
usecase "_AGENT_MODEL_"<<Node>>
usecase "_AGENT_TOOL_"<<Node>>
usecase "_AGENT_HOOK_UnifiedIntentRecognitionHook.before"<<Node>>
usecase "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"<<Node>>
usecase "_AGENT_HOOK_EvaluationPromptInjectionHook-REACT.beforeModel"<<Node>>
hexagon "check state" as condition1<<Condition>>
hexagon "check state" as condition2<<Condition>>
hexagon "check state" as condition3<<Condition>>
"__START__" -down-> "_AGENT_HOOK_UnifiedIntentRecognitionHook.before"
"_AGENT_HOOK_UnifiedIntentRecognitionHook.before" .down.> "condition1"
"condition1" .down.> "__END__"
'"_AGENT_HOOK_UnifiedIntentRecognitionHook.before" .down.> "__END__"
"condition1" .down.> "_AGENT_TOOL_"
'"_AGENT_HOOK_UnifiedIntentRecognitionHook.before" .down.> "_AGENT_TOOL_"
"condition1" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
'"_AGENT_HOOK_UnifiedIntentRecognitionHook.before" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
"_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel" -down-> "_AGENT_HOOK_EvaluationPromptInjectionHook-REACT.beforeModel"
"_AGENT_HOOK_EvaluationPromptInjectionHook-REACT.beforeModel" -down-> "_AGENT_MODEL_"
"_AGENT_MODEL_" .down.> "condition2"
"condition2" .down.> "__END__"
'"_AGENT_MODEL_" .down.> "__END__"
"condition2" .down.> "_AGENT_TOOL_"
'"_AGENT_MODEL_" .down.> "_AGENT_TOOL_"
"condition2" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
'"_AGENT_MODEL_" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
"_AGENT_TOOL_" .down.> "condition3"
"condition3" .down.> "__END__"
'"_AGENT_TOOL_" .down.> "__END__"
"condition3" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
'"_AGENT_TOOL_" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
@enduml

2026-01-22T14:05:55.359+08:00  INFO --- [           main] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#<init> 已注册 agent: grayscale_agent
2026-01-22T14:05:55.368+08:00  INFO --- [           main] .a.a.a.p.c.ParamOptionsAutoConfiguration : ParamOptionsAutoConfiguration - Creating OptionsCache with TTL: 300000ms
2026-01-22T14:05:55.371+08:00  INFO --- [           main] a.a.a.p.s.DefaultParameterOptionsService : DefaultParameterOptionsService initialized with 3 handlers
2026-01-22T14:05:55.373+08:00  INFO --- [           main] c.a.a.a.planning.system.OaSystemHandler  : OaSystemHandler#init - initialized
2026-01-22T14:05:55.387+08:00 DEBUG --- [           main] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#listAgents 列出所有 agent
2026-01-22T14:05:55.388+08:00  INFO --- [           main] c.a.c.a.a.s.controller.AgentController   : AgentController initialized with 1 dynamic agents: [grayscale_agent]
2026-01-22T14:05:55.471+08:00  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: b550a969-c18f-4fcc-a4eb-5565037c49b6

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2026-01-22T14:05:55.509+08:00  INFO --- [           main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2026-01-22T14:05:56.057+08:00  INFO --- [           main] e.e.c.CodeactEvaluationAutoConfiguration : CodeactEvaluationAutoConfiguration#inputRoutingEvaluationHook - reason=创建输入路由评估 Hook
2026-01-22T14:05:56.059+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchFacade - reason=creating search facade with 3 providers
2026-01-22T14:05:56.060+08:00  INFO --- [           main] c.a.a.a.e.s.i.DefaultSearchFacade        : DefaultSearchFacade#init - reason=initialized with 3 providers
2026-01-22T14:05:56.061+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=开始创建Search工具
2026-01-22T14:05:56.063+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockBaiduWebSearchProvider, toolName=search_web
2026-01-22T14:05:56.064+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockKnowledgeStoreSearchProvider, toolName=search_knowledge
2026-01-22T14:05:56.065+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockProjectContextSearchProvider, toolName=search_project
2026-01-22T14:05:56.065+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=搜索工具创建完成, totalCount=3
2026-01-22T14:05:56.065+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=Search工具创建完成, count=3
2026-01-22T14:05:56.065+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=创建Search工具, index=1, name=search_web, description=执行Web搜索，获取公开互联网信息
2026-01-22T14:05:56.065+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=创建Search工具, index=2, name=search_knowledge, description=搜索团队知识库，包括FAQ、规范、最佳实践等
2026-01-22T14:05:56.065+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=创建Search工具, index=3, name=search_project, description=搜索项目上下文信息，包括代码、配置、文档等
2026-01-22T14:05:56.068+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#diagnostics - reason=ElasticsearchClient bean found
2026-01-22T14:05:56.068+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#diagnostics - reason=EmbeddingModel bean found
2026-01-22T14:05:56.070+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#diagnostics - Planning module status:
2026-01-22T14:05:56.070+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration :   - ActionRepository: MybatisPlusActionRepository
2026-01-22T14:05:56.070+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration :   - ActionProvider: SemanticActionProvider
2026-01-22T14:05:56.070+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration :   - PlanGenerator: DefaultPlanGenerator
2026-01-22T14:05:56.070+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration :   - PlanExecutor: DefaultPlanExecutor
2026-01-22T14:05:56.236+08:00  INFO --- [           main] c.a.a.a.c.c.CodeactCoreAutoConfiguration : CodeactCoreAutoConfiguration#returnSchemaRegistry - reason=创建ReturnSchemaRegistry单例Bean
2026-01-22T14:05:56.236+08:00  INFO --- [           main] .a.a.a.c.t.s.DefaultReturnSchemaRegistry : DefaultReturnSchemaRegistry#<init> - reason=创建新实例, hashCode=2101666759
2026-01-22T14:05:56.855+08:00  WARN --- [           main] o.s.m.p.s.SyncMcpSamplingProvider        : No sampling methods found
2026-01-22T14:05:56.857+08:00  WARN --- [           main] o.s.m.p.e.SyncMcpElicitationProvider     : No elicitation methods found
2026-01-22T14:05:56.901+08:00  INFO --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2026-01-22T14:05:56.912+08:00  INFO --- [           main] c.a.a.a.start.AssistantAgentApplication  : Started AssistantAgentApplication in 11.421 seconds (process running for 13.234)
2026-01-22T14:05:56.919+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#run - reason=Starting experience module validation
2026-01-22T14:05:57.015+08:00 DEBUG --- [           main] .p.e.r.ElasticsearchExperienceRepository : ElasticsearchExperienceRepository#count - reason=count completed, count=0
2026-01-22T14:05:57.046+08:00 DEBUG --- [           main] .p.e.r.ElasticsearchExperienceRepository : ElasticsearchExperienceRepository#countByTypeAndScope - reason=count completed, type=CODE, scope=null, count=0
2026-01-22T14:05:57.056+08:00 DEBUG --- [           main] .p.e.r.ElasticsearchExperienceRepository : ElasticsearchExperienceRepository#countByTypeAndScope - reason=count completed, type=REACT, scope=null, count=0
2026-01-22T14:05:57.069+08:00 DEBUG --- [           main] .p.e.r.ElasticsearchExperienceRepository : ElasticsearchExperienceRepository#countByTypeAndScope - reason=count completed, type=COMMON, scope=null, count=0
2026-01-22T14:05:57.069+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testExperienceCount - reason=Experience stats: total=0, code=0, react=0, common=0
2026-01-22T14:05:57.069+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCommonExperienceQuery - reason=Testing common experience query
2026-01-22T14:05:57.408+08:00 DEBUG --- [           main] .s.p.e.p.ElasticsearchExperienceProvider : ElasticsearchExperienceProvider#query - reason=query completed, type=COMMON, text=null, count=0
2026-01-22T14:05:57.409+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCommonExperienceQuery - reason=Found 0 common experiences
2026-01-22T14:05:57.409+08:00  WARN --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCommonExperienceQuery - reason=❌ MoLiHong identity experience not found
2026-01-22T14:05:57.409+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCodeExperienceQuery - reason=Testing code experience query (demo keyword)
2026-01-22T14:05:57.422+08:00 DEBUG --- [           main] .s.p.e.p.ElasticsearchExperienceProvider : ElasticsearchExperienceProvider#query - reason=query completed, type=CODE, text=null, count=0
2026-01-22T14:05:57.422+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCodeExperienceQuery - reason=Found 0 demo code experiences
2026-01-22T14:05:57.422+08:00  WARN --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCodeExperienceQuery - reason=❌ Demo code experience not found
2026-01-22T14:05:57.422+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testReactExperienceQuery - reason=Testing react experience query
2026-01-22T14:05:57.444+08:00 DEBUG --- [           main] .s.p.e.p.ElasticsearchExperienceProvider : ElasticsearchExperienceProvider#query - reason=query completed, type=REACT, text=null, count=0
2026-01-22T14:05:57.444+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testReactExperienceQuery - reason=Found 0 react experiences
2026-01-22T14:05:57.445+08:00  WARN --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testReactExperienceQuery - reason=❌ Ambiguous intent strategy not found
2026-01-22T14:05:57.445+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#run - reason=Experience module validation completed
2026-01-22T14:05:57.447+08:00  INFO --- [           main] c.a.a.a.s.a.config.AuthInitialization    : AuthInitialization#run - 初始化认证系统
2026-01-22T14:05:57.475+08:00 DEBUG --- [           main] c.a.a.a.s.a.s.AuthenticationService      : AuthenticationService#initDefaultAdmin - 管理员账户已存在
2026-01-22T14:05:57.475+08:00  INFO --- [           main] c.a.a.a.s.a.config.AuthInitialization    : AuthInitialization#run - 认证系统初始化完成
2026-01-22T14:06:02.273+08:00  INFO --- [nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-01-22T14:06:02.273+08:00  INFO --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2026-01-22T14:06:02.273+08:00  INFO --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 0 ms
2026-01-22T14:06:02.556+08:00 DEBUG --- [nio-8080-exec-1] c.a.a.a.s.a.s.JwtAuthenticationFilter    : JwtAuthenticationFilter#doFilterInternal - 设置用户认证: username=admin, roles=[ADMIN, USER]
2026-01-22T14:06:02.624+08:00  INFO --- [nio-8080-exec-1] c.a.c.a.a.s.controller.ThreadController  : Request received for POST /apps/research_agent/users/user-001/threads (service generates ID) with state: {}
2026-01-22T14:06:02.624+08:00  INFO --- [nio-8080-exec-1] c.a.c.a.a.s.service.ThreadServiceImpl    : Created thread: a66ecc83-1bc7-4f2e-822a-ef71a93aa1c0 for app=research_agent, user=user-001
2026-01-22T14:06:02.624+08:00  INFO --- [nio-8080-exec-1] c.a.c.a.a.s.controller.ThreadController  : Thread created successfully with generated id: a66ecc83-1bc7-4f2e-822a-ef71a93aa1c0
2026-01-22T14:06:02.688+08:00 DEBUG --- [nio-8080-exec-2] c.a.a.a.s.a.s.JwtAuthenticationFilter    : JwtAuthenticationFilter#doFilterInternal - 设置用户认证: username=admin, roles=[ADMIN, USER]
2026-01-22T14:06:02.703+08:00  INFO --- [nio-8080-exec-2] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#loadAgent 加载 agent: research_agent
2026-01-22T14:06:02.703+08:00  INFO --- [nio-8080-exec-2] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#loadAgent 成功加载 agent: research_agent
2026-01-22T14:06:02.744+08:00 DEBUG --- [nio-8080-exec-5] c.a.a.a.s.a.s.JwtAuthenticationFilter    : JwtAuthenticationFilter#doFilterInternal - 设置用户认证: username=admin, roles=[ADMIN, USER]
2026-01-22T14:06:02.747+08:00  INFO --- [nio-8080-exec-5] c.a.c.a.a.s.controller.ThreadController  : Request received for GET /apps/research_agent/users/user-001/threads/a66ecc83-1bc7-4f2e-822a-ef71a93aa1c0
2026-01-22T14:06:02.858+08:00 DEBUG --- [nio-8080-exec-2] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#beforeAgent - reason=checking unified intent
2026-01-22T14:06:02.858+08:00 DEBUG --- [nio-8080-exec-2] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#get - reason=session not found, sessionId=a66ecc83-1bc7-4f2e-822a-ef71a93aa1c0
2026-01-22T14:06:02.858+08:00 DEBUG --- [nio-8080-exec-2] c.a.a.a.p.i.SemanticActionProvider       : SemanticActionProvider#matchActions - reason=matching actions, userInput=我要请假
2026-01-22T14:06:03.856+08:00  WARN --- [nio-8080-exec-2] c.a.a.a.p.p.c.ActionEntityConverter      : ActionEntityConverter#parseActionType - reason=unknown action type, type=INTERNAL
2026-01-22T14:06:03.873+08:00  WARN --- [nio-8080-exec-2] c.a.a.a.p.p.c.ActionEntityConverter      : ActionEntityConverter#parseActionType - reason=unknown action type, type=INTERNAL
2026-01-22T14:06:03.873+08:00  INFO --- [nio-8080-exec-2] c.a.a.a.p.i.SemanticActionProvider       : SemanticActionProvider#matchActions - reason=matching completed, userInput=我要请假, matchCount=1
2026-01-22T14:06:03.873+08:00  INFO --- [nio-8080-exec-2] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#beforeAgent - reason=match found, actionId=oa:leave:request, confidence=0.95, matchType=KEYWORD_EXACT
2026-01-22T14:06:03.892+08:00 DEBUG --- [nio-8080-exec-2] .s.p.e.p.ElasticsearchExperienceProvider : ElasticsearchExperienceProvider#query - reason=query completed, type=REACT, text=null, count=0
2026-01-22T14:06:03.892+08:00  INFO --- [nio-8080-exec-2] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#beforeAgent - reason=high confidence, using Planning direct execution with param collection, actionId=oa:leave:request, confidence=0.95
2026-01-22T14:06:03.892+08:00  INFO --- [nio-8080-exec-2] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handlePlanningDirectExecution - reason=direct execution, actionId=oa:leave:request
2026-01-22T14:06:03.892+08:00  INFO --- [nio-8080-exec-2] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handlePlanningDirectExecution - reason=missing required params, count=5, actionId=oa:leave:request
2026-01-22T14:06:03.892+08:00  INFO --- [nio-8080-exec-2] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handleMissingParameters - reason=asking for param, paramName=start_date, actionId=oa:leave:request
2026-01-22T14:06:03.892+08:00 DEBUG --- [nio-8080-exec-2] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#save - reason=session saved, sessionId=a66ecc83-1bc7-4f2e-822a-ef71a93aa1c0, ttl=PT30M
2026-01-22T14:06:03.892+08:00 DEBUG --- [nio-8080-exec-2] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#saveSession - reason=session saved, sessionId=a66ecc83-1bc7-4f2e-822a-ef71a93aa1c0
2026-01-22T14:06:03.892+08:00  INFO --- [nio-8080-exec-2] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handleMissingParameters - reason=session saved to store, sessionId=a66ecc83-1bc7-4f2e-822a-ef71a93aa1c0, actionId=oa:leave:request
2026-01-22T14:10:45.713+08:00  INFO --- [r-shutdown-hook] c.a.c.a.g.internal.node.ParallelNode     : Shutting down ParallelNode default executor
2026-01-22T14:10:45.714+08:00  INFO --- [r-shutdown-hook] c.a.c.a.g.internal.node.ParallelNode     : ParallelNode default thread pool terminated
2026-01-22T14:10:45.714+08:00  INFO --- [r-shutdown-hook] c.a.c.a.g.internal.node.ParallelNode     : ParallelNode default executor shut down successfully
2026-01-22T14:10:45.724+08:00  INFO --- [ionShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2026-01-22T14:10:45.736+08:00  INFO --- [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2026-01-22T14:10:45.750+08:00  INFO --- [ionShutdownHook] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#shutdown - reason=shutdown completed
2026-01-22T14:10:45.751+08:00  INFO --- [ionShutdownHook] c.a.a.a.e.e.GraphBasedEvaluationExecutor : Shutting down ExecutorService
2026-01-22T14:10:45.755+08:00  INFO --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2026-01-22T14:10:45.775+08:00  INFO --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2026-01-22T14:11:12.208+08:00  INFO --- [           main] c.a.a.a.start.AssistantAgentApplication  : Starting AssistantAgentApplication using Java 21.0.9 with PID 21804 (D:\devfive\AssistantAgent\assistant-agent-start\target\classes started by zhou_ in D:\devfive\AssistantAgent)
2026-01-22T14:11:12.214+08:00 DEBUG --- [           main] c.a.a.a.start.AssistantAgentApplication  : Running with Spring Boot v3.4.8, Spring v6.2.9
2026-01-22T14:11:12.216+08:00  INFO --- [           main] c.a.a.a.start.AssistantAgentApplication  : No active profile set, falling back to 1 default profile: "default"
2026-01-22T14:11:17.657+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Elasticsearch repositories in DEFAULT mode.
2026-01-22T14:11:17.775+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 89 ms. Found 0 Elasticsearch repository interfaces.
2026-01-22T14:11:17.798+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Reactive Elasticsearch repositories in DEFAULT mode.
2026-01-22T14:11:17.826+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 19 ms. Found 0 Reactive Elasticsearch repository interfaces.
2026-01-22T14:11:18.308+08:00  WARN --- [           main] o.m.s.mapper.ClassPathMapperScanner      : Skipping MapperFactoryBean with name 'learningRecordMapper' and 'com.alibaba.assistant.agent.start.persistence.learning.mapper.LearningRecordMapper' mapperInterface. Bean already defined with the same name!
2026-01-22T14:11:18.309+08:00  WARN --- [           main] o.m.s.mapper.ClassPathMapperScanner      : Skipping MapperFactoryBean with name 'triggerDefinitionMapper' and 'com.alibaba.assistant.agent.start.persistence.trigger.mapper.TriggerDefinitionMapper' mapperInterface. Bean already defined with the same name!
2026-01-22T14:11:18.309+08:00  WARN --- [           main] o.m.s.mapper.ClassPathMapperScanner      : Skipping MapperFactoryBean with name 'triggerExecutionRecordMapper' and 'com.alibaba.assistant.agent.start.persistence.trigger.mapper.TriggerExecutionRecordMapper' mapperInterface. Bean already defined with the same name!
2026-01-22T14:11:18.311+08:00  WARN --- [           main] o.m.s.mapper.ClassPathMapperScanner      : Skipping MapperFactoryBean with name 'actionRegistryMapper' and 'com.alibaba.assistant.agent.planning.persistence.mapper.ActionRegistryMapper' mapperInterface. Bean already defined with the same name!
2026-01-22T14:11:23.080+08:00  INFO --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2026-01-22T14:11:23.157+08:00  INFO --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2026-01-22T14:11:23.157+08:00  INFO --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.43]
2026-01-22T14:11:23.405+08:00  INFO --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2026-01-22T14:11:23.406+08:00  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 11006 ms
2026-01-22T14:11:23.481+08:00  INFO --- [           main] c.a.a.a.s.a.security.JwtTokenProvider    : JwtTokenProvider#init - JWT 密钥已初始化
2026-01-22T14:11:23.653+08:00 DEBUG --- [           main] c.a.a.a.s.a.s.JwtAuthenticationFilter    : Filter 'jwtAuthenticationFilter' configured for use
2026-01-22T14:11:24.940+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#init - reason=search extension framework is enabled
2026-01-22T14:11:24.944+08:00  INFO --- [           main] c.a.a.a.s.s.MockBaiduWebSearchProvider   : MockBaiduWebSearchProvider#init - reason=使用简单模式初始化
2026-01-22T14:11:24.952+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#unifiedSearchCodeactTool - reason=创建统一搜索工具, providerCount=3
2026-01-22T14:11:25.172+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#init - reason=planning extension is enabled
2026-01-22T14:11:25.177+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#init - reason=ES configuration class loaded (elasticsearch.enabled=true)
2026-01-22T14:11:25.181+08:00  INFO --- [           main] toConfiguration$MybatisPlusConfiguration : MybatisPlusConfiguration#init - reason=MySQL configuration class loaded (mysql.enabled=true, MyBatisPlus present)
2026-01-22T14:11:25.312+08:00  INFO --- [           main] toConfiguration$MybatisPlusConfiguration : MybatisPlusConfiguration#actionEntityConverter - reason=creating entity converter
2026-01-22T14:11:25.315+08:00  INFO --- [           main] toConfiguration$MybatisPlusConfiguration : MybatisPlusConfiguration#mybatisPlusActionRepository - reason=ActionRegistryMapper found, creating MySQL repository
2026-01-22T14:11:27.151+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#actionVectorizationService - reason=creating ES vectorization service
2026-01-22T14:11:27.468+08:00  INFO --- [           main] c.a.a.a.p.v.ActionVectorizationService   : ActionVectorizationService#init - reason=ES index initialized on startup
2026-01-22T14:11:27.510+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#semanticActionProvider - reason=creating semantic action provider, semanticWeight=0.6, keywordWeight=0.4, matchThreshold=0.5
2026-01-22T14:11:27.522+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#defaultPlanGenerator - reason=creating default plan generator
2026-01-22T14:11:27.530+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#planActionCodeactTool - reason=creating plan_action tool
2026-01-22T14:11:27.538+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#queryStepExecutor - reason=creating query step executor
2026-01-22T14:11:27.545+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#inputStepExecutor - reason=creating input step executor
2026-01-22T14:11:27.550+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#executeStepExecutor - reason=creating execute step executor
2026-01-22T14:11:27.554+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#apiCallStepExecutor - reason=creating api call step executor
2026-01-22T14:11:27.712+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#validationStepExecutor - reason=creating validation step executor
2026-01-22T14:11:27.718+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#stepExecutorRegistry - reason=creating executor registry, executorCount=5
2026-01-22T14:11:27.721+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=QUERY, executorClass=QueryStepExecutor
2026-01-22T14:11:27.722+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=INPUT, executorClass=InputStepExecutor
2026-01-22T14:11:27.722+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=EXECUTE, executorClass=ExecuteStepExecutor
2026-01-22T14:11:27.722+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=API_CALL, executorClass=ApiCallStepExecutor
2026-01-22T14:11:27.722+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=VALIDATION, executorClass=ValidationStepExecutor
2026-01-22T14:11:27.724+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#defaultPlanExecutor - reason=creating default plan executor
2026-01-22T14:11:27.802+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#executeActionCodeactTool - reason=creating execute_action tool
2026-01-22T14:11:27.806+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#listActionsCodeactTool - reason=creating list_actions tool
2026-01-22T14:11:27.811+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#getActionDetailsCodeactTool - reason=creating get_action_details tool
2026-01-22T14:11:27.816+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#executeSystemActionCodeactTool - reason=creating execute_system_action tool
2026-01-22T14:11:28.054+08:00  INFO --- [           main] c.a.a.a.start.config.PersistenceConfig   : PersistenceConfig#init - reason=persistence configuration loaded
2026-01-22T14:11:28.058+08:00  INFO --- [           main] c.a.a.a.start.config.PersistenceConfig   : PersistenceConfig#elasticsearchExperienceProvider - reason=creating Elasticsearch experience provider (PRIMARY), indexName=experiences
2026-01-22T14:11:28.078+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#<init> - reason=初始化默认评估套件配置, experienceProviderAvailable=true
2026-01-22T14:11:28.084+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#evaluatorRegistry - reason=创建 EvaluatorRegistry Bean
2026-01-22T14:11:28.088+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'llm-based' of type LLMBasedEvaluator
2026-01-22T14:11:28.091+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'passthrough' of type RuleBasedEvaluator
2026-01-22T14:11:28.097+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'react_experience_evaluator' of type RuleBasedEvaluator
2026-01-22T14:11:28.097+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createDefaultEvaluatorRegistry - reason=注册 React 阶段经验检索评估器
2026-01-22T14:11:28.097+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'codeact_experience_evaluator' of type RuleBasedEvaluator
2026-01-22T14:11:28.098+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createDefaultEvaluatorRegistry - reason=注册 CodeAct 阶段经验检索评估器
2026-01-22T14:11:28.099+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#evaluationService - reason=创建默认 EvaluationService, sharedRegistryEvaluators=[llm-based, passthrough, codeact_experience_evaluator, react_experience_evaluator]
2026-01-22T14:11:28.106+08:00 DEBUG --- [           main] c.a.a.a.e.e.GraphBasedEvaluationExecutor : Created default ExecutorService for batch processing
2026-01-22T14:11:28.111+08:00  INFO --- [           main] .c.ExperienceEvaluationCriterionProvider : ExperienceEvaluationCriterionProvider#<init> - reason=初始化经验评估 Criterion 提供者
2026-01-22T14:11:28.121+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#structuredParamExtractor - reason=creating structured param extractor
2026-01-22T14:11:28.157+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#parameterValidator - reason=creating parameter validator
2026-01-22T14:11:28.162+08:00  INFO --- [           main] f.a.AutowiredAnnotationBeanPostProcessor : Inconsistent constructor declaration on bean with name 'actionExecutorFactory': single autowire-marked constructor flagged as optional - this constructor is effectively required since there is no default constructor to fall back to: public com.alibaba.assistant.agent.planning.executor.ActionExecutorFactory(java.util.List,com.alibaba.assistant.agent.planning.permission.interceptor.PermissionInterceptor)
2026-01-22T14:11:28.167+08:00  INFO --- [           main] .a.a.a.p.c.ParamOptionsAutoConfiguration : ParamOptionsAutoConfiguration - Parameter options module initialized
2026-01-22T14:11:28.171+08:00  INFO --- [           main] .a.a.a.p.c.ParamOptionsAutoConfiguration : ParamOptionsAutoConfiguration - Creating RestTemplate for HTTP handlers
2026-01-22T14:11:28.190+08:00  INFO --- [           main] c.a.a.a.planning.executor.HttpExecutor   : HttpExecutor#init - initialized
2026-01-22T14:11:28.192+08:00  INFO --- [           main] c.a.a.a.p.executor.InternalExecutor      : InternalExecutor#init - initialized
2026-01-22T14:11:28.212+08:00  INFO --- [           main] c.a.a.a.p.p.a.PermissionAdapterRegistry  : PermissionAdapterRegistry#registerAdapter - registered adapter: system=gov-platform, name=政务服务平台权限适配器
2026-01-22T14:11:28.213+08:00  INFO --- [           main] c.a.a.a.p.p.a.PermissionAdapterRegistry  : PermissionAdapterRegistry#registerAdapter - registered adapter: system=oa-system, name=OA办公系统权限适配器
2026-01-22T14:11:28.213+08:00  INFO --- [           main] c.a.a.a.p.p.a.PermissionAdapterRegistry  : PermissionAdapterRegistry initialized with 2 adapters: [gov-platform, oa-system]
2026-01-22T14:11:28.221+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U001, system=oa-system, externalUser=zhang.san@company.com
2026-01-22T14:11:28.222+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U001, system=gov-platform, externalUser=320102199001011234
2026-01-22T14:11:28.223+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U002, system=oa-system, externalUser=li.si@company.com
2026-01-22T14:11:28.224+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U003, system=oa-system, externalUser=wang.wu@company.com
2026-01-22T14:11:28.224+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U003, system=gov-platform, externalUser=leader_001
2026-01-22T14:11:28.225+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U004, system=gov-platform, externalUser=staff_001
2026-01-22T14:11:28.225+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U005, system=oa-system, externalUser=sun.qi@company.com
2026-01-22T14:11:28.225+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService initialized with demo data
2026-01-22T14:11:28.230+08:00  INFO --- [           main] c.a.a.a.p.c.PermissionAutoConfiguration  : PermissionAutoConfiguration - creating PermissionInterceptor
2026-01-22T14:11:28.235+08:00  INFO --- [           main] c.a.a.a.p.e.ActionExecutorFactory        : ActionExecutorFactory#init - initialized executors: INTERNAL(InternalExecutor), HTTP(HttpExecutor), DATA_AGENT(DataAgentExecutor), MCP(McpExecutor)
2026-01-22T14:11:28.235+08:00  INFO --- [           main] c.a.a.a.p.e.ActionExecutorFactory        : ActionExecutorFactory#init - permission interceptor enabled
2026-01-22T14:11:28.238+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#sessionProvider - reason=creating in-memory session provider
2026-01-22T14:11:28.241+08:00  INFO --- [           main] c.a.a.a.p.s.InMemorySessionProvider      : InMemorySessionProvider#init - initialized
2026-01-22T14:11:28.247+08:00  INFO --- [           main] c.a.a.a.p.s.ParamCollectionService       : ParamCollectionService#init - sessionProvider=InMemory
2026-01-22T14:11:28.253+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'action_intent_evaluator' of type ActionIntentEvaluator
2026-01-22T14:11:28.253+08:00  INFO --- [           main] p.i.PlanningIntegrationAutoConfiguration : PlanningIntegrationAutoConfiguration#actionIntentEvaluator - initialized and registered, paramCollection=true, llmVerification=true, maxCandidates=5
2026-01-22T14:11:28.255+08:00  INFO --- [           main] .p.i.PlanningEvaluationCriterionProvider : PlanningEvaluationCriterionProvider#init - initialized, llmVerificationEnabled=true
2026-01-22T14:11:28.256+08:00  INFO --- [           main] p.i.PlanningIntegrationAutoConfiguration : PlanningIntegrationAutoConfiguration#planningEvaluationCriterionProvider - registered planning evaluation criterion provider
2026-01-22T14:11:28.258+08:00  INFO --- [           main] .c.ExperienceEvaluationCriterionProvider : ExperienceEvaluationCriterionProvider#getReactPhaseCriteria - reason=提供 React 阶段评估 Criteria
2026-01-22T14:11:28.265+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createReactPhaseSuite - reason=添加自定义 Criterion, provider=ExperienceEvaluationCriterionProvider, count=3
2026-01-22T14:11:28.268+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createReactPhaseSuite - reason=添加自定义 Criterion, provider=PlanningEvaluationCriterionProvider, count=2
2026-01-22T14:11:28.275+08:00  INFO --- [           main] a.a.e.a.BatchAggregationStrategyRegistry : Registered batch aggregation strategy: ANY_TRUE
2026-01-22T14:11:28.277+08:00  INFO --- [           main] a.a.e.a.BatchAggregationStrategyRegistry : Registered batch aggregation strategy: ALL_TRUE
2026-01-22T14:11:28.464+08:00  INFO --- [           main] c.a.c.a.g.internal.node.ParallelNode     : Calculated core pool size: 32 (CPU cores: 16)
2026-01-22T14:11:28.464+08:00  INFO --- [           main] c.a.c.a.g.internal.node.ParallelNode     : Calculated maximum pool size: 64 (CPU cores: 16)
2026-01-22T14:11:28.464+08:00  INFO --- [           main] c.a.c.a.g.internal.node.ParallelNode     : Calculated queue capacity: 1000
2026-01-22T14:11:28.468+08:00  INFO --- [           main] c.a.a.a.e.DefaultEvaluationService       : Registered evaluation suite: react-phase-suite
2026-01-22T14:11:28.469+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#evaluationService - reason=注册 React Phase Suite, suiteId=react-phase-suite
2026-01-22T14:11:28.469+08:00  INFO --- [           main] .c.ExperienceEvaluationCriterionProvider : ExperienceEvaluationCriterionProvider#getCodeActPhaseCriteria - reason=提供 CodeAct 阶段评估 Criteria
2026-01-22T14:11:28.470+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createCodeActPhaseSuite - reason=添加自定义 Criterion, provider=ExperienceEvaluationCriterionProvider, count=3
2026-01-22T14:11:28.471+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createCodeActPhaseSuite - reason=添加自定义 Criterion, provider=PlanningEvaluationCriterionProvider, count=2
2026-01-22T14:11:28.471+08:00  INFO --- [           main] a.a.e.a.BatchAggregationStrategyRegistry : Registered batch aggregation strategy: ANY_TRUE
2026-01-22T14:11:28.471+08:00  INFO --- [           main] a.a.e.a.BatchAggregationStrategyRegistry : Registered batch aggregation strategy: ALL_TRUE
2026-01-22T14:11:28.472+08:00  INFO --- [           main] c.a.a.a.e.DefaultEvaluationService       : Registered evaluation suite: codeact-phase-suite
2026-01-22T14:11:28.472+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#evaluationService - reason=注册 CodeAct Phase Suite, suiteId=codeact-phase-suite
2026-01-22T14:11:28.477+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#codeactEvaluationContextFactory - reason=创建 EvaluationContextFactory
2026-01-22T14:11:28.480+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#codeactEvaluationResultAttacher - reason=创建 EvaluationResultAttacher
2026-01-22T14:11:28.492+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#reactPhaseEvaluationHooks - reason=创建 React Phase ModelInputEvaluationHook
2026-01-22T14:11:28.499+08:00  INFO --- [           main] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#<init> - reason=初始化, phase=REACT, providerCount=1
2026-01-22T14:11:28.499+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#reactPhaseEvaluationHooks - reason=创建 React Phase EvaluationPromptInjectionHook, providersCount=2
2026-01-22T14:11:28.505+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#codeactPhaseEvaluationHooks - reason=创建 CodeAct Phase ModelInputEvaluationHook
2026-01-22T14:11:28.506+08:00  INFO --- [           main] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#<init> - reason=初始化, phase=CODEACT, providerCount=1
2026-01-22T14:11:28.506+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#codeactPhaseEvaluationHooks - reason=创建 CodeAct Phase EvaluationPromptInjectionHook, providersCount=2
2026-01-22T14:11:28.514+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#keywordMatcher - reason=creating keyword matcher
2026-01-22T14:11:28.524+08:00  INFO --- [           main] .ParamCollectionSessionAutoConfiguration : ParamCollectionSessionAutoConfiguration#inMemoryParamCollectionSessionStore - reason=creating in-memory session store (Redis not available), ttl=PT30M
2026-01-22T14:11:28.524+08:00  WARN --- [           main] .ParamCollectionSessionAutoConfiguration : ParamCollectionSessionAutoConfiguration#inMemoryParamCollectionSessionStore - reason=WARNING: In-memory session store is not suitable for distributed environment!
2026-01-22T14:11:28.533+08:00  INFO --- [           main] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#<init> - reason=initialized, defaultTtl=PT30M
2026-01-22T14:11:28.534+08:00  WARN --- [           main] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#<init> - reason=WARNING: Using in-memory session store, not suitable for distributed environment!
2026-01-22T14:11:28.547+08:00  INFO --- [           main] iguration$UnifiedIntentHookConfiguration : UnifiedIntentHookConfiguration#unifiedIntentRecognitionHook - reason=creating unified intent hook, experienceProviderPresent=true, chatModelPresent=true, sessionStorePresent=true, directExecuteThreshold=0.95, hintThreshold=0.5
2026-01-22T14:11:29.109+08:00  INFO --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2026-01-22T14:11:30.074+08:00  INFO --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@3f1d4ecf
2026-01-22T14:11:30.083+08:00  INFO --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2026-01-22T14:11:30.635+08:00  WARN --- [           main] c.a.a.a.p.p.c.ActionEntityConverter      : ActionEntityConverter#parseActionType - reason=unknown action type, type=INTERNAL
2026-01-22T14:11:30.721+08:00 DEBUG --- [           main] c.a.a.a.planning.intent.KeywordMatcher   : KeywordMatcher#registerAction - actionId=oa:leave:request, keywords=57
2026-01-22T14:11:30.722+08:00  INFO --- [           main] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#initKeywordMatcher - reason=initialized, actionCount=1, keywordIndexSize=57
2026-01-22T14:11:30.733+08:00  INFO --- [           main] c.a.a.a.start.config.PersistenceConfig   : PersistenceConfig#elasticsearchExperienceRepository - reason=creating Elasticsearch experience repository (PRIMARY), indexName=experiences
2026-01-22T14:11:30.754+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#init - reason=reply module enabled
2026-01-22T14:11:30.760+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactToolFactory - reason=创建CodeactTool工厂, channels=1
2026-01-22T14:11:30.762+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#init - reason=工厂初始化完成, channels=1
2026-01-22T14:11:30.792+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=开始创建Reply工具
2026-01-22T14:11:30.805+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#createTools - reason=创建工具成功, toolName=send_success_message, channelCode=IDE_TEXT
2026-01-22T14:11:30.806+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#createTools - reason=创建工具成功, toolName=send_error_message, channelCode=IDE_TEXT
2026-01-22T14:11:30.808+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#createTools - reason=创建工具成功, toolName=send_notification, channelCode=IDE_TEXT
2026-01-22T14:11:30.809+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#createTools - reason=工具创建完成, totalCount=3
2026-01-22T14:11:30.809+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=Reply工具创建完成, count=3
2026-01-22T14:11:30.809+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=创建Reply工具, index=1, name=send_success_message, description=Send a success message to the IDE console
2026-01-22T14:11:30.809+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=创建Reply工具, index=2, name=send_error_message, description=Send an error message to the IDE console
2026-01-22T14:11:30.809+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=创建Reply工具, index=3, name=send_notification, description=Send a notification message
2026-01-22T14:11:30.813+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactToolFactory - reason=创建SearchCodeactTool工厂, providerCount=3
2026-01-22T14:11:30.879+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactToolFactory - reason=创建TriggerCodeactTool工厂
2026-01-22T14:11:30.880+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=开始创建Trigger工具
2026-01-22T14:11:30.884+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=创建SubscribeTriggerCodeactTool成功
2026-01-22T14:11:30.888+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=创建UnsubscribeTriggerCodeactTool成功
2026-01-22T14:11:30.891+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=创建ListTriggersCodeactTool成功
2026-01-22T14:11:30.895+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=创建GetTriggerDetailCodeactTool成功
2026-01-22T14:11:30.896+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=触发器工具创建完成, count=4
2026-01-22T14:11:30.896+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=Trigger工具创建完成, count=4
2026-01-22T14:11:30.896+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=创建Trigger工具, index=1, name=subscribe_trigger, description=创建并订阅一个新的触发器
2026-01-22T14:11:30.896+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=创建Trigger工具, index=2, name=unsubscribe_trigger, description=取消订阅并删除一个触发器
2026-01-22T14:11:30.896+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=创建Trigger工具, index=3, name=list_triggers, description=列出所有触发器
2026-01-22T14:11:30.896+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=创建Trigger工具, index=4, name=get_trigger_detail, description=获取指定触发器的详细信息
2026-01-22T14:11:30.915+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#planningCodeactTools - reason=creating planning tools list
2026-01-22T14:11:30.917+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#planningCodeactTools - reason=created planning tools, count=5
2026-01-22T14:11:30.932+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=创建 CodeactAgent
2026-01-22T14:11:30.933+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=配置 MemorySaver 以支持多轮对话上下文保持
2026-01-22T14:11:30.933+08:00  WARN --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=临时禁用 streaming 模式以排查循环问题
2026-01-22T14:11:30.933+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加UnifiedSearchCodeactTool
2026-01-22T14:11:30.943+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockBaiduWebSearchProvider, toolName=search_web
2026-01-22T14:11:30.946+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockKnowledgeStoreSearchProvider, toolName=search_knowledge
2026-01-22T14:11:30.949+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockProjectContextSearchProvider, toolName=search_project
2026-01-22T14:11:30.950+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=搜索工具创建完成, totalCount=3
2026-01-22T14:11:30.950+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加SearchCodeactTools, count=3
2026-01-22T14:11:30.950+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加ReplyCodeactTools, count=3
2026-01-22T14:11:30.950+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加TriggerCodeactTools, count=4
2026-01-22T14:11:30.950+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加PlanningCodeactTools, count=5
2026-01-22T14:11:30.950+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#createMcpDynamicTools - reason=Creating MCP dynamic tools
2026-01-22T14:11:30.960+08:00  INFO --- [           main] c.a.a.a.e.d.mcp.McpDynamicToolFactory    : McpDynamicToolFactory#createTools - reason=开始创建MCP动态工具
2026-01-22T14:11:30.971+08:00  INFO --- [           main] c.a.a.a.e.d.mcp.McpDynamicToolFactory    : McpDynamicToolFactory#createTools - reason=无可用的MCP工具
2026-01-22T14:11:30.971+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#createMcpDynamicTools - reason=MCP dynamic tools created, count=0
2026-01-22T14:11:30.971+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=Added MCP dynamic tools, count=0
2026-01-22T14:11:30.971+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#createHttpDynamicTools - reason=HTTP dynamic tools disabled by default
2026-01-22T14:11:30.971+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=合并后CodeactTool总数, count=16
2026-01-22T14:11:30.971+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=React阶段使用内置工具(write_code, execute_code, write_condition_code)
2026-01-22T14:11:30.971+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=注入 React Phase 评估 Hooks, count=2
2026-01-22T14:11:30.971+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=注入 CodeAct Phase 评估 Hooks, count=2
2026-01-22T14:11:30.971+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=已准备注入UnifiedIntentRecognitionHook
2026-01-22T14:11:30.979+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 开始构建CodeactAgent
2026-01-22T14:11:30.986+08:00  INFO --- [           main] .a.a.a.c.t.s.DefaultReturnSchemaRegistry : DefaultReturnSchemaRegistry#<init> - reason=创建新实例, hashCode=1815672030
2026-01-22T14:11:30.988+08:00 DEBUG --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#<init> - reason=创建注册表, returnSchemaRegistry=DefaultReturnSchemaRegistry
2026-01-22T14:11:30.989+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=创建默认CodeactToolRegistry
2026-01-22T14:11:30.989+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=开始注册CodeactTool, count=16
2026-01-22T14:11:30.989+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=unified_search
2026-01-22T14:11:30.989+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=unified_search
2026-01-22T14:11:30.989+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=search_web
2026-01-22T14:11:30.989+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=search_web
2026-01-22T14:11:30.989+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=search_knowledge
2026-01-22T14:11:30.989+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=search_knowledge
2026-01-22T14:11:30.989+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=search_project
2026-01-22T14:11:30.989+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=search_project
2026-01-22T14:11:30.989+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=send_success_message
2026-01-22T14:11:30.989+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=send_success_message
2026-01-22T14:11:30.989+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=send_error_message
2026-01-22T14:11:30.990+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=send_error_message
2026-01-22T14:11:30.990+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=send_notification
2026-01-22T14:11:30.990+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=send_notification
2026-01-22T14:11:30.990+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=subscribe_trigger
2026-01-22T14:11:30.990+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=subscribe_trigger
2026-01-22T14:11:30.990+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=unsubscribe_trigger
2026-01-22T14:11:30.990+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=unsubscribe_trigger
2026-01-22T14:11:30.990+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=list_triggers
2026-01-22T14:11:30.990+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=list_triggers
2026-01-22T14:11:30.991+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=get_trigger_detail
2026-01-22T14:11:30.991+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=get_trigger_detail
2026-01-22T14:11:30.995+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=plan_action
2026-01-22T14:11:30.995+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=plan_action
2026-01-22T14:11:30.997+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=execute_action
2026-01-22T14:11:30.998+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=execute_action
2026-01-22T14:11:31.000+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=list_actions
2026-01-22T14:11:31.000+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=list_actions
2026-01-22T14:11:31.002+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=get_action_details
2026-01-22T14:11:31.002+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=get_action_details
2026-01-22T14:11:31.005+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=execute_system_action
2026-01-22T14:11:31.005+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=execute_system_action
2026-01-22T14:11:31.005+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册完成, count=16
2026-01-22T14:11:31.006+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 创建默认CodeContext: language=PYTHON
2026-01-22T14:11:31.009+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 创建默认RuntimeEnvironmentManager: language=PYTHON
2026-01-22T14:11:31.015+08:00 DEBUG --- [           main] c.a.a.a.c.e.bridge.AgentToolBridge       : AgentToolBridge#<init> 初始化: 注册了0个工具
2026-01-22T14:11:31.017+08:00 DEBUG --- [           main] c.a.a.a.c.executor.bridge.StateBridge    : StateBridge#<init> 初始化完成
2026-01-22T14:11:31.018+08:00  INFO --- [           main] c.a.a.a.core.executor.GraalCodeExecutor  : GraalCodeExecutor#<init> 初始化完成: language=PYTHON, allowIO=false, timeout=30000ms, executableTools=true, customBridgeFactory=false
2026-01-22T14:11:31.019+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#createCodeactSubAgentInterceptor 创建子Agent拦截器
2026-01-22T14:11:31.034+08:00  INFO --- [           main] c.a.a.a.a.subagent.CodeactSubAgent       : CodeactSubAgent#<init> 初始化: name=code-generator
2026-01-22T14:11:31.034+08:00  INFO --- [           main] c.a.a.a.a.subagent.CodeactSubAgent       : CodeactSubAgent#<init> 初始化: name=condition-code-generator
2026-01-22T14:11:31.034+08:00  INFO --- [           main] c.a.a.a.a.s.CodeactSubAgentInterceptor   : CodeactSubAgentInterceptor#<init> 创建默认代码生成子Agent
2026-01-22T14:11:31.543+08:00  INFO --- [           main] c.a.a.a.a.s.CodeactSubAgentInterceptor   : CodeactSubAgentInterceptor#<init> 初始化完成: subAgentCount=2
2026-01-22T14:11:31.545+08:00  INFO --- [           main] c.a.a.a.a.tools.ExecuteCodeTool          : ExecuteCodeTool#<init> 初始化完成
2026-01-22T14:11:31.552+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 拦截器分类完成: modelInterceptors=1, toolInterceptors=0
2026-01-22T14:11:31.552+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 从拦截器提取工具: interceptor=CodeactSubAgent, toolCount=2
2026-01-22T14:11:31.577+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 工具收集完成: interceptorTools=2, regularTools=3, total=6
2026-01-22T14:11:31.580+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 设置ModelInterceptors到LlmNode: count=1
2026-01-22T14:11:31.582+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build CodeactAgent构建完成
2026-01-22T14:11:31.582+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=开始罗列已注册的工具
2026-01-22T14:11:31.582+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct阶段工具数量, count=16
2026-01-22T14:11:31.582+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=1, name=send_success_message, description=Send a success message to the IDE console
2026-01-22T14:11:31.582+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=2, name=get_trigger_detail, description=获取指定触发器的详细信息
2026-01-22T14:11:31.582+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=3, name=get_action_details, description=获取指定动作的完整定义，包括参数、步骤等详细信息。
2026-01-22T14:11:31.582+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=4, name=search_project, description=搜索项目上下文信息，包括代码、配置、文档等
2026-01-22T14:11:31.583+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=5, name=subscribe_trigger, description=创建并订阅一个新的触发器
2026-01-22T14:11:31.583+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=6, name=search_knowledge, description=搜索团队知识库，包括FAQ、规范、最佳实践等
2026-01-22T14:11:31.583+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=7, name=unified_search, description=统一搜索工具，可同时搜索项目、知识库、Web等多个数据源
2026-01-22T14:11:31.583+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=8, name=unsubscribe_trigger, description=取消订阅并删除一个触发器
2026-01-22T14:11:31.583+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=9, name=search_web, description=执行Web搜索，获取公开互联网信息
2026-01-22T14:11:31.583+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=10, name=list_actions, description=列出所有可用的动作，支持按分类和标签筛选。
2026-01-22T14:11:31.583+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=11, name=plan_action, description=根据用户输入匹配动作并生成执行计划。返回匹配的动作列表和生成的执行计划。
2026-01-22T14:11:31.583+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=12, name=execute_system_action, description=执行系统Action（如OA请假、ERP操作等）。根据action_id调用相应的系统Handler。
2026-01-22T14:11:31.583+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=13, name=send_error_message, description=Send an error message to the IDE console
2026-01-22T14:11:31.584+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=14, name=execute_action, description=执行指定的执行计划，返回执行结果。支持继续执行等待用户输入的计划。
2026-01-22T14:11:31.584+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=15, name=send_notification, description=Send a notification message
2026-01-22T14:11:31.584+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=16, name=list_triggers, description=列出所有触发器
2026-01-22T14:11:31.584+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React阶段工具数量, count=6
2026-01-22T14:11:31.584+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=1, name=write_code, description=Generate and register a new function with specified name and parameters. IMPORTANT: You MUST provide both 'functionName' and 'parameters' fields. Example: write_code(requirement='calculate sum', functionName='calculate_sum', parameters=['a', 'b'])
2026-01-22T14:11:31.584+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=2, name=write_condition_code, description=Generate and register a condition check function for triggers. This function MUST return a boolean value (True/False). Example: write_condition_code(requirement='check if it is a working day', functionName='check_is_working_day', parameters=['date'])
2026-01-22T14:11:31.584+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=3, name=send_success_message, description=Send a success message to the IDE console
2026-01-22T14:11:31.584+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=4, name=send_error_message, description=Send an error message to the IDE console
2026-01-22T14:11:31.584+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=5, name=send_notification, description=Send a notification message
2026-01-22T14:11:31.584+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=6, name=execute_code, description=Execute a previously generated function by its exact name with matching parameters. CRITICAL: The functionName MUST exactly match the name used in write_code. The 'args' parameter names MUST exactly match the 'parameters' specified in write_code. Example: If you called write_code with functionName='calculate_sum' and parameters=['a', 'b'], then you must call execute_code with functionName='calculate_sum' and args={'a': 10, 'b': 20}. Parameter value types supported: String, Number, Boolean, List, Map/Object.
2026-01-22T14:11:31.585+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=工具罗列完成
2026-01-22T14:11:31.587+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgent#<init> 初始化完成: language=PYTHON
2026-01-22T14:11:31.595+08:00  INFO --- [           main] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#<init> 初始化 Agent 加载器
2026-01-22T14:11:31.626+08:00 DEBUG --- [           main] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#<init> Agent 图结构:
@startuml CodeactAgent
skinparam usecaseFontSize 14
skinparam usecaseStereotypeFontSize 12
skinparam hexagonFontSize 14
skinparam hexagonStereotypeFontSize 12
title "CodeactAgent"
footer

powered by spring-ai-alibaba
end footer
circle start<<input>> as __START__
circle stop as __END__
usecase "_AGENT_MODEL_"<<Node>>
usecase "_AGENT_TOOL_"<<Node>>
usecase "_AGENT_HOOK_UnifiedIntentRecognitionHook.before"<<Node>>
usecase "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"<<Node>>
usecase "_AGENT_HOOK_EvaluationPromptInjectionHook-REACT.beforeModel"<<Node>>
hexagon "check state" as condition1<<Condition>>
hexagon "check state" as condition2<<Condition>>
hexagon "check state" as condition3<<Condition>>
"__START__" -down-> "_AGENT_HOOK_UnifiedIntentRecognitionHook.before"
"_AGENT_HOOK_UnifiedIntentRecognitionHook.before" .down.> "condition1"
"condition1" .down.> "__END__"
'"_AGENT_HOOK_UnifiedIntentRecognitionHook.before" .down.> "__END__"
"condition1" .down.> "_AGENT_TOOL_"
'"_AGENT_HOOK_UnifiedIntentRecognitionHook.before" .down.> "_AGENT_TOOL_"
"condition1" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
'"_AGENT_HOOK_UnifiedIntentRecognitionHook.before" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
"_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel" -down-> "_AGENT_HOOK_EvaluationPromptInjectionHook-REACT.beforeModel"
"_AGENT_HOOK_EvaluationPromptInjectionHook-REACT.beforeModel" -down-> "_AGENT_MODEL_"
"_AGENT_MODEL_" .down.> "condition2"
"condition2" .down.> "_AGENT_TOOL_"
'"_AGENT_MODEL_" .down.> "_AGENT_TOOL_"
"condition2" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
'"_AGENT_MODEL_" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
"condition2" .down.> "__END__"
'"_AGENT_MODEL_" .down.> "__END__"
"_AGENT_TOOL_" .down.> "condition3"
"condition3" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
'"_AGENT_TOOL_" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
"condition3" .down.> "__END__"
'"_AGENT_TOOL_" .down.> "__END__"
@enduml

2026-01-22T14:11:31.627+08:00  INFO --- [           main] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#<init> 已注册 agent: grayscale_agent
2026-01-22T14:11:31.641+08:00  INFO --- [           main] .a.a.a.p.c.ParamOptionsAutoConfiguration : ParamOptionsAutoConfiguration - Creating OptionsCache with TTL: 300000ms
2026-01-22T14:11:31.644+08:00  INFO --- [           main] a.a.a.p.s.DefaultParameterOptionsService : DefaultParameterOptionsService initialized with 3 handlers
2026-01-22T14:11:31.647+08:00  INFO --- [           main] c.a.a.a.planning.system.OaSystemHandler  : OaSystemHandler#init - initialized
2026-01-22T14:11:31.674+08:00 DEBUG --- [           main] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#listAgents 列出所有 agent
2026-01-22T14:11:31.674+08:00  INFO --- [           main] c.a.c.a.a.s.controller.AgentController   : AgentController initialized with 1 dynamic agents: [grayscale_agent]
2026-01-22T14:11:31.817+08:00  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 75f34e39-bce8-4e9b-8d59-a829cf67fe81

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2026-01-22T14:11:31.901+08:00  INFO --- [           main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2026-01-22T14:11:32.958+08:00  INFO --- [           main] e.e.c.CodeactEvaluationAutoConfiguration : CodeactEvaluationAutoConfiguration#inputRoutingEvaluationHook - reason=创建输入路由评估 Hook
2026-01-22T14:11:32.963+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchFacade - reason=creating search facade with 3 providers
2026-01-22T14:11:32.964+08:00  INFO --- [           main] c.a.a.a.e.s.i.DefaultSearchFacade        : DefaultSearchFacade#init - reason=initialized with 3 providers
2026-01-22T14:11:32.968+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=开始创建Search工具
2026-01-22T14:11:32.971+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockBaiduWebSearchProvider, toolName=search_web
2026-01-22T14:11:32.974+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockKnowledgeStoreSearchProvider, toolName=search_knowledge
2026-01-22T14:11:32.976+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockProjectContextSearchProvider, toolName=search_project
2026-01-22T14:11:32.977+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=搜索工具创建完成, totalCount=3
2026-01-22T14:11:32.977+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=Search工具创建完成, count=3
2026-01-22T14:11:32.977+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=创建Search工具, index=1, name=search_web, description=执行Web搜索，获取公开互联网信息
2026-01-22T14:11:32.977+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=创建Search工具, index=2, name=search_knowledge, description=搜索团队知识库，包括FAQ、规范、最佳实践等
2026-01-22T14:11:32.977+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=创建Search工具, index=3, name=search_project, description=搜索项目上下文信息，包括代码、配置、文档等
2026-01-22T14:11:32.983+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#diagnostics - reason=ElasticsearchClient bean found
2026-01-22T14:11:32.983+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#diagnostics - reason=EmbeddingModel bean found
2026-01-22T14:11:32.988+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#diagnostics - Planning module status:
2026-01-22T14:11:32.988+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration :   - ActionRepository: MybatisPlusActionRepository
2026-01-22T14:11:32.988+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration :   - ActionProvider: SemanticActionProvider
2026-01-22T14:11:32.989+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration :   - PlanGenerator: DefaultPlanGenerator
2026-01-22T14:11:32.989+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration :   - PlanExecutor: DefaultPlanExecutor
2026-01-22T14:11:33.395+08:00  INFO --- [           main] c.a.a.a.c.c.CodeactCoreAutoConfiguration : CodeactCoreAutoConfiguration#returnSchemaRegistry - reason=创建ReturnSchemaRegistry单例Bean
2026-01-22T14:11:33.396+08:00  INFO --- [           main] .a.a.a.c.t.s.DefaultReturnSchemaRegistry : DefaultReturnSchemaRegistry#<init> - reason=创建新实例, hashCode=789925275
2026-01-22T14:11:34.750+08:00  WARN --- [           main] o.s.m.p.s.SyncMcpSamplingProvider        : No sampling methods found
2026-01-22T14:11:34.754+08:00  WARN --- [           main] o.s.m.p.e.SyncMcpElicitationProvider     : No elicitation methods found
2026-01-22T14:11:34.844+08:00  INFO --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2026-01-22T14:11:34.864+08:00  INFO --- [           main] c.a.a.a.start.AssistantAgentApplication  : Started AssistantAgentApplication in 24.994 seconds (process running for 27.903)
2026-01-22T14:11:34.876+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#run - reason=Starting experience module validation
2026-01-22T14:11:35.113+08:00 DEBUG --- [           main] .p.e.r.ElasticsearchExperienceRepository : ElasticsearchExperienceRepository#count - reason=count completed, count=0
2026-01-22T14:11:35.163+08:00 DEBUG --- [           main] .p.e.r.ElasticsearchExperienceRepository : ElasticsearchExperienceRepository#countByTypeAndScope - reason=count completed, type=CODE, scope=null, count=0
2026-01-22T14:11:35.176+08:00 DEBUG --- [           main] .p.e.r.ElasticsearchExperienceRepository : ElasticsearchExperienceRepository#countByTypeAndScope - reason=count completed, type=REACT, scope=null, count=0
2026-01-22T14:11:35.188+08:00 DEBUG --- [           main] .p.e.r.ElasticsearchExperienceRepository : ElasticsearchExperienceRepository#countByTypeAndScope - reason=count completed, type=COMMON, scope=null, count=0
2026-01-22T14:11:35.188+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testExperienceCount - reason=Experience stats: total=0, code=0, react=0, common=0
2026-01-22T14:11:35.188+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCommonExperienceQuery - reason=Testing common experience query
2026-01-22T14:11:35.747+08:00 DEBUG --- [           main] .s.p.e.p.ElasticsearchExperienceProvider : ElasticsearchExperienceProvider#query - reason=query completed, type=COMMON, text=null, count=0
2026-01-22T14:11:35.747+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCommonExperienceQuery - reason=Found 0 common experiences
2026-01-22T14:11:35.748+08:00  WARN --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCommonExperienceQuery - reason=❌ MoLiHong identity experience not found
2026-01-22T14:11:35.748+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCodeExperienceQuery - reason=Testing code experience query (demo keyword)
2026-01-22T14:11:35.779+08:00 DEBUG --- [           main] .s.p.e.p.ElasticsearchExperienceProvider : ElasticsearchExperienceProvider#query - reason=query completed, type=CODE, text=null, count=0
2026-01-22T14:11:35.779+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCodeExperienceQuery - reason=Found 0 demo code experiences
2026-01-22T14:11:35.780+08:00  WARN --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCodeExperienceQuery - reason=❌ Demo code experience not found
2026-01-22T14:11:35.780+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testReactExperienceQuery - reason=Testing react experience query
2026-01-22T14:11:35.806+08:00 DEBUG --- [           main] .s.p.e.p.ElasticsearchExperienceProvider : ElasticsearchExperienceProvider#query - reason=query completed, type=REACT, text=null, count=0
2026-01-22T14:11:35.806+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testReactExperienceQuery - reason=Found 0 react experiences
2026-01-22T14:11:35.808+08:00  WARN --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testReactExperienceQuery - reason=❌ Ambiguous intent strategy not found
2026-01-22T14:11:35.809+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#run - reason=Experience module validation completed
2026-01-22T14:11:35.812+08:00  INFO --- [           main] c.a.a.a.s.a.config.AuthInitialization    : AuthInitialization#run - 初始化认证系统
2026-01-22T14:11:35.849+08:00 DEBUG --- [           main] c.a.a.a.s.a.s.AuthenticationService      : AuthenticationService#initDefaultAdmin - 管理员账户已存在
2026-01-22T14:11:35.849+08:00  INFO --- [           main] c.a.a.a.s.a.config.AuthInitialization    : AuthInitialization#run - 认证系统初始化完成
2026-01-22T14:11:40.769+08:00  INFO --- [nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-01-22T14:11:40.769+08:00  INFO --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2026-01-22T14:11:40.775+08:00  INFO --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 6 ms
2026-01-22T14:11:41.435+08:00 DEBUG --- [nio-8080-exec-1] c.a.a.a.s.a.s.JwtAuthenticationFilter    : JwtAuthenticationFilter#doFilterInternal - 设置用户认证: username=admin, roles=[ADMIN, USER]
2026-01-22T14:11:41.583+08:00  INFO --- [nio-8080-exec-1] c.a.c.a.a.s.controller.ThreadController  : Request received for POST /apps/research_agent/users/user-001/threads (service generates ID) with state: {}
2026-01-22T14:11:41.586+08:00  INFO --- [nio-8080-exec-1] c.a.c.a.a.s.service.ThreadServiceImpl    : Created thread: 2ee62eb1-c8eb-4b0a-b5fc-fbcb3acd6d10 for app=research_agent, user=user-001
2026-01-22T14:11:41.586+08:00  INFO --- [nio-8080-exec-1] c.a.c.a.a.s.controller.ThreadController  : Thread created successfully with generated id: 2ee62eb1-c8eb-4b0a-b5fc-fbcb3acd6d10
2026-01-22T14:11:41.707+08:00 DEBUG --- [nio-8080-exec-2] c.a.a.a.s.a.s.JwtAuthenticationFilter    : JwtAuthenticationFilter#doFilterInternal - 设置用户认证: username=admin, roles=[ADMIN, USER]
2026-01-22T14:11:41.738+08:00  INFO --- [nio-8080-exec-2] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#loadAgent 加载 agent: research_agent
2026-01-22T14:11:41.738+08:00  INFO --- [nio-8080-exec-2] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#loadAgent 成功加载 agent: research_agent
2026-01-22T14:11:41.812+08:00 DEBUG --- [nio-8080-exec-4] c.a.a.a.s.a.s.JwtAuthenticationFilter    : JwtAuthenticationFilter#doFilterInternal - 设置用户认证: username=admin, roles=[ADMIN, USER]
2026-01-22T14:11:41.817+08:00  INFO --- [nio-8080-exec-4] c.a.c.a.a.s.controller.ThreadController  : Request received for GET /apps/research_agent/users/user-001/threads/2ee62eb1-c8eb-4b0a-b5fc-fbcb3acd6d10
2026-01-22T14:11:41.977+08:00 DEBUG --- [nio-8080-exec-2] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#beforeAgent - reason=checking unified intent
2026-01-22T14:11:41.977+08:00 DEBUG --- [nio-8080-exec-2] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#get - reason=session not found, sessionId=2ee62eb1-c8eb-4b0a-b5fc-fbcb3acd6d10
2026-01-22T14:11:41.980+08:00 DEBUG --- [nio-8080-exec-2] c.a.a.a.p.i.SemanticActionProvider       : SemanticActionProvider#matchActions - reason=matching actions, userInput=我要请假
2026-01-22T14:11:43.178+08:00  WARN --- [nio-8080-exec-2] c.a.a.a.p.p.c.ActionEntityConverter      : ActionEntityConverter#parseActionType - reason=unknown action type, type=INTERNAL
2026-01-22T14:11:43.187+08:00  WARN --- [nio-8080-exec-2] c.a.a.a.p.p.c.ActionEntityConverter      : ActionEntityConverter#parseActionType - reason=unknown action type, type=INTERNAL
2026-01-22T14:11:43.187+08:00  INFO --- [nio-8080-exec-2] c.a.a.a.p.i.SemanticActionProvider       : SemanticActionProvider#matchActions - reason=matching completed, userInput=我要请假, matchCount=1
2026-01-22T14:11:43.187+08:00  INFO --- [nio-8080-exec-2] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#beforeAgent - reason=match found, actionId=oa:leave:request, confidence=0.95, matchType=KEYWORD_EXACT
2026-01-22T14:11:43.218+08:00 DEBUG --- [nio-8080-exec-2] .s.p.e.p.ElasticsearchExperienceProvider : ElasticsearchExperienceProvider#query - reason=query completed, type=REACT, text=null, count=0
2026-01-22T14:11:43.219+08:00  INFO --- [nio-8080-exec-2] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#beforeAgent - reason=high confidence, using Planning direct execution with param collection, actionId=oa:leave:request, confidence=0.95
2026-01-22T14:11:43.219+08:00  INFO --- [nio-8080-exec-2] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handlePlanningDirectExecution - reason=direct execution, actionId=oa:leave:request
2026-01-22T14:11:43.219+08:00  INFO --- [nio-8080-exec-2] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handlePlanningDirectExecution - reason=missing required params, count=5, actionId=oa:leave:request
2026-01-22T14:11:43.219+08:00  INFO --- [nio-8080-exec-2] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handleMissingParameters - reason=asking for param, paramName=start_date, actionId=oa:leave:request
2026-01-22T14:11:43.220+08:00 DEBUG --- [nio-8080-exec-2] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#save - reason=session saved, sessionId=2ee62eb1-c8eb-4b0a-b5fc-fbcb3acd6d10, ttl=PT30M
2026-01-22T14:11:43.220+08:00 DEBUG --- [nio-8080-exec-2] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#saveSession - reason=session saved, sessionId=2ee62eb1-c8eb-4b0a-b5fc-fbcb3acd6d10
2026-01-22T14:11:43.220+08:00  INFO --- [nio-8080-exec-2] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handleMissingParameters - reason=session saved to store, sessionId=2ee62eb1-c8eb-4b0a-b5fc-fbcb3acd6d10, actionId=oa:leave:request
2026-01-22T14:19:29.887+08:00  INFO --- [r-shutdown-hook] c.a.c.a.g.internal.node.ParallelNode     : Shutting down ParallelNode default executor
2026-01-22T14:19:29.887+08:00  INFO --- [r-shutdown-hook] c.a.c.a.g.internal.node.ParallelNode     : ParallelNode default thread pool terminated
2026-01-22T14:19:29.887+08:00  INFO --- [r-shutdown-hook] c.a.c.a.g.internal.node.ParallelNode     : ParallelNode default executor shut down successfully
2026-01-22T14:19:29.892+08:00  INFO --- [ionShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2026-01-22T14:19:29.902+08:00  INFO --- [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2026-01-22T14:19:29.911+08:00  INFO --- [ionShutdownHook] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#shutdown - reason=shutdown completed
2026-01-22T14:19:29.911+08:00  INFO --- [ionShutdownHook] c.a.a.a.e.e.GraphBasedEvaluationExecutor : Shutting down ExecutorService
2026-01-22T14:19:29.914+08:00  INFO --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2026-01-22T14:19:29.924+08:00  INFO --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2026-01-22T14:19:42.523+08:00  INFO --- [           main] c.a.a.a.start.AssistantAgentApplication  : Starting AssistantAgentApplication using Java 21.0.9 with PID 24200 (D:\devfive\AssistantAgent\assistant-agent-start\target\classes started by zhou_ in D:\devfive\AssistantAgent)
2026-01-22T14:19:42.526+08:00 DEBUG --- [           main] c.a.a.a.start.AssistantAgentApplication  : Running with Spring Boot v3.4.8, Spring v6.2.9
2026-01-22T14:19:42.527+08:00  INFO --- [           main] c.a.a.a.start.AssistantAgentApplication  : No active profile set, falling back to 1 default profile: "default"
2026-01-22T14:19:44.988+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Elasticsearch repositories in DEFAULT mode.
2026-01-22T14:19:45.038+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 38 ms. Found 0 Elasticsearch repository interfaces.
2026-01-22T14:19:45.049+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Reactive Elasticsearch repositories in DEFAULT mode.
2026-01-22T14:19:45.062+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 9 ms. Found 0 Reactive Elasticsearch repository interfaces.
2026-01-22T14:19:45.273+08:00  WARN --- [           main] o.m.s.mapper.ClassPathMapperScanner      : Skipping MapperFactoryBean with name 'learningRecordMapper' and 'com.alibaba.assistant.agent.start.persistence.learning.mapper.LearningRecordMapper' mapperInterface. Bean already defined with the same name!
2026-01-22T14:19:45.274+08:00  WARN --- [           main] o.m.s.mapper.ClassPathMapperScanner      : Skipping MapperFactoryBean with name 'triggerDefinitionMapper' and 'com.alibaba.assistant.agent.start.persistence.trigger.mapper.TriggerDefinitionMapper' mapperInterface. Bean already defined with the same name!
2026-01-22T14:19:45.274+08:00  WARN --- [           main] o.m.s.mapper.ClassPathMapperScanner      : Skipping MapperFactoryBean with name 'triggerExecutionRecordMapper' and 'com.alibaba.assistant.agent.start.persistence.trigger.mapper.TriggerExecutionRecordMapper' mapperInterface. Bean already defined with the same name!
2026-01-22T14:19:45.275+08:00  WARN --- [           main] o.m.s.mapper.ClassPathMapperScanner      : Skipping MapperFactoryBean with name 'actionRegistryMapper' and 'com.alibaba.assistant.agent.planning.persistence.mapper.ActionRegistryMapper' mapperInterface. Bean already defined with the same name!
2026-01-22T14:19:47.413+08:00  INFO --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2026-01-22T14:19:47.482+08:00  INFO --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2026-01-22T14:19:47.482+08:00  INFO --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.43]
2026-01-22T14:19:47.650+08:00  INFO --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2026-01-22T14:19:47.651+08:00  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 4971 ms
2026-01-22T14:19:47.697+08:00  INFO --- [           main] c.a.a.a.s.a.security.JwtTokenProvider    : JwtTokenProvider#init - JWT 密钥已初始化
2026-01-22T14:19:47.801+08:00 DEBUG --- [           main] c.a.a.a.s.a.s.JwtAuthenticationFilter    : Filter 'jwtAuthenticationFilter' configured for use
2026-01-22T14:19:48.449+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#init - reason=search extension framework is enabled
2026-01-22T14:19:48.451+08:00  INFO --- [           main] c.a.a.a.s.s.MockBaiduWebSearchProvider   : MockBaiduWebSearchProvider#init - reason=使用简单模式初始化
2026-01-22T14:19:48.454+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#unifiedSearchCodeactTool - reason=创建统一搜索工具, providerCount=3
2026-01-22T14:19:48.561+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#init - reason=planning extension is enabled
2026-01-22T14:19:48.564+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#init - reason=ES configuration class loaded (elasticsearch.enabled=true)
2026-01-22T14:19:48.566+08:00  INFO --- [           main] toConfiguration$MybatisPlusConfiguration : MybatisPlusConfiguration#init - reason=MySQL configuration class loaded (mysql.enabled=true, MyBatisPlus present)
2026-01-22T14:19:48.625+08:00  INFO --- [           main] toConfiguration$MybatisPlusConfiguration : MybatisPlusConfiguration#actionEntityConverter - reason=creating entity converter
2026-01-22T14:19:48.626+08:00  INFO --- [           main] toConfiguration$MybatisPlusConfiguration : MybatisPlusConfiguration#mybatisPlusActionRepository - reason=ActionRegistryMapper found, creating MySQL repository
2026-01-22T14:19:49.618+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#actionVectorizationService - reason=creating ES vectorization service
2026-01-22T14:19:49.759+08:00  INFO --- [           main] c.a.a.a.p.v.ActionVectorizationService   : ActionVectorizationService#init - reason=ES index initialized on startup
2026-01-22T14:19:49.782+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#semanticActionProvider - reason=creating semantic action provider, semanticWeight=0.6, keywordWeight=0.4, matchThreshold=0.5
2026-01-22T14:19:49.789+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#defaultPlanGenerator - reason=creating default plan generator
2026-01-22T14:19:49.794+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#planActionCodeactTool - reason=creating plan_action tool
2026-01-22T14:19:49.798+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#queryStepExecutor - reason=creating query step executor
2026-01-22T14:19:49.802+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#inputStepExecutor - reason=creating input step executor
2026-01-22T14:19:49.807+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#executeStepExecutor - reason=creating execute step executor
2026-01-22T14:19:49.810+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#apiCallStepExecutor - reason=creating api call step executor
2026-01-22T14:19:49.840+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#validationStepExecutor - reason=creating validation step executor
2026-01-22T14:19:49.844+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#stepExecutorRegistry - reason=creating executor registry, executorCount=5
2026-01-22T14:19:49.846+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=QUERY, executorClass=QueryStepExecutor
2026-01-22T14:19:49.846+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=INPUT, executorClass=InputStepExecutor
2026-01-22T14:19:49.846+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=EXECUTE, executorClass=ExecuteStepExecutor
2026-01-22T14:19:49.846+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=API_CALL, executorClass=ApiCallStepExecutor
2026-01-22T14:19:49.847+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=VALIDATION, executorClass=ValidationStepExecutor
2026-01-22T14:19:49.848+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#defaultPlanExecutor - reason=creating default plan executor
2026-01-22T14:19:49.863+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#executeActionCodeactTool - reason=creating execute_action tool
2026-01-22T14:19:49.866+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#listActionsCodeactTool - reason=creating list_actions tool
2026-01-22T14:19:49.868+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#getActionDetailsCodeactTool - reason=creating get_action_details tool
2026-01-22T14:19:49.872+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#executeSystemActionCodeactTool - reason=creating execute_system_action tool
2026-01-22T14:19:50.018+08:00  INFO --- [           main] c.a.a.a.start.config.PersistenceConfig   : PersistenceConfig#init - reason=persistence configuration loaded
2026-01-22T14:19:50.020+08:00  INFO --- [           main] c.a.a.a.start.config.PersistenceConfig   : PersistenceConfig#elasticsearchExperienceProvider - reason=creating Elasticsearch experience provider (PRIMARY), indexName=experiences
2026-01-22T14:19:50.030+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#<init> - reason=初始化默认评估套件配置, experienceProviderAvailable=true
2026-01-22T14:19:50.033+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#evaluatorRegistry - reason=创建 EvaluatorRegistry Bean
2026-01-22T14:19:50.035+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'llm-based' of type LLMBasedEvaluator
2026-01-22T14:19:50.037+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'passthrough' of type RuleBasedEvaluator
2026-01-22T14:19:50.041+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'react_experience_evaluator' of type RuleBasedEvaluator
2026-01-22T14:19:50.041+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createDefaultEvaluatorRegistry - reason=注册 React 阶段经验检索评估器
2026-01-22T14:19:50.041+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'codeact_experience_evaluator' of type RuleBasedEvaluator
2026-01-22T14:19:50.041+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createDefaultEvaluatorRegistry - reason=注册 CodeAct 阶段经验检索评估器
2026-01-22T14:19:50.042+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#evaluationService - reason=创建默认 EvaluationService, sharedRegistryEvaluators=[llm-based, passthrough, codeact_experience_evaluator, react_experience_evaluator]
2026-01-22T14:19:50.046+08:00 DEBUG --- [           main] c.a.a.a.e.e.GraphBasedEvaluationExecutor : Created default ExecutorService for batch processing
2026-01-22T14:19:50.048+08:00  INFO --- [           main] .c.ExperienceEvaluationCriterionProvider : ExperienceEvaluationCriterionProvider#<init> - reason=初始化经验评估 Criterion 提供者
2026-01-22T14:19:50.054+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#structuredParamExtractor - reason=creating structured param extractor
2026-01-22T14:19:50.079+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#parameterValidator - reason=creating parameter validator
2026-01-22T14:19:50.081+08:00  INFO --- [           main] f.a.AutowiredAnnotationBeanPostProcessor : Inconsistent constructor declaration on bean with name 'actionExecutorFactory': single autowire-marked constructor flagged as optional - this constructor is effectively required since there is no default constructor to fall back to: public com.alibaba.assistant.agent.planning.executor.ActionExecutorFactory(java.util.List,com.alibaba.assistant.agent.planning.permission.interceptor.PermissionInterceptor)
2026-01-22T14:19:50.085+08:00  INFO --- [           main] .a.a.a.p.c.ParamOptionsAutoConfiguration : ParamOptionsAutoConfiguration - Parameter options module initialized
2026-01-22T14:19:50.088+08:00  INFO --- [           main] .a.a.a.p.c.ParamOptionsAutoConfiguration : ParamOptionsAutoConfiguration - Creating RestTemplate for HTTP handlers
2026-01-22T14:19:50.098+08:00  INFO --- [           main] c.a.a.a.planning.executor.HttpExecutor   : HttpExecutor#init - initialized
2026-01-22T14:19:50.100+08:00  INFO --- [           main] c.a.a.a.p.executor.InternalExecutor      : InternalExecutor#init - initialized
2026-01-22T14:19:50.109+08:00  INFO --- [           main] c.a.a.a.p.p.a.PermissionAdapterRegistry  : PermissionAdapterRegistry#registerAdapter - registered adapter: system=gov-platform, name=政务服务平台权限适配器
2026-01-22T14:19:50.109+08:00  INFO --- [           main] c.a.a.a.p.p.a.PermissionAdapterRegistry  : PermissionAdapterRegistry#registerAdapter - registered adapter: system=oa-system, name=OA办公系统权限适配器
2026-01-22T14:19:50.109+08:00  INFO --- [           main] c.a.a.a.p.p.a.PermissionAdapterRegistry  : PermissionAdapterRegistry initialized with 2 adapters: [gov-platform, oa-system]
2026-01-22T14:19:50.117+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U001, system=oa-system, externalUser=zhang.san@company.com
2026-01-22T14:19:50.118+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U001, system=gov-platform, externalUser=320102199001011234
2026-01-22T14:19:50.119+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U002, system=oa-system, externalUser=li.si@company.com
2026-01-22T14:19:50.119+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U003, system=oa-system, externalUser=wang.wu@company.com
2026-01-22T14:19:50.119+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U003, system=gov-platform, externalUser=leader_001
2026-01-22T14:19:50.119+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U004, system=gov-platform, externalUser=staff_001
2026-01-22T14:19:50.120+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U005, system=oa-system, externalUser=sun.qi@company.com
2026-01-22T14:19:50.120+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService initialized with demo data
2026-01-22T14:19:50.124+08:00  INFO --- [           main] c.a.a.a.p.c.PermissionAutoConfiguration  : PermissionAutoConfiguration - creating PermissionInterceptor
2026-01-22T14:19:50.126+08:00  INFO --- [           main] c.a.a.a.p.e.ActionExecutorFactory        : ActionExecutorFactory#init - initialized executors: INTERNAL(InternalExecutor), HTTP(HttpExecutor), DATA_AGENT(DataAgentExecutor), MCP(McpExecutor)
2026-01-22T14:19:50.126+08:00  INFO --- [           main] c.a.a.a.p.e.ActionExecutorFactory        : ActionExecutorFactory#init - permission interceptor enabled
2026-01-22T14:19:50.129+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#sessionProvider - reason=creating in-memory session provider
2026-01-22T14:19:50.130+08:00  INFO --- [           main] c.a.a.a.p.s.InMemorySessionProvider      : InMemorySessionProvider#init - initialized
2026-01-22T14:19:50.135+08:00  INFO --- [           main] c.a.a.a.p.s.ParamCollectionService       : ParamCollectionService#init - sessionProvider=InMemory
2026-01-22T14:19:50.140+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'action_intent_evaluator' of type ActionIntentEvaluator
2026-01-22T14:19:50.140+08:00  INFO --- [           main] p.i.PlanningIntegrationAutoConfiguration : PlanningIntegrationAutoConfiguration#actionIntentEvaluator - initialized and registered, paramCollection=true, llmVerification=true, maxCandidates=5
2026-01-22T14:19:50.142+08:00  INFO --- [           main] .p.i.PlanningEvaluationCriterionProvider : PlanningEvaluationCriterionProvider#init - initialized, llmVerificationEnabled=true
2026-01-22T14:19:50.143+08:00  INFO --- [           main] p.i.PlanningIntegrationAutoConfiguration : PlanningIntegrationAutoConfiguration#planningEvaluationCriterionProvider - registered planning evaluation criterion provider
2026-01-22T14:19:50.144+08:00  INFO --- [           main] .c.ExperienceEvaluationCriterionProvider : ExperienceEvaluationCriterionProvider#getReactPhaseCriteria - reason=提供 React 阶段评估 Criteria
2026-01-22T14:19:50.151+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createReactPhaseSuite - reason=添加自定义 Criterion, provider=ExperienceEvaluationCriterionProvider, count=3
2026-01-22T14:19:50.153+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createReactPhaseSuite - reason=添加自定义 Criterion, provider=PlanningEvaluationCriterionProvider, count=2
2026-01-22T14:19:50.161+08:00  INFO --- [           main] a.a.e.a.BatchAggregationStrategyRegistry : Registered batch aggregation strategy: ANY_TRUE
2026-01-22T14:19:50.163+08:00  INFO --- [           main] a.a.e.a.BatchAggregationStrategyRegistry : Registered batch aggregation strategy: ALL_TRUE
2026-01-22T14:19:50.269+08:00  INFO --- [           main] c.a.c.a.g.internal.node.ParallelNode     : Calculated core pool size: 32 (CPU cores: 16)
2026-01-22T14:19:50.270+08:00  INFO --- [           main] c.a.c.a.g.internal.node.ParallelNode     : Calculated maximum pool size: 64 (CPU cores: 16)
2026-01-22T14:19:50.270+08:00  INFO --- [           main] c.a.c.a.g.internal.node.ParallelNode     : Calculated queue capacity: 1000
2026-01-22T14:19:50.272+08:00  INFO --- [           main] c.a.a.a.e.DefaultEvaluationService       : Registered evaluation suite: react-phase-suite
2026-01-22T14:19:50.272+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#evaluationService - reason=注册 React Phase Suite, suiteId=react-phase-suite
2026-01-22T14:19:50.273+08:00  INFO --- [           main] .c.ExperienceEvaluationCriterionProvider : ExperienceEvaluationCriterionProvider#getCodeActPhaseCriteria - reason=提供 CodeAct 阶段评估 Criteria
2026-01-22T14:19:50.273+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createCodeActPhaseSuite - reason=添加自定义 Criterion, provider=ExperienceEvaluationCriterionProvider, count=3
2026-01-22T14:19:50.273+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createCodeActPhaseSuite - reason=添加自定义 Criterion, provider=PlanningEvaluationCriterionProvider, count=2
2026-01-22T14:19:50.273+08:00  INFO --- [           main] a.a.e.a.BatchAggregationStrategyRegistry : Registered batch aggregation strategy: ANY_TRUE
2026-01-22T14:19:50.273+08:00  INFO --- [           main] a.a.e.a.BatchAggregationStrategyRegistry : Registered batch aggregation strategy: ALL_TRUE
2026-01-22T14:19:50.274+08:00  INFO --- [           main] c.a.a.a.e.DefaultEvaluationService       : Registered evaluation suite: codeact-phase-suite
2026-01-22T14:19:50.274+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#evaluationService - reason=注册 CodeAct Phase Suite, suiteId=codeact-phase-suite
2026-01-22T14:19:50.277+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#codeactEvaluationContextFactory - reason=创建 EvaluationContextFactory
2026-01-22T14:19:50.280+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#codeactEvaluationResultAttacher - reason=创建 EvaluationResultAttacher
2026-01-22T14:19:50.289+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#reactPhaseEvaluationHooks - reason=创建 React Phase ModelInputEvaluationHook
2026-01-22T14:19:50.292+08:00  INFO --- [           main] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#<init> - reason=初始化, phase=REACT, providerCount=1
2026-01-22T14:19:50.293+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#reactPhaseEvaluationHooks - reason=创建 React Phase EvaluationPromptInjectionHook, providersCount=2
2026-01-22T14:19:50.296+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#codeactPhaseEvaluationHooks - reason=创建 CodeAct Phase ModelInputEvaluationHook
2026-01-22T14:19:50.297+08:00  INFO --- [           main] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#<init> - reason=初始化, phase=CODEACT, providerCount=1
2026-01-22T14:19:50.297+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#codeactPhaseEvaluationHooks - reason=创建 CodeAct Phase EvaluationPromptInjectionHook, providersCount=2
2026-01-22T14:19:50.301+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#keywordMatcher - reason=creating keyword matcher
2026-01-22T14:19:50.305+08:00  INFO --- [           main] .ParamCollectionSessionAutoConfiguration : ParamCollectionSessionAutoConfiguration#inMemoryParamCollectionSessionStore - reason=creating in-memory session store (Redis not available), ttl=PT30M
2026-01-22T14:19:50.306+08:00  WARN --- [           main] .ParamCollectionSessionAutoConfiguration : ParamCollectionSessionAutoConfiguration#inMemoryParamCollectionSessionStore - reason=WARNING: In-memory session store is not suitable for distributed environment!
2026-01-22T14:19:50.309+08:00  INFO --- [           main] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#<init> - reason=initialized, defaultTtl=PT30M
2026-01-22T14:19:50.309+08:00  WARN --- [           main] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#<init> - reason=WARNING: Using in-memory session store, not suitable for distributed environment!
2026-01-22T14:19:50.316+08:00  INFO --- [           main] iguration$UnifiedIntentHookConfiguration : UnifiedIntentHookConfiguration#unifiedIntentRecognitionHook - reason=creating unified intent hook, experienceProviderPresent=true, chatModelPresent=true, sessionStorePresent=true, directExecuteThreshold=0.95, hintThreshold=0.5
2026-01-22T14:19:50.575+08:00  INFO --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2026-01-22T14:19:51.075+08:00  INFO --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@5478597
2026-01-22T14:19:51.081+08:00  INFO --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2026-01-22T14:19:51.366+08:00  WARN --- [           main] c.a.a.a.p.p.c.ActionEntityConverter      : ActionEntityConverter#parseActionType - reason=unknown action type, type=INTERNAL
2026-01-22T14:19:51.418+08:00 DEBUG --- [           main] c.a.a.a.planning.intent.KeywordMatcher   : KeywordMatcher#registerAction - actionId=oa:leave:request, keywords=57
2026-01-22T14:19:51.418+08:00  INFO --- [           main] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#initKeywordMatcher - reason=initialized, actionCount=1, keywordIndexSize=57
2026-01-22T14:19:51.425+08:00  INFO --- [           main] c.a.a.a.start.config.PersistenceConfig   : PersistenceConfig#elasticsearchExperienceRepository - reason=creating Elasticsearch experience repository (PRIMARY), indexName=experiences
2026-01-22T14:19:51.437+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#init - reason=reply module enabled
2026-01-22T14:19:51.441+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactToolFactory - reason=创建CodeactTool工厂, channels=1
2026-01-22T14:19:51.442+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#init - reason=工厂初始化完成, channels=1
2026-01-22T14:19:51.457+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=开始创建Reply工具
2026-01-22T14:19:51.464+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#createTools - reason=创建工具成功, toolName=send_success_message, channelCode=IDE_TEXT
2026-01-22T14:19:51.465+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#createTools - reason=创建工具成功, toolName=send_error_message, channelCode=IDE_TEXT
2026-01-22T14:19:51.465+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#createTools - reason=创建工具成功, toolName=send_notification, channelCode=IDE_TEXT
2026-01-22T14:19:51.465+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#createTools - reason=工具创建完成, totalCount=3
2026-01-22T14:19:51.465+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=Reply工具创建完成, count=3
2026-01-22T14:19:51.466+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=创建Reply工具, index=1, name=send_success_message, description=Send a success message to the IDE console
2026-01-22T14:19:51.466+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=创建Reply工具, index=2, name=send_error_message, description=Send an error message to the IDE console
2026-01-22T14:19:51.466+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=创建Reply工具, index=3, name=send_notification, description=Send a notification message
2026-01-22T14:19:51.468+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactToolFactory - reason=创建SearchCodeactTool工厂, providerCount=3
2026-01-22T14:19:51.508+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactToolFactory - reason=创建TriggerCodeactTool工厂
2026-01-22T14:19:51.510+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=开始创建Trigger工具
2026-01-22T14:19:51.512+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=创建SubscribeTriggerCodeactTool成功
2026-01-22T14:19:51.514+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=创建UnsubscribeTriggerCodeactTool成功
2026-01-22T14:19:51.516+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=创建ListTriggersCodeactTool成功
2026-01-22T14:19:51.518+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=创建GetTriggerDetailCodeactTool成功
2026-01-22T14:19:51.518+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=触发器工具创建完成, count=4
2026-01-22T14:19:51.518+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=Trigger工具创建完成, count=4
2026-01-22T14:19:51.518+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=创建Trigger工具, index=1, name=subscribe_trigger, description=创建并订阅一个新的触发器
2026-01-22T14:19:51.518+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=创建Trigger工具, index=2, name=unsubscribe_trigger, description=取消订阅并删除一个触发器
2026-01-22T14:19:51.518+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=创建Trigger工具, index=3, name=list_triggers, description=列出所有触发器
2026-01-22T14:19:51.518+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=创建Trigger工具, index=4, name=get_trigger_detail, description=获取指定触发器的详细信息
2026-01-22T14:19:51.525+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#planningCodeactTools - reason=creating planning tools list
2026-01-22T14:19:51.525+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#planningCodeactTools - reason=created planning tools, count=5
2026-01-22T14:19:51.534+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=创建 CodeactAgent
2026-01-22T14:19:51.534+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=配置 MemorySaver 以支持多轮对话上下文保持
2026-01-22T14:19:51.534+08:00  WARN --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=临时禁用 streaming 模式以排查循环问题
2026-01-22T14:19:51.535+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加UnifiedSearchCodeactTool
2026-01-22T14:19:51.540+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockBaiduWebSearchProvider, toolName=search_web
2026-01-22T14:19:51.541+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockKnowledgeStoreSearchProvider, toolName=search_knowledge
2026-01-22T14:19:51.543+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockProjectContextSearchProvider, toolName=search_project
2026-01-22T14:19:51.543+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=搜索工具创建完成, totalCount=3
2026-01-22T14:19:51.543+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加SearchCodeactTools, count=3
2026-01-22T14:19:51.543+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加ReplyCodeactTools, count=3
2026-01-22T14:19:51.543+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加TriggerCodeactTools, count=4
2026-01-22T14:19:51.543+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加PlanningCodeactTools, count=5
2026-01-22T14:19:51.543+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#createMcpDynamicTools - reason=Creating MCP dynamic tools
2026-01-22T14:19:51.550+08:00  INFO --- [           main] c.a.a.a.e.d.mcp.McpDynamicToolFactory    : McpDynamicToolFactory#createTools - reason=开始创建MCP动态工具
2026-01-22T14:19:51.553+08:00  INFO --- [           main] c.a.a.a.e.d.mcp.McpDynamicToolFactory    : McpDynamicToolFactory#createTools - reason=无可用的MCP工具
2026-01-22T14:19:51.553+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#createMcpDynamicTools - reason=MCP dynamic tools created, count=0
2026-01-22T14:19:51.554+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=Added MCP dynamic tools, count=0
2026-01-22T14:19:51.554+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#createHttpDynamicTools - reason=HTTP dynamic tools disabled by default
2026-01-22T14:19:51.554+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=合并后CodeactTool总数, count=16
2026-01-22T14:19:51.554+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=React阶段使用内置工具(write_code, execute_code, write_condition_code)
2026-01-22T14:19:51.554+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=注入 React Phase 评估 Hooks, count=2
2026-01-22T14:19:51.554+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=注入 CodeAct Phase 评估 Hooks, count=2
2026-01-22T14:19:51.554+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=已准备注入UnifiedIntentRecognitionHook
2026-01-22T14:19:51.557+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 开始构建CodeactAgent
2026-01-22T14:19:51.561+08:00  INFO --- [           main] .a.a.a.c.t.s.DefaultReturnSchemaRegistry : DefaultReturnSchemaRegistry#<init> - reason=创建新实例, hashCode=185494862
2026-01-22T14:19:51.564+08:00 DEBUG --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#<init> - reason=创建注册表, returnSchemaRegistry=DefaultReturnSchemaRegistry
2026-01-22T14:19:51.564+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=创建默认CodeactToolRegistry
2026-01-22T14:19:51.564+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=开始注册CodeactTool, count=16
2026-01-22T14:19:51.564+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=unified_search
2026-01-22T14:19:51.564+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=unified_search
2026-01-22T14:19:51.564+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=search_web
2026-01-22T14:19:51.564+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=search_web
2026-01-22T14:19:51.565+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=search_knowledge
2026-01-22T14:19:51.565+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=search_knowledge
2026-01-22T14:19:51.565+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=search_project
2026-01-22T14:19:51.565+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=search_project
2026-01-22T14:19:51.565+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=send_success_message
2026-01-22T14:19:51.565+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=send_success_message
2026-01-22T14:19:51.565+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=send_error_message
2026-01-22T14:19:51.565+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=send_error_message
2026-01-22T14:19:51.565+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=send_notification
2026-01-22T14:19:51.565+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=send_notification
2026-01-22T14:19:51.565+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=subscribe_trigger
2026-01-22T14:19:51.565+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=subscribe_trigger
2026-01-22T14:19:51.565+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=unsubscribe_trigger
2026-01-22T14:19:51.566+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=unsubscribe_trigger
2026-01-22T14:19:51.566+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=list_triggers
2026-01-22T14:19:51.566+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=list_triggers
2026-01-22T14:19:51.566+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=get_trigger_detail
2026-01-22T14:19:51.566+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=get_trigger_detail
2026-01-22T14:19:51.569+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=plan_action
2026-01-22T14:19:51.569+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=plan_action
2026-01-22T14:19:51.570+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=execute_action
2026-01-22T14:19:51.570+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=execute_action
2026-01-22T14:19:51.571+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=list_actions
2026-01-22T14:19:51.572+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=list_actions
2026-01-22T14:19:51.573+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=get_action_details
2026-01-22T14:19:51.573+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=get_action_details
2026-01-22T14:19:51.574+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=execute_system_action
2026-01-22T14:19:51.574+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=execute_system_action
2026-01-22T14:19:51.574+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册完成, count=16
2026-01-22T14:19:51.575+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 创建默认CodeContext: language=PYTHON
2026-01-22T14:19:51.577+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 创建默认RuntimeEnvironmentManager: language=PYTHON
2026-01-22T14:19:51.581+08:00 DEBUG --- [           main] c.a.a.a.c.e.bridge.AgentToolBridge       : AgentToolBridge#<init> 初始化: 注册了0个工具
2026-01-22T14:19:51.582+08:00 DEBUG --- [           main] c.a.a.a.c.executor.bridge.StateBridge    : StateBridge#<init> 初始化完成
2026-01-22T14:19:51.584+08:00  INFO --- [           main] c.a.a.a.core.executor.GraalCodeExecutor  : GraalCodeExecutor#<init> 初始化完成: language=PYTHON, allowIO=false, timeout=30000ms, executableTools=true, customBridgeFactory=false
2026-01-22T14:19:51.584+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#createCodeactSubAgentInterceptor 创建子Agent拦截器
2026-01-22T14:19:51.597+08:00  INFO --- [           main] c.a.a.a.a.subagent.CodeactSubAgent       : CodeactSubAgent#<init> 初始化: name=code-generator
2026-01-22T14:19:51.597+08:00  INFO --- [           main] c.a.a.a.a.subagent.CodeactSubAgent       : CodeactSubAgent#<init> 初始化: name=condition-code-generator
2026-01-22T14:19:51.597+08:00  INFO --- [           main] c.a.a.a.a.s.CodeactSubAgentInterceptor   : CodeactSubAgentInterceptor#<init> 创建默认代码生成子Agent
2026-01-22T14:19:51.950+08:00  INFO --- [           main] c.a.a.a.a.s.CodeactSubAgentInterceptor   : CodeactSubAgentInterceptor#<init> 初始化完成: subAgentCount=2
2026-01-22T14:19:51.952+08:00  INFO --- [           main] c.a.a.a.a.tools.ExecuteCodeTool          : ExecuteCodeTool#<init> 初始化完成
2026-01-22T14:19:51.956+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 拦截器分类完成: modelInterceptors=1, toolInterceptors=0
2026-01-22T14:19:51.956+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 从拦截器提取工具: interceptor=CodeactSubAgent, toolCount=2
2026-01-22T14:19:51.973+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 工具收集完成: interceptorTools=2, regularTools=3, total=6
2026-01-22T14:19:51.975+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 设置ModelInterceptors到LlmNode: count=1
2026-01-22T14:19:51.976+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build CodeactAgent构建完成
2026-01-22T14:19:51.976+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=开始罗列已注册的工具
2026-01-22T14:19:51.976+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct阶段工具数量, count=16
2026-01-22T14:19:51.976+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=1, name=send_success_message, description=Send a success message to the IDE console
2026-01-22T14:19:51.976+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=2, name=get_trigger_detail, description=获取指定触发器的详细信息
2026-01-22T14:19:51.976+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=3, name=get_action_details, description=获取指定动作的完整定义，包括参数、步骤等详细信息。
2026-01-22T14:19:51.976+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=4, name=search_project, description=搜索项目上下文信息，包括代码、配置、文档等
2026-01-22T14:19:51.976+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=5, name=subscribe_trigger, description=创建并订阅一个新的触发器
2026-01-22T14:19:51.977+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=6, name=search_knowledge, description=搜索团队知识库，包括FAQ、规范、最佳实践等
2026-01-22T14:19:51.977+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=7, name=unified_search, description=统一搜索工具，可同时搜索项目、知识库、Web等多个数据源
2026-01-22T14:19:51.977+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=8, name=unsubscribe_trigger, description=取消订阅并删除一个触发器
2026-01-22T14:19:51.977+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=9, name=search_web, description=执行Web搜索，获取公开互联网信息
2026-01-22T14:19:51.977+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=10, name=list_actions, description=列出所有可用的动作，支持按分类和标签筛选。
2026-01-22T14:19:51.977+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=11, name=plan_action, description=根据用户输入匹配动作并生成执行计划。返回匹配的动作列表和生成的执行计划。
2026-01-22T14:19:51.977+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=12, name=execute_system_action, description=执行系统Action（如OA请假、ERP操作等）。根据action_id调用相应的系统Handler。
2026-01-22T14:19:51.977+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=13, name=send_error_message, description=Send an error message to the IDE console
2026-01-22T14:19:51.977+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=14, name=execute_action, description=执行指定的执行计划，返回执行结果。支持继续执行等待用户输入的计划。
2026-01-22T14:19:51.977+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=15, name=send_notification, description=Send a notification message
2026-01-22T14:19:51.977+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=16, name=list_triggers, description=列出所有触发器
2026-01-22T14:19:51.977+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React阶段工具数量, count=6
2026-01-22T14:19:51.977+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=1, name=write_code, description=Generate and register a new function with specified name and parameters. IMPORTANT: You MUST provide both 'functionName' and 'parameters' fields. Example: write_code(requirement='calculate sum', functionName='calculate_sum', parameters=['a', 'b'])
2026-01-22T14:19:51.977+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=2, name=write_condition_code, description=Generate and register a condition check function for triggers. This function MUST return a boolean value (True/False). Example: write_condition_code(requirement='check if it is a working day', functionName='check_is_working_day', parameters=['date'])
2026-01-22T14:19:51.977+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=3, name=send_success_message, description=Send a success message to the IDE console
2026-01-22T14:19:51.977+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=4, name=send_error_message, description=Send an error message to the IDE console
2026-01-22T14:19:51.977+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=5, name=send_notification, description=Send a notification message
2026-01-22T14:19:51.977+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=6, name=execute_code, description=Execute a previously generated function by its exact name with matching parameters. CRITICAL: The functionName MUST exactly match the name used in write_code. The 'args' parameter names MUST exactly match the 'parameters' specified in write_code. Example: If you called write_code with functionName='calculate_sum' and parameters=['a', 'b'], then you must call execute_code with functionName='calculate_sum' and args={'a': 10, 'b': 20}. Parameter value types supported: String, Number, Boolean, List, Map/Object.
2026-01-22T14:19:51.977+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=工具罗列完成
2026-01-22T14:19:51.979+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgent#<init> 初始化完成: language=PYTHON
2026-01-22T14:19:51.984+08:00  INFO --- [           main] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#<init> 初始化 Agent 加载器
2026-01-22T14:19:52.005+08:00 DEBUG --- [           main] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#<init> Agent 图结构:
@startuml CodeactAgent
skinparam usecaseFontSize 14
skinparam usecaseStereotypeFontSize 12
skinparam hexagonFontSize 14
skinparam hexagonStereotypeFontSize 12
title "CodeactAgent"
footer

powered by spring-ai-alibaba
end footer
circle start<<input>> as __START__
circle stop as __END__
usecase "_AGENT_MODEL_"<<Node>>
usecase "_AGENT_TOOL_"<<Node>>
usecase "_AGENT_HOOK_UnifiedIntentRecognitionHook.before"<<Node>>
usecase "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"<<Node>>
usecase "_AGENT_HOOK_EvaluationPromptInjectionHook-REACT.beforeModel"<<Node>>
hexagon "check state" as condition1<<Condition>>
hexagon "check state" as condition2<<Condition>>
hexagon "check state" as condition3<<Condition>>
"__START__" -down-> "_AGENT_HOOK_UnifiedIntentRecognitionHook.before"
"_AGENT_HOOK_UnifiedIntentRecognitionHook.before" .down.> "condition1"
"condition1" .down.> "__END__"
'"_AGENT_HOOK_UnifiedIntentRecognitionHook.before" .down.> "__END__"
"condition1" .down.> "_AGENT_TOOL_"
'"_AGENT_HOOK_UnifiedIntentRecognitionHook.before" .down.> "_AGENT_TOOL_"
"condition1" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
'"_AGENT_HOOK_UnifiedIntentRecognitionHook.before" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
"_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel" -down-> "_AGENT_HOOK_EvaluationPromptInjectionHook-REACT.beforeModel"
"_AGENT_HOOK_EvaluationPromptInjectionHook-REACT.beforeModel" -down-> "_AGENT_MODEL_"
"_AGENT_MODEL_" .down.> "condition2"
"condition2" .down.> "_AGENT_TOOL_"
'"_AGENT_MODEL_" .down.> "_AGENT_TOOL_"
"condition2" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
'"_AGENT_MODEL_" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
"condition2" .down.> "__END__"
'"_AGENT_MODEL_" .down.> "__END__"
"_AGENT_TOOL_" .down.> "condition3"
"condition3" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
'"_AGENT_TOOL_" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
"condition3" .down.> "__END__"
'"_AGENT_TOOL_" .down.> "__END__"
@enduml

2026-01-22T14:19:52.006+08:00  INFO --- [           main] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#<init> 已注册 agent: grayscale_agent
2026-01-22T14:19:52.015+08:00  INFO --- [           main] .a.a.a.p.c.ParamOptionsAutoConfiguration : ParamOptionsAutoConfiguration - Creating OptionsCache with TTL: 300000ms
2026-01-22T14:19:52.017+08:00  INFO --- [           main] a.a.a.p.s.DefaultParameterOptionsService : DefaultParameterOptionsService initialized with 3 handlers
2026-01-22T14:19:52.020+08:00  INFO --- [           main] c.a.a.a.planning.system.OaSystemHandler  : OaSystemHandler#init - initialized
2026-01-22T14:19:52.034+08:00 DEBUG --- [           main] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#listAgents 列出所有 agent
2026-01-22T14:19:52.034+08:00  INFO --- [           main] c.a.c.a.a.s.controller.AgentController   : AgentController initialized with 1 dynamic agents: [grayscale_agent]
2026-01-22T14:19:52.149+08:00  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: d21b8960-4113-482d-ac00-879a7ec62b5c

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2026-01-22T14:19:52.205+08:00  INFO --- [           main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2026-01-22T14:19:52.887+08:00  INFO --- [           main] e.e.c.CodeactEvaluationAutoConfiguration : CodeactEvaluationAutoConfiguration#inputRoutingEvaluationHook - reason=创建输入路由评估 Hook
2026-01-22T14:19:52.889+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchFacade - reason=creating search facade with 3 providers
2026-01-22T14:19:52.890+08:00  INFO --- [           main] c.a.a.a.e.s.i.DefaultSearchFacade        : DefaultSearchFacade#init - reason=initialized with 3 providers
2026-01-22T14:19:52.891+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=开始创建Search工具
2026-01-22T14:19:52.893+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockBaiduWebSearchProvider, toolName=search_web
2026-01-22T14:19:52.894+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockKnowledgeStoreSearchProvider, toolName=search_knowledge
2026-01-22T14:19:52.895+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockProjectContextSearchProvider, toolName=search_project
2026-01-22T14:19:52.895+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=搜索工具创建完成, totalCount=3
2026-01-22T14:19:52.895+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=Search工具创建完成, count=3
2026-01-22T14:19:52.895+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=创建Search工具, index=1, name=search_web, description=执行Web搜索，获取公开互联网信息
2026-01-22T14:19:52.895+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=创建Search工具, index=2, name=search_knowledge, description=搜索团队知识库，包括FAQ、规范、最佳实践等
2026-01-22T14:19:52.895+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=创建Search工具, index=3, name=search_project, description=搜索项目上下文信息，包括代码、配置、文档等
2026-01-22T14:19:52.898+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#diagnostics - reason=ElasticsearchClient bean found
2026-01-22T14:19:52.898+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#diagnostics - reason=EmbeddingModel bean found
2026-01-22T14:19:52.901+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#diagnostics - Planning module status:
2026-01-22T14:19:52.901+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration :   - ActionRepository: MybatisPlusActionRepository
2026-01-22T14:19:52.901+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration :   - ActionProvider: SemanticActionProvider
2026-01-22T14:19:52.901+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration :   - PlanGenerator: DefaultPlanGenerator
2026-01-22T14:19:52.901+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration :   - PlanExecutor: DefaultPlanExecutor
2026-01-22T14:19:53.118+08:00  INFO --- [           main] c.a.a.a.c.c.CodeactCoreAutoConfiguration : CodeactCoreAutoConfiguration#returnSchemaRegistry - reason=创建ReturnSchemaRegistry单例Bean
2026-01-22T14:19:53.118+08:00  INFO --- [           main] .a.a.a.c.t.s.DefaultReturnSchemaRegistry : DefaultReturnSchemaRegistry#<init> - reason=创建新实例, hashCode=967701734
2026-01-22T14:19:53.843+08:00  WARN --- [           main] o.s.m.p.s.SyncMcpSamplingProvider        : No sampling methods found
2026-01-22T14:19:53.845+08:00  WARN --- [           main] o.s.m.p.e.SyncMcpElicitationProvider     : No elicitation methods found
2026-01-22T14:19:53.901+08:00  INFO --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2026-01-22T14:19:53.914+08:00  INFO --- [           main] c.a.a.a.start.AssistantAgentApplication  : Started AssistantAgentApplication in 12.846 seconds (process running for 14.39)
2026-01-22T14:19:53.921+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#run - reason=Starting experience module validation
2026-01-22T14:19:54.019+08:00 DEBUG --- [           main] .p.e.r.ElasticsearchExperienceRepository : ElasticsearchExperienceRepository#count - reason=count completed, count=0
2026-01-22T14:19:54.056+08:00 DEBUG --- [           main] .p.e.r.ElasticsearchExperienceRepository : ElasticsearchExperienceRepository#countByTypeAndScope - reason=count completed, type=CODE, scope=null, count=0
2026-01-22T14:19:54.069+08:00 DEBUG --- [           main] .p.e.r.ElasticsearchExperienceRepository : ElasticsearchExperienceRepository#countByTypeAndScope - reason=count completed, type=REACT, scope=null, count=0
2026-01-22T14:19:54.083+08:00 DEBUG --- [           main] .p.e.r.ElasticsearchExperienceRepository : ElasticsearchExperienceRepository#countByTypeAndScope - reason=count completed, type=COMMON, scope=null, count=0
2026-01-22T14:19:54.084+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testExperienceCount - reason=Experience stats: total=0, code=0, react=0, common=0
2026-01-22T14:19:54.084+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCommonExperienceQuery - reason=Testing common experience query
2026-01-22T14:19:54.426+08:00 DEBUG --- [           main] .s.p.e.p.ElasticsearchExperienceProvider : ElasticsearchExperienceProvider#query - reason=query completed, type=COMMON, text=null, count=0
2026-01-22T14:19:54.426+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCommonExperienceQuery - reason=Found 0 common experiences
2026-01-22T14:19:54.427+08:00  WARN --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCommonExperienceQuery - reason=❌ MoLiHong identity experience not found
2026-01-22T14:19:54.427+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCodeExperienceQuery - reason=Testing code experience query (demo keyword)
2026-01-22T14:19:54.441+08:00 DEBUG --- [           main] .s.p.e.p.ElasticsearchExperienceProvider : ElasticsearchExperienceProvider#query - reason=query completed, type=CODE, text=null, count=0
2026-01-22T14:19:54.441+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCodeExperienceQuery - reason=Found 0 demo code experiences
2026-01-22T14:19:54.442+08:00  WARN --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCodeExperienceQuery - reason=❌ Demo code experience not found
2026-01-22T14:19:54.442+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testReactExperienceQuery - reason=Testing react experience query
2026-01-22T14:19:54.453+08:00 DEBUG --- [           main] .s.p.e.p.ElasticsearchExperienceProvider : ElasticsearchExperienceProvider#query - reason=query completed, type=REACT, text=null, count=0
2026-01-22T14:19:54.453+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testReactExperienceQuery - reason=Found 0 react experiences
2026-01-22T14:19:54.454+08:00  WARN --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testReactExperienceQuery - reason=❌ Ambiguous intent strategy not found
2026-01-22T14:19:54.454+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#run - reason=Experience module validation completed
2026-01-22T14:19:54.455+08:00  INFO --- [           main] c.a.a.a.s.a.config.AuthInitialization    : AuthInitialization#run - 初始化认证系统
2026-01-22T14:19:54.472+08:00 DEBUG --- [           main] c.a.a.a.s.a.s.AuthenticationService      : AuthenticationService#initDefaultAdmin - 管理员账户已存在
2026-01-22T14:19:54.472+08:00  INFO --- [           main] c.a.a.a.s.a.config.AuthInitialization    : AuthInitialization#run - 认证系统初始化完成
2026-01-22T14:20:04.425+08:00  INFO --- [nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-01-22T14:20:04.425+08:00  INFO --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2026-01-22T14:20:04.426+08:00  INFO --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2026-01-22T14:20:04.702+08:00 DEBUG --- [nio-8080-exec-1] c.a.a.a.s.a.s.JwtAuthenticationFilter    : JwtAuthenticationFilter#doFilterInternal - 设置用户认证: username=admin, roles=[ADMIN, USER]
2026-01-22T14:20:04.787+08:00  INFO --- [nio-8080-exec-1] c.a.c.a.a.s.controller.ThreadController  : Request received for POST /apps/research_agent/users/user-001/threads (service generates ID) with state: {}
2026-01-22T14:20:04.789+08:00  INFO --- [nio-8080-exec-1] c.a.c.a.a.s.service.ThreadServiceImpl    : Created thread: 134be6a1-a505-4f8c-a49c-71b55ea1ef6f for app=research_agent, user=user-001
2026-01-22T14:20:04.789+08:00  INFO --- [nio-8080-exec-1] c.a.c.a.a.s.controller.ThreadController  : Thread created successfully with generated id: 134be6a1-a505-4f8c-a49c-71b55ea1ef6f
2026-01-22T14:20:04.842+08:00 DEBUG --- [nio-8080-exec-2] c.a.a.a.s.a.s.JwtAuthenticationFilter    : JwtAuthenticationFilter#doFilterInternal - 设置用户认证: username=admin, roles=[ADMIN, USER]
2026-01-22T14:20:04.865+08:00  INFO --- [nio-8080-exec-2] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#loadAgent 加载 agent: research_agent
2026-01-22T14:20:04.866+08:00  INFO --- [nio-8080-exec-2] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#loadAgent 成功加载 agent: research_agent
2026-01-22T14:20:04.904+08:00 DEBUG --- [nio-8080-exec-4] c.a.a.a.s.a.s.JwtAuthenticationFilter    : JwtAuthenticationFilter#doFilterInternal - 设置用户认证: username=admin, roles=[ADMIN, USER]
2026-01-22T14:20:04.908+08:00  INFO --- [nio-8080-exec-4] c.a.c.a.a.s.controller.ThreadController  : Request received for GET /apps/research_agent/users/user-001/threads/134be6a1-a505-4f8c-a49c-71b55ea1ef6f
2026-01-22T14:20:04.999+08:00 DEBUG --- [nio-8080-exec-2] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#beforeAgent - reason=checking unified intent
2026-01-22T14:20:04.999+08:00 DEBUG --- [nio-8080-exec-2] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#get - reason=session not found, sessionId=134be6a1-a505-4f8c-a49c-71b55ea1ef6f
2026-01-22T14:20:05.000+08:00 DEBUG --- [nio-8080-exec-2] c.a.a.a.p.i.SemanticActionProvider       : SemanticActionProvider#matchActions - reason=matching actions, userInput=我要请假
2026-01-22T14:20:05.877+08:00  WARN --- [nio-8080-exec-2] c.a.a.a.p.p.c.ActionEntityConverter      : ActionEntityConverter#parseActionType - reason=unknown action type, type=INTERNAL
2026-01-22T14:20:05.883+08:00  WARN --- [nio-8080-exec-2] c.a.a.a.p.p.c.ActionEntityConverter      : ActionEntityConverter#parseActionType - reason=unknown action type, type=INTERNAL
2026-01-22T14:20:05.887+08:00  INFO --- [nio-8080-exec-2] c.a.a.a.p.i.SemanticActionProvider       : SemanticActionProvider#matchActions - reason=matching completed, userInput=我要请假, matchCount=1
2026-01-22T14:20:05.888+08:00  INFO --- [nio-8080-exec-2] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#beforeAgent - reason=match found, actionId=oa:leave:request, confidence=0.95, matchType=KEYWORD_EXACT
2026-01-22T14:20:05.899+08:00 DEBUG --- [nio-8080-exec-2] .s.p.e.p.ElasticsearchExperienceProvider : ElasticsearchExperienceProvider#query - reason=query completed, type=REACT, text=null, count=0
2026-01-22T14:20:05.900+08:00  INFO --- [nio-8080-exec-2] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#beforeAgent - reason=high confidence, using Planning direct execution with param collection, actionId=oa:leave:request, confidence=0.95
2026-01-22T14:20:05.900+08:00  INFO --- [nio-8080-exec-2] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handlePlanningDirectExecution - reason=direct execution, actionId=oa:leave:request
2026-01-22T14:20:05.900+08:00  INFO --- [nio-8080-exec-2] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handlePlanningDirectExecution - reason=missing required params, count=5, actionId=oa:leave:request
2026-01-22T14:20:05.900+08:00  INFO --- [nio-8080-exec-2] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handleMissingParameters - reason=asking for param, paramName=start_date, actionId=oa:leave:request
2026-01-22T14:20:05.903+08:00 DEBUG --- [nio-8080-exec-2] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#save - reason=session saved, sessionId=134be6a1-a505-4f8c-a49c-71b55ea1ef6f, ttl=PT30M
2026-01-22T14:20:05.903+08:00 DEBUG --- [nio-8080-exec-2] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#saveSession - reason=session saved, sessionId=134be6a1-a505-4f8c-a49c-71b55ea1ef6f
2026-01-22T14:20:05.903+08:00  INFO --- [nio-8080-exec-2] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handleMissingParameters - reason=session saved to store, sessionId=134be6a1-a505-4f8c-a49c-71b55ea1ef6f, actionId=oa:leave:request
2026-01-22T14:20:20.403+08:00 DEBUG --- [nio-8080-exec-5] c.a.a.a.s.a.s.JwtAuthenticationFilter    : JwtAuthenticationFilter#doFilterInternal - 设置用户认证: username=admin, roles=[ADMIN, USER]
2026-01-22T14:20:20.405+08:00  INFO --- [nio-8080-exec-5] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#loadAgent 加载 agent: research_agent
2026-01-22T14:20:20.405+08:00  INFO --- [nio-8080-exec-5] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#loadAgent 成功加载 agent: research_agent
2026-01-22T14:20:20.416+08:00 DEBUG --- [nio-8080-exec-5] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#beforeAgent - reason=checking unified intent
2026-01-22T14:20:20.416+08:00 DEBUG --- [nio-8080-exec-5] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#get - reason=session found, sessionId=134be6a1-a505-4f8c-a49c-71b55ea1ef6f, active=true
2026-01-22T14:20:20.416+08:00  INFO --- [nio-8080-exec-5] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#beforeAgent - reason=continuing param collection session (from store), sessionId=134be6a1-a505-4f8c-a49c-71b55ea1ef6f, userInput=2026-1-22
2026-01-22T14:20:20.416+08:00  INFO --- [nio-8080-exec-5] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handleParamCollectionContinuation - reason=processing param input, sessionId=134be6a1-a505-4f8c-a49c-71b55ea1ef6f, actionId=oa:leave:request, userInput=2026-1-22
2026-01-22T14:20:20.423+08:00  WARN --- [nio-8080-exec-5] c.a.a.a.p.p.c.ActionEntityConverter      : ActionEntityConverter#parseActionType - reason=unknown action type, type=INTERNAL
2026-01-22T14:20:23.854+08:00  INFO --- [nio-8080-exec-5] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handleParamCollectionContinuation - reason=LLM response, response=```json
{
  "extractedParams": {"start_date": "2026-1-22"},
  "missingParams": ["end_date", "types", "reason", "check_uids"],
  "nextQuestion": "请继续提供结束日期（格式：yyyy-MM-dd），请假类型（1=事假, 2=病假, 3=年假, 4=调休），请假理由，以及审批人ID。"
}
```
2026-01-22T14:20:23.950+08:00  INFO --- [nio-8080-exec-5] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handleParamCollectionContinuation - reason=still has missing params, nextQuestion=请继续提供结束日期（格式：yyyy-MM-dd），请假类型（1=事假, 2=病假, 3=年假, 4=调休），请假理由，以及审批人ID。
2026-01-22T14:20:23.950+08:00 DEBUG --- [nio-8080-exec-5] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#save - reason=session saved, sessionId=134be6a1-a505-4f8c-a49c-71b55ea1ef6f, ttl=PT30M
2026-01-22T14:20:23.950+08:00 DEBUG --- [nio-8080-exec-5] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#saveSession - reason=session saved, sessionId=134be6a1-a505-4f8c-a49c-71b55ea1ef6f
2026-01-22T14:20:43.018+08:00 DEBUG --- [nio-8080-exec-7] c.a.a.a.s.a.s.JwtAuthenticationFilter    : JwtAuthenticationFilter#doFilterInternal - 设置用户认证: username=admin, roles=[ADMIN, USER]
2026-01-22T14:20:43.020+08:00  INFO --- [nio-8080-exec-7] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#loadAgent 加载 agent: research_agent
2026-01-22T14:20:43.020+08:00  INFO --- [nio-8080-exec-7] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#loadAgent 成功加载 agent: research_agent
2026-01-22T14:20:43.027+08:00 DEBUG --- [nio-8080-exec-7] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#beforeAgent - reason=checking unified intent
2026-01-22T14:20:43.027+08:00 DEBUG --- [nio-8080-exec-7] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#get - reason=session found, sessionId=134be6a1-a505-4f8c-a49c-71b55ea1ef6f, active=true
2026-01-22T14:20:43.027+08:00  INFO --- [nio-8080-exec-7] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#beforeAgent - reason=continuing param collection session (from store), sessionId=134be6a1-a505-4f8c-a49c-71b55ea1ef6f, userInput=2026-1-23 类型 事假 理由 aa 审批人 25
2026-01-22T14:20:43.027+08:00  INFO --- [nio-8080-exec-7] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handleParamCollectionContinuation - reason=processing param input, sessionId=134be6a1-a505-4f8c-a49c-71b55ea1ef6f, actionId=oa:leave:request, userInput=2026-1-23 类型 事假 理由 aa 审批人 25
2026-01-22T14:20:43.034+08:00  WARN --- [nio-8080-exec-7] c.a.a.a.p.p.c.ActionEntityConverter      : ActionEntityConverter#parseActionType - reason=unknown action type, type=INTERNAL
2026-01-22T14:20:45.853+08:00  INFO --- [nio-8080-exec-7] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handleParamCollectionContinuation - reason=LLM response, response=```json
{
  "extractedParams": {
    "end_date": "2026-1-23 00:00",
    "types": "1",
    "reason": "aa",
    "check_uids": "25"
  },
  "missingParams": [],
  "nextQuestion": null
}
```
2026-01-22T14:20:45.853+08:00  INFO --- [nio-8080-exec-7] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handleParamCollectionContinuation - reason=params complete, executing action, actionId=oa:leave:request, params={end_date=2026-1-23 00:00, reason=aa, check_uids=25, types=1, start_date=2026-1-22}
2026-01-22T14:20:45.854+08:00 DEBUG --- [nio-8080-exec-7] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#close - reason=session closed, sessionId=134be6a1-a505-4f8c-a49c-71b55ea1ef6f
2026-01-22T14:20:45.854+08:00 DEBUG --- [nio-8080-exec-7] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#closeSession - reason=session closed, sessionId=134be6a1-a505-4f8c-a49c-71b55ea1ef6f
2026-01-22T14:20:45.854+08:00  INFO --- [nio-8080-exec-7] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handlePlanningDirectExecution - reason=direct execution, actionId=oa:leave:request
2026-01-22T14:20:45.855+08:00 DEBUG --- [nio-8080-exec-7] c.a.a.a.p.internal.DefaultPlanGenerator  : DefaultPlanGenerator#generate - reason=generating plan, actionId=oa:leave:request, actionName=提交OA请假申请
2026-01-22T14:20:45.861+08:00  INFO --- [nio-8080-exec-7] c.a.a.a.p.internal.DefaultPlanGenerator  : DefaultPlanGenerator#generate - reason=plan generated, planId=16d5fb86-1348-49b3-9824-a5e01fa4f65f, stepCount=1
2026-01-22T14:20:45.861+08:00  INFO --- [nio-8080-exec-7] c.a.a.a.p.internal.DefaultPlanExecutor   : DefaultPlanExecutor#execute - reason=starting plan execution, planId=16d5fb86-1348-49b3-9824-a5e01fa4f65f, actionId=oa:leave:request
2026-01-22T14:20:45.861+08:00 DEBUG --- [nio-8080-exec-7] c.a.a.a.p.internal.DefaultPlanExecutor   : DefaultPlanExecutor#executeSteps - reason=executing step, planId=16d5fb86-1348-49b3-9824-a5e01fa4f65f, stepId=execute, stepIndex=0
2026-01-22T14:20:55.361+08:00 DEBUG --- [nio-8080-exec-7] c.a.a.a.p.i.e.ExecuteStepExecutor        : AbstractStepExecutor#execute - reason=executing step, stepId=execute, type=EXECUTE
2026-01-22T14:20:55.361+08:00 DEBUG --- [nio-8080-exec-7] c.a.a.a.p.i.e.ExecuteStepExecutor        : ExecuteStepExecutor#doExecute - reason=executing execute step, stepId=execute
2026-01-22T14:20:55.361+08:00  INFO --- [nio-8080-exec-7] c.a.a.a.p.i.e.ExecuteStepExecutor        : ExecuteStepExecutor#executeAction - reason=internal call, bean=oaSystemActionService, method=execute
2026-01-22T14:20:55.361+08:00  INFO --- [nio-8080-exec-7] c.a.a.a.p.i.e.ExecuteStepExecutor        : ExecuteStepExecutor#doExecute - reason=step executed successfully, stepId=execute
2026-01-22T14:20:55.363+08:00  INFO --- [nio-8080-exec-7] c.a.a.a.p.internal.DefaultPlanExecutor   : DefaultPlanExecutor#execute - reason=plan completed, planId=16d5fb86-1348-49b3-9824-a5e01fa4f65f, stepCount=1
2026-01-22T14:20:55.365+08:00  INFO --- [nio-8080-exec-7] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handlePlanningDirectExecution - reason=execution completed, planId=16d5fb86-1348-49b3-9824-a5e01fa4f65f, success=true
2026-01-22T14:25:50.317+08:00 DEBUG --- [session-cleanup] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#delete - reason=session deleted, sessionId=134be6a1-a505-4f8c-a49c-71b55ea1ef6f
2026-01-22T14:25:50.317+08:00  INFO --- [session-cleanup] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#cleanupExpiredSessions - reason=cleaned expired sessions, count=1
2026-01-22T14:36:43.357+08:00  INFO --- [r-shutdown-hook] c.a.c.a.g.internal.node.ParallelNode     : Shutting down ParallelNode default executor
2026-01-22T14:36:43.358+08:00  INFO --- [r-shutdown-hook] c.a.c.a.g.internal.node.ParallelNode     : ParallelNode default thread pool terminated
2026-01-22T14:36:43.358+08:00  INFO --- [r-shutdown-hook] c.a.c.a.g.internal.node.ParallelNode     : ParallelNode default executor shut down successfully
2026-01-22T14:36:43.362+08:00  INFO --- [ionShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2026-01-22T14:36:43.373+08:00  INFO --- [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2026-01-22T14:36:43.382+08:00  INFO --- [ionShutdownHook] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#shutdown - reason=shutdown completed
2026-01-22T14:36:43.382+08:00  INFO --- [ionShutdownHook] c.a.a.a.e.e.GraphBasedEvaluationExecutor : Shutting down ExecutorService
2026-01-22T14:36:43.386+08:00  INFO --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2026-01-22T14:36:43.398+08:00  INFO --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2026-01-22T14:44:00.665+08:00  INFO --- [           main] c.a.a.a.start.AssistantAgentApplication  : Starting AssistantAgentApplication using Java 21.0.9 with PID 7624 (D:\devfive\AssistantAgent\assistant-agent-start\target\classes started by zhou_ in D:\devfive\AssistantAgent)
2026-01-22T14:44:00.666+08:00 DEBUG --- [           main] c.a.a.a.start.AssistantAgentApplication  : Running with Spring Boot v3.4.8, Spring v6.2.9
2026-01-22T14:44:00.667+08:00  INFO --- [           main] c.a.a.a.start.AssistantAgentApplication  : No active profile set, falling back to 1 default profile: "default"
2026-01-22T14:44:02.707+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Elasticsearch repositories in DEFAULT mode.
2026-01-22T14:44:02.764+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 37 ms. Found 0 Elasticsearch repository interfaces.
2026-01-22T14:44:02.773+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Reactive Elasticsearch repositories in DEFAULT mode.
2026-01-22T14:44:02.782+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 6 ms. Found 0 Reactive Elasticsearch repository interfaces.
2026-01-22T14:44:02.969+08:00  WARN --- [           main] o.m.s.mapper.ClassPathMapperScanner      : Skipping MapperFactoryBean with name 'learningRecordMapper' and 'com.alibaba.assistant.agent.start.persistence.learning.mapper.LearningRecordMapper' mapperInterface. Bean already defined with the same name!
2026-01-22T14:44:02.970+08:00  WARN --- [           main] o.m.s.mapper.ClassPathMapperScanner      : Skipping MapperFactoryBean with name 'triggerDefinitionMapper' and 'com.alibaba.assistant.agent.start.persistence.trigger.mapper.TriggerDefinitionMapper' mapperInterface. Bean already defined with the same name!
2026-01-22T14:44:02.970+08:00  WARN --- [           main] o.m.s.mapper.ClassPathMapperScanner      : Skipping MapperFactoryBean with name 'triggerExecutionRecordMapper' and 'com.alibaba.assistant.agent.start.persistence.trigger.mapper.TriggerExecutionRecordMapper' mapperInterface. Bean already defined with the same name!
2026-01-22T14:44:02.972+08:00  WARN --- [           main] o.m.s.mapper.ClassPathMapperScanner      : Skipping MapperFactoryBean with name 'actionRegistryMapper' and 'com.alibaba.assistant.agent.planning.persistence.mapper.ActionRegistryMapper' mapperInterface. Bean already defined with the same name!
2026-01-22T14:44:05.689+08:00  INFO --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2026-01-22T14:44:05.731+08:00  INFO --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2026-01-22T14:44:05.732+08:00  INFO --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.43]
2026-01-22T14:44:05.916+08:00  INFO --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2026-01-22T14:44:05.916+08:00  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 5172 ms
2026-01-22T14:44:05.981+08:00  INFO --- [           main] c.a.a.a.s.a.security.JwtTokenProvider    : JwtTokenProvider#init - JWT 密钥已初始化
2026-01-22T14:44:06.110+08:00 DEBUG --- [           main] c.a.a.a.s.a.s.JwtAuthenticationFilter    : Filter 'jwtAuthenticationFilter' configured for use
2026-01-22T14:44:07.038+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#init - reason=search extension framework is enabled
2026-01-22T14:44:07.039+08:00  INFO --- [           main] c.a.a.a.s.s.MockBaiduWebSearchProvider   : MockBaiduWebSearchProvider#init - reason=使用简单模式初始化
2026-01-22T14:44:07.043+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#unifiedSearchCodeactTool - reason=创建统一搜索工具, providerCount=3
2026-01-22T14:44:07.220+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#init - reason=planning extension is enabled
2026-01-22T14:44:07.222+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#init - reason=ES configuration class loaded (elasticsearch.enabled=true)
2026-01-22T14:44:07.223+08:00  INFO --- [           main] toConfiguration$MybatisPlusConfiguration : MybatisPlusConfiguration#init - reason=MySQL configuration class loaded (mysql.enabled=true, MyBatisPlus present)
2026-01-22T14:44:07.295+08:00  INFO --- [           main] toConfiguration$MybatisPlusConfiguration : MybatisPlusConfiguration#actionEntityConverter - reason=creating entity converter
2026-01-22T14:44:07.299+08:00  INFO --- [           main] toConfiguration$MybatisPlusConfiguration : MybatisPlusConfiguration#mybatisPlusActionRepository - reason=ActionRegistryMapper found, creating MySQL repository
2026-01-22T14:44:08.717+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#actionVectorizationService - reason=creating ES vectorization service
2026-01-22T14:44:08.963+08:00  INFO --- [           main] c.a.a.a.p.v.ActionVectorizationService   : ActionVectorizationService#init - reason=ES index initialized on startup
2026-01-22T14:44:08.994+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#semanticActionProvider - reason=creating semantic action provider, semanticWeight=0.6, keywordWeight=0.4, matchThreshold=0.5
2026-01-22T14:44:09.002+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#defaultPlanGenerator - reason=creating default plan generator
2026-01-22T14:44:09.006+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#planActionCodeactTool - reason=creating plan_action tool
2026-01-22T14:44:09.009+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#queryStepExecutor - reason=creating query step executor
2026-01-22T14:44:09.018+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#inputStepExecutor - reason=creating input step executor
2026-01-22T14:44:09.021+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#executeStepExecutor - reason=creating execute step executor
2026-01-22T14:44:09.024+08:00  INFO --- [           main] f.a.AutowiredAnnotationBeanPostProcessor : Inconsistent constructor declaration on bean with name 'actionExecutorFactory': single autowire-marked constructor flagged as optional - this constructor is effectively required since there is no default constructor to fall back to: public com.alibaba.assistant.agent.planning.executor.ActionExecutorFactory(java.util.List,com.alibaba.assistant.agent.planning.permission.interceptor.PermissionInterceptor)
2026-01-22T14:44:09.027+08:00  INFO --- [           main] .a.a.a.p.c.ParamOptionsAutoConfiguration : ParamOptionsAutoConfiguration - Parameter options module initialized
2026-01-22T14:44:09.028+08:00  INFO --- [           main] .a.a.a.p.c.ParamOptionsAutoConfiguration : ParamOptionsAutoConfiguration - Creating RestTemplate for HTTP handlers
2026-01-22T14:44:09.043+08:00  INFO --- [           main] c.a.a.a.planning.executor.HttpExecutor   : HttpExecutor#init - initialized
2026-01-22T14:44:09.044+08:00  INFO --- [           main] c.a.a.a.p.executor.InternalExecutor      : InternalExecutor#init - initialized
2026-01-22T14:44:09.053+08:00  INFO --- [           main] c.a.a.a.p.p.a.PermissionAdapterRegistry  : PermissionAdapterRegistry#registerAdapter - registered adapter: system=gov-platform, name=政务服务平台权限适配器
2026-01-22T14:44:09.053+08:00  INFO --- [           main] c.a.a.a.p.p.a.PermissionAdapterRegistry  : PermissionAdapterRegistry#registerAdapter - registered adapter: system=oa-system, name=OA办公系统权限适配器
2026-01-22T14:44:09.053+08:00  INFO --- [           main] c.a.a.a.p.p.a.PermissionAdapterRegistry  : PermissionAdapterRegistry initialized with 2 adapters: [gov-platform, oa-system]
2026-01-22T14:44:09.059+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U001, system=oa-system, externalUser=zhang.san@company.com
2026-01-22T14:44:09.062+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U001, system=gov-platform, externalUser=320102199001011234
2026-01-22T14:44:09.062+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U002, system=oa-system, externalUser=li.si@company.com
2026-01-22T14:44:09.062+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U003, system=oa-system, externalUser=wang.wu@company.com
2026-01-22T14:44:09.062+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U003, system=gov-platform, externalUser=leader_001
2026-01-22T14:44:09.062+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U004, system=gov-platform, externalUser=staff_001
2026-01-22T14:44:09.063+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U005, system=oa-system, externalUser=sun.qi@company.com
2026-01-22T14:44:09.063+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService initialized with demo data
2026-01-22T14:44:09.064+08:00  INFO --- [           main] c.a.a.a.p.c.PermissionAutoConfiguration  : PermissionAutoConfiguration - creating PermissionInterceptor
2026-01-22T14:44:09.067+08:00  INFO --- [           main] c.a.a.a.p.e.ActionExecutorFactory        : ActionExecutorFactory#init - initialized executors: INTERNAL(InternalExecutor), HTTP(HttpExecutor), DATA_AGENT(DataAgentExecutor), MCP(McpExecutor)
2026-01-22T14:44:09.067+08:00  INFO --- [           main] c.a.a.a.p.e.ActionExecutorFactory        : ActionExecutorFactory#init - permission interceptor enabled
2026-01-22T14:44:09.068+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#apiCallStepExecutor - reason=creating api call step executor
2026-01-22T14:44:09.079+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#validationStepExecutor - reason=creating validation step executor
2026-01-22T14:44:09.083+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#stepExecutorRegistry - reason=creating executor registry, executorCount=5
2026-01-22T14:44:09.086+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=QUERY, executorClass=QueryStepExecutor
2026-01-22T14:44:09.087+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=INPUT, executorClass=InputStepExecutor
2026-01-22T14:44:09.087+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=EXECUTE, executorClass=ExecuteStepExecutor
2026-01-22T14:44:09.087+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=API_CALL, executorClass=ApiCallStepExecutor
2026-01-22T14:44:09.087+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=VALIDATION, executorClass=ValidationStepExecutor
2026-01-22T14:44:09.088+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#defaultPlanExecutor - reason=creating default plan executor
2026-01-22T14:44:09.092+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#executeActionCodeactTool - reason=creating execute_action tool
2026-01-22T14:44:09.094+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#listActionsCodeactTool - reason=creating list_actions tool
2026-01-22T14:44:09.096+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#getActionDetailsCodeactTool - reason=creating get_action_details tool
2026-01-22T14:44:09.099+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#executeSystemActionCodeactTool - reason=creating execute_system_action tool
2026-01-22T14:44:09.267+08:00  INFO --- [           main] c.a.a.a.start.config.PersistenceConfig   : PersistenceConfig#init - reason=persistence configuration loaded
2026-01-22T14:44:09.269+08:00  INFO --- [           main] c.a.a.a.start.config.PersistenceConfig   : PersistenceConfig#elasticsearchExperienceProvider - reason=creating Elasticsearch experience provider (PRIMARY), indexName=experiences
2026-01-22T14:44:09.281+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#<init> - reason=初始化默认评估套件配置, experienceProviderAvailable=true
2026-01-22T14:44:09.284+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#evaluatorRegistry - reason=创建 EvaluatorRegistry Bean
2026-01-22T14:44:09.288+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'llm-based' of type LLMBasedEvaluator
2026-01-22T14:44:09.291+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'passthrough' of type RuleBasedEvaluator
2026-01-22T14:44:09.299+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'react_experience_evaluator' of type RuleBasedEvaluator
2026-01-22T14:44:09.299+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createDefaultEvaluatorRegistry - reason=注册 React 阶段经验检索评估器
2026-01-22T14:44:09.299+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'codeact_experience_evaluator' of type RuleBasedEvaluator
2026-01-22T14:44:09.300+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createDefaultEvaluatorRegistry - reason=注册 CodeAct 阶段经验检索评估器
2026-01-22T14:44:09.300+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#evaluationService - reason=创建默认 EvaluationService, sharedRegistryEvaluators=[llm-based, passthrough, codeact_experience_evaluator, react_experience_evaluator]
2026-01-22T14:44:09.307+08:00 DEBUG --- [           main] c.a.a.a.e.e.GraphBasedEvaluationExecutor : Created default ExecutorService for batch processing
2026-01-22T14:44:09.308+08:00  INFO --- [           main] .c.ExperienceEvaluationCriterionProvider : ExperienceEvaluationCriterionProvider#<init> - reason=初始化经验评估 Criterion 提供者
2026-01-22T14:44:09.311+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#structuredParamExtractor - reason=creating structured param extractor
2026-01-22T14:44:09.337+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#parameterValidator - reason=creating parameter validator
2026-01-22T14:44:09.339+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#sessionProvider - reason=creating in-memory session provider
2026-01-22T14:44:09.341+08:00  INFO --- [           main] c.a.a.a.p.s.InMemorySessionProvider      : InMemorySessionProvider#init - initialized
2026-01-22T14:44:09.354+08:00  INFO --- [           main] c.a.a.a.p.s.ParamCollectionService       : ParamCollectionService#init - sessionProvider=InMemory
2026-01-22T14:44:09.360+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'action_intent_evaluator' of type ActionIntentEvaluator
2026-01-22T14:44:09.360+08:00  INFO --- [           main] p.i.PlanningIntegrationAutoConfiguration : PlanningIntegrationAutoConfiguration#actionIntentEvaluator - initialized and registered, paramCollection=true, llmVerification=true, maxCandidates=5
2026-01-22T14:44:09.363+08:00  INFO --- [           main] .p.i.PlanningEvaluationCriterionProvider : PlanningEvaluationCriterionProvider#init - initialized, llmVerificationEnabled=true
2026-01-22T14:44:09.363+08:00  INFO --- [           main] p.i.PlanningIntegrationAutoConfiguration : PlanningIntegrationAutoConfiguration#planningEvaluationCriterionProvider - registered planning evaluation criterion provider
2026-01-22T14:44:09.364+08:00  INFO --- [           main] .c.ExperienceEvaluationCriterionProvider : ExperienceEvaluationCriterionProvider#getReactPhaseCriteria - reason=提供 React 阶段评估 Criteria
2026-01-22T14:44:09.373+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createReactPhaseSuite - reason=添加自定义 Criterion, provider=ExperienceEvaluationCriterionProvider, count=3
2026-01-22T14:44:09.376+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createReactPhaseSuite - reason=添加自定义 Criterion, provider=PlanningEvaluationCriterionProvider, count=2
2026-01-22T14:44:09.385+08:00  INFO --- [           main] a.a.e.a.BatchAggregationStrategyRegistry : Registered batch aggregation strategy: ANY_TRUE
2026-01-22T14:44:09.388+08:00  INFO --- [           main] a.a.e.a.BatchAggregationStrategyRegistry : Registered batch aggregation strategy: ALL_TRUE
2026-01-22T14:44:09.544+08:00  INFO --- [           main] c.a.c.a.g.internal.node.ParallelNode     : Calculated core pool size: 32 (CPU cores: 16)
2026-01-22T14:44:09.544+08:00  INFO --- [           main] c.a.c.a.g.internal.node.ParallelNode     : Calculated maximum pool size: 64 (CPU cores: 16)
2026-01-22T14:44:09.544+08:00  INFO --- [           main] c.a.c.a.g.internal.node.ParallelNode     : Calculated queue capacity: 1000
2026-01-22T14:44:09.548+08:00  INFO --- [           main] c.a.a.a.e.DefaultEvaluationService       : Registered evaluation suite: react-phase-suite
2026-01-22T14:44:09.548+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#evaluationService - reason=注册 React Phase Suite, suiteId=react-phase-suite
2026-01-22T14:44:09.549+08:00  INFO --- [           main] .c.ExperienceEvaluationCriterionProvider : ExperienceEvaluationCriterionProvider#getCodeActPhaseCriteria - reason=提供 CodeAct 阶段评估 Criteria
2026-01-22T14:44:09.549+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createCodeActPhaseSuite - reason=添加自定义 Criterion, provider=ExperienceEvaluationCriterionProvider, count=3
2026-01-22T14:44:09.549+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createCodeActPhaseSuite - reason=添加自定义 Criterion, provider=PlanningEvaluationCriterionProvider, count=2
2026-01-22T14:44:09.549+08:00  INFO --- [           main] a.a.e.a.BatchAggregationStrategyRegistry : Registered batch aggregation strategy: ANY_TRUE
2026-01-22T14:44:09.549+08:00  INFO --- [           main] a.a.e.a.BatchAggregationStrategyRegistry : Registered batch aggregation strategy: ALL_TRUE
2026-01-22T14:44:09.550+08:00  INFO --- [           main] c.a.a.a.e.DefaultEvaluationService       : Registered evaluation suite: codeact-phase-suite
2026-01-22T14:44:09.550+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#evaluationService - reason=注册 CodeAct Phase Suite, suiteId=codeact-phase-suite
2026-01-22T14:44:09.552+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#codeactEvaluationContextFactory - reason=创建 EvaluationContextFactory
2026-01-22T14:44:09.553+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#codeactEvaluationResultAttacher - reason=创建 EvaluationResultAttacher
2026-01-22T14:44:09.567+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#reactPhaseEvaluationHooks - reason=创建 React Phase ModelInputEvaluationHook
2026-01-22T14:44:09.573+08:00  INFO --- [           main] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#<init> - reason=初始化, phase=REACT, providerCount=1
2026-01-22T14:44:09.573+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#reactPhaseEvaluationHooks - reason=创建 React Phase EvaluationPromptInjectionHook, providersCount=2
2026-01-22T14:44:09.575+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#codeactPhaseEvaluationHooks - reason=创建 CodeAct Phase ModelInputEvaluationHook
2026-01-22T14:44:09.575+08:00  INFO --- [           main] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#<init> - reason=初始化, phase=CODEACT, providerCount=1
2026-01-22T14:44:09.575+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#codeactPhaseEvaluationHooks - reason=创建 CodeAct Phase EvaluationPromptInjectionHook, providersCount=2
2026-01-22T14:44:09.580+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#keywordMatcher - reason=creating keyword matcher
2026-01-22T14:44:09.583+08:00  INFO --- [           main] .ParamCollectionSessionAutoConfiguration : ParamCollectionSessionAutoConfiguration#inMemoryParamCollectionSessionStore - reason=creating in-memory session store (Redis not available), ttl=PT30M
2026-01-22T14:44:09.583+08:00  WARN --- [           main] .ParamCollectionSessionAutoConfiguration : ParamCollectionSessionAutoConfiguration#inMemoryParamCollectionSessionStore - reason=WARNING: In-memory session store is not suitable for distributed environment!
2026-01-22T14:44:09.587+08:00  INFO --- [           main] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#<init> - reason=initialized, defaultTtl=PT30M
2026-01-22T14:44:09.588+08:00  WARN --- [           main] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#<init> - reason=WARNING: Using in-memory session store, not suitable for distributed environment!
2026-01-22T14:44:09.599+08:00  INFO --- [           main] iguration$UnifiedIntentHookConfiguration : UnifiedIntentHookConfiguration#unifiedIntentRecognitionHook - reason=creating unified intent hook, experienceProviderPresent=true, chatModelPresent=true, sessionStorePresent=true, directExecuteThreshold=0.95, hintThreshold=0.5
2026-01-22T14:44:09.916+08:00  INFO --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2026-01-22T14:44:10.514+08:00  INFO --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@6c6c93f8
2026-01-22T14:44:10.520+08:00  INFO --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2026-01-22T14:44:10.857+08:00  WARN --- [           main] c.a.a.a.p.p.c.ActionEntityConverter      : ActionEntityConverter#parseActionType - reason=unknown action type, type=INTERNAL
2026-01-22T14:44:10.904+08:00 DEBUG --- [           main] c.a.a.a.planning.intent.KeywordMatcher   : KeywordMatcher#registerAction - actionId=oa:leave:request, keywords=57
2026-01-22T14:44:10.904+08:00  INFO --- [           main] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#initKeywordMatcher - reason=initialized, actionCount=1, keywordIndexSize=57
2026-01-22T14:44:10.908+08:00  INFO --- [           main] c.a.a.a.start.config.PersistenceConfig   : PersistenceConfig#elasticsearchExperienceRepository - reason=creating Elasticsearch experience repository (PRIMARY), indexName=experiences
2026-01-22T14:44:10.919+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#init - reason=reply module enabled
2026-01-22T14:44:10.921+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactToolFactory - reason=创建CodeactTool工厂, channels=1
2026-01-22T14:44:10.922+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#init - reason=工厂初始化完成, channels=1
2026-01-22T14:44:10.933+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=开始创建Reply工具
2026-01-22T14:44:10.943+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#createTools - reason=创建工具成功, toolName=send_success_message, channelCode=IDE_TEXT
2026-01-22T14:44:10.943+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#createTools - reason=创建工具成功, toolName=send_error_message, channelCode=IDE_TEXT
2026-01-22T14:44:10.944+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#createTools - reason=创建工具成功, toolName=send_notification, channelCode=IDE_TEXT
2026-01-22T14:44:10.944+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#createTools - reason=工具创建完成, totalCount=3
2026-01-22T14:44:10.944+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=Reply工具创建完成, count=3
2026-01-22T14:44:10.944+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=创建Reply工具, index=1, name=send_success_message, description=Send a success message to the IDE console
2026-01-22T14:44:10.944+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=创建Reply工具, index=2, name=send_error_message, description=Send an error message to the IDE console
2026-01-22T14:44:10.944+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=创建Reply工具, index=3, name=send_notification, description=Send a notification message
2026-01-22T14:44:10.945+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactToolFactory - reason=创建SearchCodeactTool工厂, providerCount=3
2026-01-22T14:44:10.982+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactToolFactory - reason=创建TriggerCodeactTool工厂
2026-01-22T14:44:10.983+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=开始创建Trigger工具
2026-01-22T14:44:10.986+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=创建SubscribeTriggerCodeactTool成功
2026-01-22T14:44:10.988+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=创建UnsubscribeTriggerCodeactTool成功
2026-01-22T14:44:10.989+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=创建ListTriggersCodeactTool成功
2026-01-22T14:44:10.992+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=创建GetTriggerDetailCodeactTool成功
2026-01-22T14:44:10.992+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=触发器工具创建完成, count=4
2026-01-22T14:44:10.992+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=Trigger工具创建完成, count=4
2026-01-22T14:44:10.992+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=创建Trigger工具, index=1, name=subscribe_trigger, description=创建并订阅一个新的触发器
2026-01-22T14:44:10.992+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=创建Trigger工具, index=2, name=unsubscribe_trigger, description=取消订阅并删除一个触发器
2026-01-22T14:44:10.992+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=创建Trigger工具, index=3, name=list_triggers, description=列出所有触发器
2026-01-22T14:44:10.992+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=创建Trigger工具, index=4, name=get_trigger_detail, description=获取指定触发器的详细信息
2026-01-22T14:44:11.003+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#planningCodeactTools - reason=creating planning tools list
2026-01-22T14:44:11.003+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#planningCodeactTools - reason=created planning tools, count=5
2026-01-22T14:44:11.019+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=创建 CodeactAgent
2026-01-22T14:44:11.019+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=配置 MemorySaver 以支持多轮对话上下文保持
2026-01-22T14:44:11.019+08:00  WARN --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=临时禁用 streaming 模式以排查循环问题
2026-01-22T14:44:11.019+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加UnifiedSearchCodeactTool
2026-01-22T14:44:11.024+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockBaiduWebSearchProvider, toolName=search_web
2026-01-22T14:44:11.025+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockKnowledgeStoreSearchProvider, toolName=search_knowledge
2026-01-22T14:44:11.026+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockProjectContextSearchProvider, toolName=search_project
2026-01-22T14:44:11.027+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=搜索工具创建完成, totalCount=3
2026-01-22T14:44:11.027+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加SearchCodeactTools, count=3
2026-01-22T14:44:11.027+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加ReplyCodeactTools, count=3
2026-01-22T14:44:11.027+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加TriggerCodeactTools, count=4
2026-01-22T14:44:11.027+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加PlanningCodeactTools, count=5
2026-01-22T14:44:11.027+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#createMcpDynamicTools - reason=Creating MCP dynamic tools
2026-01-22T14:44:11.034+08:00  INFO --- [           main] c.a.a.a.e.d.mcp.McpDynamicToolFactory    : McpDynamicToolFactory#createTools - reason=开始创建MCP动态工具
2026-01-22T14:44:11.040+08:00  INFO --- [           main] c.a.a.a.e.d.mcp.McpDynamicToolFactory    : McpDynamicToolFactory#createTools - reason=无可用的MCP工具
2026-01-22T14:44:11.040+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#createMcpDynamicTools - reason=MCP dynamic tools created, count=0
2026-01-22T14:44:11.040+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=Added MCP dynamic tools, count=0
2026-01-22T14:44:11.040+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#createHttpDynamicTools - reason=HTTP dynamic tools disabled by default
2026-01-22T14:44:11.040+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=合并后CodeactTool总数, count=16
2026-01-22T14:44:11.040+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=React阶段使用内置工具(write_code, execute_code, write_condition_code)
2026-01-22T14:44:11.040+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=注入 React Phase 评估 Hooks, count=2
2026-01-22T14:44:11.040+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=注入 CodeAct Phase 评估 Hooks, count=2
2026-01-22T14:44:11.041+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=已准备注入UnifiedIntentRecognitionHook
2026-01-22T14:44:11.045+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 开始构建CodeactAgent
2026-01-22T14:44:11.052+08:00  INFO --- [           main] .a.a.a.c.t.s.DefaultReturnSchemaRegistry : DefaultReturnSchemaRegistry#<init> - reason=创建新实例, hashCode=1877161234
2026-01-22T14:44:11.055+08:00 DEBUG --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#<init> - reason=创建注册表, returnSchemaRegistry=DefaultReturnSchemaRegistry
2026-01-22T14:44:11.055+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=创建默认CodeactToolRegistry
2026-01-22T14:44:11.055+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=开始注册CodeactTool, count=16
2026-01-22T14:44:11.055+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=unified_search
2026-01-22T14:44:11.055+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=unified_search
2026-01-22T14:44:11.055+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=search_web
2026-01-22T14:44:11.055+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=search_web
2026-01-22T14:44:11.055+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=search_knowledge
2026-01-22T14:44:11.055+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=search_knowledge
2026-01-22T14:44:11.056+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=search_project
2026-01-22T14:44:11.056+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=search_project
2026-01-22T14:44:11.056+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=send_success_message
2026-01-22T14:44:11.056+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=send_success_message
2026-01-22T14:44:11.056+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=send_error_message
2026-01-22T14:44:11.056+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=send_error_message
2026-01-22T14:44:11.056+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=send_notification
2026-01-22T14:44:11.056+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=send_notification
2026-01-22T14:44:11.056+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=subscribe_trigger
2026-01-22T14:44:11.056+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=subscribe_trigger
2026-01-22T14:44:11.056+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=unsubscribe_trigger
2026-01-22T14:44:11.056+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=unsubscribe_trigger
2026-01-22T14:44:11.056+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=list_triggers
2026-01-22T14:44:11.056+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=list_triggers
2026-01-22T14:44:11.056+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=get_trigger_detail
2026-01-22T14:44:11.056+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=get_trigger_detail
2026-01-22T14:44:11.060+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=plan_action
2026-01-22T14:44:11.060+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=plan_action
2026-01-22T14:44:11.061+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=execute_action
2026-01-22T14:44:11.061+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=execute_action
2026-01-22T14:44:11.061+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=list_actions
2026-01-22T14:44:11.062+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=list_actions
2026-01-22T14:44:11.062+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=get_action_details
2026-01-22T14:44:11.062+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=get_action_details
2026-01-22T14:44:11.062+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=execute_system_action
2026-01-22T14:44:11.063+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=execute_system_action
2026-01-22T14:44:11.063+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册完成, count=16
2026-01-22T14:44:11.063+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 创建默认CodeContext: language=PYTHON
2026-01-22T14:44:11.067+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 创建默认RuntimeEnvironmentManager: language=PYTHON
2026-01-22T14:44:11.074+08:00 DEBUG --- [           main] c.a.a.a.c.e.bridge.AgentToolBridge       : AgentToolBridge#<init> 初始化: 注册了0个工具
2026-01-22T14:44:11.076+08:00 DEBUG --- [           main] c.a.a.a.c.executor.bridge.StateBridge    : StateBridge#<init> 初始化完成
2026-01-22T14:44:11.079+08:00  INFO --- [           main] c.a.a.a.core.executor.GraalCodeExecutor  : GraalCodeExecutor#<init> 初始化完成: language=PYTHON, allowIO=false, timeout=30000ms, executableTools=true, customBridgeFactory=false
2026-01-22T14:44:11.079+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#createCodeactSubAgentInterceptor 创建子Agent拦截器
2026-01-22T14:44:11.098+08:00  INFO --- [           main] c.a.a.a.a.subagent.CodeactSubAgent       : CodeactSubAgent#<init> 初始化: name=code-generator
2026-01-22T14:44:11.098+08:00  INFO --- [           main] c.a.a.a.a.subagent.CodeactSubAgent       : CodeactSubAgent#<init> 初始化: name=condition-code-generator
2026-01-22T14:44:11.098+08:00  INFO --- [           main] c.a.a.a.a.s.CodeactSubAgentInterceptor   : CodeactSubAgentInterceptor#<init> 创建默认代码生成子Agent
2026-01-22T14:44:11.624+08:00  INFO --- [           main] c.a.a.a.a.s.CodeactSubAgentInterceptor   : CodeactSubAgentInterceptor#<init> 初始化完成: subAgentCount=2
2026-01-22T14:44:11.626+08:00  INFO --- [           main] c.a.a.a.a.tools.ExecuteCodeTool          : ExecuteCodeTool#<init> 初始化完成
2026-01-22T14:44:11.632+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 拦截器分类完成: modelInterceptors=1, toolInterceptors=0
2026-01-22T14:44:11.632+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 从拦截器提取工具: interceptor=CodeactSubAgent, toolCount=2
2026-01-22T14:44:11.657+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 工具收集完成: interceptorTools=2, regularTools=3, total=6
2026-01-22T14:44:11.660+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 设置ModelInterceptors到LlmNode: count=1
2026-01-22T14:44:11.662+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build CodeactAgent构建完成
2026-01-22T14:44:11.662+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=开始罗列已注册的工具
2026-01-22T14:44:11.662+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct阶段工具数量, count=16
2026-01-22T14:44:11.662+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=1, name=send_success_message, description=Send a success message to the IDE console
2026-01-22T14:44:11.662+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=2, name=get_trigger_detail, description=获取指定触发器的详细信息
2026-01-22T14:44:11.662+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=3, name=get_action_details, description=获取指定动作的完整定义，包括参数、步骤等详细信息。
2026-01-22T14:44:11.662+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=4, name=search_project, description=搜索项目上下文信息，包括代码、配置、文档等
2026-01-22T14:44:11.662+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=5, name=subscribe_trigger, description=创建并订阅一个新的触发器
2026-01-22T14:44:11.662+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=6, name=search_knowledge, description=搜索团队知识库，包括FAQ、规范、最佳实践等
2026-01-22T14:44:11.662+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=7, name=unified_search, description=统一搜索工具，可同时搜索项目、知识库、Web等多个数据源
2026-01-22T14:44:11.662+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=8, name=unsubscribe_trigger, description=取消订阅并删除一个触发器
2026-01-22T14:44:11.662+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=9, name=search_web, description=执行Web搜索，获取公开互联网信息
2026-01-22T14:44:11.662+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=10, name=list_actions, description=列出所有可用的动作，支持按分类和标签筛选。
2026-01-22T14:44:11.662+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=11, name=plan_action, description=根据用户输入匹配动作并生成执行计划。返回匹配的动作列表和生成的执行计划。
2026-01-22T14:44:11.662+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=12, name=execute_system_action, description=执行系统Action（如OA请假、ERP操作等）。根据action_id调用相应的系统Handler。
2026-01-22T14:44:11.662+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=13, name=send_error_message, description=Send an error message to the IDE console
2026-01-22T14:44:11.662+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=14, name=execute_action, description=执行指定的执行计划，返回执行结果。支持继续执行等待用户输入的计划。
2026-01-22T14:44:11.662+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=15, name=send_notification, description=Send a notification message
2026-01-22T14:44:11.663+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=16, name=list_triggers, description=列出所有触发器
2026-01-22T14:44:11.663+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React阶段工具数量, count=6
2026-01-22T14:44:11.663+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=1, name=write_code, description=Generate and register a new function with specified name and parameters. IMPORTANT: You MUST provide both 'functionName' and 'parameters' fields. Example: write_code(requirement='calculate sum', functionName='calculate_sum', parameters=['a', 'b'])
2026-01-22T14:44:11.663+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=2, name=write_condition_code, description=Generate and register a condition check function for triggers. This function MUST return a boolean value (True/False). Example: write_condition_code(requirement='check if it is a working day', functionName='check_is_working_day', parameters=['date'])
2026-01-22T14:44:11.663+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=3, name=send_success_message, description=Send a success message to the IDE console
2026-01-22T14:44:11.663+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=4, name=send_error_message, description=Send an error message to the IDE console
2026-01-22T14:44:11.663+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=5, name=send_notification, description=Send a notification message
2026-01-22T14:44:11.663+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=6, name=execute_code, description=Execute a previously generated function by its exact name with matching parameters. CRITICAL: The functionName MUST exactly match the name used in write_code. The 'args' parameter names MUST exactly match the 'parameters' specified in write_code. Example: If you called write_code with functionName='calculate_sum' and parameters=['a', 'b'], then you must call execute_code with functionName='calculate_sum' and args={'a': 10, 'b': 20}. Parameter value types supported: String, Number, Boolean, List, Map/Object.
2026-01-22T14:44:11.663+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=工具罗列完成
2026-01-22T14:44:11.667+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgent#<init> 初始化完成: language=PYTHON
2026-01-22T14:44:11.671+08:00  INFO --- [           main] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#<init> 初始化 Agent 加载器
2026-01-22T14:44:11.708+08:00 DEBUG --- [           main] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#<init> Agent 图结构:
@startuml CodeactAgent
skinparam usecaseFontSize 14
skinparam usecaseStereotypeFontSize 12
skinparam hexagonFontSize 14
skinparam hexagonStereotypeFontSize 12
title "CodeactAgent"
footer

powered by spring-ai-alibaba
end footer
circle start<<input>> as __START__
circle stop as __END__
usecase "_AGENT_MODEL_"<<Node>>
usecase "_AGENT_TOOL_"<<Node>>
usecase "_AGENT_HOOK_UnifiedIntentRecognitionHook.before"<<Node>>
usecase "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"<<Node>>
usecase "_AGENT_HOOK_EvaluationPromptInjectionHook-REACT.beforeModel"<<Node>>
hexagon "check state" as condition1<<Condition>>
hexagon "check state" as condition2<<Condition>>
hexagon "check state" as condition3<<Condition>>
"__START__" -down-> "_AGENT_HOOK_UnifiedIntentRecognitionHook.before"
"_AGENT_HOOK_UnifiedIntentRecognitionHook.before" .down.> "condition1"
"condition1" .down.> "__END__"
'"_AGENT_HOOK_UnifiedIntentRecognitionHook.before" .down.> "__END__"
"condition1" .down.> "_AGENT_TOOL_"
'"_AGENT_HOOK_UnifiedIntentRecognitionHook.before" .down.> "_AGENT_TOOL_"
"condition1" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
'"_AGENT_HOOK_UnifiedIntentRecognitionHook.before" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
"_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel" -down-> "_AGENT_HOOK_EvaluationPromptInjectionHook-REACT.beforeModel"
"_AGENT_HOOK_EvaluationPromptInjectionHook-REACT.beforeModel" -down-> "_AGENT_MODEL_"
"_AGENT_MODEL_" .down.> "condition2"
"condition2" .down.> "__END__"
'"_AGENT_MODEL_" .down.> "__END__"
"condition2" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
'"_AGENT_MODEL_" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
"condition2" .down.> "_AGENT_TOOL_"
'"_AGENT_MODEL_" .down.> "_AGENT_TOOL_"
"_AGENT_TOOL_" .down.> "condition3"
"condition3" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
'"_AGENT_TOOL_" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
"condition3" .down.> "__END__"
'"_AGENT_TOOL_" .down.> "__END__"
@enduml

2026-01-22T14:44:11.708+08:00  INFO --- [           main] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#<init> 已注册 agent: grayscale_agent
2026-01-22T14:44:11.716+08:00  INFO --- [           main] .a.a.a.p.c.ParamOptionsAutoConfiguration : ParamOptionsAutoConfiguration - Creating OptionsCache with TTL: 300000ms
2026-01-22T14:44:11.720+08:00  INFO --- [           main] a.a.a.p.s.DefaultParameterOptionsService : DefaultParameterOptionsService initialized with 3 handlers
2026-01-22T14:44:11.722+08:00  INFO --- [           main] c.a.a.a.planning.system.OaSystemHandler  : OaSystemHandler#init - initialized
2026-01-22T14:44:11.736+08:00 DEBUG --- [           main] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#listAgents 列出所有 agent
2026-01-22T14:44:11.737+08:00  INFO --- [           main] c.a.c.a.a.s.controller.AgentController   : AgentController initialized with 1 dynamic agents: [grayscale_agent]
2026-01-22T14:44:11.879+08:00  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: aa51c606-4e6f-4e51-a8b9-ece4efc5d4da

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2026-01-22T14:44:11.961+08:00  INFO --- [           main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2026-01-22T14:44:12.717+08:00  INFO --- [           main] e.e.c.CodeactEvaluationAutoConfiguration : CodeactEvaluationAutoConfiguration#inputRoutingEvaluationHook - reason=创建输入路由评估 Hook
2026-01-22T14:44:12.719+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchFacade - reason=creating search facade with 3 providers
2026-01-22T14:44:12.721+08:00  INFO --- [           main] c.a.a.a.e.s.i.DefaultSearchFacade        : DefaultSearchFacade#init - reason=initialized with 3 providers
2026-01-22T14:44:12.722+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=开始创建Search工具
2026-01-22T14:44:12.723+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockBaiduWebSearchProvider, toolName=search_web
2026-01-22T14:44:12.724+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockKnowledgeStoreSearchProvider, toolName=search_knowledge
2026-01-22T14:44:12.725+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockProjectContextSearchProvider, toolName=search_project
2026-01-22T14:44:12.725+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=搜索工具创建完成, totalCount=3
2026-01-22T14:44:12.725+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=Search工具创建完成, count=3
2026-01-22T14:44:12.725+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=创建Search工具, index=1, name=search_web, description=执行Web搜索，获取公开互联网信息
2026-01-22T14:44:12.725+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=创建Search工具, index=2, name=search_knowledge, description=搜索团队知识库，包括FAQ、规范、最佳实践等
2026-01-22T14:44:12.725+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=创建Search工具, index=3, name=search_project, description=搜索项目上下文信息，包括代码、配置、文档等
2026-01-22T14:44:12.727+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#diagnostics - reason=ElasticsearchClient bean found
2026-01-22T14:44:12.728+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#diagnostics - reason=EmbeddingModel bean found
2026-01-22T14:44:12.732+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#diagnostics - Planning module status:
2026-01-22T14:44:12.732+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration :   - ActionRepository: MybatisPlusActionRepository
2026-01-22T14:44:12.732+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration :   - ActionProvider: SemanticActionProvider
2026-01-22T14:44:12.732+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration :   - PlanGenerator: DefaultPlanGenerator
2026-01-22T14:44:12.732+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration :   - PlanExecutor: DefaultPlanExecutor
2026-01-22T14:44:13.031+08:00  INFO --- [           main] c.a.a.a.c.c.CodeactCoreAutoConfiguration : CodeactCoreAutoConfiguration#returnSchemaRegistry - reason=创建ReturnSchemaRegistry单例Bean
2026-01-22T14:44:13.031+08:00  INFO --- [           main] .a.a.a.c.t.s.DefaultReturnSchemaRegistry : DefaultReturnSchemaRegistry#<init> - reason=创建新实例, hashCode=1801210741
2026-01-22T14:44:13.908+08:00  WARN --- [           main] o.s.m.p.s.SyncMcpSamplingProvider        : No sampling methods found
2026-01-22T14:44:13.913+08:00  WARN --- [           main] o.s.m.p.e.SyncMcpElicitationProvider     : No elicitation methods found
2026-01-22T14:44:13.983+08:00  INFO --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2026-01-22T14:44:13.997+08:00  INFO --- [           main] c.a.a.a.start.AssistantAgentApplication  : Started AssistantAgentApplication in 14.408 seconds (process running for 16.172)
2026-01-22T14:44:14.008+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#run - reason=Starting experience module validation
2026-01-22T14:44:14.170+08:00 DEBUG --- [           main] .p.e.r.ElasticsearchExperienceRepository : ElasticsearchExperienceRepository#count - reason=count completed, count=0
2026-01-22T14:44:14.217+08:00 DEBUG --- [           main] .p.e.r.ElasticsearchExperienceRepository : ElasticsearchExperienceRepository#countByTypeAndScope - reason=count completed, type=CODE, scope=null, count=0
2026-01-22T14:44:14.227+08:00 DEBUG --- [           main] .p.e.r.ElasticsearchExperienceRepository : ElasticsearchExperienceRepository#countByTypeAndScope - reason=count completed, type=REACT, scope=null, count=0
2026-01-22T14:44:14.236+08:00 DEBUG --- [           main] .p.e.r.ElasticsearchExperienceRepository : ElasticsearchExperienceRepository#countByTypeAndScope - reason=count completed, type=COMMON, scope=null, count=0
2026-01-22T14:44:14.236+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testExperienceCount - reason=Experience stats: total=0, code=0, react=0, common=0
2026-01-22T14:44:14.236+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCommonExperienceQuery - reason=Testing common experience query
2026-01-22T14:44:14.762+08:00 DEBUG --- [           main] .s.p.e.p.ElasticsearchExperienceProvider : ElasticsearchExperienceProvider#query - reason=query completed, type=COMMON, text=null, count=0
2026-01-22T14:44:14.762+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCommonExperienceQuery - reason=Found 0 common experiences
2026-01-22T14:44:14.763+08:00  WARN --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCommonExperienceQuery - reason=❌ MoLiHong identity experience not found
2026-01-22T14:44:14.763+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCodeExperienceQuery - reason=Testing code experience query (demo keyword)
2026-01-22T14:44:14.776+08:00 DEBUG --- [           main] .s.p.e.p.ElasticsearchExperienceProvider : ElasticsearchExperienceProvider#query - reason=query completed, type=CODE, text=null, count=0
2026-01-22T14:44:14.776+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCodeExperienceQuery - reason=Found 0 demo code experiences
2026-01-22T14:44:14.778+08:00  WARN --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCodeExperienceQuery - reason=❌ Demo code experience not found
2026-01-22T14:44:14.778+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testReactExperienceQuery - reason=Testing react experience query
2026-01-22T14:44:14.789+08:00 DEBUG --- [           main] .s.p.e.p.ElasticsearchExperienceProvider : ElasticsearchExperienceProvider#query - reason=query completed, type=REACT, text=null, count=0
2026-01-22T14:44:14.790+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testReactExperienceQuery - reason=Found 0 react experiences
2026-01-22T14:44:14.791+08:00  WARN --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testReactExperienceQuery - reason=❌ Ambiguous intent strategy not found
2026-01-22T14:44:14.791+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#run - reason=Experience module validation completed
2026-01-22T14:44:14.792+08:00  INFO --- [           main] c.a.a.a.s.a.config.AuthInitialization    : AuthInitialization#run - 初始化认证系统
2026-01-22T14:44:14.814+08:00 DEBUG --- [           main] c.a.a.a.s.a.s.AuthenticationService      : AuthenticationService#initDefaultAdmin - 管理员账户已存在
2026-01-22T14:44:14.814+08:00  INFO --- [           main] c.a.a.a.s.a.config.AuthInitialization    : AuthInitialization#run - 认证系统初始化完成
2026-01-22T14:44:31.081+08:00  INFO --- [nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-01-22T14:44:31.081+08:00  INFO --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2026-01-22T14:44:31.081+08:00  INFO --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 0 ms
2026-01-22T14:44:31.694+08:00 DEBUG --- [nio-8080-exec-1] c.a.a.a.s.a.s.JwtAuthenticationFilter    : JwtAuthenticationFilter#doFilterInternal - 设置用户认证: username=admin, roles=[ADMIN, USER]
2026-01-22T14:44:31.829+08:00  INFO --- [nio-8080-exec-1] c.a.c.a.a.s.controller.ThreadController  : Request received for POST /apps/research_agent/users/user-001/threads (service generates ID) with state: {}
2026-01-22T14:44:31.845+08:00  INFO --- [nio-8080-exec-1] c.a.c.a.a.s.service.ThreadServiceImpl    : Created thread: 82c6f7ea-2f1e-4322-ab2f-ccf4968bff28 for app=research_agent, user=user-001
2026-01-22T14:44:31.845+08:00  INFO --- [nio-8080-exec-1] c.a.c.a.a.s.controller.ThreadController  : Thread created successfully with generated id: 82c6f7ea-2f1e-4322-ab2f-ccf4968bff28
2026-01-22T14:44:31.946+08:00 DEBUG --- [nio-8080-exec-2] c.a.a.a.s.a.s.JwtAuthenticationFilter    : JwtAuthenticationFilter#doFilterInternal - 设置用户认证: username=admin, roles=[ADMIN, USER]
2026-01-22T14:44:31.978+08:00  INFO --- [nio-8080-exec-2] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#loadAgent 加载 agent: research_agent
2026-01-22T14:44:31.978+08:00  INFO --- [nio-8080-exec-2] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#loadAgent 成功加载 agent: research_agent
2026-01-22T14:44:32.000+08:00 DEBUG --- [nio-8080-exec-7] c.a.a.a.s.a.s.JwtAuthenticationFilter    : JwtAuthenticationFilter#doFilterInternal - 设置用户认证: username=admin, roles=[ADMIN, USER]
2026-01-22T14:44:32.003+08:00  INFO --- [nio-8080-exec-7] c.a.c.a.a.s.controller.ThreadController  : Request received for GET /apps/research_agent/users/user-001/threads/82c6f7ea-2f1e-4322-ab2f-ccf4968bff28
2026-01-22T14:44:32.232+08:00 DEBUG --- [nio-8080-exec-2] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#beforeAgent - reason=checking unified intent
2026-01-22T14:44:32.232+08:00 DEBUG --- [nio-8080-exec-2] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#get - reason=session not found, sessionId=82c6f7ea-2f1e-4322-ab2f-ccf4968bff28
2026-01-22T14:44:32.232+08:00 DEBUG --- [nio-8080-exec-2] c.a.a.a.p.i.SemanticActionProvider       : SemanticActionProvider#matchActions - reason=matching actions, userInput=我要请假
2026-01-22T14:44:33.914+08:00  WARN --- [nio-8080-exec-2] c.a.a.a.p.p.c.ActionEntityConverter      : ActionEntityConverter#parseActionType - reason=unknown action type, type=INTERNAL
2026-01-22T14:44:33.931+08:00  WARN --- [nio-8080-exec-2] c.a.a.a.p.p.c.ActionEntityConverter      : ActionEntityConverter#parseActionType - reason=unknown action type, type=INTERNAL
2026-01-22T14:44:33.931+08:00  INFO --- [nio-8080-exec-2] c.a.a.a.p.i.SemanticActionProvider       : SemanticActionProvider#matchActions - reason=matching completed, userInput=我要请假, matchCount=1
2026-01-22T14:44:33.931+08:00  INFO --- [nio-8080-exec-2] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#beforeAgent - reason=match found, actionId=oa:leave:request, confidence=0.95, matchType=KEYWORD_EXACT
2026-01-22T14:44:33.948+08:00 DEBUG --- [nio-8080-exec-2] .s.p.e.p.ElasticsearchExperienceProvider : ElasticsearchExperienceProvider#query - reason=query completed, type=REACT, text=null, count=0
2026-01-22T14:44:33.948+08:00  INFO --- [nio-8080-exec-2] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#beforeAgent - reason=high confidence, using Planning direct execution with param collection, actionId=oa:leave:request, confidence=0.95
2026-01-22T14:44:33.948+08:00  INFO --- [nio-8080-exec-2] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handlePlanningDirectExecution - reason=direct execution, actionId=oa:leave:request
2026-01-22T14:44:33.948+08:00  INFO --- [nio-8080-exec-2] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handlePlanningDirectExecution - reason=missing required params, count=5, actionId=oa:leave:request
2026-01-22T14:44:33.948+08:00  INFO --- [nio-8080-exec-2] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handleMissingParameters - reason=asking for param, paramName=start_date, actionId=oa:leave:request
2026-01-22T14:44:33.966+08:00 DEBUG --- [nio-8080-exec-2] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#save - reason=session saved, sessionId=82c6f7ea-2f1e-4322-ab2f-ccf4968bff28, ttl=PT30M
2026-01-22T14:44:33.966+08:00 DEBUG --- [nio-8080-exec-2] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#saveSession - reason=session saved, sessionId=82c6f7ea-2f1e-4322-ab2f-ccf4968bff28
2026-01-22T14:44:33.966+08:00  INFO --- [nio-8080-exec-2] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handleMissingParameters - reason=session saved to store, sessionId=82c6f7ea-2f1e-4322-ab2f-ccf4968bff28, actionId=oa:leave:request
2026-01-22T14:44:43.470+08:00 DEBUG --- [nio-8080-exec-6] c.a.a.a.s.a.s.JwtAuthenticationFilter    : JwtAuthenticationFilter#doFilterInternal - 设置用户认证: username=admin, roles=[ADMIN, USER]
2026-01-22T14:44:43.472+08:00  INFO --- [nio-8080-exec-6] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#loadAgent 加载 agent: research_agent
2026-01-22T14:44:43.472+08:00  INFO --- [nio-8080-exec-6] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#loadAgent 成功加载 agent: research_agent
2026-01-22T14:44:43.476+08:00 DEBUG --- [nio-8080-exec-6] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#beforeAgent - reason=checking unified intent
2026-01-22T14:44:43.476+08:00 DEBUG --- [nio-8080-exec-6] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#get - reason=session found, sessionId=82c6f7ea-2f1e-4322-ab2f-ccf4968bff28, active=true
2026-01-22T14:44:43.476+08:00  INFO --- [nio-8080-exec-6] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#beforeAgent - reason=continuing param collection session (from store), sessionId=82c6f7ea-2f1e-4322-ab2f-ccf4968bff28, userInput=2025-01-23
2026-01-22T14:44:43.476+08:00  INFO --- [nio-8080-exec-6] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handleParamCollectionContinuation - reason=processing param input, sessionId=82c6f7ea-2f1e-4322-ab2f-ccf4968bff28, actionId=oa:leave:request, userInput=2025-01-23
2026-01-22T14:44:43.493+08:00  WARN --- [nio-8080-exec-6] c.a.a.a.p.p.c.ActionEntityConverter      : ActionEntityConverter#parseActionType - reason=unknown action type, type=INTERNAL
2026-01-22T14:44:46.268+08:00  INFO --- [nio-8080-exec-6] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handleParamCollectionContinuation - reason=LLM response, response=```json
{
  "extractedParams": {"start_date": "2025-01-23"},
  "missingParams": ["end_date", "types", "reason", "check_uids"],
  "nextQuestion": "请提供结束日期、请假类型（事假=1, 病假=2, 年假=3, 调休=4）、请假理由以及审批人ID。"
}
```
2026-01-22T14:44:46.440+08:00  INFO --- [nio-8080-exec-6] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handleParamCollectionContinuation - reason=still has missing params, nextQuestion=请提供结束日期、请假类型（事假=1, 病假=2, 年假=3, 调休=4）、请假理由以及审批人ID。
2026-01-22T14:44:46.440+08:00 DEBUG --- [nio-8080-exec-6] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#save - reason=session saved, sessionId=82c6f7ea-2f1e-4322-ab2f-ccf4968bff28, ttl=PT30M
2026-01-22T14:44:46.440+08:00 DEBUG --- [nio-8080-exec-6] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#saveSession - reason=session saved, sessionId=82c6f7ea-2f1e-4322-ab2f-ccf4968bff28
2026-01-22T14:44:55.745+08:00 DEBUG --- [nio-8080-exec-4] c.a.a.a.s.a.s.JwtAuthenticationFilter    : JwtAuthenticationFilter#doFilterInternal - 设置用户认证: username=admin, roles=[ADMIN, USER]
2026-01-22T14:44:55.745+08:00  INFO --- [nio-8080-exec-4] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#loadAgent 加载 agent: research_agent
2026-01-22T14:44:55.745+08:00  INFO --- [nio-8080-exec-4] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#loadAgent 成功加载 agent: research_agent
2026-01-22T14:44:55.745+08:00 DEBUG --- [nio-8080-exec-4] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#beforeAgent - reason=checking unified intent
2026-01-22T14:44:55.745+08:00 DEBUG --- [nio-8080-exec-4] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#get - reason=session found, sessionId=82c6f7ea-2f1e-4322-ab2f-ccf4968bff28, active=true
2026-01-22T14:44:55.745+08:00  INFO --- [nio-8080-exec-4] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#beforeAgent - reason=continuing param collection session (from store), sessionId=82c6f7ea-2f1e-4322-ab2f-ccf4968bff28, userInput=2026-1-23 类型 事假 理由 aa 审批人 25
2026-01-22T14:44:55.745+08:00  INFO --- [nio-8080-exec-4] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handleParamCollectionContinuation - reason=processing param input, sessionId=82c6f7ea-2f1e-4322-ab2f-ccf4968bff28, actionId=oa:leave:request, userInput=2026-1-23 类型 事假 理由 aa 审批人 25
2026-01-22T14:44:55.745+08:00  WARN --- [nio-8080-exec-4] c.a.a.a.p.p.c.ActionEntityConverter      : ActionEntityConverter#parseActionType - reason=unknown action type, type=INTERNAL
2026-01-22T14:44:57.698+08:00  INFO --- [nio-8080-exec-4] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handleParamCollectionContinuation - reason=LLM response, response=```json
{
  "extractedParams": {
    "end_date": "2026-01-23 00:00",
    "types": "1",
    "reason": "aa",
    "check_uids": "25"
  },
  "missingParams": [],
  "nextQuestion": null
}
```
2026-01-22T14:44:57.699+08:00  INFO --- [nio-8080-exec-4] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handleParamCollectionContinuation - reason=params complete, executing action, actionId=oa:leave:request, params={end_date=2026-01-23 00:00, reason=aa, check_uids=25, types=1, start_date=2025-01-23}
2026-01-22T14:44:57.699+08:00 DEBUG --- [nio-8080-exec-4] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#close - reason=session closed, sessionId=82c6f7ea-2f1e-4322-ab2f-ccf4968bff28
2026-01-22T14:44:57.699+08:00 DEBUG --- [nio-8080-exec-4] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#closeSession - reason=session closed, sessionId=82c6f7ea-2f1e-4322-ab2f-ccf4968bff28
2026-01-22T14:44:57.699+08:00  INFO --- [nio-8080-exec-4] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handlePlanningDirectExecution - reason=direct execution, actionId=oa:leave:request
2026-01-22T14:44:57.703+08:00 DEBUG --- [nio-8080-exec-4] c.a.a.a.p.internal.DefaultPlanGenerator  : DefaultPlanGenerator#generate - reason=generating plan, actionId=oa:leave:request, actionName=提交OA请假申请
2026-01-22T14:44:57.708+08:00  INFO --- [nio-8080-exec-4] c.a.a.a.p.internal.DefaultPlanGenerator  : DefaultPlanGenerator#generate - reason=plan generated, planId=dbd8b452-6108-4333-a749-d67fad75d844, stepCount=1
2026-01-22T14:44:57.708+08:00  INFO --- [nio-8080-exec-4] c.a.a.a.p.internal.DefaultPlanExecutor   : DefaultPlanExecutor#execute - reason=starting plan execution, planId=dbd8b452-6108-4333-a749-d67fad75d844, actionId=oa:leave:request
2026-01-22T14:44:57.717+08:00 DEBUG --- [nio-8080-exec-4] c.a.a.a.p.internal.DefaultPlanExecutor   : DefaultPlanExecutor#executeSteps - reason=executing step, planId=dbd8b452-6108-4333-a749-d67fad75d844, stepId=execute, stepIndex=0
2026-01-22T14:45:01.019+08:00 DEBUG --- [nio-8080-exec-4] c.a.a.a.p.i.e.ExecuteStepExecutor        : AbstractStepExecutor#execute - reason=executing step, stepId=execute, type=EXECUTE
2026-01-22T14:45:01.019+08:00 DEBUG --- [nio-8080-exec-4] c.a.a.a.p.i.e.ExecuteStepExecutor        : ExecuteStepExecutor#doExecute - reason=executing execute step, stepId=execute
2026-01-22T14:45:01.019+08:00 DEBUG --- [nio-8080-exec-4] c.a.a.a.p.e.ActionExecutorFactory        : ActionExecutorFactory#execute - executing actionId=execute, type=INTERNAL, executor=InternalExecutor
2026-01-22T14:45:01.019+08:00 DEBUG --- [nio-8080-exec-4] c.a.a.a.p.e.ActionExecutorFactory        : ActionExecutorFactory#execute - skipping permission check (missing userId or systemId)
2026-01-22T14:45:01.020+08:00  INFO --- [nio-8080-exec-4] c.a.a.a.p.executor.InternalExecutor      : InternalExecutor#execute - invoking bean method, actionId=execute, bean=oaSystemActionService, method=execute
2026-01-22T14:45:01.020+08:00 DEBUG --- [nio-8080-exec-4] c.a.a.a.p.executor.InternalExecutor      : InternalExecutor#prepareArguments - passing entire params as Map argument
2026-01-22T14:45:22.314+08:00  WARN --- [nio-8080-exec-4] c.a.a.a.p.p.c.ActionEntityConverter      : ActionEntityConverter#parseActionType - reason=unknown action type, type=INTERNAL
2026-01-22T14:45:22.315+08:00 ERROR --- [nio-8080-exec-4] c.a.a.a.planning.system.OaSystemHandler  : OaSystemHandler#execute - failed, actionId=oa:leave:request, time=10164ms, error=Action未配置system_id: oa:leave:request

java.lang.IllegalArgumentException: Action未配置system_id: oa:leave:request
	at com.alibaba.assistant.agent.planning.system.OaSystemHandler.execute(OaSystemHandler.java:87)
	at com.alibaba.assistant.agent.planning.system.OaSystemActionService.execute(OaSystemActionService.java:65)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at com.alibaba.assistant.agent.planning.executor.InternalExecutor.execute(InternalExecutor.java:106)
	at com.alibaba.assistant.agent.planning.executor.ActionExecutorFactory.execute(ActionExecutorFactory.java:192)
	at com.alibaba.assistant.agent.planning.internal.executor.ExecuteStepExecutor.doExecute(ExecuteStepExecutor.java:65)
	at com.alibaba.assistant.agent.planning.internal.executor.AbstractStepExecutor.execute(AbstractStepExecutor.java:47)
	at com.alibaba.assistant.agent.planning.internal.DefaultPlanExecutor.executeSteps(DefaultPlanExecutor.java:127)
	at com.alibaba.assistant.agent.planning.internal.DefaultPlanExecutor.execute(DefaultPlanExecutor.java:78)
	at com.alibaba.assistant.agent.planning.intent.UnifiedIntentRecognitionHook.handlePlanningDirectExecution(UnifiedIntentRecognitionHook.java:439)
	at com.alibaba.assistant.agent.planning.intent.UnifiedIntentRecognitionHook.handleParamCollectionContinuation(UnifiedIntentRecognitionHook.java:696)
	at com.alibaba.assistant.agent.planning.intent.UnifiedIntentRecognitionHook.beforeAgent(UnifiedIntentRecognitionHook.java:186)
	at com.alibaba.cloud.ai.graph.executor.NodeExecutor.executeNode(NodeExecutor.java:122)
	at com.alibaba.cloud.ai.graph.executor.NodeExecutor.execute(NodeExecutor.java:84)
	at com.alibaba.cloud.ai.graph.executor.MainGraphExecutor.execute(MainGraphExecutor.java:108)
	at com.alibaba.cloud.ai.graph.executor.MainGraphExecutor.lambda$handleStartNode$0(MainGraphExecutor.java:135)
	at reactor.core.publisher.FluxDefer.subscribe(FluxDefer.java:46)
	at reactor.core.publisher.Flux.subscribe(Flux.java:8891)
	at reactor.core.publisher.FluxConcatArray$ConcatArraySubscriber.onComplete(FluxConcatArray.java:238)
	at reactor.core.publisher.FluxConcatArray.subscribe(FluxConcatArray.java:79)
	at reactor.core.publisher.FluxDefer.subscribe(FluxDefer.java:54)
	at reactor.core.publisher.Flux.subscribe(Flux.java:8891)
	at org.springframework.web.servlet.mvc.method.annotation.ReactiveTypeHandler$AbstractEmitterSubscriber.connect(ReactiveTypeHandler.java:295)
	at org.springframework.web.servlet.mvc.method.annotation.ReactiveTypeHandler.handleValue(ReactiveTypeHandler.java:168)
	at org.springframework.web.servlet.mvc.method.annotation.ResponseBodyEmitterReturnValueHandler.handleReturnValue(ResponseBodyEmitterReturnValueHandler.java:215)
	at org.springframework.web.method.support.HandlerMethodReturnValueHandlerComposite.handleReturnValue(HandlerMethodReturnValueHandlerComposite.java:78)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:136)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.alibaba.assistant.agent.start.auth.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:87)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$4(HandlerMappingIntrospector.java:267)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)

2026-01-22T14:45:22.319+08:00  INFO --- [nio-8080-exec-4] c.a.a.a.p.executor.InternalExecutor      : InternalExecutor#execute - method invoked successfully, actionId=execute, time=21299ms
2026-01-22T14:45:22.329+08:00  INFO --- [nio-8080-exec-4] c.a.a.a.p.i.e.ExecuteStepExecutor        : ExecuteStepExecutor#doExecute - reason=step executed, stepId=execute, success=true
2026-01-22T14:45:22.330+08:00  INFO --- [nio-8080-exec-4] c.a.a.a.p.internal.DefaultPlanExecutor   : DefaultPlanExecutor#execute - reason=plan completed, planId=dbd8b452-6108-4333-a749-d67fad75d844, stepCount=1
2026-01-22T14:45:22.331+08:00  INFO --- [nio-8080-exec-4] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handlePlanningDirectExecution - reason=execution completed, planId=dbd8b452-6108-4333-a749-d67fad75d844, success=true
2026-01-22T14:47:00.487+08:00 DEBUG --- [io-8080-exec-10] c.a.a.a.s.a.s.JwtAuthenticationFilter    : JwtAuthenticationFilter#doFilterInternal - 设置用户认证: username=admin, roles=[ADMIN, USER]
2026-01-22T14:47:00.489+08:00  INFO --- [io-8080-exec-10] c.a.c.a.a.s.controller.ThreadController  : Request received for POST /apps/research_agent/users/user-001/threads (service generates ID) with state: {}
2026-01-22T14:47:00.490+08:00  INFO --- [io-8080-exec-10] c.a.c.a.a.s.service.ThreadServiceImpl    : Created thread: 6b74a7bc-3d29-435d-8fd9-d197c64942aa for app=research_agent, user=user-001
2026-01-22T14:47:00.490+08:00  INFO --- [io-8080-exec-10] c.a.c.a.a.s.controller.ThreadController  : Thread created successfully with generated id: 6b74a7bc-3d29-435d-8fd9-d197c64942aa
2026-01-22T14:47:00.507+08:00 DEBUG --- [nio-8080-exec-1] c.a.a.a.s.a.s.JwtAuthenticationFilter    : JwtAuthenticationFilter#doFilterInternal - 设置用户认证: username=admin, roles=[ADMIN, USER]
2026-01-22T14:47:00.509+08:00  INFO --- [nio-8080-exec-1] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#loadAgent 加载 agent: research_agent
2026-01-22T14:47:00.510+08:00  INFO --- [nio-8080-exec-1] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#loadAgent 成功加载 agent: research_agent
2026-01-22T14:47:00.514+08:00 DEBUG --- [nio-8080-exec-1] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#beforeAgent - reason=checking unified intent
2026-01-22T14:47:00.514+08:00 DEBUG --- [nio-8080-exec-1] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#get - reason=session not found, sessionId=6b74a7bc-3d29-435d-8fd9-d197c64942aa
2026-01-22T14:47:00.514+08:00 DEBUG --- [nio-8080-exec-1] c.a.a.a.p.i.SemanticActionProvider       : SemanticActionProvider#matchActions - reason=matching actions, userInput=我要请假
2026-01-22T14:47:00.555+08:00 DEBUG --- [nio-8080-exec-7] c.a.a.a.s.a.s.JwtAuthenticationFilter    : JwtAuthenticationFilter#doFilterInternal - 设置用户认证: username=admin, roles=[ADMIN, USER]
2026-01-22T14:47:00.557+08:00  INFO --- [nio-8080-exec-7] c.a.c.a.a.s.controller.ThreadController  : Request received for GET /apps/research_agent/users/user-001/threads/6b74a7bc-3d29-435d-8fd9-d197c64942aa
2026-01-22T14:47:00.984+08:00  WARN --- [nio-8080-exec-1] c.a.a.a.p.p.c.ActionEntityConverter      : ActionEntityConverter#parseActionType - reason=unknown action type, type=INTERNAL
2026-01-22T14:47:38.196+08:00  WARN --- [l-1 housekeeper] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=56s25ms519µs501ns).
2026-01-22T14:47:38.200+08:00  WARN --- [nio-8080-exec-1] c.a.a.a.p.p.c.ActionEntityConverter      : ActionEntityConverter#parseActionType - reason=unknown action type, type=INTERNAL
2026-01-22T14:47:38.203+08:00  INFO --- [nio-8080-exec-1] c.a.a.a.p.i.SemanticActionProvider       : SemanticActionProvider#matchActions - reason=matching completed, userInput=我要请假, matchCount=1
2026-01-22T14:47:38.204+08:00  INFO --- [nio-8080-exec-1] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#beforeAgent - reason=match found, actionId=oa:leave:request, confidence=0.95, matchType=KEYWORD_EXACT
2026-01-22T14:47:38.224+08:00 DEBUG --- [nio-8080-exec-1] .s.p.e.p.ElasticsearchExperienceProvider : ElasticsearchExperienceProvider#query - reason=query completed, type=REACT, text=null, count=0
2026-01-22T14:47:38.224+08:00  INFO --- [nio-8080-exec-1] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#beforeAgent - reason=high confidence, using Planning direct execution with param collection, actionId=oa:leave:request, confidence=0.95
2026-01-22T14:47:38.224+08:00  INFO --- [nio-8080-exec-1] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handlePlanningDirectExecution - reason=direct execution, actionId=oa:leave:request
2026-01-22T14:47:38.224+08:00  INFO --- [nio-8080-exec-1] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handlePlanningDirectExecution - reason=missing required params, count=5, actionId=oa:leave:request
2026-01-22T14:47:38.224+08:00  INFO --- [nio-8080-exec-1] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handleMissingParameters - reason=asking for param, paramName=start_date, actionId=oa:leave:request
2026-01-22T14:47:38.224+08:00 DEBUG --- [nio-8080-exec-1] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#save - reason=session saved, sessionId=6b74a7bc-3d29-435d-8fd9-d197c64942aa, ttl=PT30M
2026-01-22T14:47:38.224+08:00 DEBUG --- [nio-8080-exec-1] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#saveSession - reason=session saved, sessionId=6b74a7bc-3d29-435d-8fd9-d197c64942aa
2026-01-22T14:47:38.224+08:00  INFO --- [nio-8080-exec-1] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handleMissingParameters - reason=session saved to store, sessionId=6b74a7bc-3d29-435d-8fd9-d197c64942aa, actionId=oa:leave:request
2026-01-22T14:47:38.254+08:00  INFO --- [r-shutdown-hook] c.a.c.a.g.internal.node.ParallelNode     : Shutting down ParallelNode default executor
2026-01-22T14:47:38.254+08:00  INFO --- [r-shutdown-hook] c.a.c.a.g.internal.node.ParallelNode     : ParallelNode default thread pool terminated
2026-01-22T14:47:38.255+08:00  INFO --- [r-shutdown-hook] c.a.c.a.g.internal.node.ParallelNode     : ParallelNode default executor shut down successfully
2026-01-22T14:47:38.259+08:00  INFO --- [ionShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2026-01-22T14:47:38.268+08:00  INFO --- [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2026-01-22T14:47:38.282+08:00  INFO --- [ionShutdownHook] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#shutdown - reason=shutdown completed
2026-01-22T14:47:38.283+08:00  INFO --- [ionShutdownHook] c.a.a.a.e.e.GraphBasedEvaluationExecutor : Shutting down ExecutorService
2026-01-22T14:47:38.286+08:00  INFO --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2026-01-22T14:47:38.305+08:00  INFO --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2026-01-22T14:49:28.403+08:00  INFO --- [           main] c.a.a.a.start.AssistantAgentApplication  : Starting AssistantAgentApplication using Java 21.0.9 with PID 4260 (D:\devfive\AssistantAgent\assistant-agent-start\target\classes started by zhou_ in D:\devfive\AssistantAgent)
2026-01-22T14:49:28.404+08:00 DEBUG --- [           main] c.a.a.a.start.AssistantAgentApplication  : Running with Spring Boot v3.4.8, Spring v6.2.9
2026-01-22T14:49:28.405+08:00  INFO --- [           main] c.a.a.a.start.AssistantAgentApplication  : No active profile set, falling back to 1 default profile: "default"
2026-01-22T14:49:30.434+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Elasticsearch repositories in DEFAULT mode.
2026-01-22T14:49:30.481+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 34 ms. Found 0 Elasticsearch repository interfaces.
2026-01-22T14:49:30.490+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Reactive Elasticsearch repositories in DEFAULT mode.
2026-01-22T14:49:30.499+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 5 ms. Found 0 Reactive Elasticsearch repository interfaces.
2026-01-22T14:49:30.666+08:00  WARN --- [           main] o.m.s.mapper.ClassPathMapperScanner      : Skipping MapperFactoryBean with name 'learningRecordMapper' and 'com.alibaba.assistant.agent.start.persistence.learning.mapper.LearningRecordMapper' mapperInterface. Bean already defined with the same name!
2026-01-22T14:49:30.666+08:00  WARN --- [           main] o.m.s.mapper.ClassPathMapperScanner      : Skipping MapperFactoryBean with name 'triggerDefinitionMapper' and 'com.alibaba.assistant.agent.start.persistence.trigger.mapper.TriggerDefinitionMapper' mapperInterface. Bean already defined with the same name!
2026-01-22T14:49:30.666+08:00  WARN --- [           main] o.m.s.mapper.ClassPathMapperScanner      : Skipping MapperFactoryBean with name 'triggerExecutionRecordMapper' and 'com.alibaba.assistant.agent.start.persistence.trigger.mapper.TriggerExecutionRecordMapper' mapperInterface. Bean already defined with the same name!
2026-01-22T14:49:30.668+08:00  WARN --- [           main] o.m.s.mapper.ClassPathMapperScanner      : Skipping MapperFactoryBean with name 'actionRegistryMapper' and 'com.alibaba.assistant.agent.planning.persistence.mapper.ActionRegistryMapper' mapperInterface. Bean already defined with the same name!
2026-01-22T14:49:32.999+08:00  INFO --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2026-01-22T14:49:33.059+08:00  INFO --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2026-01-22T14:49:33.060+08:00  INFO --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.43]
2026-01-22T14:49:33.224+08:00  INFO --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2026-01-22T14:49:33.224+08:00  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 4740 ms
2026-01-22T14:49:33.284+08:00  INFO --- [           main] c.a.a.a.s.a.security.JwtTokenProvider    : JwtTokenProvider#init - JWT 密钥已初始化
2026-01-22T14:49:33.395+08:00 DEBUG --- [           main] c.a.a.a.s.a.s.JwtAuthenticationFilter    : Filter 'jwtAuthenticationFilter' configured for use
2026-01-22T14:49:34.200+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#init - reason=search extension framework is enabled
2026-01-22T14:49:34.202+08:00  INFO --- [           main] c.a.a.a.s.s.MockBaiduWebSearchProvider   : MockBaiduWebSearchProvider#init - reason=使用简单模式初始化
2026-01-22T14:49:34.206+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#unifiedSearchCodeactTool - reason=创建统一搜索工具, providerCount=3
2026-01-22T14:49:34.385+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#init - reason=planning extension is enabled
2026-01-22T14:49:34.387+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#init - reason=ES configuration class loaded (elasticsearch.enabled=true)
2026-01-22T14:49:34.388+08:00  INFO --- [           main] toConfiguration$MybatisPlusConfiguration : MybatisPlusConfiguration#init - reason=MySQL configuration class loaded (mysql.enabled=true, MyBatisPlus present)
2026-01-22T14:49:34.455+08:00  INFO --- [           main] toConfiguration$MybatisPlusConfiguration : MybatisPlusConfiguration#actionEntityConverter - reason=creating entity converter
2026-01-22T14:49:34.461+08:00  INFO --- [           main] toConfiguration$MybatisPlusConfiguration : MybatisPlusConfiguration#mybatisPlusActionRepository - reason=ActionRegistryMapper found, creating MySQL repository
2026-01-22T14:49:35.755+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#actionVectorizationService - reason=creating ES vectorization service
2026-01-22T14:49:35.950+08:00  INFO --- [           main] c.a.a.a.p.v.ActionVectorizationService   : ActionVectorizationService#init - reason=ES index initialized on startup
2026-01-22T14:49:35.987+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#semanticActionProvider - reason=creating semantic action provider, semanticWeight=0.6, keywordWeight=0.4, matchThreshold=0.5
2026-01-22T14:49:35.998+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#defaultPlanGenerator - reason=creating default plan generator
2026-01-22T14:49:36.004+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#planActionCodeactTool - reason=creating plan_action tool
2026-01-22T14:49:36.007+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#queryStepExecutor - reason=creating query step executor
2026-01-22T14:49:36.011+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#inputStepExecutor - reason=creating input step executor
2026-01-22T14:49:36.014+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#executeStepExecutor - reason=creating execute step executor
2026-01-22T14:49:36.017+08:00  INFO --- [           main] f.a.AutowiredAnnotationBeanPostProcessor : Inconsistent constructor declaration on bean with name 'actionExecutorFactory': single autowire-marked constructor flagged as optional - this constructor is effectively required since there is no default constructor to fall back to: public com.alibaba.assistant.agent.planning.executor.ActionExecutorFactory(java.util.List,com.alibaba.assistant.agent.planning.permission.interceptor.PermissionInterceptor)
2026-01-22T14:49:36.020+08:00  INFO --- [           main] .a.a.a.p.c.ParamOptionsAutoConfiguration : ParamOptionsAutoConfiguration - Parameter options module initialized
2026-01-22T14:49:36.021+08:00  INFO --- [           main] .a.a.a.p.c.ParamOptionsAutoConfiguration : ParamOptionsAutoConfiguration - Creating RestTemplate for HTTP handlers
2026-01-22T14:49:36.036+08:00  INFO --- [           main] c.a.a.a.planning.executor.HttpExecutor   : HttpExecutor#init - initialized
2026-01-22T14:49:36.037+08:00  INFO --- [           main] c.a.a.a.p.executor.InternalExecutor      : InternalExecutor#init - initialized
2026-01-22T14:49:36.047+08:00  INFO --- [           main] c.a.a.a.p.p.a.PermissionAdapterRegistry  : PermissionAdapterRegistry#registerAdapter - registered adapter: system=gov-platform, name=政务服务平台权限适配器
2026-01-22T14:49:36.047+08:00  INFO --- [           main] c.a.a.a.p.p.a.PermissionAdapterRegistry  : PermissionAdapterRegistry#registerAdapter - registered adapter: system=oa-system, name=OA办公系统权限适配器
2026-01-22T14:49:36.047+08:00  INFO --- [           main] c.a.a.a.p.p.a.PermissionAdapterRegistry  : PermissionAdapterRegistry initialized with 2 adapters: [gov-platform, oa-system]
2026-01-22T14:49:36.052+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U001, system=oa-system, externalUser=zhang.san@company.com
2026-01-22T14:49:36.054+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U001, system=gov-platform, externalUser=320102199001011234
2026-01-22T14:49:36.055+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U002, system=oa-system, externalUser=li.si@company.com
2026-01-22T14:49:36.055+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U003, system=oa-system, externalUser=wang.wu@company.com
2026-01-22T14:49:36.055+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U003, system=gov-platform, externalUser=leader_001
2026-01-22T14:49:36.055+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U004, system=gov-platform, externalUser=staff_001
2026-01-22T14:49:36.055+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U005, system=oa-system, externalUser=sun.qi@company.com
2026-01-22T14:49:36.055+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService initialized with demo data
2026-01-22T14:49:36.057+08:00  INFO --- [           main] c.a.a.a.p.c.PermissionAutoConfiguration  : PermissionAutoConfiguration - creating PermissionInterceptor
2026-01-22T14:49:36.059+08:00  INFO --- [           main] c.a.a.a.p.e.ActionExecutorFactory        : ActionExecutorFactory#init - initialized executors: INTERNAL(InternalExecutor), HTTP(HttpExecutor), DATA_AGENT(DataAgentExecutor), MCP(McpExecutor)
2026-01-22T14:49:36.059+08:00  INFO --- [           main] c.a.a.a.p.e.ActionExecutorFactory        : ActionExecutorFactory#init - permission interceptor enabled
2026-01-22T14:49:36.061+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#apiCallStepExecutor - reason=creating api call step executor
2026-01-22T14:49:36.072+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#validationStepExecutor - reason=creating validation step executor
2026-01-22T14:49:36.075+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#stepExecutorRegistry - reason=creating executor registry, executorCount=5
2026-01-22T14:49:36.079+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=QUERY, executorClass=QueryStepExecutor
2026-01-22T14:49:36.079+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=INPUT, executorClass=InputStepExecutor
2026-01-22T14:49:36.079+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=EXECUTE, executorClass=ExecuteStepExecutor
2026-01-22T14:49:36.079+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=API_CALL, executorClass=ApiCallStepExecutor
2026-01-22T14:49:36.079+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=VALIDATION, executorClass=ValidationStepExecutor
2026-01-22T14:49:36.080+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#defaultPlanExecutor - reason=creating default plan executor
2026-01-22T14:49:36.083+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#executeActionCodeactTool - reason=creating execute_action tool
2026-01-22T14:49:36.085+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#listActionsCodeactTool - reason=creating list_actions tool
2026-01-22T14:49:36.087+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#getActionDetailsCodeactTool - reason=creating get_action_details tool
2026-01-22T14:49:36.089+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#executeSystemActionCodeactTool - reason=creating execute_system_action tool
2026-01-22T14:49:36.245+08:00  INFO --- [           main] c.a.a.a.start.config.PersistenceConfig   : PersistenceConfig#init - reason=persistence configuration loaded
2026-01-22T14:49:36.248+08:00  INFO --- [           main] c.a.a.a.start.config.PersistenceConfig   : PersistenceConfig#elasticsearchExperienceProvider - reason=creating Elasticsearch experience provider (PRIMARY), indexName=experiences
2026-01-22T14:49:36.260+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#<init> - reason=初始化默认评估套件配置, experienceProviderAvailable=true
2026-01-22T14:49:36.262+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#evaluatorRegistry - reason=创建 EvaluatorRegistry Bean
2026-01-22T14:49:36.265+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'llm-based' of type LLMBasedEvaluator
2026-01-22T14:49:36.268+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'passthrough' of type RuleBasedEvaluator
2026-01-22T14:49:36.279+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'react_experience_evaluator' of type RuleBasedEvaluator
2026-01-22T14:49:36.279+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createDefaultEvaluatorRegistry - reason=注册 React 阶段经验检索评估器
2026-01-22T14:49:36.279+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'codeact_experience_evaluator' of type RuleBasedEvaluator
2026-01-22T14:49:36.279+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createDefaultEvaluatorRegistry - reason=注册 CodeAct 阶段经验检索评估器
2026-01-22T14:49:36.280+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#evaluationService - reason=创建默认 EvaluationService, sharedRegistryEvaluators=[llm-based, passthrough, codeact_experience_evaluator, react_experience_evaluator]
2026-01-22T14:49:36.285+08:00 DEBUG --- [           main] c.a.a.a.e.e.GraphBasedEvaluationExecutor : Created default ExecutorService for batch processing
2026-01-22T14:49:36.293+08:00  INFO --- [           main] .c.ExperienceEvaluationCriterionProvider : ExperienceEvaluationCriterionProvider#<init> - reason=初始化经验评估 Criterion 提供者
2026-01-22T14:49:36.297+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#structuredParamExtractor - reason=creating structured param extractor
2026-01-22T14:49:36.327+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#parameterValidator - reason=creating parameter validator
2026-01-22T14:49:36.329+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#sessionProvider - reason=creating in-memory session provider
2026-01-22T14:49:36.331+08:00  INFO --- [           main] c.a.a.a.p.s.InMemorySessionProvider      : InMemorySessionProvider#init - initialized
2026-01-22T14:49:36.337+08:00  INFO --- [           main] c.a.a.a.p.s.ParamCollectionService       : ParamCollectionService#init - sessionProvider=InMemory
2026-01-22T14:49:36.343+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'action_intent_evaluator' of type ActionIntentEvaluator
2026-01-22T14:49:36.343+08:00  INFO --- [           main] p.i.PlanningIntegrationAutoConfiguration : PlanningIntegrationAutoConfiguration#actionIntentEvaluator - initialized and registered, paramCollection=true, llmVerification=true, maxCandidates=5
2026-01-22T14:49:36.344+08:00  INFO --- [           main] .p.i.PlanningEvaluationCriterionProvider : PlanningEvaluationCriterionProvider#init - initialized, llmVerificationEnabled=true
2026-01-22T14:49:36.344+08:00  INFO --- [           main] p.i.PlanningIntegrationAutoConfiguration : PlanningIntegrationAutoConfiguration#planningEvaluationCriterionProvider - registered planning evaluation criterion provider
2026-01-22T14:49:36.345+08:00  INFO --- [           main] .c.ExperienceEvaluationCriterionProvider : ExperienceEvaluationCriterionProvider#getReactPhaseCriteria - reason=提供 React 阶段评估 Criteria
2026-01-22T14:49:36.352+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createReactPhaseSuite - reason=添加自定义 Criterion, provider=ExperienceEvaluationCriterionProvider, count=3
2026-01-22T14:49:36.354+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createReactPhaseSuite - reason=添加自定义 Criterion, provider=PlanningEvaluationCriterionProvider, count=2
2026-01-22T14:49:36.360+08:00  INFO --- [           main] a.a.e.a.BatchAggregationStrategyRegistry : Registered batch aggregation strategy: ANY_TRUE
2026-01-22T14:49:36.362+08:00  INFO --- [           main] a.a.e.a.BatchAggregationStrategyRegistry : Registered batch aggregation strategy: ALL_TRUE
2026-01-22T14:49:36.506+08:00  INFO --- [           main] c.a.c.a.g.internal.node.ParallelNode     : Calculated core pool size: 32 (CPU cores: 16)
2026-01-22T14:49:36.506+08:00  INFO --- [           main] c.a.c.a.g.internal.node.ParallelNode     : Calculated maximum pool size: 64 (CPU cores: 16)
2026-01-22T14:49:36.506+08:00  INFO --- [           main] c.a.c.a.g.internal.node.ParallelNode     : Calculated queue capacity: 1000
2026-01-22T14:49:36.510+08:00  INFO --- [           main] c.a.a.a.e.DefaultEvaluationService       : Registered evaluation suite: react-phase-suite
2026-01-22T14:49:36.510+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#evaluationService - reason=注册 React Phase Suite, suiteId=react-phase-suite
2026-01-22T14:49:36.510+08:00  INFO --- [           main] .c.ExperienceEvaluationCriterionProvider : ExperienceEvaluationCriterionProvider#getCodeActPhaseCriteria - reason=提供 CodeAct 阶段评估 Criteria
2026-01-22T14:49:36.510+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createCodeActPhaseSuite - reason=添加自定义 Criterion, provider=ExperienceEvaluationCriterionProvider, count=3
2026-01-22T14:49:36.510+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createCodeActPhaseSuite - reason=添加自定义 Criterion, provider=PlanningEvaluationCriterionProvider, count=2
2026-01-22T14:49:36.511+08:00  INFO --- [           main] a.a.e.a.BatchAggregationStrategyRegistry : Registered batch aggregation strategy: ANY_TRUE
2026-01-22T14:49:36.511+08:00  INFO --- [           main] a.a.e.a.BatchAggregationStrategyRegistry : Registered batch aggregation strategy: ALL_TRUE
2026-01-22T14:49:36.511+08:00  INFO --- [           main] c.a.a.a.e.DefaultEvaluationService       : Registered evaluation suite: codeact-phase-suite
2026-01-22T14:49:36.512+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#evaluationService - reason=注册 CodeAct Phase Suite, suiteId=codeact-phase-suite
2026-01-22T14:49:36.513+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#codeactEvaluationContextFactory - reason=创建 EvaluationContextFactory
2026-01-22T14:49:36.515+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#codeactEvaluationResultAttacher - reason=创建 EvaluationResultAttacher
2026-01-22T14:49:36.527+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#reactPhaseEvaluationHooks - reason=创建 React Phase ModelInputEvaluationHook
2026-01-22T14:49:36.533+08:00  INFO --- [           main] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#<init> - reason=初始化, phase=REACT, providerCount=1
2026-01-22T14:49:36.533+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#reactPhaseEvaluationHooks - reason=创建 React Phase EvaluationPromptInjectionHook, providersCount=2
2026-01-22T14:49:36.535+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#codeactPhaseEvaluationHooks - reason=创建 CodeAct Phase ModelInputEvaluationHook
2026-01-22T14:49:36.535+08:00  INFO --- [           main] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#<init> - reason=初始化, phase=CODEACT, providerCount=1
2026-01-22T14:49:36.535+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#codeactPhaseEvaluationHooks - reason=创建 CodeAct Phase EvaluationPromptInjectionHook, providersCount=2
2026-01-22T14:49:36.539+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#keywordMatcher - reason=creating keyword matcher
2026-01-22T14:49:36.542+08:00  INFO --- [           main] .ParamCollectionSessionAutoConfiguration : ParamCollectionSessionAutoConfiguration#inMemoryParamCollectionSessionStore - reason=creating in-memory session store (Redis not available), ttl=PT30M
2026-01-22T14:49:36.542+08:00  WARN --- [           main] .ParamCollectionSessionAutoConfiguration : ParamCollectionSessionAutoConfiguration#inMemoryParamCollectionSessionStore - reason=WARNING: In-memory session store is not suitable for distributed environment!
2026-01-22T14:49:36.548+08:00  INFO --- [           main] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#<init> - reason=initialized, defaultTtl=PT30M
2026-01-22T14:49:36.548+08:00  WARN --- [           main] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#<init> - reason=WARNING: Using in-memory session store, not suitable for distributed environment!
2026-01-22T14:49:36.561+08:00  INFO --- [           main] iguration$UnifiedIntentHookConfiguration : UnifiedIntentHookConfiguration#unifiedIntentRecognitionHook - reason=creating unified intent hook, experienceProviderPresent=true, chatModelPresent=true, sessionStorePresent=true, directExecuteThreshold=0.95, hintThreshold=0.5
2026-01-22T14:49:36.890+08:00  INFO --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2026-01-22T14:49:37.451+08:00  INFO --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@7156f8cf
2026-01-22T14:49:37.456+08:00  INFO --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2026-01-22T14:49:37.789+08:00  WARN --- [           main] c.a.a.a.p.p.c.ActionEntityConverter      : ActionEntityConverter#parseActionType - reason=unknown action type, type=INTERNAL
2026-01-22T14:49:37.842+08:00 DEBUG --- [           main] c.a.a.a.planning.intent.KeywordMatcher   : KeywordMatcher#registerAction - actionId=oa:leave:request, keywords=57
2026-01-22T14:49:37.842+08:00  INFO --- [           main] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#initKeywordMatcher - reason=initialized, actionCount=1, keywordIndexSize=57
2026-01-22T14:49:37.847+08:00  INFO --- [           main] c.a.a.a.start.config.PersistenceConfig   : PersistenceConfig#elasticsearchExperienceRepository - reason=creating Elasticsearch experience repository (PRIMARY), indexName=experiences
2026-01-22T14:49:37.856+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#init - reason=reply module enabled
2026-01-22T14:49:37.859+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactToolFactory - reason=创建CodeactTool工厂, channels=1
2026-01-22T14:49:37.859+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#init - reason=工厂初始化完成, channels=1
2026-01-22T14:49:37.874+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=开始创建Reply工具
2026-01-22T14:49:37.888+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#createTools - reason=创建工具成功, toolName=send_success_message, channelCode=IDE_TEXT
2026-01-22T14:49:37.888+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#createTools - reason=创建工具成功, toolName=send_error_message, channelCode=IDE_TEXT
2026-01-22T14:49:37.889+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#createTools - reason=创建工具成功, toolName=send_notification, channelCode=IDE_TEXT
2026-01-22T14:49:37.889+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#createTools - reason=工具创建完成, totalCount=3
2026-01-22T14:49:37.889+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=Reply工具创建完成, count=3
2026-01-22T14:49:37.890+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=创建Reply工具, index=1, name=send_success_message, description=Send a success message to the IDE console
2026-01-22T14:49:37.890+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=创建Reply工具, index=2, name=send_error_message, description=Send an error message to the IDE console
2026-01-22T14:49:37.890+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=创建Reply工具, index=3, name=send_notification, description=Send a notification message
2026-01-22T14:49:37.892+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactToolFactory - reason=创建SearchCodeactTool工厂, providerCount=3
2026-01-22T14:49:37.925+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactToolFactory - reason=创建TriggerCodeactTool工厂
2026-01-22T14:49:37.926+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=开始创建Trigger工具
2026-01-22T14:49:37.930+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=创建SubscribeTriggerCodeactTool成功
2026-01-22T14:49:37.932+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=创建UnsubscribeTriggerCodeactTool成功
2026-01-22T14:49:37.935+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=创建ListTriggersCodeactTool成功
2026-01-22T14:49:37.937+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=创建GetTriggerDetailCodeactTool成功
2026-01-22T14:49:37.937+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=触发器工具创建完成, count=4
2026-01-22T14:49:37.937+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=Trigger工具创建完成, count=4
2026-01-22T14:49:37.937+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=创建Trigger工具, index=1, name=subscribe_trigger, description=创建并订阅一个新的触发器
2026-01-22T14:49:37.937+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=创建Trigger工具, index=2, name=unsubscribe_trigger, description=取消订阅并删除一个触发器
2026-01-22T14:49:37.937+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=创建Trigger工具, index=3, name=list_triggers, description=列出所有触发器
2026-01-22T14:49:37.937+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=创建Trigger工具, index=4, name=get_trigger_detail, description=获取指定触发器的详细信息
2026-01-22T14:49:37.948+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#planningCodeactTools - reason=creating planning tools list
2026-01-22T14:49:37.948+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#planningCodeactTools - reason=created planning tools, count=5
2026-01-22T14:49:37.961+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=创建 CodeactAgent
2026-01-22T14:49:37.962+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=配置 MemorySaver 以支持多轮对话上下文保持
2026-01-22T14:49:37.962+08:00  WARN --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=临时禁用 streaming 模式以排查循环问题
2026-01-22T14:49:37.962+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加UnifiedSearchCodeactTool
2026-01-22T14:49:37.968+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockBaiduWebSearchProvider, toolName=search_web
2026-01-22T14:49:37.970+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockKnowledgeStoreSearchProvider, toolName=search_knowledge
2026-01-22T14:49:37.972+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockProjectContextSearchProvider, toolName=search_project
2026-01-22T14:49:37.972+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=搜索工具创建完成, totalCount=3
2026-01-22T14:49:37.972+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加SearchCodeactTools, count=3
2026-01-22T14:49:37.972+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加ReplyCodeactTools, count=3
2026-01-22T14:49:37.972+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加TriggerCodeactTools, count=4
2026-01-22T14:49:37.972+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加PlanningCodeactTools, count=5
2026-01-22T14:49:37.972+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#createMcpDynamicTools - reason=Creating MCP dynamic tools
2026-01-22T14:49:37.983+08:00  INFO --- [           main] c.a.a.a.e.d.mcp.McpDynamicToolFactory    : McpDynamicToolFactory#createTools - reason=开始创建MCP动态工具
2026-01-22T14:49:37.988+08:00  INFO --- [           main] c.a.a.a.e.d.mcp.McpDynamicToolFactory    : McpDynamicToolFactory#createTools - reason=无可用的MCP工具
2026-01-22T14:49:37.989+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#createMcpDynamicTools - reason=MCP dynamic tools created, count=0
2026-01-22T14:49:37.989+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=Added MCP dynamic tools, count=0
2026-01-22T14:49:37.989+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#createHttpDynamicTools - reason=HTTP dynamic tools disabled by default
2026-01-22T14:49:37.989+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=合并后CodeactTool总数, count=16
2026-01-22T14:49:37.989+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=React阶段使用内置工具(write_code, execute_code, write_condition_code)
2026-01-22T14:49:37.989+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=注入 React Phase 评估 Hooks, count=2
2026-01-22T14:49:37.989+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=注入 CodeAct Phase 评估 Hooks, count=2
2026-01-22T14:49:37.989+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=已准备注入UnifiedIntentRecognitionHook
2026-01-22T14:49:37.992+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 开始构建CodeactAgent
2026-01-22T14:49:37.999+08:00  INFO --- [           main] .a.a.a.c.t.s.DefaultReturnSchemaRegistry : DefaultReturnSchemaRegistry#<init> - reason=创建新实例, hashCode=1477200907
2026-01-22T14:49:38.002+08:00 DEBUG --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#<init> - reason=创建注册表, returnSchemaRegistry=DefaultReturnSchemaRegistry
2026-01-22T14:49:38.002+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=创建默认CodeactToolRegistry
2026-01-22T14:49:38.002+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=开始注册CodeactTool, count=16
2026-01-22T14:49:38.002+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=unified_search
2026-01-22T14:49:38.002+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=unified_search
2026-01-22T14:49:38.002+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=search_web
2026-01-22T14:49:38.002+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=search_web
2026-01-22T14:49:38.002+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=search_knowledge
2026-01-22T14:49:38.002+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=search_knowledge
2026-01-22T14:49:38.002+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=search_project
2026-01-22T14:49:38.002+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=search_project
2026-01-22T14:49:38.002+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=send_success_message
2026-01-22T14:49:38.002+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=send_success_message
2026-01-22T14:49:38.002+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=send_error_message
2026-01-22T14:49:38.002+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=send_error_message
2026-01-22T14:49:38.003+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=send_notification
2026-01-22T14:49:38.003+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=send_notification
2026-01-22T14:49:38.003+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=subscribe_trigger
2026-01-22T14:49:38.003+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=subscribe_trigger
2026-01-22T14:49:38.003+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=unsubscribe_trigger
2026-01-22T14:49:38.003+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=unsubscribe_trigger
2026-01-22T14:49:38.003+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=list_triggers
2026-01-22T14:49:38.003+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=list_triggers
2026-01-22T14:49:38.003+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=get_trigger_detail
2026-01-22T14:49:38.003+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=get_trigger_detail
2026-01-22T14:49:38.007+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=plan_action
2026-01-22T14:49:38.007+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=plan_action
2026-01-22T14:49:38.008+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=execute_action
2026-01-22T14:49:38.008+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=execute_action
2026-01-22T14:49:38.009+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=list_actions
2026-01-22T14:49:38.009+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=list_actions
2026-01-22T14:49:38.009+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=get_action_details
2026-01-22T14:49:38.010+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=get_action_details
2026-01-22T14:49:38.011+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=execute_system_action
2026-01-22T14:49:38.011+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=execute_system_action
2026-01-22T14:49:38.011+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册完成, count=16
2026-01-22T14:49:38.012+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 创建默认CodeContext: language=PYTHON
2026-01-22T14:49:38.016+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 创建默认RuntimeEnvironmentManager: language=PYTHON
2026-01-22T14:49:38.022+08:00 DEBUG --- [           main] c.a.a.a.c.e.bridge.AgentToolBridge       : AgentToolBridge#<init> 初始化: 注册了0个工具
2026-01-22T14:49:38.024+08:00 DEBUG --- [           main] c.a.a.a.c.executor.bridge.StateBridge    : StateBridge#<init> 初始化完成
2026-01-22T14:49:38.026+08:00  INFO --- [           main] c.a.a.a.core.executor.GraalCodeExecutor  : GraalCodeExecutor#<init> 初始化完成: language=PYTHON, allowIO=false, timeout=30000ms, executableTools=true, customBridgeFactory=false
2026-01-22T14:49:38.026+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#createCodeactSubAgentInterceptor 创建子Agent拦截器
2026-01-22T14:49:38.045+08:00  INFO --- [           main] c.a.a.a.a.subagent.CodeactSubAgent       : CodeactSubAgent#<init> 初始化: name=code-generator
2026-01-22T14:49:38.045+08:00  INFO --- [           main] c.a.a.a.a.subagent.CodeactSubAgent       : CodeactSubAgent#<init> 初始化: name=condition-code-generator
2026-01-22T14:49:38.045+08:00  INFO --- [           main] c.a.a.a.a.s.CodeactSubAgentInterceptor   : CodeactSubAgentInterceptor#<init> 创建默认代码生成子Agent
2026-01-22T14:49:38.567+08:00  INFO --- [           main] c.a.a.a.a.s.CodeactSubAgentInterceptor   : CodeactSubAgentInterceptor#<init> 初始化完成: subAgentCount=2
2026-01-22T14:49:38.569+08:00  INFO --- [           main] c.a.a.a.a.tools.ExecuteCodeTool          : ExecuteCodeTool#<init> 初始化完成
2026-01-22T14:49:38.573+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 拦截器分类完成: modelInterceptors=1, toolInterceptors=0
2026-01-22T14:49:38.573+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 从拦截器提取工具: interceptor=CodeactSubAgent, toolCount=2
2026-01-22T14:49:38.594+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 工具收集完成: interceptorTools=2, regularTools=3, total=6
2026-01-22T14:49:38.598+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 设置ModelInterceptors到LlmNode: count=1
2026-01-22T14:49:38.600+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build CodeactAgent构建完成
2026-01-22T14:49:38.600+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=开始罗列已注册的工具
2026-01-22T14:49:38.600+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct阶段工具数量, count=16
2026-01-22T14:49:38.600+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=1, name=send_success_message, description=Send a success message to the IDE console
2026-01-22T14:49:38.600+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=2, name=get_trigger_detail, description=获取指定触发器的详细信息
2026-01-22T14:49:38.600+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=3, name=get_action_details, description=获取指定动作的完整定义，包括参数、步骤等详细信息。
2026-01-22T14:49:38.600+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=4, name=search_project, description=搜索项目上下文信息，包括代码、配置、文档等
2026-01-22T14:49:38.600+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=5, name=subscribe_trigger, description=创建并订阅一个新的触发器
2026-01-22T14:49:38.600+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=6, name=search_knowledge, description=搜索团队知识库，包括FAQ、规范、最佳实践等
2026-01-22T14:49:38.600+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=7, name=unified_search, description=统一搜索工具，可同时搜索项目、知识库、Web等多个数据源
2026-01-22T14:49:38.600+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=8, name=unsubscribe_trigger, description=取消订阅并删除一个触发器
2026-01-22T14:49:38.600+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=9, name=search_web, description=执行Web搜索，获取公开互联网信息
2026-01-22T14:49:38.600+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=10, name=list_actions, description=列出所有可用的动作，支持按分类和标签筛选。
2026-01-22T14:49:38.600+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=11, name=plan_action, description=根据用户输入匹配动作并生成执行计划。返回匹配的动作列表和生成的执行计划。
2026-01-22T14:49:38.601+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=12, name=execute_system_action, description=执行系统Action（如OA请假、ERP操作等）。根据action_id调用相应的系统Handler。
2026-01-22T14:49:38.601+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=13, name=send_error_message, description=Send an error message to the IDE console
2026-01-22T14:49:38.601+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=14, name=execute_action, description=执行指定的执行计划，返回执行结果。支持继续执行等待用户输入的计划。
2026-01-22T14:49:38.601+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=15, name=send_notification, description=Send a notification message
2026-01-22T14:49:38.601+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=16, name=list_triggers, description=列出所有触发器
2026-01-22T14:49:38.601+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React阶段工具数量, count=6
2026-01-22T14:49:38.601+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=1, name=write_code, description=Generate and register a new function with specified name and parameters. IMPORTANT: You MUST provide both 'functionName' and 'parameters' fields. Example: write_code(requirement='calculate sum', functionName='calculate_sum', parameters=['a', 'b'])
2026-01-22T14:49:38.601+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=2, name=write_condition_code, description=Generate and register a condition check function for triggers. This function MUST return a boolean value (True/False). Example: write_condition_code(requirement='check if it is a working day', functionName='check_is_working_day', parameters=['date'])
2026-01-22T14:49:38.601+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=3, name=send_success_message, description=Send a success message to the IDE console
2026-01-22T14:49:38.601+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=4, name=send_error_message, description=Send an error message to the IDE console
2026-01-22T14:49:38.601+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=5, name=send_notification, description=Send a notification message
2026-01-22T14:49:38.601+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=6, name=execute_code, description=Execute a previously generated function by its exact name with matching parameters. CRITICAL: The functionName MUST exactly match the name used in write_code. The 'args' parameter names MUST exactly match the 'parameters' specified in write_code. Example: If you called write_code with functionName='calculate_sum' and parameters=['a', 'b'], then you must call execute_code with functionName='calculate_sum' and args={'a': 10, 'b': 20}. Parameter value types supported: String, Number, Boolean, List, Map/Object.
2026-01-22T14:49:38.601+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=工具罗列完成
2026-01-22T14:49:38.604+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgent#<init> 初始化完成: language=PYTHON
2026-01-22T14:49:38.608+08:00  INFO --- [           main] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#<init> 初始化 Agent 加载器
2026-01-22T14:49:38.641+08:00 DEBUG --- [           main] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#<init> Agent 图结构:
@startuml CodeactAgent
skinparam usecaseFontSize 14
skinparam usecaseStereotypeFontSize 12
skinparam hexagonFontSize 14
skinparam hexagonStereotypeFontSize 12
title "CodeactAgent"
footer

powered by spring-ai-alibaba
end footer
circle start<<input>> as __START__
circle stop as __END__
usecase "_AGENT_MODEL_"<<Node>>
usecase "_AGENT_TOOL_"<<Node>>
usecase "_AGENT_HOOK_UnifiedIntentRecognitionHook.before"<<Node>>
usecase "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"<<Node>>
usecase "_AGENT_HOOK_EvaluationPromptInjectionHook-REACT.beforeModel"<<Node>>
hexagon "check state" as condition1<<Condition>>
hexagon "check state" as condition2<<Condition>>
hexagon "check state" as condition3<<Condition>>
"__START__" -down-> "_AGENT_HOOK_UnifiedIntentRecognitionHook.before"
"_AGENT_HOOK_UnifiedIntentRecognitionHook.before" .down.> "condition1"
"condition1" .down.> "__END__"
'"_AGENT_HOOK_UnifiedIntentRecognitionHook.before" .down.> "__END__"
"condition1" .down.> "_AGENT_TOOL_"
'"_AGENT_HOOK_UnifiedIntentRecognitionHook.before" .down.> "_AGENT_TOOL_"
"condition1" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
'"_AGENT_HOOK_UnifiedIntentRecognitionHook.before" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
"_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel" -down-> "_AGENT_HOOK_EvaluationPromptInjectionHook-REACT.beforeModel"
"_AGENT_HOOK_EvaluationPromptInjectionHook-REACT.beforeModel" -down-> "_AGENT_MODEL_"
"_AGENT_MODEL_" .down.> "condition2"
"condition2" .down.> "_AGENT_TOOL_"
'"_AGENT_MODEL_" .down.> "_AGENT_TOOL_"
"condition2" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
'"_AGENT_MODEL_" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
"condition2" .down.> "__END__"
'"_AGENT_MODEL_" .down.> "__END__"
"_AGENT_TOOL_" .down.> "condition3"
"condition3" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
'"_AGENT_TOOL_" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
"condition3" .down.> "__END__"
'"_AGENT_TOOL_" .down.> "__END__"
@enduml

2026-01-22T14:49:38.642+08:00  INFO --- [           main] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#<init> 已注册 agent: grayscale_agent
2026-01-22T14:49:38.650+08:00  INFO --- [           main] .a.a.a.p.c.ParamOptionsAutoConfiguration : ParamOptionsAutoConfiguration - Creating OptionsCache with TTL: 300000ms
2026-01-22T14:49:38.653+08:00  INFO --- [           main] a.a.a.p.s.DefaultParameterOptionsService : DefaultParameterOptionsService initialized with 3 handlers
2026-01-22T14:49:38.655+08:00  INFO --- [           main] c.a.a.a.planning.system.OaSystemHandler  : OaSystemHandler#init - initialized
2026-01-22T14:49:38.667+08:00 DEBUG --- [           main] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#listAgents 列出所有 agent
2026-01-22T14:49:38.668+08:00  INFO --- [           main] c.a.c.a.a.s.controller.AgentController   : AgentController initialized with 1 dynamic agents: [grayscale_agent]
2026-01-22T14:49:38.821+08:00  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 2ca0029e-7810-44cd-adcb-ddbab6dd20f6

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2026-01-22T14:49:38.899+08:00  INFO --- [           main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2026-01-22T14:49:39.614+08:00  INFO --- [           main] e.e.c.CodeactEvaluationAutoConfiguration : CodeactEvaluationAutoConfiguration#inputRoutingEvaluationHook - reason=创建输入路由评估 Hook
2026-01-22T14:49:39.615+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchFacade - reason=creating search facade with 3 providers
2026-01-22T14:49:39.617+08:00  INFO --- [           main] c.a.a.a.e.s.i.DefaultSearchFacade        : DefaultSearchFacade#init - reason=initialized with 3 providers
2026-01-22T14:49:39.619+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=开始创建Search工具
2026-01-22T14:49:39.620+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockBaiduWebSearchProvider, toolName=search_web
2026-01-22T14:49:39.621+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockKnowledgeStoreSearchProvider, toolName=search_knowledge
2026-01-22T14:49:39.622+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockProjectContextSearchProvider, toolName=search_project
2026-01-22T14:49:39.622+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=搜索工具创建完成, totalCount=3
2026-01-22T14:49:39.622+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=Search工具创建完成, count=3
2026-01-22T14:49:39.622+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=创建Search工具, index=1, name=search_web, description=执行Web搜索，获取公开互联网信息
2026-01-22T14:49:39.622+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=创建Search工具, index=2, name=search_knowledge, description=搜索团队知识库，包括FAQ、规范、最佳实践等
2026-01-22T14:49:39.622+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=创建Search工具, index=3, name=search_project, description=搜索项目上下文信息，包括代码、配置、文档等
2026-01-22T14:49:39.625+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#diagnostics - reason=ElasticsearchClient bean found
2026-01-22T14:49:39.625+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#diagnostics - reason=EmbeddingModel bean found
2026-01-22T14:49:39.629+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#diagnostics - Planning module status:
2026-01-22T14:49:39.629+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration :   - ActionRepository: MybatisPlusActionRepository
2026-01-22T14:49:39.629+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration :   - ActionProvider: SemanticActionProvider
2026-01-22T14:49:39.629+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration :   - PlanGenerator: DefaultPlanGenerator
2026-01-22T14:49:39.629+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration :   - PlanExecutor: DefaultPlanExecutor
2026-01-22T14:49:39.919+08:00  INFO --- [           main] c.a.a.a.c.c.CodeactCoreAutoConfiguration : CodeactCoreAutoConfiguration#returnSchemaRegistry - reason=创建ReturnSchemaRegistry单例Bean
2026-01-22T14:49:39.920+08:00  INFO --- [           main] .a.a.a.c.t.s.DefaultReturnSchemaRegistry : DefaultReturnSchemaRegistry#<init> - reason=创建新实例, hashCode=742450262
2026-01-22T14:49:40.795+08:00  WARN --- [           main] o.s.m.p.s.SyncMcpSamplingProvider        : No sampling methods found
2026-01-22T14:49:40.799+08:00  WARN --- [           main] o.s.m.p.e.SyncMcpElicitationProvider     : No elicitation methods found
2026-01-22T14:49:40.875+08:00  INFO --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2026-01-22T14:49:40.891+08:00  INFO --- [           main] c.a.a.a.start.AssistantAgentApplication  : Started AssistantAgentApplication in 13.512 seconds (process running for 14.899)
2026-01-22T14:49:40.905+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#run - reason=Starting experience module validation
2026-01-22T14:49:41.072+08:00 DEBUG --- [           main] .p.e.r.ElasticsearchExperienceRepository : ElasticsearchExperienceRepository#count - reason=count completed, count=0
2026-01-22T14:49:41.112+08:00 DEBUG --- [           main] .p.e.r.ElasticsearchExperienceRepository : ElasticsearchExperienceRepository#countByTypeAndScope - reason=count completed, type=CODE, scope=null, count=0
2026-01-22T14:49:41.121+08:00 DEBUG --- [           main] .p.e.r.ElasticsearchExperienceRepository : ElasticsearchExperienceRepository#countByTypeAndScope - reason=count completed, type=REACT, scope=null, count=0
2026-01-22T14:49:41.131+08:00 DEBUG --- [           main] .p.e.r.ElasticsearchExperienceRepository : ElasticsearchExperienceRepository#countByTypeAndScope - reason=count completed, type=COMMON, scope=null, count=0
2026-01-22T14:49:41.131+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testExperienceCount - reason=Experience stats: total=0, code=0, react=0, common=0
2026-01-22T14:49:41.131+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCommonExperienceQuery - reason=Testing common experience query
2026-01-22T14:49:41.633+08:00 DEBUG --- [           main] .s.p.e.p.ElasticsearchExperienceProvider : ElasticsearchExperienceProvider#query - reason=query completed, type=COMMON, text=null, count=0
2026-01-22T14:49:41.633+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCommonExperienceQuery - reason=Found 0 common experiences
2026-01-22T14:49:41.634+08:00  WARN --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCommonExperienceQuery - reason=❌ MoLiHong identity experience not found
2026-01-22T14:49:41.634+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCodeExperienceQuery - reason=Testing code experience query (demo keyword)
2026-01-22T14:49:41.647+08:00 DEBUG --- [           main] .s.p.e.p.ElasticsearchExperienceProvider : ElasticsearchExperienceProvider#query - reason=query completed, type=CODE, text=null, count=0
2026-01-22T14:49:41.647+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCodeExperienceQuery - reason=Found 0 demo code experiences
2026-01-22T14:49:41.649+08:00  WARN --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCodeExperienceQuery - reason=❌ Demo code experience not found
2026-01-22T14:49:41.649+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testReactExperienceQuery - reason=Testing react experience query
2026-01-22T14:49:41.660+08:00 DEBUG --- [           main] .s.p.e.p.ElasticsearchExperienceProvider : ElasticsearchExperienceProvider#query - reason=query completed, type=REACT, text=null, count=0
2026-01-22T14:49:41.660+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testReactExperienceQuery - reason=Found 0 react experiences
2026-01-22T14:49:41.661+08:00  WARN --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testReactExperienceQuery - reason=❌ Ambiguous intent strategy not found
2026-01-22T14:49:41.661+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#run - reason=Experience module validation completed
2026-01-22T14:49:41.664+08:00  INFO --- [           main] c.a.a.a.s.a.config.AuthInitialization    : AuthInitialization#run - 初始化认证系统
2026-01-22T14:49:41.684+08:00 DEBUG --- [           main] c.a.a.a.s.a.s.AuthenticationService      : AuthenticationService#initDefaultAdmin - 管理员账户已存在
2026-01-22T14:49:41.684+08:00  INFO --- [           main] c.a.a.a.s.a.config.AuthInitialization    : AuthInitialization#run - 认证系统初始化完成
2026-01-22T14:49:49.782+08:00  INFO --- [nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-01-22T14:49:49.782+08:00  INFO --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2026-01-22T14:49:49.783+08:00  INFO --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2026-01-22T14:49:50.371+08:00 DEBUG --- [nio-8080-exec-1] c.a.a.a.s.a.s.JwtAuthenticationFilter    : JwtAuthenticationFilter#doFilterInternal - 设置用户认证: username=admin, roles=[ADMIN, USER]
2026-01-22T14:49:50.511+08:00  INFO --- [nio-8080-exec-1] c.a.c.a.a.s.controller.ThreadController  : Request received for POST /apps/research_agent/users/user-001/threads (service generates ID) with state: {}
2026-01-22T14:49:50.515+08:00  INFO --- [nio-8080-exec-1] c.a.c.a.a.s.service.ThreadServiceImpl    : Created thread: 5b8ee17b-e5fa-43ef-a44e-ff6bfcf228cc for app=research_agent, user=user-001
2026-01-22T14:49:50.515+08:00  INFO --- [nio-8080-exec-1] c.a.c.a.a.s.controller.ThreadController  : Thread created successfully with generated id: 5b8ee17b-e5fa-43ef-a44e-ff6bfcf228cc
2026-01-22T14:49:50.628+08:00 DEBUG --- [nio-8080-exec-2] c.a.a.a.s.a.s.JwtAuthenticationFilter    : JwtAuthenticationFilter#doFilterInternal - 设置用户认证: username=admin, roles=[ADMIN, USER]
2026-01-22T14:49:50.654+08:00  INFO --- [nio-8080-exec-2] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#loadAgent 加载 agent: research_agent
2026-01-22T14:49:50.654+08:00  INFO --- [nio-8080-exec-2] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#loadAgent 成功加载 agent: research_agent
2026-01-22T14:49:50.676+08:00 DEBUG --- [nio-8080-exec-4] c.a.a.a.s.a.s.JwtAuthenticationFilter    : JwtAuthenticationFilter#doFilterInternal - 设置用户认证: username=admin, roles=[ADMIN, USER]
2026-01-22T14:49:50.678+08:00  INFO --- [nio-8080-exec-4] c.a.c.a.a.s.controller.ThreadController  : Request received for GET /apps/research_agent/users/user-001/threads/5b8ee17b-e5fa-43ef-a44e-ff6bfcf228cc
2026-01-22T14:49:50.923+08:00 DEBUG --- [nio-8080-exec-2] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#beforeAgent - reason=checking unified intent
2026-01-22T14:49:50.923+08:00 DEBUG --- [nio-8080-exec-2] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#get - reason=session not found, sessionId=5b8ee17b-e5fa-43ef-a44e-ff6bfcf228cc
2026-01-22T14:49:50.929+08:00 DEBUG --- [nio-8080-exec-2] c.a.a.a.p.i.SemanticActionProvider       : SemanticActionProvider#matchActions - reason=matching actions, userInput=我要请假
2026-01-22T14:49:52.586+08:00  WARN --- [nio-8080-exec-2] c.a.a.a.p.p.c.ActionEntityConverter      : ActionEntityConverter#parseActionType - reason=unknown action type, type=INTERNAL
2026-01-22T14:49:59.057+08:00  WARN --- [nio-8080-exec-2] c.a.a.a.p.p.c.ActionEntityConverter      : ActionEntityConverter#parseActionType - reason=unknown action type, type=INTERNAL
2026-01-22T14:49:59.064+08:00  INFO --- [nio-8080-exec-2] c.a.a.a.p.i.SemanticActionProvider       : SemanticActionProvider#matchActions - reason=matching completed, userInput=我要请假, matchCount=1
2026-01-22T14:49:59.064+08:00  INFO --- [nio-8080-exec-2] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#beforeAgent - reason=match found, actionId=oa:leave:request, confidence=0.95, matchType=KEYWORD_EXACT
2026-01-22T14:49:59.078+08:00 DEBUG --- [nio-8080-exec-2] .s.p.e.p.ElasticsearchExperienceProvider : ElasticsearchExperienceProvider#query - reason=query completed, type=REACT, text=null, count=0
2026-01-22T14:49:59.078+08:00  INFO --- [nio-8080-exec-2] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#beforeAgent - reason=high confidence, using Planning direct execution with param collection, actionId=oa:leave:request, confidence=0.95
2026-01-22T14:49:59.078+08:00  INFO --- [nio-8080-exec-2] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handlePlanningDirectExecution - reason=direct execution, actionId=oa:leave:request
2026-01-22T14:49:59.079+08:00  INFO --- [nio-8080-exec-2] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handlePlanningDirectExecution - reason=missing required params, count=5, actionId=oa:leave:request
2026-01-22T14:49:59.079+08:00  INFO --- [nio-8080-exec-2] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handleMissingParameters - reason=asking for param, paramName=start_date, actionId=oa:leave:request
2026-01-22T14:49:59.083+08:00 DEBUG --- [nio-8080-exec-2] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#save - reason=session saved, sessionId=5b8ee17b-e5fa-43ef-a44e-ff6bfcf228cc, ttl=PT30M
2026-01-22T14:49:59.083+08:00 DEBUG --- [nio-8080-exec-2] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#saveSession - reason=session saved, sessionId=5b8ee17b-e5fa-43ef-a44e-ff6bfcf228cc
2026-01-22T14:49:59.083+08:00  INFO --- [nio-8080-exec-2] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handleMissingParameters - reason=session saved to store, sessionId=5b8ee17b-e5fa-43ef-a44e-ff6bfcf228cc, actionId=oa:leave:request
2026-01-22T14:50:12.883+08:00 DEBUG --- [nio-8080-exec-5] c.a.a.a.s.a.s.JwtAuthenticationFilter    : JwtAuthenticationFilter#doFilterInternal - 设置用户认证: username=admin, roles=[ADMIN, USER]
2026-01-22T14:50:12.885+08:00  INFO --- [nio-8080-exec-5] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#loadAgent 加载 agent: research_agent
2026-01-22T14:50:12.885+08:00  INFO --- [nio-8080-exec-5] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#loadAgent 成功加载 agent: research_agent
2026-01-22T14:50:12.897+08:00 DEBUG --- [nio-8080-exec-5] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#beforeAgent - reason=checking unified intent
2026-01-22T14:50:12.897+08:00 DEBUG --- [nio-8080-exec-5] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#get - reason=session found, sessionId=5b8ee17b-e5fa-43ef-a44e-ff6bfcf228cc, active=true
2026-01-22T14:50:12.897+08:00  INFO --- [nio-8080-exec-5] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#beforeAgent - reason=continuing param collection session (from store), sessionId=5b8ee17b-e5fa-43ef-a44e-ff6bfcf228cc, userInput=2026-1-22 2026-1-23 类型 事假 理由 aa 审批人 25
2026-01-22T14:50:12.897+08:00  INFO --- [nio-8080-exec-5] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handleParamCollectionContinuation - reason=processing param input, sessionId=5b8ee17b-e5fa-43ef-a44e-ff6bfcf228cc, actionId=oa:leave:request, userInput=2026-1-22 2026-1-23 类型 事假 理由 aa 审批人 25
2026-01-22T14:50:12.905+08:00  WARN --- [nio-8080-exec-5] c.a.a.a.p.p.c.ActionEntityConverter      : ActionEntityConverter#parseActionType - reason=unknown action type, type=INTERNAL
2026-01-22T14:50:17.113+08:00  INFO --- [nio-8080-exec-5] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handleParamCollectionContinuation - reason=LLM response, response=```json
{
  "extractedParams": {
    "start_date": "2026-1-22 00:00",
    "end_date": "2026-1-23 00:00",
    "types": "1",
    "reason": "aa",
    "check_uids": "25"
  },
  "missingParams": [],
  "nextQuestion": null
}
```
2026-01-22T14:50:17.239+08:00  INFO --- [nio-8080-exec-5] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handleParamCollectionContinuation - reason=params complete, executing action, actionId=oa:leave:request, params={end_date=2026-1-23 00:00, reason=aa, check_uids=25, types=1, start_date=2026-1-22 00:00}
2026-01-22T14:50:17.239+08:00 DEBUG --- [nio-8080-exec-5] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#close - reason=session closed, sessionId=5b8ee17b-e5fa-43ef-a44e-ff6bfcf228cc
2026-01-22T14:50:17.239+08:00 DEBUG --- [nio-8080-exec-5] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#closeSession - reason=session closed, sessionId=5b8ee17b-e5fa-43ef-a44e-ff6bfcf228cc
2026-01-22T14:50:17.239+08:00  INFO --- [nio-8080-exec-5] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handlePlanningDirectExecution - reason=direct execution, actionId=oa:leave:request
2026-01-22T14:50:17.241+08:00 DEBUG --- [nio-8080-exec-5] c.a.a.a.p.internal.DefaultPlanGenerator  : DefaultPlanGenerator#generate - reason=generating plan, actionId=oa:leave:request, actionName=提交OA请假申请
2026-01-22T14:50:17.252+08:00  INFO --- [nio-8080-exec-5] c.a.a.a.p.internal.DefaultPlanGenerator  : DefaultPlanGenerator#generate - reason=plan generated, planId=66ea308f-7a69-489b-b8b6-6240cfbd4780, stepCount=1
2026-01-22T14:50:17.253+08:00  INFO --- [nio-8080-exec-5] c.a.a.a.p.internal.DefaultPlanExecutor   : DefaultPlanExecutor#execute - reason=starting plan execution, planId=66ea308f-7a69-489b-b8b6-6240cfbd4780, actionId=oa:leave:request
2026-01-22T14:50:17.254+08:00 DEBUG --- [nio-8080-exec-5] c.a.a.a.p.internal.DefaultPlanExecutor   : DefaultPlanExecutor#executeSteps - reason=executing step, planId=66ea308f-7a69-489b-b8b6-6240cfbd4780, stepId=execute, stepIndex=0
2026-01-22T14:50:17.254+08:00 DEBUG --- [nio-8080-exec-5] c.a.a.a.p.i.e.ExecuteStepExecutor        : AbstractStepExecutor#execute - reason=executing step, stepId=execute, type=EXECUTE
2026-01-22T14:50:17.255+08:00 DEBUG --- [nio-8080-exec-5] c.a.a.a.p.i.e.ExecuteStepExecutor        : ExecuteStepExecutor#doExecute - reason=executing execute step, stepId=execute
2026-01-22T14:50:17.255+08:00 DEBUG --- [nio-8080-exec-5] c.a.a.a.p.e.ActionExecutorFactory        : ActionExecutorFactory#execute - executing actionId=execute, type=INTERNAL, executor=InternalExecutor
2026-01-22T14:50:17.255+08:00 DEBUG --- [nio-8080-exec-5] c.a.a.a.p.e.ActionExecutorFactory        : ActionExecutorFactory#execute - skipping permission check (missing userId or systemId)
2026-01-22T14:50:17.255+08:00  INFO --- [nio-8080-exec-5] c.a.a.a.p.executor.InternalExecutor      : InternalExecutor#execute - invoking bean method, actionId=execute, bean=oaSystemActionService, method=execute
2026-01-22T14:50:17.255+08:00 DEBUG --- [nio-8080-exec-5] c.a.a.a.p.executor.InternalExecutor      : InternalExecutor#prepareArguments - passing entire params as Map argument
2026-01-22T14:50:20.824+08:00  WARN --- [nio-8080-exec-5] c.a.a.a.p.p.c.ActionEntityConverter      : ActionEntityConverter#parseActionType - reason=unknown action type, type=INTERNAL
2026-01-22T14:50:48.674+08:00 ERROR --- [nio-8080-exec-5] c.a.a.a.planning.system.OaSystemHandler  : OaSystemHandler#execute - failed, actionId=oa:leave:request, time=31418ms, error=Action未配置system_id: oa:leave:request

java.lang.IllegalArgumentException: Action未配置system_id: oa:leave:request
	at com.alibaba.assistant.agent.planning.system.OaSystemHandler.execute(OaSystemHandler.java:87)
	at com.alibaba.assistant.agent.planning.system.OaSystemActionService.execute(OaSystemActionService.java:65)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at com.alibaba.assistant.agent.planning.executor.InternalExecutor.execute(InternalExecutor.java:106)
	at com.alibaba.assistant.agent.planning.executor.ActionExecutorFactory.execute(ActionExecutorFactory.java:192)
	at com.alibaba.assistant.agent.planning.internal.executor.ExecuteStepExecutor.doExecute(ExecuteStepExecutor.java:65)
	at com.alibaba.assistant.agent.planning.internal.executor.AbstractStepExecutor.execute(AbstractStepExecutor.java:47)
	at com.alibaba.assistant.agent.planning.internal.DefaultPlanExecutor.executeSteps(DefaultPlanExecutor.java:127)
	at com.alibaba.assistant.agent.planning.internal.DefaultPlanExecutor.execute(DefaultPlanExecutor.java:78)
	at com.alibaba.assistant.agent.planning.intent.UnifiedIntentRecognitionHook.handlePlanningDirectExecution(UnifiedIntentRecognitionHook.java:439)
	at com.alibaba.assistant.agent.planning.intent.UnifiedIntentRecognitionHook.handleParamCollectionContinuation(UnifiedIntentRecognitionHook.java:696)
	at com.alibaba.assistant.agent.planning.intent.UnifiedIntentRecognitionHook.beforeAgent(UnifiedIntentRecognitionHook.java:186)
	at com.alibaba.cloud.ai.graph.executor.NodeExecutor.executeNode(NodeExecutor.java:122)
	at com.alibaba.cloud.ai.graph.executor.NodeExecutor.execute(NodeExecutor.java:84)
	at com.alibaba.cloud.ai.graph.executor.MainGraphExecutor.execute(MainGraphExecutor.java:108)
	at com.alibaba.cloud.ai.graph.executor.MainGraphExecutor.lambda$handleStartNode$0(MainGraphExecutor.java:135)
	at reactor.core.publisher.FluxDefer.subscribe(FluxDefer.java:46)
	at reactor.core.publisher.Flux.subscribe(Flux.java:8891)
	at reactor.core.publisher.FluxConcatArray$ConcatArraySubscriber.onComplete(FluxConcatArray.java:238)
	at reactor.core.publisher.FluxConcatArray.subscribe(FluxConcatArray.java:79)
	at reactor.core.publisher.FluxDefer.subscribe(FluxDefer.java:54)
	at reactor.core.publisher.Flux.subscribe(Flux.java:8891)
	at org.springframework.web.servlet.mvc.method.annotation.ReactiveTypeHandler$AbstractEmitterSubscriber.connect(ReactiveTypeHandler.java:295)
	at org.springframework.web.servlet.mvc.method.annotation.ReactiveTypeHandler.handleValue(ReactiveTypeHandler.java:168)
	at org.springframework.web.servlet.mvc.method.annotation.ResponseBodyEmitterReturnValueHandler.handleReturnValue(ResponseBodyEmitterReturnValueHandler.java:215)
	at org.springframework.web.method.support.HandlerMethodReturnValueHandlerComposite.handleReturnValue(HandlerMethodReturnValueHandlerComposite.java:78)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:136)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.alibaba.assistant.agent.start.auth.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:87)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$4(HandlerMappingIntrospector.java:267)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)

2026-01-22T14:50:48.682+08:00  INFO --- [nio-8080-exec-5] c.a.a.a.p.executor.InternalExecutor      : InternalExecutor#execute - method invoked successfully, actionId=execute, time=31427ms
2026-01-22T14:50:48.685+08:00  INFO --- [nio-8080-exec-5] c.a.a.a.p.i.e.ExecuteStepExecutor        : ExecuteStepExecutor#doExecute - reason=step executed, stepId=execute, success=true
2026-01-22T14:50:48.686+08:00  INFO --- [nio-8080-exec-5] c.a.a.a.p.internal.DefaultPlanExecutor   : DefaultPlanExecutor#execute - reason=plan completed, planId=66ea308f-7a69-489b-b8b6-6240cfbd4780, stepCount=1
2026-01-22T14:50:48.687+08:00  INFO --- [nio-8080-exec-5] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handlePlanningDirectExecution - reason=execution completed, planId=66ea308f-7a69-489b-b8b6-6240cfbd4780, success=true
2026-01-22T14:50:48.723+08:00  INFO --- [r-shutdown-hook] c.a.c.a.g.internal.node.ParallelNode     : Shutting down ParallelNode default executor
2026-01-22T14:50:48.723+08:00  INFO --- [r-shutdown-hook] c.a.c.a.g.internal.node.ParallelNode     : ParallelNode default thread pool terminated
2026-01-22T14:50:48.724+08:00  INFO --- [r-shutdown-hook] c.a.c.a.g.internal.node.ParallelNode     : ParallelNode default executor shut down successfully
2026-01-22T14:50:48.727+08:00  INFO --- [ionShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2026-01-22T14:50:48.737+08:00  INFO --- [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2026-01-22T14:50:48.749+08:00  INFO --- [ionShutdownHook] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#shutdown - reason=shutdown completed
2026-01-22T14:50:48.750+08:00  INFO --- [ionShutdownHook] c.a.a.a.e.e.GraphBasedEvaluationExecutor : Shutting down ExecutorService
2026-01-22T14:50:48.754+08:00  INFO --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2026-01-22T14:50:48.768+08:00  INFO --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2026-01-22T14:50:57.421+08:00  INFO --- [           main] c.a.a.a.start.AssistantAgentApplication  : Starting AssistantAgentApplication using Java 21.0.9 with PID 6256 (D:\devfive\AssistantAgent\assistant-agent-start\target\classes started by zhou_ in D:\devfive\AssistantAgent)
2026-01-22T14:50:57.422+08:00 DEBUG --- [           main] c.a.a.a.start.AssistantAgentApplication  : Running with Spring Boot v3.4.8, Spring v6.2.9
2026-01-22T14:50:57.423+08:00  INFO --- [           main] c.a.a.a.start.AssistantAgentApplication  : No active profile set, falling back to 1 default profile: "default"
2026-01-22T14:50:59.944+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Elasticsearch repositories in DEFAULT mode.
2026-01-22T14:51:00.012+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 50 ms. Found 0 Elasticsearch repository interfaces.
2026-01-22T14:51:00.026+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Reactive Elasticsearch repositories in DEFAULT mode.
2026-01-22T14:51:00.038+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 8 ms. Found 0 Reactive Elasticsearch repository interfaces.
2026-01-22T14:51:00.258+08:00  WARN --- [           main] o.m.s.mapper.ClassPathMapperScanner      : Skipping MapperFactoryBean with name 'learningRecordMapper' and 'com.alibaba.assistant.agent.start.persistence.learning.mapper.LearningRecordMapper' mapperInterface. Bean already defined with the same name!
2026-01-22T14:51:00.258+08:00  WARN --- [           main] o.m.s.mapper.ClassPathMapperScanner      : Skipping MapperFactoryBean with name 'triggerDefinitionMapper' and 'com.alibaba.assistant.agent.start.persistence.trigger.mapper.TriggerDefinitionMapper' mapperInterface. Bean already defined with the same name!
2026-01-22T14:51:00.258+08:00  WARN --- [           main] o.m.s.mapper.ClassPathMapperScanner      : Skipping MapperFactoryBean with name 'triggerExecutionRecordMapper' and 'com.alibaba.assistant.agent.start.persistence.trigger.mapper.TriggerExecutionRecordMapper' mapperInterface. Bean already defined with the same name!
2026-01-22T14:51:00.260+08:00  WARN --- [           main] o.m.s.mapper.ClassPathMapperScanner      : Skipping MapperFactoryBean with name 'actionRegistryMapper' and 'com.alibaba.assistant.agent.planning.persistence.mapper.ActionRegistryMapper' mapperInterface. Bean already defined with the same name!
2026-01-22T14:51:03.280+08:00  INFO --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2026-01-22T14:51:03.325+08:00  INFO --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2026-01-22T14:51:03.325+08:00  INFO --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.43]
2026-01-22T14:51:03.548+08:00  INFO --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2026-01-22T14:51:03.548+08:00  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 6050 ms
2026-01-22T14:51:03.626+08:00  INFO --- [           main] c.a.a.a.s.a.security.JwtTokenProvider    : JwtTokenProvider#init - JWT 密钥已初始化
2026-01-22T14:51:03.762+08:00 DEBUG --- [           main] c.a.a.a.s.a.s.JwtAuthenticationFilter    : Filter 'jwtAuthenticationFilter' configured for use
2026-01-22T14:51:04.675+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#init - reason=search extension framework is enabled
2026-01-22T14:51:04.677+08:00  INFO --- [           main] c.a.a.a.s.s.MockBaiduWebSearchProvider   : MockBaiduWebSearchProvider#init - reason=使用简单模式初始化
2026-01-22T14:51:04.682+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#unifiedSearchCodeactTool - reason=创建统一搜索工具, providerCount=3
2026-01-22T14:51:04.838+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#init - reason=planning extension is enabled
2026-01-22T14:51:04.840+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#init - reason=ES configuration class loaded (elasticsearch.enabled=true)
2026-01-22T14:51:04.842+08:00  INFO --- [           main] toConfiguration$MybatisPlusConfiguration : MybatisPlusConfiguration#init - reason=MySQL configuration class loaded (mysql.enabled=true, MyBatisPlus present)
2026-01-22T14:51:04.903+08:00  INFO --- [           main] toConfiguration$MybatisPlusConfiguration : MybatisPlusConfiguration#actionEntityConverter - reason=creating entity converter
2026-01-22T14:51:04.908+08:00  INFO --- [           main] toConfiguration$MybatisPlusConfiguration : MybatisPlusConfiguration#mybatisPlusActionRepository - reason=ActionRegistryMapper found, creating MySQL repository
2026-01-22T14:51:06.418+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#actionVectorizationService - reason=creating ES vectorization service
2026-01-22T14:51:06.652+08:00  INFO --- [           main] c.a.a.a.p.v.ActionVectorizationService   : ActionVectorizationService#init - reason=ES index initialized on startup
2026-01-22T14:51:06.684+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#semanticActionProvider - reason=creating semantic action provider, semanticWeight=0.6, keywordWeight=0.4, matchThreshold=0.5
2026-01-22T14:51:06.695+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#defaultPlanGenerator - reason=creating default plan generator
2026-01-22T14:51:06.700+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#planActionCodeactTool - reason=creating plan_action tool
2026-01-22T14:51:06.703+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#queryStepExecutor - reason=creating query step executor
2026-01-22T14:51:06.708+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#inputStepExecutor - reason=creating input step executor
2026-01-22T14:51:06.711+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#executeStepExecutor - reason=creating execute step executor
2026-01-22T14:51:06.713+08:00  INFO --- [           main] f.a.AutowiredAnnotationBeanPostProcessor : Inconsistent constructor declaration on bean with name 'actionExecutorFactory': single autowire-marked constructor flagged as optional - this constructor is effectively required since there is no default constructor to fall back to: public com.alibaba.assistant.agent.planning.executor.ActionExecutorFactory(java.util.List,com.alibaba.assistant.agent.planning.permission.interceptor.PermissionInterceptor)
2026-01-22T14:51:06.716+08:00  INFO --- [           main] .a.a.a.p.c.ParamOptionsAutoConfiguration : ParamOptionsAutoConfiguration - Parameter options module initialized
2026-01-22T14:51:06.718+08:00  INFO --- [           main] .a.a.a.p.c.ParamOptionsAutoConfiguration : ParamOptionsAutoConfiguration - Creating RestTemplate for HTTP handlers
2026-01-22T14:51:06.735+08:00  INFO --- [           main] c.a.a.a.planning.executor.HttpExecutor   : HttpExecutor#init - initialized
2026-01-22T14:51:06.736+08:00  INFO --- [           main] c.a.a.a.p.executor.InternalExecutor      : InternalExecutor#init - initialized
2026-01-22T14:51:06.747+08:00  INFO --- [           main] c.a.a.a.p.p.a.PermissionAdapterRegistry  : PermissionAdapterRegistry#registerAdapter - registered adapter: system=gov-platform, name=政务服务平台权限适配器
2026-01-22T14:51:06.747+08:00  INFO --- [           main] c.a.a.a.p.p.a.PermissionAdapterRegistry  : PermissionAdapterRegistry#registerAdapter - registered adapter: system=oa-system, name=OA办公系统权限适配器
2026-01-22T14:51:06.748+08:00  INFO --- [           main] c.a.a.a.p.p.a.PermissionAdapterRegistry  : PermissionAdapterRegistry initialized with 2 adapters: [gov-platform, oa-system]
2026-01-22T14:51:06.754+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U001, system=oa-system, externalUser=zhang.san@company.com
2026-01-22T14:51:06.756+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U001, system=gov-platform, externalUser=320102199001011234
2026-01-22T14:51:06.756+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U002, system=oa-system, externalUser=li.si@company.com
2026-01-22T14:51:06.756+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U003, system=oa-system, externalUser=wang.wu@company.com
2026-01-22T14:51:06.756+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U003, system=gov-platform, externalUser=leader_001
2026-01-22T14:51:06.757+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U004, system=gov-platform, externalUser=staff_001
2026-01-22T14:51:06.757+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U005, system=oa-system, externalUser=sun.qi@company.com
2026-01-22T14:51:06.757+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService initialized with demo data
2026-01-22T14:51:06.759+08:00  INFO --- [           main] c.a.a.a.p.c.PermissionAutoConfiguration  : PermissionAutoConfiguration - creating PermissionInterceptor
2026-01-22T14:51:06.762+08:00  INFO --- [           main] c.a.a.a.p.e.ActionExecutorFactory        : ActionExecutorFactory#init - initialized executors: INTERNAL(InternalExecutor), HTTP(HttpExecutor), DATA_AGENT(DataAgentExecutor), MCP(McpExecutor)
2026-01-22T14:51:06.762+08:00  INFO --- [           main] c.a.a.a.p.e.ActionExecutorFactory        : ActionExecutorFactory#init - permission interceptor enabled
2026-01-22T14:51:06.764+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#apiCallStepExecutor - reason=creating api call step executor
2026-01-22T14:51:06.777+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#validationStepExecutor - reason=creating validation step executor
2026-01-22T14:51:06.780+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#stepExecutorRegistry - reason=creating executor registry, executorCount=5
2026-01-22T14:51:06.785+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=QUERY, executorClass=QueryStepExecutor
2026-01-22T14:51:06.785+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=INPUT, executorClass=InputStepExecutor
2026-01-22T14:51:06.786+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=EXECUTE, executorClass=ExecuteStepExecutor
2026-01-22T14:51:06.786+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=API_CALL, executorClass=ApiCallStepExecutor
2026-01-22T14:51:06.786+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=VALIDATION, executorClass=ValidationStepExecutor
2026-01-22T14:51:06.786+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#defaultPlanExecutor - reason=creating default plan executor
2026-01-22T14:51:06.790+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#executeActionCodeactTool - reason=creating execute_action tool
2026-01-22T14:51:06.792+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#listActionsCodeactTool - reason=creating list_actions tool
2026-01-22T14:51:06.795+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#getActionDetailsCodeactTool - reason=creating get_action_details tool
2026-01-22T14:51:06.798+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#executeSystemActionCodeactTool - reason=creating execute_system_action tool
2026-01-22T14:51:06.985+08:00  INFO --- [           main] c.a.a.a.start.config.PersistenceConfig   : PersistenceConfig#init - reason=persistence configuration loaded
2026-01-22T14:51:06.987+08:00  INFO --- [           main] c.a.a.a.start.config.PersistenceConfig   : PersistenceConfig#elasticsearchExperienceProvider - reason=creating Elasticsearch experience provider (PRIMARY), indexName=experiences
2026-01-22T14:51:06.996+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#<init> - reason=初始化默认评估套件配置, experienceProviderAvailable=true
2026-01-22T14:51:06.999+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#evaluatorRegistry - reason=创建 EvaluatorRegistry Bean
2026-01-22T14:51:07.001+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'llm-based' of type LLMBasedEvaluator
2026-01-22T14:51:07.004+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'passthrough' of type RuleBasedEvaluator
2026-01-22T14:51:07.010+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'react_experience_evaluator' of type RuleBasedEvaluator
2026-01-22T14:51:07.010+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createDefaultEvaluatorRegistry - reason=注册 React 阶段经验检索评估器
2026-01-22T14:51:07.010+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'codeact_experience_evaluator' of type RuleBasedEvaluator
2026-01-22T14:51:07.010+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createDefaultEvaluatorRegistry - reason=注册 CodeAct 阶段经验检索评估器
2026-01-22T14:51:07.011+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#evaluationService - reason=创建默认 EvaluationService, sharedRegistryEvaluators=[llm-based, passthrough, codeact_experience_evaluator, react_experience_evaluator]
2026-01-22T14:51:07.015+08:00 DEBUG --- [           main] c.a.a.a.e.e.GraphBasedEvaluationExecutor : Created default ExecutorService for batch processing
2026-01-22T14:51:07.015+08:00  INFO --- [           main] .c.ExperienceEvaluationCriterionProvider : ExperienceEvaluationCriterionProvider#<init> - reason=初始化经验评估 Criterion 提供者
2026-01-22T14:51:07.018+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#structuredParamExtractor - reason=creating structured param extractor
2026-01-22T14:51:07.038+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#parameterValidator - reason=creating parameter validator
2026-01-22T14:51:07.039+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#sessionProvider - reason=creating in-memory session provider
2026-01-22T14:51:07.041+08:00  INFO --- [           main] c.a.a.a.p.s.InMemorySessionProvider      : InMemorySessionProvider#init - initialized
2026-01-22T14:51:07.045+08:00  INFO --- [           main] c.a.a.a.p.s.ParamCollectionService       : ParamCollectionService#init - sessionProvider=InMemory
2026-01-22T14:51:07.050+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'action_intent_evaluator' of type ActionIntentEvaluator
2026-01-22T14:51:07.050+08:00  INFO --- [           main] p.i.PlanningIntegrationAutoConfiguration : PlanningIntegrationAutoConfiguration#actionIntentEvaluator - initialized and registered, paramCollection=true, llmVerification=true, maxCandidates=5
2026-01-22T14:51:07.051+08:00  INFO --- [           main] .p.i.PlanningEvaluationCriterionProvider : PlanningEvaluationCriterionProvider#init - initialized, llmVerificationEnabled=true
2026-01-22T14:51:07.051+08:00  INFO --- [           main] p.i.PlanningIntegrationAutoConfiguration : PlanningIntegrationAutoConfiguration#planningEvaluationCriterionProvider - registered planning evaluation criterion provider
2026-01-22T14:51:07.052+08:00  INFO --- [           main] .c.ExperienceEvaluationCriterionProvider : ExperienceEvaluationCriterionProvider#getReactPhaseCriteria - reason=提供 React 阶段评估 Criteria
2026-01-22T14:51:07.060+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createReactPhaseSuite - reason=添加自定义 Criterion, provider=ExperienceEvaluationCriterionProvider, count=3
2026-01-22T14:51:07.061+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createReactPhaseSuite - reason=添加自定义 Criterion, provider=PlanningEvaluationCriterionProvider, count=2
2026-01-22T14:51:07.067+08:00  INFO --- [           main] a.a.e.a.BatchAggregationStrategyRegistry : Registered batch aggregation strategy: ANY_TRUE
2026-01-22T14:51:07.070+08:00  INFO --- [           main] a.a.e.a.BatchAggregationStrategyRegistry : Registered batch aggregation strategy: ALL_TRUE
2026-01-22T14:51:07.213+08:00  INFO --- [           main] c.a.c.a.g.internal.node.ParallelNode     : Calculated core pool size: 32 (CPU cores: 16)
2026-01-22T14:51:07.213+08:00  INFO --- [           main] c.a.c.a.g.internal.node.ParallelNode     : Calculated maximum pool size: 64 (CPU cores: 16)
2026-01-22T14:51:07.213+08:00  INFO --- [           main] c.a.c.a.g.internal.node.ParallelNode     : Calculated queue capacity: 1000
2026-01-22T14:51:07.217+08:00  INFO --- [           main] c.a.a.a.e.DefaultEvaluationService       : Registered evaluation suite: react-phase-suite
2026-01-22T14:51:07.218+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#evaluationService - reason=注册 React Phase Suite, suiteId=react-phase-suite
2026-01-22T14:51:07.218+08:00  INFO --- [           main] .c.ExperienceEvaluationCriterionProvider : ExperienceEvaluationCriterionProvider#getCodeActPhaseCriteria - reason=提供 CodeAct 阶段评估 Criteria
2026-01-22T14:51:07.218+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createCodeActPhaseSuite - reason=添加自定义 Criterion, provider=ExperienceEvaluationCriterionProvider, count=3
2026-01-22T14:51:07.218+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createCodeActPhaseSuite - reason=添加自定义 Criterion, provider=PlanningEvaluationCriterionProvider, count=2
2026-01-22T14:51:07.218+08:00  INFO --- [           main] a.a.e.a.BatchAggregationStrategyRegistry : Registered batch aggregation strategy: ANY_TRUE
2026-01-22T14:51:07.218+08:00  INFO --- [           main] a.a.e.a.BatchAggregationStrategyRegistry : Registered batch aggregation strategy: ALL_TRUE
2026-01-22T14:51:07.219+08:00  INFO --- [           main] c.a.a.a.e.DefaultEvaluationService       : Registered evaluation suite: codeact-phase-suite
2026-01-22T14:51:07.219+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#evaluationService - reason=注册 CodeAct Phase Suite, suiteId=codeact-phase-suite
2026-01-22T14:51:07.222+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#codeactEvaluationContextFactory - reason=创建 EvaluationContextFactory
2026-01-22T14:51:07.223+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#codeactEvaluationResultAttacher - reason=创建 EvaluationResultAttacher
2026-01-22T14:51:07.237+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#reactPhaseEvaluationHooks - reason=创建 React Phase ModelInputEvaluationHook
2026-01-22T14:51:07.243+08:00  INFO --- [           main] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#<init> - reason=初始化, phase=REACT, providerCount=1
2026-01-22T14:51:07.244+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#reactPhaseEvaluationHooks - reason=创建 React Phase EvaluationPromptInjectionHook, providersCount=2
2026-01-22T14:51:07.246+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#codeactPhaseEvaluationHooks - reason=创建 CodeAct Phase ModelInputEvaluationHook
2026-01-22T14:51:07.246+08:00  INFO --- [           main] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#<init> - reason=初始化, phase=CODEACT, providerCount=1
2026-01-22T14:51:07.246+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#codeactPhaseEvaluationHooks - reason=创建 CodeAct Phase EvaluationPromptInjectionHook, providersCount=2
2026-01-22T14:51:07.250+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#keywordMatcher - reason=creating keyword matcher
2026-01-22T14:51:07.254+08:00  INFO --- [           main] .ParamCollectionSessionAutoConfiguration : ParamCollectionSessionAutoConfiguration#inMemoryParamCollectionSessionStore - reason=creating in-memory session store (Redis not available), ttl=PT30M
2026-01-22T14:51:07.254+08:00  WARN --- [           main] .ParamCollectionSessionAutoConfiguration : ParamCollectionSessionAutoConfiguration#inMemoryParamCollectionSessionStore - reason=WARNING: In-memory session store is not suitable for distributed environment!
2026-01-22T14:51:07.261+08:00  INFO --- [           main] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#<init> - reason=initialized, defaultTtl=PT30M
2026-01-22T14:51:07.261+08:00  WARN --- [           main] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#<init> - reason=WARNING: Using in-memory session store, not suitable for distributed environment!
2026-01-22T14:51:07.278+08:00  INFO --- [           main] iguration$UnifiedIntentHookConfiguration : UnifiedIntentHookConfiguration#unifiedIntentRecognitionHook - reason=creating unified intent hook, experienceProviderPresent=true, chatModelPresent=true, sessionStorePresent=true, directExecuteThreshold=0.95, hintThreshold=0.5
2026-01-22T14:51:07.627+08:00  INFO --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2026-01-22T14:51:08.240+08:00  INFO --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@22349ad3
2026-01-22T14:51:08.247+08:00  INFO --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2026-01-22T14:51:08.601+08:00  WARN --- [           main] c.a.a.a.p.p.c.ActionEntityConverter      : ActionEntityConverter#parseActionType - reason=unknown action type, type=INTERNAL
2026-01-22T14:51:08.665+08:00 DEBUG --- [           main] c.a.a.a.planning.intent.KeywordMatcher   : KeywordMatcher#registerAction - actionId=oa:leave:request, keywords=57
2026-01-22T14:51:08.665+08:00  INFO --- [           main] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#initKeywordMatcher - reason=initialized, actionCount=1, keywordIndexSize=57
2026-01-22T14:51:08.671+08:00  INFO --- [           main] c.a.a.a.start.config.PersistenceConfig   : PersistenceConfig#elasticsearchExperienceRepository - reason=creating Elasticsearch experience repository (PRIMARY), indexName=experiences
2026-01-22T14:51:08.681+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#init - reason=reply module enabled
2026-01-22T14:51:08.684+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactToolFactory - reason=创建CodeactTool工厂, channels=1
2026-01-22T14:51:08.685+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#init - reason=工厂初始化完成, channels=1
2026-01-22T14:51:08.697+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=开始创建Reply工具
2026-01-22T14:51:08.708+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#createTools - reason=创建工具成功, toolName=send_success_message, channelCode=IDE_TEXT
2026-01-22T14:51:08.709+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#createTools - reason=创建工具成功, toolName=send_error_message, channelCode=IDE_TEXT
2026-01-22T14:51:08.709+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#createTools - reason=创建工具成功, toolName=send_notification, channelCode=IDE_TEXT
2026-01-22T14:51:08.710+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#createTools - reason=工具创建完成, totalCount=3
2026-01-22T14:51:08.710+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=Reply工具创建完成, count=3
2026-01-22T14:51:08.710+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=创建Reply工具, index=1, name=send_success_message, description=Send a success message to the IDE console
2026-01-22T14:51:08.710+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=创建Reply工具, index=2, name=send_error_message, description=Send an error message to the IDE console
2026-01-22T14:51:08.710+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=创建Reply工具, index=3, name=send_notification, description=Send a notification message
2026-01-22T14:51:08.711+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactToolFactory - reason=创建SearchCodeactTool工厂, providerCount=3
2026-01-22T14:51:08.746+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactToolFactory - reason=创建TriggerCodeactTool工厂
2026-01-22T14:51:08.747+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=开始创建Trigger工具
2026-01-22T14:51:08.750+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=创建SubscribeTriggerCodeactTool成功
2026-01-22T14:51:08.753+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=创建UnsubscribeTriggerCodeactTool成功
2026-01-22T14:51:08.754+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=创建ListTriggersCodeactTool成功
2026-01-22T14:51:08.756+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=创建GetTriggerDetailCodeactTool成功
2026-01-22T14:51:08.757+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=触发器工具创建完成, count=4
2026-01-22T14:51:08.757+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=Trigger工具创建完成, count=4
2026-01-22T14:51:08.758+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=创建Trigger工具, index=1, name=subscribe_trigger, description=创建并订阅一个新的触发器
2026-01-22T14:51:08.758+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=创建Trigger工具, index=2, name=unsubscribe_trigger, description=取消订阅并删除一个触发器
2026-01-22T14:51:08.758+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=创建Trigger工具, index=3, name=list_triggers, description=列出所有触发器
2026-01-22T14:51:08.758+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=创建Trigger工具, index=4, name=get_trigger_detail, description=获取指定触发器的详细信息
2026-01-22T14:51:08.769+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#planningCodeactTools - reason=creating planning tools list
2026-01-22T14:51:08.770+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#planningCodeactTools - reason=created planning tools, count=5
2026-01-22T14:51:08.783+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=创建 CodeactAgent
2026-01-22T14:51:08.783+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=配置 MemorySaver 以支持多轮对话上下文保持
2026-01-22T14:51:08.783+08:00  WARN --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=临时禁用 streaming 模式以排查循环问题
2026-01-22T14:51:08.783+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加UnifiedSearchCodeactTool
2026-01-22T14:51:08.789+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockBaiduWebSearchProvider, toolName=search_web
2026-01-22T14:51:08.790+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockKnowledgeStoreSearchProvider, toolName=search_knowledge
2026-01-22T14:51:08.791+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockProjectContextSearchProvider, toolName=search_project
2026-01-22T14:51:08.791+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=搜索工具创建完成, totalCount=3
2026-01-22T14:51:08.791+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加SearchCodeactTools, count=3
2026-01-22T14:51:08.791+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加ReplyCodeactTools, count=3
2026-01-22T14:51:08.791+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加TriggerCodeactTools, count=4
2026-01-22T14:51:08.791+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加PlanningCodeactTools, count=5
2026-01-22T14:51:08.791+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#createMcpDynamicTools - reason=Creating MCP dynamic tools
2026-01-22T14:51:08.799+08:00  INFO --- [           main] c.a.a.a.e.d.mcp.McpDynamicToolFactory    : McpDynamicToolFactory#createTools - reason=开始创建MCP动态工具
2026-01-22T14:51:08.805+08:00  INFO --- [           main] c.a.a.a.e.d.mcp.McpDynamicToolFactory    : McpDynamicToolFactory#createTools - reason=无可用的MCP工具
2026-01-22T14:51:08.805+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#createMcpDynamicTools - reason=MCP dynamic tools created, count=0
2026-01-22T14:51:08.805+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=Added MCP dynamic tools, count=0
2026-01-22T14:51:08.805+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#createHttpDynamicTools - reason=HTTP dynamic tools disabled by default
2026-01-22T14:51:08.805+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=合并后CodeactTool总数, count=16
2026-01-22T14:51:08.805+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=React阶段使用内置工具(write_code, execute_code, write_condition_code)
2026-01-22T14:51:08.805+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=注入 React Phase 评估 Hooks, count=2
2026-01-22T14:51:08.805+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=注入 CodeAct Phase 评估 Hooks, count=2
2026-01-22T14:51:08.805+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=已准备注入UnifiedIntentRecognitionHook
2026-01-22T14:51:08.809+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 开始构建CodeactAgent
2026-01-22T14:51:08.813+08:00  INFO --- [           main] .a.a.a.c.t.s.DefaultReturnSchemaRegistry : DefaultReturnSchemaRegistry#<init> - reason=创建新实例, hashCode=100984998
2026-01-22T14:51:08.815+08:00 DEBUG --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#<init> - reason=创建注册表, returnSchemaRegistry=DefaultReturnSchemaRegistry
2026-01-22T14:51:08.816+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=创建默认CodeactToolRegistry
2026-01-22T14:51:08.816+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=开始注册CodeactTool, count=16
2026-01-22T14:51:08.816+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=unified_search
2026-01-22T14:51:08.816+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=unified_search
2026-01-22T14:51:08.816+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=search_web
2026-01-22T14:51:08.816+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=search_web
2026-01-22T14:51:08.816+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=search_knowledge
2026-01-22T14:51:08.816+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=search_knowledge
2026-01-22T14:51:08.816+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=search_project
2026-01-22T14:51:08.816+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=search_project
2026-01-22T14:51:08.816+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=send_success_message
2026-01-22T14:51:08.816+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=send_success_message
2026-01-22T14:51:08.816+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=send_error_message
2026-01-22T14:51:08.816+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=send_error_message
2026-01-22T14:51:08.816+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=send_notification
2026-01-22T14:51:08.816+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=send_notification
2026-01-22T14:51:08.817+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=subscribe_trigger
2026-01-22T14:51:08.817+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=subscribe_trigger
2026-01-22T14:51:08.817+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=unsubscribe_trigger
2026-01-22T14:51:08.817+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=unsubscribe_trigger
2026-01-22T14:51:08.817+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=list_triggers
2026-01-22T14:51:08.817+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=list_triggers
2026-01-22T14:51:08.817+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=get_trigger_detail
2026-01-22T14:51:08.817+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=get_trigger_detail
2026-01-22T14:51:08.821+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=plan_action
2026-01-22T14:51:08.821+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=plan_action
2026-01-22T14:51:08.822+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=execute_action
2026-01-22T14:51:08.822+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=execute_action
2026-01-22T14:51:08.822+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=list_actions
2026-01-22T14:51:08.822+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=list_actions
2026-01-22T14:51:08.823+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=get_action_details
2026-01-22T14:51:08.823+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=get_action_details
2026-01-22T14:51:08.824+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=execute_system_action
2026-01-22T14:51:08.824+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=execute_system_action
2026-01-22T14:51:08.824+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册完成, count=16
2026-01-22T14:51:08.825+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 创建默认CodeContext: language=PYTHON
2026-01-22T14:51:08.827+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 创建默认RuntimeEnvironmentManager: language=PYTHON
2026-01-22T14:51:08.832+08:00 DEBUG --- [           main] c.a.a.a.c.e.bridge.AgentToolBridge       : AgentToolBridge#<init> 初始化: 注册了0个工具
2026-01-22T14:51:08.833+08:00 DEBUG --- [           main] c.a.a.a.c.executor.bridge.StateBridge    : StateBridge#<init> 初始化完成
2026-01-22T14:51:08.835+08:00  INFO --- [           main] c.a.a.a.core.executor.GraalCodeExecutor  : GraalCodeExecutor#<init> 初始化完成: language=PYTHON, allowIO=false, timeout=30000ms, executableTools=true, customBridgeFactory=false
2026-01-22T14:51:08.835+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#createCodeactSubAgentInterceptor 创建子Agent拦截器
2026-01-22T14:51:08.846+08:00  INFO --- [           main] c.a.a.a.a.subagent.CodeactSubAgent       : CodeactSubAgent#<init> 初始化: name=code-generator
2026-01-22T14:51:08.847+08:00  INFO --- [           main] c.a.a.a.a.subagent.CodeactSubAgent       : CodeactSubAgent#<init> 初始化: name=condition-code-generator
2026-01-22T14:51:08.847+08:00  INFO --- [           main] c.a.a.a.a.s.CodeactSubAgentInterceptor   : CodeactSubAgentInterceptor#<init> 创建默认代码生成子Agent
2026-01-22T14:51:09.339+08:00  INFO --- [           main] c.a.a.a.a.s.CodeactSubAgentInterceptor   : CodeactSubAgentInterceptor#<init> 初始化完成: subAgentCount=2
2026-01-22T14:51:09.341+08:00  INFO --- [           main] c.a.a.a.a.tools.ExecuteCodeTool          : ExecuteCodeTool#<init> 初始化完成
2026-01-22T14:51:09.347+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 拦截器分类完成: modelInterceptors=1, toolInterceptors=0
2026-01-22T14:51:09.347+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 从拦截器提取工具: interceptor=CodeactSubAgent, toolCount=2
2026-01-22T14:51:09.374+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 工具收集完成: interceptorTools=2, regularTools=3, total=6
2026-01-22T14:51:09.378+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 设置ModelInterceptors到LlmNode: count=1
2026-01-22T14:51:09.380+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build CodeactAgent构建完成
2026-01-22T14:51:09.380+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=开始罗列已注册的工具
2026-01-22T14:51:09.380+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct阶段工具数量, count=16
2026-01-22T14:51:09.380+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=1, name=send_success_message, description=Send a success message to the IDE console
2026-01-22T14:51:09.380+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=2, name=get_trigger_detail, description=获取指定触发器的详细信息
2026-01-22T14:51:09.380+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=3, name=get_action_details, description=获取指定动作的完整定义，包括参数、步骤等详细信息。
2026-01-22T14:51:09.380+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=4, name=search_project, description=搜索项目上下文信息，包括代码、配置、文档等
2026-01-22T14:51:09.380+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=5, name=subscribe_trigger, description=创建并订阅一个新的触发器
2026-01-22T14:51:09.381+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=6, name=search_knowledge, description=搜索团队知识库，包括FAQ、规范、最佳实践等
2026-01-22T14:51:09.381+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=7, name=unified_search, description=统一搜索工具，可同时搜索项目、知识库、Web等多个数据源
2026-01-22T14:51:09.381+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=8, name=unsubscribe_trigger, description=取消订阅并删除一个触发器
2026-01-22T14:51:09.381+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=9, name=search_web, description=执行Web搜索，获取公开互联网信息
2026-01-22T14:51:09.381+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=10, name=list_actions, description=列出所有可用的动作，支持按分类和标签筛选。
2026-01-22T14:51:09.381+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=11, name=plan_action, description=根据用户输入匹配动作并生成执行计划。返回匹配的动作列表和生成的执行计划。
2026-01-22T14:51:09.381+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=12, name=execute_system_action, description=执行系统Action（如OA请假、ERP操作等）。根据action_id调用相应的系统Handler。
2026-01-22T14:51:09.381+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=13, name=send_error_message, description=Send an error message to the IDE console
2026-01-22T14:51:09.381+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=14, name=execute_action, description=执行指定的执行计划，返回执行结果。支持继续执行等待用户输入的计划。
2026-01-22T14:51:09.381+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=15, name=send_notification, description=Send a notification message
2026-01-22T14:51:09.381+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=16, name=list_triggers, description=列出所有触发器
2026-01-22T14:51:09.381+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React阶段工具数量, count=6
2026-01-22T14:51:09.381+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=1, name=write_code, description=Generate and register a new function with specified name and parameters. IMPORTANT: You MUST provide both 'functionName' and 'parameters' fields. Example: write_code(requirement='calculate sum', functionName='calculate_sum', parameters=['a', 'b'])
2026-01-22T14:51:09.381+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=2, name=write_condition_code, description=Generate and register a condition check function for triggers. This function MUST return a boolean value (True/False). Example: write_condition_code(requirement='check if it is a working day', functionName='check_is_working_day', parameters=['date'])
2026-01-22T14:51:09.381+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=3, name=send_success_message, description=Send a success message to the IDE console
2026-01-22T14:51:09.381+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=4, name=send_error_message, description=Send an error message to the IDE console
2026-01-22T14:51:09.381+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=5, name=send_notification, description=Send a notification message
2026-01-22T14:51:09.382+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=6, name=execute_code, description=Execute a previously generated function by its exact name with matching parameters. CRITICAL: The functionName MUST exactly match the name used in write_code. The 'args' parameter names MUST exactly match the 'parameters' specified in write_code. Example: If you called write_code with functionName='calculate_sum' and parameters=['a', 'b'], then you must call execute_code with functionName='calculate_sum' and args={'a': 10, 'b': 20}. Parameter value types supported: String, Number, Boolean, List, Map/Object.
2026-01-22T14:51:09.382+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=工具罗列完成
2026-01-22T14:51:09.385+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgent#<init> 初始化完成: language=PYTHON
2026-01-22T14:51:09.389+08:00  INFO --- [           main] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#<init> 初始化 Agent 加载器
2026-01-22T14:51:09.424+08:00 DEBUG --- [           main] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#<init> Agent 图结构:
@startuml CodeactAgent
skinparam usecaseFontSize 14
skinparam usecaseStereotypeFontSize 12
skinparam hexagonFontSize 14
skinparam hexagonStereotypeFontSize 12
title "CodeactAgent"
footer

powered by spring-ai-alibaba
end footer
circle start<<input>> as __START__
circle stop as __END__
usecase "_AGENT_MODEL_"<<Node>>
usecase "_AGENT_TOOL_"<<Node>>
usecase "_AGENT_HOOK_UnifiedIntentRecognitionHook.before"<<Node>>
usecase "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"<<Node>>
usecase "_AGENT_HOOK_EvaluationPromptInjectionHook-REACT.beforeModel"<<Node>>
hexagon "check state" as condition1<<Condition>>
hexagon "check state" as condition2<<Condition>>
hexagon "check state" as condition3<<Condition>>
"__START__" -down-> "_AGENT_HOOK_UnifiedIntentRecognitionHook.before"
"_AGENT_HOOK_UnifiedIntentRecognitionHook.before" .down.> "condition1"
"condition1" .down.> "__END__"
'"_AGENT_HOOK_UnifiedIntentRecognitionHook.before" .down.> "__END__"
"condition1" .down.> "_AGENT_TOOL_"
'"_AGENT_HOOK_UnifiedIntentRecognitionHook.before" .down.> "_AGENT_TOOL_"
"condition1" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
'"_AGENT_HOOK_UnifiedIntentRecognitionHook.before" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
"_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel" -down-> "_AGENT_HOOK_EvaluationPromptInjectionHook-REACT.beforeModel"
"_AGENT_HOOK_EvaluationPromptInjectionHook-REACT.beforeModel" -down-> "_AGENT_MODEL_"
"_AGENT_MODEL_" .down.> "condition2"
"condition2" .down.> "_AGENT_TOOL_"
'"_AGENT_MODEL_" .down.> "_AGENT_TOOL_"
"condition2" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
'"_AGENT_MODEL_" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
"condition2" .down.> "__END__"
'"_AGENT_MODEL_" .down.> "__END__"
"_AGENT_TOOL_" .down.> "condition3"
"condition3" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
'"_AGENT_TOOL_" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
"condition3" .down.> "__END__"
'"_AGENT_TOOL_" .down.> "__END__"
@enduml

2026-01-22T14:51:09.425+08:00  INFO --- [           main] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#<init> 已注册 agent: grayscale_agent
2026-01-22T14:51:09.433+08:00  INFO --- [           main] .a.a.a.p.c.ParamOptionsAutoConfiguration : ParamOptionsAutoConfiguration - Creating OptionsCache with TTL: 300000ms
2026-01-22T14:51:09.437+08:00  INFO --- [           main] a.a.a.p.s.DefaultParameterOptionsService : DefaultParameterOptionsService initialized with 3 handlers
2026-01-22T14:51:09.439+08:00  INFO --- [           main] c.a.a.a.planning.system.OaSystemHandler  : OaSystemHandler#init - initialized
2026-01-22T14:51:09.454+08:00 DEBUG --- [           main] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#listAgents 列出所有 agent
2026-01-22T14:51:09.454+08:00  INFO --- [           main] c.a.c.a.a.s.controller.AgentController   : AgentController initialized with 1 dynamic agents: [grayscale_agent]
2026-01-22T14:51:09.590+08:00  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: c8b5408f-cc7f-4ced-9340-2cddae095c0c

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2026-01-22T14:51:09.671+08:00  INFO --- [           main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2026-01-22T14:51:10.446+08:00  INFO --- [           main] e.e.c.CodeactEvaluationAutoConfiguration : CodeactEvaluationAutoConfiguration#inputRoutingEvaluationHook - reason=创建输入路由评估 Hook
2026-01-22T14:51:10.448+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchFacade - reason=creating search facade with 3 providers
2026-01-22T14:51:10.450+08:00  INFO --- [           main] c.a.a.a.e.s.i.DefaultSearchFacade        : DefaultSearchFacade#init - reason=initialized with 3 providers
2026-01-22T14:51:10.451+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=开始创建Search工具
2026-01-22T14:51:10.453+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockBaiduWebSearchProvider, toolName=search_web
2026-01-22T14:51:10.454+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockKnowledgeStoreSearchProvider, toolName=search_knowledge
2026-01-22T14:51:10.455+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockProjectContextSearchProvider, toolName=search_project
2026-01-22T14:51:10.455+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=搜索工具创建完成, totalCount=3
2026-01-22T14:51:10.455+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=Search工具创建完成, count=3
2026-01-22T14:51:10.455+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=创建Search工具, index=1, name=search_web, description=执行Web搜索，获取公开互联网信息
2026-01-22T14:51:10.455+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=创建Search工具, index=2, name=search_knowledge, description=搜索团队知识库，包括FAQ、规范、最佳实践等
2026-01-22T14:51:10.455+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=创建Search工具, index=3, name=search_project, description=搜索项目上下文信息，包括代码、配置、文档等
2026-01-22T14:51:10.458+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#diagnostics - reason=ElasticsearchClient bean found
2026-01-22T14:51:10.458+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#diagnostics - reason=EmbeddingModel bean found
2026-01-22T14:51:10.465+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#diagnostics - Planning module status:
2026-01-22T14:51:10.465+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration :   - ActionRepository: MybatisPlusActionRepository
2026-01-22T14:51:10.465+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration :   - ActionProvider: SemanticActionProvider
2026-01-22T14:51:10.465+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration :   - PlanGenerator: DefaultPlanGenerator
2026-01-22T14:51:10.465+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration :   - PlanExecutor: DefaultPlanExecutor
2026-01-22T14:51:10.791+08:00  INFO --- [           main] c.a.a.a.c.c.CodeactCoreAutoConfiguration : CodeactCoreAutoConfiguration#returnSchemaRegistry - reason=创建ReturnSchemaRegistry单例Bean
2026-01-22T14:51:10.791+08:00  INFO --- [           main] .a.a.a.c.t.s.DefaultReturnSchemaRegistry : DefaultReturnSchemaRegistry#<init> - reason=创建新实例, hashCode=742450262
2026-01-22T14:51:11.734+08:00  WARN --- [           main] o.s.m.p.s.SyncMcpSamplingProvider        : No sampling methods found
2026-01-22T14:51:11.739+08:00  WARN --- [           main] o.s.m.p.e.SyncMcpElicitationProvider     : No elicitation methods found
2026-01-22T14:51:11.809+08:00  INFO --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2026-01-22T14:51:11.825+08:00  INFO --- [           main] c.a.a.a.start.AssistantAgentApplication  : Started AssistantAgentApplication in 15.423 seconds (process running for 16.944)
2026-01-22T14:51:11.837+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#run - reason=Starting experience module validation
2026-01-22T14:51:12.004+08:00 DEBUG --- [           main] .p.e.r.ElasticsearchExperienceRepository : ElasticsearchExperienceRepository#count - reason=count completed, count=0
2026-01-22T14:51:12.046+08:00 DEBUG --- [           main] .p.e.r.ElasticsearchExperienceRepository : ElasticsearchExperienceRepository#countByTypeAndScope - reason=count completed, type=CODE, scope=null, count=0
2026-01-22T14:51:12.054+08:00 DEBUG --- [           main] .p.e.r.ElasticsearchExperienceRepository : ElasticsearchExperienceRepository#countByTypeAndScope - reason=count completed, type=REACT, scope=null, count=0
2026-01-22T14:51:12.064+08:00 DEBUG --- [           main] .p.e.r.ElasticsearchExperienceRepository : ElasticsearchExperienceRepository#countByTypeAndScope - reason=count completed, type=COMMON, scope=null, count=0
2026-01-22T14:51:12.064+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testExperienceCount - reason=Experience stats: total=0, code=0, react=0, common=0
2026-01-22T14:51:12.064+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCommonExperienceQuery - reason=Testing common experience query
2026-01-22T14:51:12.611+08:00 DEBUG --- [           main] .s.p.e.p.ElasticsearchExperienceProvider : ElasticsearchExperienceProvider#query - reason=query completed, type=COMMON, text=null, count=0
2026-01-22T14:51:12.611+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCommonExperienceQuery - reason=Found 0 common experiences
2026-01-22T14:51:12.612+08:00  WARN --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCommonExperienceQuery - reason=❌ MoLiHong identity experience not found
2026-01-22T14:51:12.613+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCodeExperienceQuery - reason=Testing code experience query (demo keyword)
2026-01-22T14:51:12.624+08:00 DEBUG --- [           main] .s.p.e.p.ElasticsearchExperienceProvider : ElasticsearchExperienceProvider#query - reason=query completed, type=CODE, text=null, count=0
2026-01-22T14:51:12.624+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCodeExperienceQuery - reason=Found 0 demo code experiences
2026-01-22T14:51:12.625+08:00  WARN --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCodeExperienceQuery - reason=❌ Demo code experience not found
2026-01-22T14:51:12.625+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testReactExperienceQuery - reason=Testing react experience query
2026-01-22T14:51:12.634+08:00 DEBUG --- [           main] .s.p.e.p.ElasticsearchExperienceProvider : ElasticsearchExperienceProvider#query - reason=query completed, type=REACT, text=null, count=0
2026-01-22T14:51:12.634+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testReactExperienceQuery - reason=Found 0 react experiences
2026-01-22T14:51:12.636+08:00  WARN --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testReactExperienceQuery - reason=❌ Ambiguous intent strategy not found
2026-01-22T14:51:12.636+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#run - reason=Experience module validation completed
2026-01-22T14:51:12.639+08:00  INFO --- [           main] c.a.a.a.s.a.config.AuthInitialization    : AuthInitialization#run - 初始化认证系统
2026-01-22T14:51:12.659+08:00 DEBUG --- [           main] c.a.a.a.s.a.s.AuthenticationService      : AuthenticationService#initDefaultAdmin - 管理员账户已存在
2026-01-22T14:51:12.660+08:00  INFO --- [           main] c.a.a.a.s.a.config.AuthInitialization    : AuthInitialization#run - 认证系统初始化完成
2026-01-22T14:51:23.810+08:00  INFO --- [nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-01-22T14:51:23.810+08:00  INFO --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2026-01-22T14:51:23.811+08:00  INFO --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2026-01-22T14:51:24.432+08:00 DEBUG --- [nio-8080-exec-1] c.a.a.a.s.a.s.JwtAuthenticationFilter    : JwtAuthenticationFilter#doFilterInternal - 设置用户认证: username=admin, roles=[ADMIN, USER]
2026-01-22T14:51:24.579+08:00  INFO --- [nio-8080-exec-1] c.a.c.a.a.s.controller.ThreadController  : Request received for POST /apps/research_agent/users/user-001/threads (service generates ID) with state: {}
2026-01-22T14:51:24.583+08:00  INFO --- [nio-8080-exec-1] c.a.c.a.a.s.service.ThreadServiceImpl    : Created thread: 4ac52547-8754-4ad2-bfc5-f68220234dc7 for app=research_agent, user=user-001
2026-01-22T14:51:24.583+08:00  INFO --- [nio-8080-exec-1] c.a.c.a.a.s.controller.ThreadController  : Thread created successfully with generated id: 4ac52547-8754-4ad2-bfc5-f68220234dc7
2026-01-22T14:51:24.689+08:00 DEBUG --- [nio-8080-exec-5] c.a.a.a.s.a.s.JwtAuthenticationFilter    : JwtAuthenticationFilter#doFilterInternal - 设置用户认证: username=admin, roles=[ADMIN, USER]
2026-01-22T14:51:24.716+08:00  INFO --- [nio-8080-exec-5] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#loadAgent 加载 agent: research_agent
2026-01-22T14:51:24.716+08:00  INFO --- [nio-8080-exec-5] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#loadAgent 成功加载 agent: research_agent
2026-01-22T14:51:24.736+08:00 DEBUG --- [nio-8080-exec-9] c.a.a.a.s.a.s.JwtAuthenticationFilter    : JwtAuthenticationFilter#doFilterInternal - 设置用户认证: username=admin, roles=[ADMIN, USER]
2026-01-22T14:51:24.739+08:00  INFO --- [nio-8080-exec-9] c.a.c.a.a.s.controller.ThreadController  : Request received for GET /apps/research_agent/users/user-001/threads/4ac52547-8754-4ad2-bfc5-f68220234dc7
2026-01-22T14:51:24.997+08:00 DEBUG --- [nio-8080-exec-5] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#beforeAgent - reason=checking unified intent
2026-01-22T14:51:24.997+08:00 DEBUG --- [nio-8080-exec-5] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#get - reason=session not found, sessionId=4ac52547-8754-4ad2-bfc5-f68220234dc7
2026-01-22T14:51:25.006+08:00 DEBUG --- [nio-8080-exec-5] c.a.a.a.p.i.SemanticActionProvider       : SemanticActionProvider#matchActions - reason=matching actions, userInput=我要请假
2026-01-22T14:51:26.835+08:00  WARN --- [nio-8080-exec-5] c.a.a.a.p.p.c.ActionEntityConverter      : ActionEntityConverter#parseActionType - reason=unknown action type, type=INTERNAL
2026-01-22T14:51:26.843+08:00  WARN --- [nio-8080-exec-5] c.a.a.a.p.p.c.ActionEntityConverter      : ActionEntityConverter#parseActionType - reason=unknown action type, type=INTERNAL
2026-01-22T14:51:26.851+08:00  INFO --- [nio-8080-exec-5] c.a.a.a.p.i.SemanticActionProvider       : SemanticActionProvider#matchActions - reason=matching completed, userInput=我要请假, matchCount=1
2026-01-22T14:51:26.851+08:00  INFO --- [nio-8080-exec-5] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#beforeAgent - reason=match found, actionId=oa:leave:request, confidence=0.95, matchType=KEYWORD_EXACT
2026-01-22T14:51:26.869+08:00 DEBUG --- [nio-8080-exec-5] .s.p.e.p.ElasticsearchExperienceProvider : ElasticsearchExperienceProvider#query - reason=query completed, type=REACT, text=null, count=0
2026-01-22T14:51:26.869+08:00  INFO --- [nio-8080-exec-5] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#beforeAgent - reason=high confidence, using Planning direct execution with param collection, actionId=oa:leave:request, confidence=0.95
2026-01-22T14:51:26.869+08:00  INFO --- [nio-8080-exec-5] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handlePlanningDirectExecution - reason=direct execution, actionId=oa:leave:request
2026-01-22T14:51:26.870+08:00  INFO --- [nio-8080-exec-5] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handlePlanningDirectExecution - reason=missing required params, count=5, actionId=oa:leave:request
2026-01-22T14:51:26.870+08:00  INFO --- [nio-8080-exec-5] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handleMissingParameters - reason=asking for param, paramName=start_date, actionId=oa:leave:request
2026-01-22T14:51:26.876+08:00 DEBUG --- [nio-8080-exec-5] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#save - reason=session saved, sessionId=4ac52547-8754-4ad2-bfc5-f68220234dc7, ttl=PT30M
2026-01-22T14:51:26.876+08:00 DEBUG --- [nio-8080-exec-5] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#saveSession - reason=session saved, sessionId=4ac52547-8754-4ad2-bfc5-f68220234dc7
2026-01-22T14:51:26.876+08:00  INFO --- [nio-8080-exec-5] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handleMissingParameters - reason=session saved to store, sessionId=4ac52547-8754-4ad2-bfc5-f68220234dc7, actionId=oa:leave:request
2026-01-22T14:51:29.743+08:00 DEBUG --- [nio-8080-exec-2] c.a.a.a.s.a.s.JwtAuthenticationFilter    : JwtAuthenticationFilter#doFilterInternal - 设置用户认证: username=admin, roles=[ADMIN, USER]
2026-01-22T14:51:29.745+08:00  INFO --- [nio-8080-exec-2] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#loadAgent 加载 agent: research_agent
2026-01-22T14:51:29.745+08:00  INFO --- [nio-8080-exec-2] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#loadAgent 成功加载 agent: research_agent
2026-01-22T14:51:29.761+08:00 DEBUG --- [nio-8080-exec-2] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#beforeAgent - reason=checking unified intent
2026-01-22T14:51:29.761+08:00 DEBUG --- [nio-8080-exec-2] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#get - reason=session found, sessionId=4ac52547-8754-4ad2-bfc5-f68220234dc7, active=true
2026-01-22T14:51:29.761+08:00  INFO --- [nio-8080-exec-2] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#beforeAgent - reason=continuing param collection session (from store), sessionId=4ac52547-8754-4ad2-bfc5-f68220234dc7, userInput=2026-1-22 2026-1-23 类型 事假 理由 aa 审批人 25
2026-01-22T14:51:29.761+08:00  INFO --- [nio-8080-exec-2] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handleParamCollectionContinuation - reason=processing param input, sessionId=4ac52547-8754-4ad2-bfc5-f68220234dc7, actionId=oa:leave:request, userInput=2026-1-22 2026-1-23 类型 事假 理由 aa 审批人 25
2026-01-22T14:51:29.768+08:00  WARN --- [nio-8080-exec-2] c.a.a.a.p.p.c.ActionEntityConverter      : ActionEntityConverter#parseActionType - reason=unknown action type, type=INTERNAL
2026-01-22T14:51:33.663+08:00  INFO --- [nio-8080-exec-2] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handleParamCollectionContinuation - reason=LLM response, response=```json
{
  "extractedParams": {
    "start_date": "2026-1-22 00:00",
    "end_date": "2026-1-23 00:00",
    "types": 1,
    "reason": "aa",
    "check_uids": "25"
  },
  "missingParams": [],
  "nextQuestion": null
}
```
2026-01-22T14:51:33.827+08:00  INFO --- [nio-8080-exec-2] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handleParamCollectionContinuation - reason=params complete, executing action, actionId=oa:leave:request, params={end_date=2026-1-23 00:00, reason=aa, check_uids=25, types=1, start_date=2026-1-22 00:00}
2026-01-22T14:51:33.828+08:00 DEBUG --- [nio-8080-exec-2] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#close - reason=session closed, sessionId=4ac52547-8754-4ad2-bfc5-f68220234dc7
2026-01-22T14:51:33.828+08:00 DEBUG --- [nio-8080-exec-2] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#closeSession - reason=session closed, sessionId=4ac52547-8754-4ad2-bfc5-f68220234dc7
2026-01-22T14:51:33.828+08:00  INFO --- [nio-8080-exec-2] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handlePlanningDirectExecution - reason=direct execution, actionId=oa:leave:request
2026-01-22T14:51:33.830+08:00 DEBUG --- [nio-8080-exec-2] c.a.a.a.p.internal.DefaultPlanGenerator  : DefaultPlanGenerator#generate - reason=generating plan, actionId=oa:leave:request, actionName=提交OA请假申请
2026-01-22T14:51:33.844+08:00  INFO --- [nio-8080-exec-2] c.a.a.a.p.internal.DefaultPlanGenerator  : DefaultPlanGenerator#generate - reason=plan generated, planId=97843c8b-32d7-4e49-8710-e1b77fecbc62, stepCount=1
2026-01-22T14:51:33.844+08:00  INFO --- [nio-8080-exec-2] c.a.a.a.p.internal.DefaultPlanExecutor   : DefaultPlanExecutor#execute - reason=starting plan execution, planId=97843c8b-32d7-4e49-8710-e1b77fecbc62, actionId=oa:leave:request
2026-01-22T14:51:33.846+08:00 DEBUG --- [nio-8080-exec-2] c.a.a.a.p.internal.DefaultPlanExecutor   : DefaultPlanExecutor#executeSteps - reason=executing step, planId=97843c8b-32d7-4e49-8710-e1b77fecbc62, stepId=execute, stepIndex=0
2026-01-22T14:51:33.846+08:00 DEBUG --- [nio-8080-exec-2] c.a.a.a.p.i.e.ExecuteStepExecutor        : AbstractStepExecutor#execute - reason=executing step, stepId=execute, type=EXECUTE
2026-01-22T14:51:33.847+08:00 DEBUG --- [nio-8080-exec-2] c.a.a.a.p.i.e.ExecuteStepExecutor        : ExecuteStepExecutor#doExecute - reason=executing execute step, stepId=execute
2026-01-22T14:51:33.847+08:00 DEBUG --- [nio-8080-exec-2] c.a.a.a.p.e.ActionExecutorFactory        : ActionExecutorFactory#execute - executing actionId=execute, type=INTERNAL, executor=InternalExecutor
2026-01-22T14:51:33.847+08:00 DEBUG --- [nio-8080-exec-2] c.a.a.a.p.e.ActionExecutorFactory        : ActionExecutorFactory#execute - skipping permission check (missing userId or systemId)
2026-01-22T14:51:33.847+08:00  INFO --- [nio-8080-exec-2] c.a.a.a.p.executor.InternalExecutor      : InternalExecutor#execute - invoking bean method, actionId=execute, bean=oaSystemActionService, method=execute
2026-01-22T14:51:33.847+08:00 DEBUG --- [nio-8080-exec-2] c.a.a.a.p.executor.InternalExecutor      : InternalExecutor#prepareArguments - passing entire params as Map argument
2026-01-22T14:51:41.711+08:00  WARN --- [nio-8080-exec-2] c.a.a.a.p.p.c.ActionEntityConverter      : ActionEntityConverter#parseActionType - reason=unknown action type, type=INTERNAL
2026-01-22T14:51:47.322+08:00  INFO --- [nio-8080-exec-2] c.a.a.a.planning.system.OaSystemHandler  : OaSystemHandler#execute - actionId=oa:leave:request, systemId=oa-system
2026-01-22T14:51:49.131+08:00 ERROR --- [nio-8080-exec-2] c.a.a.a.planning.system.OaSystemHandler  : OaSystemHandler#execute - failed, actionId=oa:leave:request, time=15284ms, error=Action未配置HTTP配置: oa:leave:request

java.lang.IllegalArgumentException: Action未配置HTTP配置: oa:leave:request
	at com.alibaba.assistant.agent.planning.system.OaSystemHandler.execute(OaSystemHandler.java:107)
	at com.alibaba.assistant.agent.planning.system.OaSystemActionService.execute(OaSystemActionService.java:65)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at com.alibaba.assistant.agent.planning.executor.InternalExecutor.execute(InternalExecutor.java:106)
	at com.alibaba.assistant.agent.planning.executor.ActionExecutorFactory.execute(ActionExecutorFactory.java:192)
	at com.alibaba.assistant.agent.planning.internal.executor.ExecuteStepExecutor.doExecute(ExecuteStepExecutor.java:65)
	at com.alibaba.assistant.agent.planning.internal.executor.AbstractStepExecutor.execute(AbstractStepExecutor.java:47)
	at com.alibaba.assistant.agent.planning.internal.DefaultPlanExecutor.executeSteps(DefaultPlanExecutor.java:127)
	at com.alibaba.assistant.agent.planning.internal.DefaultPlanExecutor.execute(DefaultPlanExecutor.java:78)
	at com.alibaba.assistant.agent.planning.intent.UnifiedIntentRecognitionHook.handlePlanningDirectExecution(UnifiedIntentRecognitionHook.java:439)
	at com.alibaba.assistant.agent.planning.intent.UnifiedIntentRecognitionHook.handleParamCollectionContinuation(UnifiedIntentRecognitionHook.java:696)
	at com.alibaba.assistant.agent.planning.intent.UnifiedIntentRecognitionHook.beforeAgent(UnifiedIntentRecognitionHook.java:186)
	at com.alibaba.cloud.ai.graph.executor.NodeExecutor.executeNode(NodeExecutor.java:122)
	at com.alibaba.cloud.ai.graph.executor.NodeExecutor.execute(NodeExecutor.java:84)
	at com.alibaba.cloud.ai.graph.executor.MainGraphExecutor.execute(MainGraphExecutor.java:108)
	at com.alibaba.cloud.ai.graph.executor.MainGraphExecutor.lambda$handleStartNode$0(MainGraphExecutor.java:135)
	at reactor.core.publisher.FluxDefer.subscribe(FluxDefer.java:46)
	at reactor.core.publisher.Flux.subscribe(Flux.java:8891)
	at reactor.core.publisher.FluxConcatArray$ConcatArraySubscriber.onComplete(FluxConcatArray.java:238)
	at reactor.core.publisher.FluxConcatArray.subscribe(FluxConcatArray.java:79)
	at reactor.core.publisher.FluxDefer.subscribe(FluxDefer.java:54)
	at reactor.core.publisher.Flux.subscribe(Flux.java:8891)
	at org.springframework.web.servlet.mvc.method.annotation.ReactiveTypeHandler$AbstractEmitterSubscriber.connect(ReactiveTypeHandler.java:295)
	at org.springframework.web.servlet.mvc.method.annotation.ReactiveTypeHandler.handleValue(ReactiveTypeHandler.java:168)
	at org.springframework.web.servlet.mvc.method.annotation.ResponseBodyEmitterReturnValueHandler.handleReturnValue(ResponseBodyEmitterReturnValueHandler.java:215)
	at org.springframework.web.method.support.HandlerMethodReturnValueHandlerComposite.handleReturnValue(HandlerMethodReturnValueHandlerComposite.java:78)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:136)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.alibaba.assistant.agent.start.auth.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:87)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$4(HandlerMappingIntrospector.java:267)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)

2026-01-22T14:51:49.135+08:00  INFO --- [nio-8080-exec-2] c.a.a.a.p.executor.InternalExecutor      : InternalExecutor#execute - method invoked successfully, actionId=execute, time=15288ms
2026-01-22T14:51:49.136+08:00  INFO --- [nio-8080-exec-2] c.a.a.a.p.i.e.ExecuteStepExecutor        : ExecuteStepExecutor#doExecute - reason=step executed, stepId=execute, success=true
2026-01-22T14:51:49.138+08:00  INFO --- [nio-8080-exec-2] c.a.a.a.p.internal.DefaultPlanExecutor   : DefaultPlanExecutor#execute - reason=plan completed, planId=97843c8b-32d7-4e49-8710-e1b77fecbc62, stepCount=1
2026-01-22T14:51:49.140+08:00  INFO --- [nio-8080-exec-2] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handlePlanningDirectExecution - reason=execution completed, planId=97843c8b-32d7-4e49-8710-e1b77fecbc62, success=true
2026-01-22T14:52:27.329+08:00 DEBUG --- [nio-8080-exec-8] c.a.a.a.s.a.s.JwtAuthenticationFilter    : JwtAuthenticationFilter#doFilterInternal - 设置用户认证: username=admin, roles=[ADMIN, USER]
2026-01-22T14:52:27.331+08:00  INFO --- [nio-8080-exec-8] c.a.c.a.a.s.controller.ThreadController  : Request received for POST /apps/research_agent/users/user-001/threads (service generates ID) with state: {}
2026-01-22T14:52:27.331+08:00  INFO --- [nio-8080-exec-8] c.a.c.a.a.s.service.ThreadServiceImpl    : Created thread: 5c97a37e-8067-4337-a4af-9ac09847e538 for app=research_agent, user=user-001
2026-01-22T14:52:27.331+08:00  INFO --- [nio-8080-exec-8] c.a.c.a.a.s.controller.ThreadController  : Thread created successfully with generated id: 5c97a37e-8067-4337-a4af-9ac09847e538
2026-01-22T14:52:27.342+08:00 DEBUG --- [nio-8080-exec-4] c.a.a.a.s.a.s.JwtAuthenticationFilter    : JwtAuthenticationFilter#doFilterInternal - 设置用户认证: username=admin, roles=[ADMIN, USER]
2026-01-22T14:52:27.343+08:00  INFO --- [nio-8080-exec-4] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#loadAgent 加载 agent: research_agent
2026-01-22T14:52:27.344+08:00  INFO --- [nio-8080-exec-4] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#loadAgent 成功加载 agent: research_agent
2026-01-22T14:52:27.347+08:00 DEBUG --- [nio-8080-exec-4] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#beforeAgent - reason=checking unified intent
2026-01-22T14:52:27.347+08:00 DEBUG --- [nio-8080-exec-4] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#get - reason=session not found, sessionId=5c97a37e-8067-4337-a4af-9ac09847e538
2026-01-22T14:52:27.347+08:00 DEBUG --- [nio-8080-exec-4] c.a.a.a.p.i.SemanticActionProvider       : SemanticActionProvider#matchActions - reason=matching actions, userInput=我要请假
2026-01-22T14:52:27.383+08:00 DEBUG --- [nio-8080-exec-1] c.a.a.a.s.a.s.JwtAuthenticationFilter    : JwtAuthenticationFilter#doFilterInternal - 设置用户认证: username=admin, roles=[ADMIN, USER]
2026-01-22T14:52:27.384+08:00  INFO --- [nio-8080-exec-1] c.a.c.a.a.s.controller.ThreadController  : Request received for GET /apps/research_agent/users/user-001/threads/5c97a37e-8067-4337-a4af-9ac09847e538
2026-01-22T14:52:27.694+08:00  WARN --- [nio-8080-exec-4] c.a.a.a.p.p.c.ActionEntityConverter      : ActionEntityConverter#parseActionType - reason=unknown action type, type=INTERNAL
2026-01-22T14:52:27.700+08:00  WARN --- [nio-8080-exec-4] c.a.a.a.p.p.c.ActionEntityConverter      : ActionEntityConverter#parseActionType - reason=unknown action type, type=INTERNAL
2026-01-22T14:52:27.701+08:00  INFO --- [nio-8080-exec-4] c.a.a.a.p.i.SemanticActionProvider       : SemanticActionProvider#matchActions - reason=matching completed, userInput=我要请假, matchCount=1
2026-01-22T14:52:27.701+08:00  INFO --- [nio-8080-exec-4] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#beforeAgent - reason=match found, actionId=oa:leave:request, confidence=0.95, matchType=KEYWORD_EXACT
2026-01-22T14:52:27.712+08:00 DEBUG --- [nio-8080-exec-4] .s.p.e.p.ElasticsearchExperienceProvider : ElasticsearchExperienceProvider#query - reason=query completed, type=REACT, text=null, count=0
2026-01-22T14:52:27.712+08:00  INFO --- [nio-8080-exec-4] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#beforeAgent - reason=high confidence, using Planning direct execution with param collection, actionId=oa:leave:request, confidence=0.95
2026-01-22T14:52:27.713+08:00  INFO --- [nio-8080-exec-4] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handlePlanningDirectExecution - reason=direct execution, actionId=oa:leave:request
2026-01-22T14:52:27.713+08:00  INFO --- [nio-8080-exec-4] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handlePlanningDirectExecution - reason=missing required params, count=5, actionId=oa:leave:request
2026-01-22T14:52:27.713+08:00  INFO --- [nio-8080-exec-4] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handleMissingParameters - reason=asking for param, paramName=start_date, actionId=oa:leave:request
2026-01-22T14:52:27.713+08:00 DEBUG --- [nio-8080-exec-4] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#save - reason=session saved, sessionId=5c97a37e-8067-4337-a4af-9ac09847e538, ttl=PT30M
2026-01-22T14:52:27.713+08:00 DEBUG --- [nio-8080-exec-4] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#saveSession - reason=session saved, sessionId=5c97a37e-8067-4337-a4af-9ac09847e538
2026-01-22T14:52:27.713+08:00  INFO --- [nio-8080-exec-4] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handleMissingParameters - reason=session saved to store, sessionId=5c97a37e-8067-4337-a4af-9ac09847e538, actionId=oa:leave:request
2026-01-22T14:52:33.619+08:00 DEBUG --- [nio-8080-exec-9] c.a.a.a.s.a.s.JwtAuthenticationFilter    : JwtAuthenticationFilter#doFilterInternal - 设置用户认证: username=admin, roles=[ADMIN, USER]
2026-01-22T14:52:33.621+08:00  INFO --- [nio-8080-exec-9] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#loadAgent 加载 agent: research_agent
2026-01-22T14:52:33.621+08:00  INFO --- [nio-8080-exec-9] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#loadAgent 成功加载 agent: research_agent
2026-01-22T14:52:33.625+08:00 DEBUG --- [nio-8080-exec-9] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#beforeAgent - reason=checking unified intent
2026-01-22T14:52:33.625+08:00 DEBUG --- [nio-8080-exec-9] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#get - reason=session found, sessionId=5c97a37e-8067-4337-a4af-9ac09847e538, active=true
2026-01-22T14:52:33.625+08:00  INFO --- [nio-8080-exec-9] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#beforeAgent - reason=continuing param collection session (from store), sessionId=5c97a37e-8067-4337-a4af-9ac09847e538, userInput=2026-1-22 2026-1-23 类型 事假 理由 aa 审批人 25
2026-01-22T14:52:33.625+08:00  INFO --- [nio-8080-exec-9] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handleParamCollectionContinuation - reason=processing param input, sessionId=5c97a37e-8067-4337-a4af-9ac09847e538, actionId=oa:leave:request, userInput=2026-1-22 2026-1-23 类型 事假 理由 aa 审批人 25
2026-01-22T14:52:33.632+08:00  WARN --- [nio-8080-exec-9] c.a.a.a.p.p.c.ActionEntityConverter      : ActionEntityConverter#parseActionType - reason=unknown action type, type=INTERNAL
2026-01-22T14:52:36.188+08:00  INFO --- [nio-8080-exec-9] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handleParamCollectionContinuation - reason=LLM response, response=```json
{
  "extractedParams": {
    "start_date": "2026-01-22 00:00",
    "end_date": "2026-01-23 00:00",
    "types": "1",
    "reason": "aa",
    "check_uids": "25"
  },
  "missingParams": [],
  "nextQuestion": null
}
```
2026-01-22T14:52:36.188+08:00  INFO --- [nio-8080-exec-9] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handleParamCollectionContinuation - reason=params complete, executing action, actionId=oa:leave:request, params={end_date=2026-01-23 00:00, reason=aa, check_uids=25, types=1, start_date=2026-01-22 00:00}
2026-01-22T14:52:36.188+08:00 DEBUG --- [nio-8080-exec-9] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#close - reason=session closed, sessionId=5c97a37e-8067-4337-a4af-9ac09847e538
2026-01-22T14:52:36.188+08:00 DEBUG --- [nio-8080-exec-9] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#closeSession - reason=session closed, sessionId=5c97a37e-8067-4337-a4af-9ac09847e538
2026-01-22T14:52:36.188+08:00  INFO --- [nio-8080-exec-9] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handlePlanningDirectExecution - reason=direct execution, actionId=oa:leave:request
2026-01-22T14:52:36.188+08:00 DEBUG --- [nio-8080-exec-9] c.a.a.a.p.internal.DefaultPlanGenerator  : DefaultPlanGenerator#generate - reason=generating plan, actionId=oa:leave:request, actionName=提交OA请假申请
2026-01-22T14:52:36.188+08:00  INFO --- [nio-8080-exec-9] c.a.a.a.p.internal.DefaultPlanGenerator  : DefaultPlanGenerator#generate - reason=plan generated, planId=dece1098-523f-4870-b5a3-fbc34dd6d931, stepCount=1
2026-01-22T14:52:36.188+08:00  INFO --- [nio-8080-exec-9] c.a.a.a.p.internal.DefaultPlanExecutor   : DefaultPlanExecutor#execute - reason=starting plan execution, planId=dece1098-523f-4870-b5a3-fbc34dd6d931, actionId=oa:leave:request
2026-01-22T14:52:36.188+08:00 DEBUG --- [nio-8080-exec-9] c.a.a.a.p.internal.DefaultPlanExecutor   : DefaultPlanExecutor#executeSteps - reason=executing step, planId=dece1098-523f-4870-b5a3-fbc34dd6d931, stepId=execute, stepIndex=0
2026-01-22T14:52:36.188+08:00 DEBUG --- [nio-8080-exec-9] c.a.a.a.p.i.e.ExecuteStepExecutor        : AbstractStepExecutor#execute - reason=executing step, stepId=execute, type=EXECUTE
2026-01-22T14:52:36.188+08:00 DEBUG --- [nio-8080-exec-9] c.a.a.a.p.i.e.ExecuteStepExecutor        : ExecuteStepExecutor#doExecute - reason=executing execute step, stepId=execute
2026-01-22T14:52:36.188+08:00 DEBUG --- [nio-8080-exec-9] c.a.a.a.p.e.ActionExecutorFactory        : ActionExecutorFactory#execute - executing actionId=execute, type=INTERNAL, executor=InternalExecutor
2026-01-22T14:52:36.188+08:00 DEBUG --- [nio-8080-exec-9] c.a.a.a.p.e.ActionExecutorFactory        : ActionExecutorFactory#execute - skipping permission check (missing userId or systemId)
2026-01-22T14:52:36.188+08:00  INFO --- [nio-8080-exec-9] c.a.a.a.p.executor.InternalExecutor      : InternalExecutor#execute - invoking bean method, actionId=execute, bean=oaSystemActionService, method=execute
2026-01-22T14:52:36.189+08:00 DEBUG --- [nio-8080-exec-9] c.a.a.a.p.executor.InternalExecutor      : InternalExecutor#prepareArguments - passing entire params as Map argument
2026-01-22T14:52:36.193+08:00  WARN --- [nio-8080-exec-9] c.a.a.a.p.p.c.ActionEntityConverter      : ActionEntityConverter#parseActionType - reason=unknown action type, type=INTERNAL
2026-01-22T14:52:40.219+08:00  INFO --- [nio-8080-exec-9] c.a.a.a.planning.system.OaSystemHandler  : OaSystemHandler#execute - actionId=oa:leave:request, systemId=oa-system
2026-01-22T14:54:39.064+08:00  WARN --- [l-1 housekeeper] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=1m58s847ms577µs801ns).
2026-01-22T14:54:39.832+08:00 ERROR --- [nio-8080-exec-9] c.a.a.a.planning.system.OaSystemHandler  : OaSystemHandler#execute - failed, actionId=oa:leave:request, time=123643ms, error=Action未配置HTTP配置: oa:leave:request

java.lang.IllegalArgumentException: Action未配置HTTP配置: oa:leave:request
	at com.alibaba.assistant.agent.planning.system.OaSystemHandler.execute(OaSystemHandler.java:107)
	at com.alibaba.assistant.agent.planning.system.OaSystemActionService.execute(OaSystemActionService.java:65)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at com.alibaba.assistant.agent.planning.executor.InternalExecutor.execute(InternalExecutor.java:106)
	at com.alibaba.assistant.agent.planning.executor.ActionExecutorFactory.execute(ActionExecutorFactory.java:192)
	at com.alibaba.assistant.agent.planning.internal.executor.ExecuteStepExecutor.doExecute(ExecuteStepExecutor.java:65)
	at com.alibaba.assistant.agent.planning.internal.executor.AbstractStepExecutor.execute(AbstractStepExecutor.java:47)
	at com.alibaba.assistant.agent.planning.internal.DefaultPlanExecutor.executeSteps(DefaultPlanExecutor.java:127)
	at com.alibaba.assistant.agent.planning.internal.DefaultPlanExecutor.execute(DefaultPlanExecutor.java:78)
	at com.alibaba.assistant.agent.planning.intent.UnifiedIntentRecognitionHook.handlePlanningDirectExecution(UnifiedIntentRecognitionHook.java:439)
	at com.alibaba.assistant.agent.planning.intent.UnifiedIntentRecognitionHook.handleParamCollectionContinuation(UnifiedIntentRecognitionHook.java:696)
	at com.alibaba.assistant.agent.planning.intent.UnifiedIntentRecognitionHook.beforeAgent(UnifiedIntentRecognitionHook.java:186)
	at com.alibaba.cloud.ai.graph.executor.NodeExecutor.executeNode(NodeExecutor.java:122)
	at com.alibaba.cloud.ai.graph.executor.NodeExecutor.execute(NodeExecutor.java:84)
	at com.alibaba.cloud.ai.graph.executor.MainGraphExecutor.execute(MainGraphExecutor.java:108)
	at com.alibaba.cloud.ai.graph.executor.MainGraphExecutor.lambda$handleStartNode$0(MainGraphExecutor.java:135)
	at reactor.core.publisher.FluxDefer.subscribe(FluxDefer.java:46)
	at reactor.core.publisher.Flux.subscribe(Flux.java:8891)
	at reactor.core.publisher.FluxConcatArray$ConcatArraySubscriber.onComplete(FluxConcatArray.java:238)
	at reactor.core.publisher.FluxConcatArray.subscribe(FluxConcatArray.java:79)
	at reactor.core.publisher.FluxDefer.subscribe(FluxDefer.java:54)
	at reactor.core.publisher.Flux.subscribe(Flux.java:8891)
	at org.springframework.web.servlet.mvc.method.annotation.ReactiveTypeHandler$AbstractEmitterSubscriber.connect(ReactiveTypeHandler.java:295)
	at org.springframework.web.servlet.mvc.method.annotation.ReactiveTypeHandler.handleValue(ReactiveTypeHandler.java:168)
	at org.springframework.web.servlet.mvc.method.annotation.ResponseBodyEmitterReturnValueHandler.handleReturnValue(ResponseBodyEmitterReturnValueHandler.java:215)
	at org.springframework.web.method.support.HandlerMethodReturnValueHandlerComposite.handleReturnValue(HandlerMethodReturnValueHandlerComposite.java:78)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:136)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.alibaba.assistant.agent.start.auth.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:87)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$4(HandlerMappingIntrospector.java:267)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)

2026-01-22T14:54:39.833+08:00  INFO --- [nio-8080-exec-9] c.a.a.a.p.executor.InternalExecutor      : InternalExecutor#execute - method invoked successfully, actionId=execute, time=123645ms
2026-01-22T14:54:39.833+08:00  INFO --- [nio-8080-exec-9] c.a.a.a.p.i.e.ExecuteStepExecutor        : ExecuteStepExecutor#doExecute - reason=step executed, stepId=execute, success=true
2026-01-22T14:54:39.833+08:00  INFO --- [nio-8080-exec-9] c.a.a.a.p.internal.DefaultPlanExecutor   : DefaultPlanExecutor#execute - reason=plan completed, planId=dece1098-523f-4870-b5a3-fbc34dd6d931, stepCount=1
2026-01-22T14:54:39.833+08:00  INFO --- [nio-8080-exec-9] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handlePlanningDirectExecution - reason=execution completed, planId=dece1098-523f-4870-b5a3-fbc34dd6d931, success=true
2026-01-22T14:57:07.262+08:00 DEBUG --- [session-cleanup] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#delete - reason=session deleted, sessionId=4ac52547-8754-4ad2-bfc5-f68220234dc7
2026-01-22T14:57:07.262+08:00  INFO --- [session-cleanup] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#cleanupExpiredSessions - reason=cleaned expired sessions, count=1
2026-01-22T14:58:07.262+08:00 DEBUG --- [session-cleanup] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#delete - reason=session deleted, sessionId=5c97a37e-8067-4337-a4af-9ac09847e538
2026-01-22T14:58:07.262+08:00  INFO --- [session-cleanup] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#cleanupExpiredSessions - reason=cleaned expired sessions, count=1
2026-01-22T15:10:39.585+08:00 DEBUG --- [nio-8080-exec-8] c.a.a.a.s.a.s.JwtAuthenticationFilter    : JwtAuthenticationFilter#doFilterInternal - 设置用户认证: username=admin, roles=[ADMIN, USER]
2026-01-22T15:10:39.587+08:00  INFO --- [nio-8080-exec-8] c.a.c.a.a.s.controller.ThreadController  : Request received for POST /apps/research_agent/users/user-001/threads (service generates ID) with state: {}
2026-01-22T15:10:39.588+08:00  INFO --- [nio-8080-exec-8] c.a.c.a.a.s.service.ThreadServiceImpl    : Created thread: 020413a6-7dde-439f-b972-e2ff10d52b87 for app=research_agent, user=user-001
2026-01-22T15:10:39.588+08:00  INFO --- [nio-8080-exec-8] c.a.c.a.a.s.controller.ThreadController  : Thread created successfully with generated id: 020413a6-7dde-439f-b972-e2ff10d52b87
2026-01-22T15:10:39.601+08:00 DEBUG --- [nio-8080-exec-1] c.a.a.a.s.a.s.JwtAuthenticationFilter    : JwtAuthenticationFilter#doFilterInternal - 设置用户认证: username=admin, roles=[ADMIN, USER]
2026-01-22T15:10:39.603+08:00  INFO --- [nio-8080-exec-1] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#loadAgent 加载 agent: research_agent
2026-01-22T15:10:39.603+08:00  INFO --- [nio-8080-exec-1] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#loadAgent 成功加载 agent: research_agent
2026-01-22T15:10:39.606+08:00 DEBUG --- [nio-8080-exec-1] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#beforeAgent - reason=checking unified intent
2026-01-22T15:10:39.607+08:00 DEBUG --- [nio-8080-exec-1] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#get - reason=session not found, sessionId=020413a6-7dde-439f-b972-e2ff10d52b87
2026-01-22T15:10:39.607+08:00 DEBUG --- [nio-8080-exec-1] c.a.a.a.p.i.SemanticActionProvider       : SemanticActionProvider#matchActions - reason=matching actions, userInput=我要请假
2026-01-22T15:10:39.644+08:00 DEBUG --- [nio-8080-exec-3] c.a.a.a.s.a.s.JwtAuthenticationFilter    : JwtAuthenticationFilter#doFilterInternal - 设置用户认证: username=admin, roles=[ADMIN, USER]
2026-01-22T15:10:39.645+08:00  INFO --- [nio-8080-exec-3] c.a.c.a.a.s.controller.ThreadController  : Request received for GET /apps/research_agent/users/user-001/threads/020413a6-7dde-439f-b972-e2ff10d52b87
2026-01-22T15:10:40.000+08:00  WARN --- [nio-8080-exec-1] c.a.a.a.p.p.c.ActionEntityConverter      : ActionEntityConverter#parseActionType - reason=unknown action type, type=INTERNAL
2026-01-22T15:10:42.528+08:00  WARN --- [nio-8080-exec-1] c.a.a.a.p.p.c.ActionEntityConverter      : ActionEntityConverter#parseActionType - reason=unknown action type, type=INTERNAL
2026-01-22T15:10:42.529+08:00  INFO --- [nio-8080-exec-1] c.a.a.a.p.i.SemanticActionProvider       : SemanticActionProvider#matchActions - reason=matching completed, userInput=我要请假, matchCount=1
2026-01-22T15:10:42.529+08:00  INFO --- [nio-8080-exec-1] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#beforeAgent - reason=match found, actionId=oa:leave:request, confidence=0.95, matchType=KEYWORD_EXACT
2026-01-22T15:10:42.549+08:00 DEBUG --- [nio-8080-exec-1] .s.p.e.p.ElasticsearchExperienceProvider : ElasticsearchExperienceProvider#query - reason=query completed, type=REACT, text=null, count=0
2026-01-22T15:10:42.549+08:00  INFO --- [nio-8080-exec-1] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#beforeAgent - reason=high confidence, using Planning direct execution with param collection, actionId=oa:leave:request, confidence=0.95
2026-01-22T15:10:42.549+08:00  INFO --- [nio-8080-exec-1] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handlePlanningDirectExecution - reason=direct execution, actionId=oa:leave:request
2026-01-22T15:10:42.549+08:00  INFO --- [nio-8080-exec-1] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handlePlanningDirectExecution - reason=missing required params, count=5, actionId=oa:leave:request
2026-01-22T15:10:42.549+08:00  INFO --- [nio-8080-exec-1] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handleMissingParameters - reason=asking for param, paramName=start_date, actionId=oa:leave:request
2026-01-22T15:10:42.550+08:00 DEBUG --- [nio-8080-exec-1] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#save - reason=session saved, sessionId=020413a6-7dde-439f-b972-e2ff10d52b87, ttl=PT30M
2026-01-22T15:10:42.550+08:00 DEBUG --- [nio-8080-exec-1] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#saveSession - reason=session saved, sessionId=020413a6-7dde-439f-b972-e2ff10d52b87
2026-01-22T15:10:42.550+08:00  INFO --- [nio-8080-exec-1] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handleMissingParameters - reason=session saved to store, sessionId=020413a6-7dde-439f-b972-e2ff10d52b87, actionId=oa:leave:request
2026-01-22T15:11:01.374+08:00 DEBUG --- [nio-8080-exec-9] c.a.a.a.s.a.s.JwtAuthenticationFilter    : JwtAuthenticationFilter#doFilterInternal - 设置用户认证: username=admin, roles=[ADMIN, USER]
2026-01-22T15:11:01.376+08:00  INFO --- [nio-8080-exec-9] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#loadAgent 加载 agent: research_agent
2026-01-22T15:11:01.376+08:00  INFO --- [nio-8080-exec-9] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#loadAgent 成功加载 agent: research_agent
2026-01-22T15:11:01.381+08:00 DEBUG --- [nio-8080-exec-9] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#beforeAgent - reason=checking unified intent
2026-01-22T15:11:01.381+08:00 DEBUG --- [nio-8080-exec-9] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#get - reason=session found, sessionId=020413a6-7dde-439f-b972-e2ff10d52b87, active=true
2026-01-22T15:11:01.381+08:00  INFO --- [nio-8080-exec-9] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#beforeAgent - reason=continuing param collection session (from store), sessionId=020413a6-7dde-439f-b972-e2ff10d52b87, userInput=2026-1-22 2026-1-23 类型 事假 理由 aa 审批人 25
2026-01-22T15:11:01.381+08:00  INFO --- [nio-8080-exec-9] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handleParamCollectionContinuation - reason=processing param input, sessionId=020413a6-7dde-439f-b972-e2ff10d52b87, actionId=oa:leave:request, userInput=2026-1-22 2026-1-23 类型 事假 理由 aa 审批人 25
2026-01-22T15:11:01.389+08:00  WARN --- [nio-8080-exec-9] c.a.a.a.p.p.c.ActionEntityConverter      : ActionEntityConverter#parseActionType - reason=unknown action type, type=INTERNAL
2026-01-22T15:11:03.719+08:00  INFO --- [nio-8080-exec-9] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handleParamCollectionContinuation - reason=LLM response, response=```json
{
  "extractedParams": {"start_date": "2026-1-22", "end_date": "2026-1-23", "types": "1", "reason": "aa", "check_uids": "25"},
  "missingParams": [],
  "nextQuestion": null
}
```
2026-01-22T15:11:03.719+08:00  INFO --- [nio-8080-exec-9] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handleParamCollectionContinuation - reason=params complete, executing action, actionId=oa:leave:request, params={end_date=2026-1-23, reason=aa, check_uids=25, types=1, start_date=2026-1-22}
2026-01-22T15:11:03.719+08:00 DEBUG --- [nio-8080-exec-9] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#close - reason=session closed, sessionId=020413a6-7dde-439f-b972-e2ff10d52b87
2026-01-22T15:11:03.719+08:00 DEBUG --- [nio-8080-exec-9] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#closeSession - reason=session closed, sessionId=020413a6-7dde-439f-b972-e2ff10d52b87
2026-01-22T15:11:03.720+08:00  INFO --- [nio-8080-exec-9] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handlePlanningDirectExecution - reason=direct execution, actionId=oa:leave:request
2026-01-22T15:11:03.720+08:00 DEBUG --- [nio-8080-exec-9] c.a.a.a.p.internal.DefaultPlanGenerator  : DefaultPlanGenerator#generate - reason=generating plan, actionId=oa:leave:request, actionName=提交OA请假申请
2026-01-22T15:11:03.720+08:00  INFO --- [nio-8080-exec-9] c.a.a.a.p.internal.DefaultPlanGenerator  : DefaultPlanGenerator#generate - reason=plan generated, planId=95fd5e97-3f5d-4572-8f7e-87a8f6ab43a2, stepCount=1
2026-01-22T15:11:03.720+08:00  INFO --- [nio-8080-exec-9] c.a.a.a.p.internal.DefaultPlanExecutor   : DefaultPlanExecutor#execute - reason=starting plan execution, planId=95fd5e97-3f5d-4572-8f7e-87a8f6ab43a2, actionId=oa:leave:request
2026-01-22T15:11:03.720+08:00 DEBUG --- [nio-8080-exec-9] c.a.a.a.p.internal.DefaultPlanExecutor   : DefaultPlanExecutor#executeSteps - reason=executing step, planId=95fd5e97-3f5d-4572-8f7e-87a8f6ab43a2, stepId=execute, stepIndex=0
2026-01-22T15:11:03.720+08:00 DEBUG --- [nio-8080-exec-9] c.a.a.a.p.i.e.ExecuteStepExecutor        : AbstractStepExecutor#execute - reason=executing step, stepId=execute, type=EXECUTE
2026-01-22T15:11:03.720+08:00 DEBUG --- [nio-8080-exec-9] c.a.a.a.p.i.e.ExecuteStepExecutor        : ExecuteStepExecutor#doExecute - reason=executing execute step, stepId=execute
2026-01-22T15:11:03.720+08:00 DEBUG --- [nio-8080-exec-9] c.a.a.a.p.e.ActionExecutorFactory        : ActionExecutorFactory#execute - executing actionId=execute, type=INTERNAL, executor=InternalExecutor
2026-01-22T15:11:03.720+08:00 DEBUG --- [nio-8080-exec-9] c.a.a.a.p.e.ActionExecutorFactory        : ActionExecutorFactory#execute - skipping permission check (missing userId or systemId)
2026-01-22T15:11:03.720+08:00  INFO --- [nio-8080-exec-9] c.a.a.a.p.executor.InternalExecutor      : InternalExecutor#execute - invoking bean method, actionId=execute, bean=oaSystemActionService, method=execute
2026-01-22T15:11:03.720+08:00 DEBUG --- [nio-8080-exec-9] c.a.a.a.p.executor.InternalExecutor      : InternalExecutor#prepareArguments - passing entire params as Map argument
2026-01-22T15:11:03.725+08:00  WARN --- [nio-8080-exec-9] c.a.a.a.p.p.c.ActionEntityConverter      : ActionEntityConverter#parseActionType - reason=unknown action type, type=INTERNAL
2026-01-22T15:11:03.725+08:00  INFO --- [nio-8080-exec-9] c.a.a.a.planning.system.OaSystemHandler  : OaSystemHandler#execute - actionId=oa:leave:request, systemId=oa-system
2026-01-22T15:11:06.641+08:00 DEBUG --- [nio-8080-exec-9] c.a.a.a.planning.system.OaSystemHandler  : OaSystemHandler#execute - endpoint=/api/leave/submit, method=POST
2026-01-22T15:11:06.641+08:00 ERROR --- [nio-8080-exec-9] c.a.a.a.planning.system.OaSystemHandler  : OaSystemHandler#execute - failed, actionId=oa:leave:request, time=2921ms, error=context中缺少assistantUserId

java.lang.IllegalArgumentException: context中缺少assistantUserId
	at com.alibaba.assistant.agent.planning.system.OaSystemHandler.execute(OaSystemHandler.java:121)
	at com.alibaba.assistant.agent.planning.system.OaSystemActionService.execute(OaSystemActionService.java:65)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at com.alibaba.assistant.agent.planning.executor.InternalExecutor.execute(InternalExecutor.java:106)
	at com.alibaba.assistant.agent.planning.executor.ActionExecutorFactory.execute(ActionExecutorFactory.java:192)
	at com.alibaba.assistant.agent.planning.internal.executor.ExecuteStepExecutor.doExecute(ExecuteStepExecutor.java:65)
	at com.alibaba.assistant.agent.planning.internal.executor.AbstractStepExecutor.execute(AbstractStepExecutor.java:47)
	at com.alibaba.assistant.agent.planning.internal.DefaultPlanExecutor.executeSteps(DefaultPlanExecutor.java:127)
	at com.alibaba.assistant.agent.planning.internal.DefaultPlanExecutor.execute(DefaultPlanExecutor.java:78)
	at com.alibaba.assistant.agent.planning.intent.UnifiedIntentRecognitionHook.handlePlanningDirectExecution(UnifiedIntentRecognitionHook.java:439)
	at com.alibaba.assistant.agent.planning.intent.UnifiedIntentRecognitionHook.handleParamCollectionContinuation(UnifiedIntentRecognitionHook.java:696)
	at com.alibaba.assistant.agent.planning.intent.UnifiedIntentRecognitionHook.beforeAgent(UnifiedIntentRecognitionHook.java:186)
	at com.alibaba.cloud.ai.graph.executor.NodeExecutor.executeNode(NodeExecutor.java:122)
	at com.alibaba.cloud.ai.graph.executor.NodeExecutor.execute(NodeExecutor.java:84)
	at com.alibaba.cloud.ai.graph.executor.MainGraphExecutor.execute(MainGraphExecutor.java:108)
	at com.alibaba.cloud.ai.graph.executor.MainGraphExecutor.lambda$handleStartNode$0(MainGraphExecutor.java:135)
	at reactor.core.publisher.FluxDefer.subscribe(FluxDefer.java:46)
	at reactor.core.publisher.Flux.subscribe(Flux.java:8891)
	at reactor.core.publisher.FluxConcatArray$ConcatArraySubscriber.onComplete(FluxConcatArray.java:238)
	at reactor.core.publisher.FluxConcatArray.subscribe(FluxConcatArray.java:79)
	at reactor.core.publisher.FluxDefer.subscribe(FluxDefer.java:54)
	at reactor.core.publisher.Flux.subscribe(Flux.java:8891)
	at org.springframework.web.servlet.mvc.method.annotation.ReactiveTypeHandler$AbstractEmitterSubscriber.connect(ReactiveTypeHandler.java:295)
	at org.springframework.web.servlet.mvc.method.annotation.ReactiveTypeHandler.handleValue(ReactiveTypeHandler.java:168)
	at org.springframework.web.servlet.mvc.method.annotation.ResponseBodyEmitterReturnValueHandler.handleReturnValue(ResponseBodyEmitterReturnValueHandler.java:215)
	at org.springframework.web.method.support.HandlerMethodReturnValueHandlerComposite.handleReturnValue(HandlerMethodReturnValueHandlerComposite.java:78)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:136)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.alibaba.assistant.agent.start.auth.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:87)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$4(HandlerMappingIntrospector.java:267)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)

2026-01-22T15:11:06.643+08:00  INFO --- [nio-8080-exec-9] c.a.a.a.p.executor.InternalExecutor      : InternalExecutor#execute - method invoked successfully, actionId=execute, time=2923ms
2026-01-22T15:11:06.643+08:00  INFO --- [nio-8080-exec-9] c.a.a.a.p.i.e.ExecuteStepExecutor        : ExecuteStepExecutor#doExecute - reason=step executed, stepId=execute, success=true
2026-01-22T15:11:06.643+08:00  INFO --- [nio-8080-exec-9] c.a.a.a.p.internal.DefaultPlanExecutor   : DefaultPlanExecutor#execute - reason=plan completed, planId=95fd5e97-3f5d-4572-8f7e-87a8f6ab43a2, stepCount=1
2026-01-22T15:11:06.643+08:00  INFO --- [nio-8080-exec-9] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handlePlanningDirectExecution - reason=execution completed, planId=95fd5e97-3f5d-4572-8f7e-87a8f6ab43a2, success=true
2026-01-22T15:15:58.167+08:00  INFO --- [r-shutdown-hook] c.a.c.a.g.internal.node.ParallelNode     : Shutting down ParallelNode default executor
2026-01-22T15:15:58.167+08:00  INFO --- [r-shutdown-hook] c.a.c.a.g.internal.node.ParallelNode     : ParallelNode default thread pool terminated
2026-01-22T15:15:58.168+08:00  INFO --- [r-shutdown-hook] c.a.c.a.g.internal.node.ParallelNode     : ParallelNode default executor shut down successfully
2026-01-22T15:15:58.173+08:00  INFO --- [ionShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2026-01-22T15:15:58.183+08:00  INFO --- [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2026-01-22T15:15:58.194+08:00  INFO --- [ionShutdownHook] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#shutdown - reason=shutdown completed
2026-01-22T15:15:58.195+08:00  INFO --- [ionShutdownHook] c.a.a.a.e.e.GraphBasedEvaluationExecutor : Shutting down ExecutorService
2026-01-22T15:15:58.198+08:00  INFO --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2026-01-22T15:15:58.213+08:00  INFO --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2026-01-22T15:16:08.552+08:00  INFO --- [           main] c.a.a.a.start.AssistantAgentApplication  : Starting AssistantAgentApplication using Java 21.0.9 with PID 4884 (D:\devfive\AssistantAgent\assistant-agent-start\target\classes started by zhou_ in D:\devfive\AssistantAgent)
2026-01-22T15:16:08.554+08:00 DEBUG --- [           main] c.a.a.a.start.AssistantAgentApplication  : Running with Spring Boot v3.4.8, Spring v6.2.9
2026-01-22T15:16:08.554+08:00  INFO --- [           main] c.a.a.a.start.AssistantAgentApplication  : No active profile set, falling back to 1 default profile: "default"
2026-01-22T15:16:10.132+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Elasticsearch repositories in DEFAULT mode.
2026-01-22T15:16:10.168+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 26 ms. Found 0 Elasticsearch repository interfaces.
2026-01-22T15:16:10.176+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Reactive Elasticsearch repositories in DEFAULT mode.
2026-01-22T15:16:10.184+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 5 ms. Found 0 Reactive Elasticsearch repository interfaces.
2026-01-22T15:16:10.319+08:00  WARN --- [           main] o.m.s.mapper.ClassPathMapperScanner      : Skipping MapperFactoryBean with name 'learningRecordMapper' and 'com.alibaba.assistant.agent.start.persistence.learning.mapper.LearningRecordMapper' mapperInterface. Bean already defined with the same name!
2026-01-22T15:16:10.319+08:00  WARN --- [           main] o.m.s.mapper.ClassPathMapperScanner      : Skipping MapperFactoryBean with name 'triggerDefinitionMapper' and 'com.alibaba.assistant.agent.start.persistence.trigger.mapper.TriggerDefinitionMapper' mapperInterface. Bean already defined with the same name!
2026-01-22T15:16:10.319+08:00  WARN --- [           main] o.m.s.mapper.ClassPathMapperScanner      : Skipping MapperFactoryBean with name 'triggerExecutionRecordMapper' and 'com.alibaba.assistant.agent.start.persistence.trigger.mapper.TriggerExecutionRecordMapper' mapperInterface. Bean already defined with the same name!
2026-01-22T15:16:10.320+08:00  WARN --- [           main] o.m.s.mapper.ClassPathMapperScanner      : Skipping MapperFactoryBean with name 'actionRegistryMapper' and 'com.alibaba.assistant.agent.planning.persistence.mapper.ActionRegistryMapper' mapperInterface. Bean already defined with the same name!
2026-01-22T15:16:10.320+08:00  WARN --- [           main] o.m.s.mapper.ClassPathMapperScanner      : Skipping MapperFactoryBean with name 'externalSystemConfigMapper' and 'com.alibaba.assistant.agent.planning.persistence.mapper.ExternalSystemConfigMapper' mapperInterface. Bean already defined with the same name!
2026-01-22T15:16:11.663+08:00  INFO --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2026-01-22T15:16:11.694+08:00  INFO --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2026-01-22T15:16:11.695+08:00  INFO --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.43]
2026-01-22T15:16:11.786+08:00  INFO --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2026-01-22T15:16:11.786+08:00  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 3169 ms
2026-01-22T15:16:11.811+08:00  INFO --- [           main] c.a.a.a.s.a.security.JwtTokenProvider    : JwtTokenProvider#init - JWT 密钥已初始化
2026-01-22T15:16:11.868+08:00 DEBUG --- [           main] c.a.a.a.s.a.s.JwtAuthenticationFilter    : Filter 'jwtAuthenticationFilter' configured for use
2026-01-22T15:16:12.261+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#init - reason=search extension framework is enabled
2026-01-22T15:16:12.263+08:00  INFO --- [           main] c.a.a.a.s.s.MockBaiduWebSearchProvider   : MockBaiduWebSearchProvider#init - reason=使用简单模式初始化
2026-01-22T15:16:12.266+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#unifiedSearchCodeactTool - reason=创建统一搜索工具, providerCount=3
2026-01-22T15:16:12.325+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#init - reason=planning extension is enabled
2026-01-22T15:16:12.328+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#init - reason=ES configuration class loaded (elasticsearch.enabled=true)
2026-01-22T15:16:12.329+08:00  INFO --- [           main] toConfiguration$MybatisPlusConfiguration : MybatisPlusConfiguration#init - reason=MySQL configuration class loaded (mysql.enabled=true, MyBatisPlus present)
2026-01-22T15:16:12.371+08:00  INFO --- [           main] toConfiguration$MybatisPlusConfiguration : MybatisPlusConfiguration#actionEntityConverter - reason=creating entity converter
2026-01-22T15:16:12.373+08:00  INFO --- [           main] toConfiguration$MybatisPlusConfiguration : MybatisPlusConfiguration#mybatisPlusActionRepository - reason=ActionRegistryMapper found, creating MySQL repository
2026-01-22T15:16:12.950+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#actionVectorizationService - reason=creating ES vectorization service
2026-01-22T15:16:13.033+08:00  INFO --- [           main] c.a.a.a.p.v.ActionVectorizationService   : ActionVectorizationService#init - reason=ES index initialized on startup
2026-01-22T15:16:13.046+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#semanticActionProvider - reason=creating semantic action provider, semanticWeight=0.6, keywordWeight=0.4, matchThreshold=0.5
2026-01-22T15:16:13.051+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#defaultPlanGenerator - reason=creating default plan generator
2026-01-22T15:16:13.053+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#planActionCodeactTool - reason=creating plan_action tool
2026-01-22T15:16:13.056+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#queryStepExecutor - reason=creating query step executor
2026-01-22T15:16:13.059+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#inputStepExecutor - reason=creating input step executor
2026-01-22T15:16:13.061+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#executeStepExecutor - reason=creating execute step executor
2026-01-22T15:16:13.062+08:00  INFO --- [           main] f.a.AutowiredAnnotationBeanPostProcessor : Inconsistent constructor declaration on bean with name 'actionExecutorFactory': single autowire-marked constructor flagged as optional - this constructor is effectively required since there is no default constructor to fall back to: public com.alibaba.assistant.agent.planning.executor.ActionExecutorFactory(java.util.List,com.alibaba.assistant.agent.planning.permission.interceptor.PermissionInterceptor)
2026-01-22T15:16:13.065+08:00  INFO --- [           main] .a.a.a.p.c.ParamOptionsAutoConfiguration : ParamOptionsAutoConfiguration - Parameter options module initialized
2026-01-22T15:16:13.066+08:00  INFO --- [           main] .a.a.a.p.c.ParamOptionsAutoConfiguration : ParamOptionsAutoConfiguration - Creating RestTemplate for HTTP handlers
2026-01-22T15:16:13.076+08:00  INFO --- [           main] c.a.a.a.planning.executor.HttpExecutor   : HttpExecutor#init - initialized
2026-01-22T15:16:13.077+08:00  INFO --- [           main] c.a.a.a.p.executor.InternalExecutor      : InternalExecutor#init - initialized
2026-01-22T15:16:13.084+08:00  INFO --- [           main] c.a.a.a.p.p.a.PermissionAdapterRegistry  : PermissionAdapterRegistry#registerAdapter - registered adapter: system=gov-platform, name=政务服务平台权限适配器
2026-01-22T15:16:13.084+08:00  INFO --- [           main] c.a.a.a.p.p.a.PermissionAdapterRegistry  : PermissionAdapterRegistry#registerAdapter - registered adapter: system=oa-system, name=OA办公系统权限适配器
2026-01-22T15:16:13.084+08:00  INFO --- [           main] c.a.a.a.p.p.a.PermissionAdapterRegistry  : PermissionAdapterRegistry initialized with 2 adapters: [gov-platform, oa-system]
2026-01-22T15:16:13.088+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U001, system=oa-system, externalUser=zhang.san@company.com
2026-01-22T15:16:13.088+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U001, system=gov-platform, externalUser=320102199001011234
2026-01-22T15:16:13.088+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U002, system=oa-system, externalUser=li.si@company.com
2026-01-22T15:16:13.089+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U003, system=oa-system, externalUser=wang.wu@company.com
2026-01-22T15:16:13.089+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U003, system=gov-platform, externalUser=leader_001
2026-01-22T15:16:13.089+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U004, system=gov-platform, externalUser=staff_001
2026-01-22T15:16:13.089+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U005, system=oa-system, externalUser=sun.qi@company.com
2026-01-22T15:16:13.089+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService initialized with demo data
2026-01-22T15:16:13.091+08:00  INFO --- [           main] c.a.a.a.p.c.PermissionAutoConfiguration  : PermissionAutoConfiguration - creating PermissionInterceptor
2026-01-22T15:16:13.093+08:00  INFO --- [           main] c.a.a.a.p.e.ActionExecutorFactory        : ActionExecutorFactory#init - initialized executors: INTERNAL(InternalExecutor), HTTP(HttpExecutor), DATA_AGENT(DataAgentExecutor), MCP(McpExecutor)
2026-01-22T15:16:13.093+08:00  INFO --- [           main] c.a.a.a.p.e.ActionExecutorFactory        : ActionExecutorFactory#init - permission interceptor enabled
2026-01-22T15:16:13.094+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#apiCallStepExecutor - reason=creating api call step executor
2026-01-22T15:16:13.098+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#validationStepExecutor - reason=creating validation step executor
2026-01-22T15:16:13.101+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#stepExecutorRegistry - reason=creating executor registry, executorCount=5
2026-01-22T15:16:13.102+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=QUERY, executorClass=QueryStepExecutor
2026-01-22T15:16:13.102+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=INPUT, executorClass=InputStepExecutor
2026-01-22T15:16:13.102+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=EXECUTE, executorClass=ExecuteStepExecutor
2026-01-22T15:16:13.102+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=API_CALL, executorClass=ApiCallStepExecutor
2026-01-22T15:16:13.102+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=VALIDATION, executorClass=ValidationStepExecutor
2026-01-22T15:16:13.102+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#defaultPlanExecutor - reason=creating default plan executor
2026-01-22T15:16:13.105+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#executeActionCodeactTool - reason=creating execute_action tool
2026-01-22T15:16:13.107+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#listActionsCodeactTool - reason=creating list_actions tool
2026-01-22T15:16:13.109+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#getActionDetailsCodeactTool - reason=creating get_action_details tool
2026-01-22T15:16:13.110+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#executeSystemActionCodeactTool - reason=creating execute_system_action tool
2026-01-22T15:16:13.190+08:00  INFO --- [           main] c.a.a.a.start.config.PersistenceConfig   : PersistenceConfig#init - reason=persistence configuration loaded
2026-01-22T15:16:13.192+08:00  INFO --- [           main] c.a.a.a.start.config.PersistenceConfig   : PersistenceConfig#elasticsearchExperienceProvider - reason=creating Elasticsearch experience provider (PRIMARY), indexName=experiences
2026-01-22T15:16:13.199+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#<init> - reason=初始化默认评估套件配置, experienceProviderAvailable=true
2026-01-22T15:16:13.202+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#evaluatorRegistry - reason=创建 EvaluatorRegistry Bean
2026-01-22T15:16:13.204+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'llm-based' of type LLMBasedEvaluator
2026-01-22T15:16:13.206+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'passthrough' of type RuleBasedEvaluator
2026-01-22T15:16:13.208+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'react_experience_evaluator' of type RuleBasedEvaluator
2026-01-22T15:16:13.208+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createDefaultEvaluatorRegistry - reason=注册 React 阶段经验检索评估器
2026-01-22T15:16:13.208+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'codeact_experience_evaluator' of type RuleBasedEvaluator
2026-01-22T15:16:13.208+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createDefaultEvaluatorRegistry - reason=注册 CodeAct 阶段经验检索评估器
2026-01-22T15:16:13.209+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#evaluationService - reason=创建默认 EvaluationService, sharedRegistryEvaluators=[llm-based, passthrough, codeact_experience_evaluator, react_experience_evaluator]
2026-01-22T15:16:13.211+08:00 DEBUG --- [           main] c.a.a.a.e.e.GraphBasedEvaluationExecutor : Created default ExecutorService for batch processing
2026-01-22T15:16:13.212+08:00  INFO --- [           main] .c.ExperienceEvaluationCriterionProvider : ExperienceEvaluationCriterionProvider#<init> - reason=初始化经验评估 Criterion 提供者
2026-01-22T15:16:13.215+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#structuredParamExtractor - reason=creating structured param extractor
2026-01-22T15:16:13.226+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#parameterValidator - reason=creating parameter validator
2026-01-22T15:16:13.228+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#sessionProvider - reason=creating in-memory session provider
2026-01-22T15:16:13.229+08:00  INFO --- [           main] c.a.a.a.p.s.InMemorySessionProvider      : InMemorySessionProvider#init - initialized
2026-01-22T15:16:13.230+08:00  INFO --- [           main] c.a.a.a.p.s.ParamCollectionService       : ParamCollectionService#init - sessionProvider=InMemory
2026-01-22T15:16:13.232+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'action_intent_evaluator' of type ActionIntentEvaluator
2026-01-22T15:16:13.232+08:00  INFO --- [           main] p.i.PlanningIntegrationAutoConfiguration : PlanningIntegrationAutoConfiguration#actionIntentEvaluator - initialized and registered, paramCollection=true, llmVerification=true, maxCandidates=5
2026-01-22T15:16:13.233+08:00  INFO --- [           main] .p.i.PlanningEvaluationCriterionProvider : PlanningEvaluationCriterionProvider#init - initialized, llmVerificationEnabled=true
2026-01-22T15:16:13.233+08:00  INFO --- [           main] p.i.PlanningIntegrationAutoConfiguration : PlanningIntegrationAutoConfiguration#planningEvaluationCriterionProvider - registered planning evaluation criterion provider
2026-01-22T15:16:13.235+08:00  INFO --- [           main] .c.ExperienceEvaluationCriterionProvider : ExperienceEvaluationCriterionProvider#getReactPhaseCriteria - reason=提供 React 阶段评估 Criteria
2026-01-22T15:16:13.238+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createReactPhaseSuite - reason=添加自定义 Criterion, provider=ExperienceEvaluationCriterionProvider, count=3
2026-01-22T15:16:13.239+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createReactPhaseSuite - reason=添加自定义 Criterion, provider=PlanningEvaluationCriterionProvider, count=2
2026-01-22T15:16:13.249+08:00  INFO --- [           main] a.a.e.a.BatchAggregationStrategyRegistry : Registered batch aggregation strategy: ANY_TRUE
2026-01-22T15:16:13.250+08:00  INFO --- [           main] a.a.e.a.BatchAggregationStrategyRegistry : Registered batch aggregation strategy: ALL_TRUE
2026-01-22T15:16:13.299+08:00  INFO --- [           main] c.a.c.a.g.internal.node.ParallelNode     : Calculated core pool size: 32 (CPU cores: 16)
2026-01-22T15:16:13.299+08:00  INFO --- [           main] c.a.c.a.g.internal.node.ParallelNode     : Calculated maximum pool size: 64 (CPU cores: 16)
2026-01-22T15:16:13.299+08:00  INFO --- [           main] c.a.c.a.g.internal.node.ParallelNode     : Calculated queue capacity: 1000
2026-01-22T15:16:13.300+08:00  INFO --- [           main] c.a.a.a.e.DefaultEvaluationService       : Registered evaluation suite: react-phase-suite
2026-01-22T15:16:13.300+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#evaluationService - reason=注册 React Phase Suite, suiteId=react-phase-suite
2026-01-22T15:16:13.301+08:00  INFO --- [           main] .c.ExperienceEvaluationCriterionProvider : ExperienceEvaluationCriterionProvider#getCodeActPhaseCriteria - reason=提供 CodeAct 阶段评估 Criteria
2026-01-22T15:16:13.301+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createCodeActPhaseSuite - reason=添加自定义 Criterion, provider=ExperienceEvaluationCriterionProvider, count=3
2026-01-22T15:16:13.301+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createCodeActPhaseSuite - reason=添加自定义 Criterion, provider=PlanningEvaluationCriterionProvider, count=2
2026-01-22T15:16:13.301+08:00  INFO --- [           main] a.a.e.a.BatchAggregationStrategyRegistry : Registered batch aggregation strategy: ANY_TRUE
2026-01-22T15:16:13.301+08:00  INFO --- [           main] a.a.e.a.BatchAggregationStrategyRegistry : Registered batch aggregation strategy: ALL_TRUE
2026-01-22T15:16:13.302+08:00  INFO --- [           main] c.a.a.a.e.DefaultEvaluationService       : Registered evaluation suite: codeact-phase-suite
2026-01-22T15:16:13.302+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#evaluationService - reason=注册 CodeAct Phase Suite, suiteId=codeact-phase-suite
2026-01-22T15:16:13.304+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#codeactEvaluationContextFactory - reason=创建 EvaluationContextFactory
2026-01-22T15:16:13.305+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#codeactEvaluationResultAttacher - reason=创建 EvaluationResultAttacher
2026-01-22T15:16:13.309+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#reactPhaseEvaluationHooks - reason=创建 React Phase ModelInputEvaluationHook
2026-01-22T15:16:13.311+08:00  INFO --- [           main] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#<init> - reason=初始化, phase=REACT, providerCount=1
2026-01-22T15:16:13.311+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#reactPhaseEvaluationHooks - reason=创建 React Phase EvaluationPromptInjectionHook, providersCount=2
2026-01-22T15:16:13.312+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#codeactPhaseEvaluationHooks - reason=创建 CodeAct Phase ModelInputEvaluationHook
2026-01-22T15:16:13.312+08:00  INFO --- [           main] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#<init> - reason=初始化, phase=CODEACT, providerCount=1
2026-01-22T15:16:13.313+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#codeactPhaseEvaluationHooks - reason=创建 CodeAct Phase EvaluationPromptInjectionHook, providersCount=2
2026-01-22T15:16:13.315+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#keywordMatcher - reason=creating keyword matcher
2026-01-22T15:16:13.319+08:00  INFO --- [           main] .ParamCollectionSessionAutoConfiguration : ParamCollectionSessionAutoConfiguration#inMemoryParamCollectionSessionStore - reason=creating in-memory session store (Redis not available), ttl=PT30M
2026-01-22T15:16:13.319+08:00  WARN --- [           main] .ParamCollectionSessionAutoConfiguration : ParamCollectionSessionAutoConfiguration#inMemoryParamCollectionSessionStore - reason=WARNING: In-memory session store is not suitable for distributed environment!
2026-01-22T15:16:13.321+08:00  INFO --- [           main] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#<init> - reason=initialized, defaultTtl=PT30M
2026-01-22T15:16:13.321+08:00  WARN --- [           main] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#<init> - reason=WARNING: Using in-memory session store, not suitable for distributed environment!
2026-01-22T15:16:13.324+08:00  INFO --- [           main] iguration$UnifiedIntentHookConfiguration : UnifiedIntentHookConfiguration#unifiedIntentRecognitionHook - reason=creating unified intent hook, experienceProviderPresent=true, chatModelPresent=true, sessionStorePresent=true, directExecuteThreshold=0.95, hintThreshold=0.5
2026-01-22T15:16:13.455+08:00  INFO --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2026-01-22T15:16:13.720+08:00  INFO --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@448fa659
2026-01-22T15:16:13.722+08:00  INFO --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2026-01-22T15:16:13.867+08:00  WARN --- [           main] c.a.a.a.p.p.c.ActionEntityConverter      : ActionEntityConverter#parseActionType - reason=unknown action type, type=INTERNAL
2026-01-22T15:16:13.893+08:00 DEBUG --- [           main] c.a.a.a.planning.intent.KeywordMatcher   : KeywordMatcher#registerAction - actionId=oa:leave:request, keywords=57
2026-01-22T15:16:13.893+08:00  INFO --- [           main] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#initKeywordMatcher - reason=initialized, actionCount=1, keywordIndexSize=57
2026-01-22T15:16:13.898+08:00  INFO --- [           main] c.a.a.a.start.config.PersistenceConfig   : PersistenceConfig#elasticsearchExperienceRepository - reason=creating Elasticsearch experience repository (PRIMARY), indexName=experiences
2026-01-22T15:16:13.905+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#init - reason=reply module enabled
2026-01-22T15:16:13.907+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactToolFactory - reason=创建CodeactTool工厂, channels=1
2026-01-22T15:16:13.907+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#init - reason=工厂初始化完成, channels=1
2026-01-22T15:16:13.918+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=开始创建Reply工具
2026-01-22T15:16:13.922+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#createTools - reason=创建工具成功, toolName=send_success_message, channelCode=IDE_TEXT
2026-01-22T15:16:13.923+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#createTools - reason=创建工具成功, toolName=send_error_message, channelCode=IDE_TEXT
2026-01-22T15:16:13.923+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#createTools - reason=创建工具成功, toolName=send_notification, channelCode=IDE_TEXT
2026-01-22T15:16:13.923+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#createTools - reason=工具创建完成, totalCount=3
2026-01-22T15:16:13.923+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=Reply工具创建完成, count=3
2026-01-22T15:16:13.923+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=创建Reply工具, index=1, name=send_success_message, description=Send a success message to the IDE console
2026-01-22T15:16:13.923+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=创建Reply工具, index=2, name=send_error_message, description=Send an error message to the IDE console
2026-01-22T15:16:13.923+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=创建Reply工具, index=3, name=send_notification, description=Send a notification message
2026-01-22T15:16:13.924+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactToolFactory - reason=创建SearchCodeactTool工厂, providerCount=3
2026-01-22T15:16:13.952+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactToolFactory - reason=创建TriggerCodeactTool工厂
2026-01-22T15:16:13.952+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=开始创建Trigger工具
2026-01-22T15:16:13.954+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=创建SubscribeTriggerCodeactTool成功
2026-01-22T15:16:13.955+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=创建UnsubscribeTriggerCodeactTool成功
2026-01-22T15:16:13.956+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=创建ListTriggersCodeactTool成功
2026-01-22T15:16:13.958+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=创建GetTriggerDetailCodeactTool成功
2026-01-22T15:16:13.958+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=触发器工具创建完成, count=4
2026-01-22T15:16:13.958+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=Trigger工具创建完成, count=4
2026-01-22T15:16:13.958+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=创建Trigger工具, index=1, name=subscribe_trigger, description=创建并订阅一个新的触发器
2026-01-22T15:16:13.958+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=创建Trigger工具, index=2, name=unsubscribe_trigger, description=取消订阅并删除一个触发器
2026-01-22T15:16:13.958+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=创建Trigger工具, index=3, name=list_triggers, description=列出所有触发器
2026-01-22T15:16:13.958+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=创建Trigger工具, index=4, name=get_trigger_detail, description=获取指定触发器的详细信息
2026-01-22T15:16:13.964+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#planningCodeactTools - reason=creating planning tools list
2026-01-22T15:16:13.964+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#planningCodeactTools - reason=created planning tools, count=5
2026-01-22T15:16:13.971+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=创建 CodeactAgent
2026-01-22T15:16:13.971+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=配置 MemorySaver 以支持多轮对话上下文保持
2026-01-22T15:16:13.971+08:00  WARN --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=临时禁用 streaming 模式以排查循环问题
2026-01-22T15:16:13.972+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加UnifiedSearchCodeactTool
2026-01-22T15:16:13.974+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockBaiduWebSearchProvider, toolName=search_web
2026-01-22T15:16:13.976+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockKnowledgeStoreSearchProvider, toolName=search_knowledge
2026-01-22T15:16:13.977+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockProjectContextSearchProvider, toolName=search_project
2026-01-22T15:16:13.977+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=搜索工具创建完成, totalCount=3
2026-01-22T15:16:13.977+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加SearchCodeactTools, count=3
2026-01-22T15:16:13.977+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加ReplyCodeactTools, count=3
2026-01-22T15:16:13.977+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加TriggerCodeactTools, count=4
2026-01-22T15:16:13.977+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加PlanningCodeactTools, count=5
2026-01-22T15:16:13.977+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#createMcpDynamicTools - reason=Creating MCP dynamic tools
2026-01-22T15:16:13.982+08:00  INFO --- [           main] c.a.a.a.e.d.mcp.McpDynamicToolFactory    : McpDynamicToolFactory#createTools - reason=开始创建MCP动态工具
2026-01-22T15:16:13.984+08:00  INFO --- [           main] c.a.a.a.e.d.mcp.McpDynamicToolFactory    : McpDynamicToolFactory#createTools - reason=无可用的MCP工具
2026-01-22T15:16:13.985+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#createMcpDynamicTools - reason=MCP dynamic tools created, count=0
2026-01-22T15:16:13.985+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=Added MCP dynamic tools, count=0
2026-01-22T15:16:13.985+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#createHttpDynamicTools - reason=HTTP dynamic tools disabled by default
2026-01-22T15:16:13.985+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=合并后CodeactTool总数, count=16
2026-01-22T15:16:13.985+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=React阶段使用内置工具(write_code, execute_code, write_condition_code)
2026-01-22T15:16:13.985+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=注入 React Phase 评估 Hooks, count=2
2026-01-22T15:16:13.985+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=注入 CodeAct Phase 评估 Hooks, count=2
2026-01-22T15:16:13.985+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=已准备注入UnifiedIntentRecognitionHook
2026-01-22T15:16:13.988+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 开始构建CodeactAgent
2026-01-22T15:16:13.991+08:00  INFO --- [           main] .a.a.a.c.t.s.DefaultReturnSchemaRegistry : DefaultReturnSchemaRegistry#<init> - reason=创建新实例, hashCode=2114535884
2026-01-22T15:16:13.992+08:00 DEBUG --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#<init> - reason=创建注册表, returnSchemaRegistry=DefaultReturnSchemaRegistry
2026-01-22T15:16:13.992+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=创建默认CodeactToolRegistry
2026-01-22T15:16:13.992+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=开始注册CodeactTool, count=16
2026-01-22T15:16:13.992+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=unified_search
2026-01-22T15:16:13.992+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=unified_search
2026-01-22T15:16:13.992+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=search_web
2026-01-22T15:16:13.992+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=search_web
2026-01-22T15:16:13.992+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=search_knowledge
2026-01-22T15:16:13.992+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=search_knowledge
2026-01-22T15:16:13.992+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=search_project
2026-01-22T15:16:13.992+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=search_project
2026-01-22T15:16:13.992+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=send_success_message
2026-01-22T15:16:13.993+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=send_success_message
2026-01-22T15:16:13.993+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=send_error_message
2026-01-22T15:16:13.993+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=send_error_message
2026-01-22T15:16:13.993+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=send_notification
2026-01-22T15:16:13.993+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=send_notification
2026-01-22T15:16:13.993+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=subscribe_trigger
2026-01-22T15:16:13.993+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=subscribe_trigger
2026-01-22T15:16:13.993+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=unsubscribe_trigger
2026-01-22T15:16:13.993+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=unsubscribe_trigger
2026-01-22T15:16:13.993+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=list_triggers
2026-01-22T15:16:13.993+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=list_triggers
2026-01-22T15:16:13.994+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=get_trigger_detail
2026-01-22T15:16:13.994+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=get_trigger_detail
2026-01-22T15:16:13.997+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=plan_action
2026-01-22T15:16:13.997+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=plan_action
2026-01-22T15:16:13.997+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=execute_action
2026-01-22T15:16:13.998+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=execute_action
2026-01-22T15:16:13.998+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=list_actions
2026-01-22T15:16:13.999+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=list_actions
2026-01-22T15:16:13.999+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=get_action_details
2026-01-22T15:16:13.999+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=get_action_details
2026-01-22T15:16:14.000+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=execute_system_action
2026-01-22T15:16:14.000+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=execute_system_action
2026-01-22T15:16:14.000+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册完成, count=16
2026-01-22T15:16:14.000+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 创建默认CodeContext: language=PYTHON
2026-01-22T15:16:14.002+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 创建默认RuntimeEnvironmentManager: language=PYTHON
2026-01-22T15:16:14.004+08:00 DEBUG --- [           main] c.a.a.a.c.e.bridge.AgentToolBridge       : AgentToolBridge#<init> 初始化: 注册了0个工具
2026-01-22T15:16:14.004+08:00 DEBUG --- [           main] c.a.a.a.c.executor.bridge.StateBridge    : StateBridge#<init> 初始化完成
2026-01-22T15:16:14.005+08:00  INFO --- [           main] c.a.a.a.core.executor.GraalCodeExecutor  : GraalCodeExecutor#<init> 初始化完成: language=PYTHON, allowIO=false, timeout=30000ms, executableTools=true, customBridgeFactory=false
2026-01-22T15:16:14.005+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#createCodeactSubAgentInterceptor 创建子Agent拦截器
2026-01-22T15:16:14.017+08:00  INFO --- [           main] c.a.a.a.a.subagent.CodeactSubAgent       : CodeactSubAgent#<init> 初始化: name=code-generator
2026-01-22T15:16:14.018+08:00  INFO --- [           main] c.a.a.a.a.subagent.CodeactSubAgent       : CodeactSubAgent#<init> 初始化: name=condition-code-generator
2026-01-22T15:16:14.018+08:00  INFO --- [           main] c.a.a.a.a.s.CodeactSubAgentInterceptor   : CodeactSubAgentInterceptor#<init> 创建默认代码生成子Agent
2026-01-22T15:16:14.186+08:00  INFO --- [           main] c.a.a.a.a.s.CodeactSubAgentInterceptor   : CodeactSubAgentInterceptor#<init> 初始化完成: subAgentCount=2
2026-01-22T15:16:14.188+08:00  INFO --- [           main] c.a.a.a.a.tools.ExecuteCodeTool          : ExecuteCodeTool#<init> 初始化完成
2026-01-22T15:16:14.191+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 拦截器分类完成: modelInterceptors=1, toolInterceptors=0
2026-01-22T15:16:14.192+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 从拦截器提取工具: interceptor=CodeactSubAgent, toolCount=2
2026-01-22T15:16:14.202+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 工具收集完成: interceptorTools=2, regularTools=3, total=6
2026-01-22T15:16:14.204+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 设置ModelInterceptors到LlmNode: count=1
2026-01-22T15:16:14.205+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build CodeactAgent构建完成
2026-01-22T15:16:14.205+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=开始罗列已注册的工具
2026-01-22T15:16:14.205+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct阶段工具数量, count=16
2026-01-22T15:16:14.205+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=1, name=send_success_message, description=Send a success message to the IDE console
2026-01-22T15:16:14.205+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=2, name=get_trigger_detail, description=获取指定触发器的详细信息
2026-01-22T15:16:14.205+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=3, name=get_action_details, description=获取指定动作的完整定义，包括参数、步骤等详细信息。
2026-01-22T15:16:14.205+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=4, name=search_project, description=搜索项目上下文信息，包括代码、配置、文档等
2026-01-22T15:16:14.205+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=5, name=subscribe_trigger, description=创建并订阅一个新的触发器
2026-01-22T15:16:14.205+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=6, name=search_knowledge, description=搜索团队知识库，包括FAQ、规范、最佳实践等
2026-01-22T15:16:14.205+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=7, name=unified_search, description=统一搜索工具，可同时搜索项目、知识库、Web等多个数据源
2026-01-22T15:16:14.205+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=8, name=unsubscribe_trigger, description=取消订阅并删除一个触发器
2026-01-22T15:16:14.205+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=9, name=search_web, description=执行Web搜索，获取公开互联网信息
2026-01-22T15:16:14.205+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=10, name=list_actions, description=列出所有可用的动作，支持按分类和标签筛选。
2026-01-22T15:16:14.205+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=11, name=plan_action, description=根据用户输入匹配动作并生成执行计划。返回匹配的动作列表和生成的执行计划。
2026-01-22T15:16:14.205+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=12, name=execute_system_action, description=执行系统Action（如OA请假、ERP操作等）。根据action_id调用相应的系统Handler。
2026-01-22T15:16:14.205+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=13, name=send_error_message, description=Send an error message to the IDE console
2026-01-22T15:16:14.205+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=14, name=execute_action, description=执行指定的执行计划，返回执行结果。支持继续执行等待用户输入的计划。
2026-01-22T15:16:14.205+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=15, name=send_notification, description=Send a notification message
2026-01-22T15:16:14.205+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=16, name=list_triggers, description=列出所有触发器
2026-01-22T15:16:14.206+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React阶段工具数量, count=6
2026-01-22T15:16:14.206+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=1, name=write_code, description=Generate and register a new function with specified name and parameters. IMPORTANT: You MUST provide both 'functionName' and 'parameters' fields. Example: write_code(requirement='calculate sum', functionName='calculate_sum', parameters=['a', 'b'])
2026-01-22T15:16:14.206+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=2, name=write_condition_code, description=Generate and register a condition check function for triggers. This function MUST return a boolean value (True/False). Example: write_condition_code(requirement='check if it is a working day', functionName='check_is_working_day', parameters=['date'])
2026-01-22T15:16:14.206+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=3, name=send_success_message, description=Send a success message to the IDE console
2026-01-22T15:16:14.206+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=4, name=send_error_message, description=Send an error message to the IDE console
2026-01-22T15:16:14.206+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=5, name=send_notification, description=Send a notification message
2026-01-22T15:16:14.206+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=6, name=execute_code, description=Execute a previously generated function by its exact name with matching parameters. CRITICAL: The functionName MUST exactly match the name used in write_code. The 'args' parameter names MUST exactly match the 'parameters' specified in write_code. Example: If you called write_code with functionName='calculate_sum' and parameters=['a', 'b'], then you must call execute_code with functionName='calculate_sum' and args={'a': 10, 'b': 20}. Parameter value types supported: String, Number, Boolean, List, Map/Object.
2026-01-22T15:16:14.206+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=工具罗列完成
2026-01-22T15:16:14.208+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgent#<init> 初始化完成: language=PYTHON
2026-01-22T15:16:14.212+08:00  INFO --- [           main] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#<init> 初始化 Agent 加载器
2026-01-22T15:16:14.225+08:00 DEBUG --- [           main] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#<init> Agent 图结构:
@startuml CodeactAgent
skinparam usecaseFontSize 14
skinparam usecaseStereotypeFontSize 12
skinparam hexagonFontSize 14
skinparam hexagonStereotypeFontSize 12
title "CodeactAgent"
footer

powered by spring-ai-alibaba
end footer
circle start<<input>> as __START__
circle stop as __END__
usecase "_AGENT_MODEL_"<<Node>>
usecase "_AGENT_TOOL_"<<Node>>
usecase "_AGENT_HOOK_UnifiedIntentRecognitionHook.before"<<Node>>
usecase "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"<<Node>>
usecase "_AGENT_HOOK_EvaluationPromptInjectionHook-REACT.beforeModel"<<Node>>
hexagon "check state" as condition1<<Condition>>
hexagon "check state" as condition2<<Condition>>
hexagon "check state" as condition3<<Condition>>
"__START__" -down-> "_AGENT_HOOK_UnifiedIntentRecognitionHook.before"
"_AGENT_HOOK_UnifiedIntentRecognitionHook.before" .down.> "condition1"
"condition1" .down.> "__END__"
'"_AGENT_HOOK_UnifiedIntentRecognitionHook.before" .down.> "__END__"
"condition1" .down.> "_AGENT_TOOL_"
'"_AGENT_HOOK_UnifiedIntentRecognitionHook.before" .down.> "_AGENT_TOOL_"
"condition1" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
'"_AGENT_HOOK_UnifiedIntentRecognitionHook.before" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
"_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel" -down-> "_AGENT_HOOK_EvaluationPromptInjectionHook-REACT.beforeModel"
"_AGENT_HOOK_EvaluationPromptInjectionHook-REACT.beforeModel" -down-> "_AGENT_MODEL_"
"_AGENT_MODEL_" .down.> "condition2"
"condition2" .down.> "__END__"
'"_AGENT_MODEL_" .down.> "__END__"
"condition2" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
'"_AGENT_MODEL_" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
"condition2" .down.> "_AGENT_TOOL_"
'"_AGENT_MODEL_" .down.> "_AGENT_TOOL_"
"_AGENT_TOOL_" .down.> "condition3"
"condition3" .down.> "__END__"
'"_AGENT_TOOL_" .down.> "__END__"
"condition3" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
'"_AGENT_TOOL_" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
@enduml

2026-01-22T15:16:14.226+08:00  INFO --- [           main] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#<init> 已注册 agent: grayscale_agent
2026-01-22T15:16:14.234+08:00  INFO --- [           main] .a.a.a.p.c.ParamOptionsAutoConfiguration : ParamOptionsAutoConfiguration - Creating OptionsCache with TTL: 300000ms
2026-01-22T15:16:14.236+08:00  INFO --- [           main] a.a.a.p.s.DefaultParameterOptionsService : DefaultParameterOptionsService initialized with 3 handlers
2026-01-22T15:16:14.270+08:00  INFO --- [           main] c.a.a.a.planning.system.OaSystemHandler  : OaSystemHandler#init - initialized
2026-01-22T15:16:14.280+08:00 DEBUG --- [           main] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#listAgents 列出所有 agent
2026-01-22T15:16:14.280+08:00  INFO --- [           main] c.a.c.a.a.s.controller.AgentController   : AgentController initialized with 1 dynamic agents: [grayscale_agent]
2026-01-22T15:16:14.346+08:00  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: e2af1398-e41b-4712-b57d-e132b09ca439

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2026-01-22T15:16:14.376+08:00  INFO --- [           main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2026-01-22T15:16:14.755+08:00  INFO --- [           main] e.e.c.CodeactEvaluationAutoConfiguration : CodeactEvaluationAutoConfiguration#inputRoutingEvaluationHook - reason=创建输入路由评估 Hook
2026-01-22T15:16:14.756+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchFacade - reason=creating search facade with 3 providers
2026-01-22T15:16:14.757+08:00  INFO --- [           main] c.a.a.a.e.s.i.DefaultSearchFacade        : DefaultSearchFacade#init - reason=initialized with 3 providers
2026-01-22T15:16:14.758+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=开始创建Search工具
2026-01-22T15:16:14.759+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockBaiduWebSearchProvider, toolName=search_web
2026-01-22T15:16:14.760+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockKnowledgeStoreSearchProvider, toolName=search_knowledge
2026-01-22T15:16:14.761+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockProjectContextSearchProvider, toolName=search_project
2026-01-22T15:16:14.761+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=搜索工具创建完成, totalCount=3
2026-01-22T15:16:14.761+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=Search工具创建完成, count=3
2026-01-22T15:16:14.761+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=创建Search工具, index=1, name=search_web, description=执行Web搜索，获取公开互联网信息
2026-01-22T15:16:14.761+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=创建Search工具, index=2, name=search_knowledge, description=搜索团队知识库，包括FAQ、规范、最佳实践等
2026-01-22T15:16:14.761+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=创建Search工具, index=3, name=search_project, description=搜索项目上下文信息，包括代码、配置、文档等
2026-01-22T15:16:14.763+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#diagnostics - reason=ElasticsearchClient bean found
2026-01-22T15:16:14.763+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#diagnostics - reason=EmbeddingModel bean found
2026-01-22T15:16:14.765+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#diagnostics - Planning module status:
2026-01-22T15:16:14.765+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration :   - ActionRepository: MybatisPlusActionRepository
2026-01-22T15:16:14.765+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration :   - ActionProvider: SemanticActionProvider
2026-01-22T15:16:14.765+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration :   - PlanGenerator: DefaultPlanGenerator
2026-01-22T15:16:14.765+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration :   - PlanExecutor: DefaultPlanExecutor
2026-01-22T15:16:14.885+08:00  INFO --- [           main] c.a.a.a.c.c.CodeactCoreAutoConfiguration : CodeactCoreAutoConfiguration#returnSchemaRegistry - reason=创建ReturnSchemaRegistry单例Bean
2026-01-22T15:16:14.885+08:00  INFO --- [           main] .a.a.a.c.t.s.DefaultReturnSchemaRegistry : DefaultReturnSchemaRegistry#<init> - reason=创建新实例, hashCode=107799732
2026-01-22T15:16:15.340+08:00  WARN --- [           main] o.s.m.p.s.SyncMcpSamplingProvider        : No sampling methods found
2026-01-22T15:16:15.341+08:00  WARN --- [           main] o.s.m.p.e.SyncMcpElicitationProvider     : No elicitation methods found
2026-01-22T15:16:15.372+08:00  INFO --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2026-01-22T15:16:15.380+08:00  INFO --- [           main] c.a.a.a.start.AssistantAgentApplication  : Started AssistantAgentApplication in 7.759 seconds (process running for 8.735)
2026-01-22T15:16:15.383+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#run - reason=Starting experience module validation
2026-01-22T15:16:15.457+08:00 DEBUG --- [           main] .p.e.r.ElasticsearchExperienceRepository : ElasticsearchExperienceRepository#count - reason=count completed, count=0
2026-01-22T15:16:15.482+08:00 DEBUG --- [           main] .p.e.r.ElasticsearchExperienceRepository : ElasticsearchExperienceRepository#countByTypeAndScope - reason=count completed, type=CODE, scope=null, count=0
2026-01-22T15:16:15.492+08:00 DEBUG --- [           main] .p.e.r.ElasticsearchExperienceRepository : ElasticsearchExperienceRepository#countByTypeAndScope - reason=count completed, type=REACT, scope=null, count=0
2026-01-22T15:16:15.516+08:00 DEBUG --- [           main] .p.e.r.ElasticsearchExperienceRepository : ElasticsearchExperienceRepository#countByTypeAndScope - reason=count completed, type=COMMON, scope=null, count=0
2026-01-22T15:16:15.516+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testExperienceCount - reason=Experience stats: total=0, code=0, react=0, common=0
2026-01-22T15:16:15.516+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCommonExperienceQuery - reason=Testing common experience query
2026-01-22T15:16:15.733+08:00 DEBUG --- [           main] .s.p.e.p.ElasticsearchExperienceProvider : ElasticsearchExperienceProvider#query - reason=query completed, type=COMMON, text=null, count=0
2026-01-22T15:16:15.733+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCommonExperienceQuery - reason=Found 0 common experiences
2026-01-22T15:16:15.733+08:00  WARN --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCommonExperienceQuery - reason=❌ MoLiHong identity experience not found
2026-01-22T15:16:15.733+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCodeExperienceQuery - reason=Testing code experience query (demo keyword)
2026-01-22T15:16:15.747+08:00 DEBUG --- [           main] .s.p.e.p.ElasticsearchExperienceProvider : ElasticsearchExperienceProvider#query - reason=query completed, type=CODE, text=null, count=0
2026-01-22T15:16:15.748+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCodeExperienceQuery - reason=Found 0 demo code experiences
2026-01-22T15:16:15.748+08:00  WARN --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCodeExperienceQuery - reason=❌ Demo code experience not found
2026-01-22T15:16:15.748+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testReactExperienceQuery - reason=Testing react experience query
2026-01-22T15:16:15.758+08:00 DEBUG --- [           main] .s.p.e.p.ElasticsearchExperienceProvider : ElasticsearchExperienceProvider#query - reason=query completed, type=REACT, text=null, count=0
2026-01-22T15:16:15.758+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testReactExperienceQuery - reason=Found 0 react experiences
2026-01-22T15:16:15.759+08:00  WARN --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testReactExperienceQuery - reason=❌ Ambiguous intent strategy not found
2026-01-22T15:16:15.759+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#run - reason=Experience module validation completed
2026-01-22T15:16:15.759+08:00  INFO --- [           main] c.a.a.a.s.a.config.AuthInitialization    : AuthInitialization#run - 初始化认证系统
2026-01-22T15:16:15.771+08:00 DEBUG --- [           main] c.a.a.a.s.a.s.AuthenticationService      : AuthenticationService#initDefaultAdmin - 管理员账户已存在
2026-01-22T15:16:15.771+08:00  INFO --- [           main] c.a.a.a.s.a.config.AuthInitialization    : AuthInitialization#run - 认证系统初始化完成
2026-01-22T15:16:36.864+08:00  INFO --- [nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-01-22T15:16:36.864+08:00  INFO --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2026-01-22T15:16:36.866+08:00  INFO --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 2 ms
2026-01-22T15:16:37.086+08:00 DEBUG --- [nio-8080-exec-1] c.a.a.a.s.a.s.JwtAuthenticationFilter    : JwtAuthenticationFilter#doFilterInternal - 设置用户认证: username=admin, roles=[ADMIN, USER]
2026-01-22T15:16:37.143+08:00  INFO --- [nio-8080-exec-1] c.a.c.a.a.s.controller.ThreadController  : Request received for POST /apps/research_agent/users/user-001/threads (service generates ID) with state: {}
2026-01-22T15:16:37.144+08:00  INFO --- [nio-8080-exec-1] c.a.c.a.a.s.service.ThreadServiceImpl    : Created thread: 70f212c3-ca18-4f08-aae5-706cf1e5ee17 for app=research_agent, user=user-001
2026-01-22T15:16:37.144+08:00  INFO --- [nio-8080-exec-1] c.a.c.a.a.s.controller.ThreadController  : Thread created successfully with generated id: 70f212c3-ca18-4f08-aae5-706cf1e5ee17
2026-01-22T15:16:37.186+08:00 DEBUG --- [nio-8080-exec-2] c.a.a.a.s.a.s.JwtAuthenticationFilter    : JwtAuthenticationFilter#doFilterInternal - 设置用户认证: username=admin, roles=[ADMIN, USER]
2026-01-22T15:16:37.196+08:00  INFO --- [nio-8080-exec-2] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#loadAgent 加载 agent: research_agent
2026-01-22T15:16:37.196+08:00  INFO --- [nio-8080-exec-2] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#loadAgent 成功加载 agent: research_agent
2026-01-22T15:16:37.227+08:00 DEBUG --- [nio-8080-exec-4] c.a.a.a.s.a.s.JwtAuthenticationFilter    : JwtAuthenticationFilter#doFilterInternal - 设置用户认证: username=admin, roles=[ADMIN, USER]
2026-01-22T15:16:37.229+08:00  INFO --- [nio-8080-exec-4] c.a.c.a.a.s.controller.ThreadController  : Request received for GET /apps/research_agent/users/user-001/threads/70f212c3-ca18-4f08-aae5-706cf1e5ee17
2026-01-22T15:16:37.284+08:00 DEBUG --- [nio-8080-exec-2] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#beforeAgent - reason=checking unified intent
2026-01-22T15:16:37.284+08:00 DEBUG --- [nio-8080-exec-2] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#get - reason=session not found, sessionId=70f212c3-ca18-4f08-aae5-706cf1e5ee17
2026-01-22T15:16:37.285+08:00 DEBUG --- [nio-8080-exec-2] c.a.a.a.p.i.SemanticActionProvider       : SemanticActionProvider#matchActions - reason=matching actions, userInput=我要请假
2026-01-22T15:16:38.001+08:00  WARN --- [nio-8080-exec-2] c.a.a.a.p.p.c.ActionEntityConverter      : ActionEntityConverter#parseActionType - reason=unknown action type, type=INTERNAL
2026-01-22T15:16:38.008+08:00  WARN --- [nio-8080-exec-2] c.a.a.a.p.p.c.ActionEntityConverter      : ActionEntityConverter#parseActionType - reason=unknown action type, type=INTERNAL
2026-01-22T15:16:38.010+08:00  INFO --- [nio-8080-exec-2] c.a.a.a.p.i.SemanticActionProvider       : SemanticActionProvider#matchActions - reason=matching completed, userInput=我要请假, matchCount=1
2026-01-22T15:16:38.011+08:00  INFO --- [nio-8080-exec-2] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#beforeAgent - reason=match found, actionId=oa:leave:request, confidence=0.95, matchType=KEYWORD_EXACT
2026-01-22T15:16:38.021+08:00 DEBUG --- [nio-8080-exec-2] .s.p.e.p.ElasticsearchExperienceProvider : ElasticsearchExperienceProvider#query - reason=query completed, type=REACT, text=null, count=0
2026-01-22T15:16:38.021+08:00  INFO --- [nio-8080-exec-2] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#beforeAgent - reason=high confidence, using Planning direct execution with param collection, actionId=oa:leave:request, confidence=0.95
2026-01-22T15:16:38.021+08:00  INFO --- [nio-8080-exec-2] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handlePlanningDirectExecution - reason=direct execution, actionId=oa:leave:request
2026-01-22T15:16:38.021+08:00  INFO --- [nio-8080-exec-2] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handlePlanningDirectExecution - reason=missing required params, count=5, actionId=oa:leave:request
2026-01-22T15:16:38.021+08:00  INFO --- [nio-8080-exec-2] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handleMissingParameters - reason=asking for param, paramName=start_date, actionId=oa:leave:request
2026-01-22T15:16:38.022+08:00 DEBUG --- [nio-8080-exec-2] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#save - reason=session saved, sessionId=70f212c3-ca18-4f08-aae5-706cf1e5ee17, ttl=PT30M
2026-01-22T15:16:38.023+08:00 DEBUG --- [nio-8080-exec-2] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#saveSession - reason=session saved, sessionId=70f212c3-ca18-4f08-aae5-706cf1e5ee17
2026-01-22T15:16:38.023+08:00  INFO --- [nio-8080-exec-2] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handleMissingParameters - reason=session saved to store, sessionId=70f212c3-ca18-4f08-aae5-706cf1e5ee17, actionId=oa:leave:request
2026-01-22T15:17:50.318+08:00 DEBUG --- [nio-8080-exec-7] c.a.a.a.s.a.s.JwtAuthenticationFilter    : JwtAuthenticationFilter#doFilterInternal - 设置用户认证: username=admin, roles=[ADMIN, USER]
2026-01-22T15:17:50.320+08:00  INFO --- [nio-8080-exec-7] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#loadAgent 加载 agent: research_agent
2026-01-22T15:17:50.320+08:00  INFO --- [nio-8080-exec-7] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#loadAgent 成功加载 agent: research_agent
2026-01-22T15:17:50.330+08:00 DEBUG --- [nio-8080-exec-7] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#beforeAgent - reason=checking unified intent
2026-01-22T15:17:50.331+08:00 DEBUG --- [nio-8080-exec-7] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#get - reason=session found, sessionId=70f212c3-ca18-4f08-aae5-706cf1e5ee17, active=true
2026-01-22T15:17:50.331+08:00  INFO --- [nio-8080-exec-7] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#beforeAgent - reason=continuing param collection session (from store), sessionId=70f212c3-ca18-4f08-aae5-706cf1e5ee17, userInput=2026-1-22 2026-1-23 类型 事假 理由 aa 审批人
2026-01-22T15:17:50.331+08:00  INFO --- [nio-8080-exec-7] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handleParamCollectionContinuation - reason=processing param input, sessionId=70f212c3-ca18-4f08-aae5-706cf1e5ee17, actionId=oa:leave:request, userInput=2026-1-22 2026-1-23 类型 事假 理由 aa 审批人
2026-01-22T15:17:50.338+08:00  WARN --- [nio-8080-exec-7] c.a.a.a.p.p.c.ActionEntityConverter      : ActionEntityConverter#parseActionType - reason=unknown action type, type=INTERNAL
2026-01-22T15:17:54.554+08:00  INFO --- [nio-8080-exec-7] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handleParamCollectionContinuation - reason=LLM response, response=```json
{
  "extractedParams": {
    "start_date": "2026-01-22 00:00",
    "end_date": "2026-01-23 00:00",
    "types": "1",
    "reason": "aa"
  },
  "missingParams": ["check_uids"],
  "nextQuestion": "请提供审批人的OA用户ID。"
}
```
2026-01-22T15:17:54.626+08:00  INFO --- [nio-8080-exec-7] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handleParamCollectionContinuation - reason=still has missing params, nextQuestion=请提供审批人的OA用户ID。
2026-01-22T15:17:54.626+08:00 DEBUG --- [nio-8080-exec-7] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#save - reason=session saved, sessionId=70f212c3-ca18-4f08-aae5-706cf1e5ee17, ttl=PT30M
2026-01-22T15:17:54.626+08:00 DEBUG --- [nio-8080-exec-7] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#saveSession - reason=session saved, sessionId=70f212c3-ca18-4f08-aae5-706cf1e5ee17
2026-01-22T15:18:04.007+08:00 DEBUG --- [nio-8080-exec-9] c.a.a.a.s.a.s.JwtAuthenticationFilter    : JwtAuthenticationFilter#doFilterInternal - 设置用户认证: username=admin, roles=[ADMIN, USER]
2026-01-22T15:18:04.008+08:00  INFO --- [nio-8080-exec-9] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#loadAgent 加载 agent: research_agent
2026-01-22T15:18:04.008+08:00  INFO --- [nio-8080-exec-9] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#loadAgent 成功加载 agent: research_agent
2026-01-22T15:18:04.016+08:00 DEBUG --- [nio-8080-exec-9] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#beforeAgent - reason=checking unified intent
2026-01-22T15:18:04.016+08:00 DEBUG --- [nio-8080-exec-9] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#get - reason=session found, sessionId=70f212c3-ca18-4f08-aae5-706cf1e5ee17, active=true
2026-01-22T15:18:04.016+08:00  INFO --- [nio-8080-exec-9] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#beforeAgent - reason=continuing param collection session (from store), sessionId=70f212c3-ca18-4f08-aae5-706cf1e5ee17, userInput=25
2026-01-22T15:18:04.016+08:00  INFO --- [nio-8080-exec-9] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handleParamCollectionContinuation - reason=processing param input, sessionId=70f212c3-ca18-4f08-aae5-706cf1e5ee17, actionId=oa:leave:request, userInput=25
2026-01-22T15:18:04.023+08:00  WARN --- [nio-8080-exec-9] c.a.a.a.p.p.c.ActionEntityConverter      : ActionEntityConverter#parseActionType - reason=unknown action type, type=INTERNAL
2026-01-22T15:18:06.150+08:00  INFO --- [nio-8080-exec-9] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handleParamCollectionContinuation - reason=LLM response, response=```json
{
  "extractedParams": {"check_uids": "25"},
  "missingParams": [],
  "nextQuestion": null
}
```
2026-01-22T15:18:06.151+08:00  INFO --- [nio-8080-exec-9] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handleParamCollectionContinuation - reason=params complete, executing action, actionId=oa:leave:request, params={end_date=2026-01-23 00:00, reason=aa, check_uids=25, types=1, start_date=2026-01-22 00:00}
2026-01-22T15:18:06.151+08:00 DEBUG --- [nio-8080-exec-9] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#close - reason=session closed, sessionId=70f212c3-ca18-4f08-aae5-706cf1e5ee17
2026-01-22T15:18:06.151+08:00 DEBUG --- [nio-8080-exec-9] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#closeSession - reason=session closed, sessionId=70f212c3-ca18-4f08-aae5-706cf1e5ee17
2026-01-22T15:18:06.151+08:00  INFO --- [nio-8080-exec-9] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handlePlanningDirectExecution - reason=direct execution, actionId=oa:leave:request
2026-01-22T15:18:06.152+08:00 DEBUG --- [nio-8080-exec-9] c.a.a.a.p.internal.DefaultPlanGenerator  : DefaultPlanGenerator#generate - reason=generating plan, actionId=oa:leave:request, actionName=提交OA请假申请
2026-01-22T15:18:06.157+08:00  INFO --- [nio-8080-exec-9] c.a.a.a.p.internal.DefaultPlanGenerator  : DefaultPlanGenerator#generate - reason=plan generated, planId=464807c4-4b24-4e41-a616-be373704ed94, stepCount=1
2026-01-22T15:18:06.157+08:00  INFO --- [nio-8080-exec-9] c.a.a.a.p.internal.DefaultPlanExecutor   : DefaultPlanExecutor#execute - reason=starting plan execution, planId=464807c4-4b24-4e41-a616-be373704ed94, actionId=oa:leave:request
2026-01-22T15:18:06.157+08:00 DEBUG --- [nio-8080-exec-9] c.a.a.a.p.internal.DefaultPlanExecutor   : DefaultPlanExecutor#executeSteps - reason=executing step, planId=464807c4-4b24-4e41-a616-be373704ed94, stepId=execute, stepIndex=0
2026-01-22T15:18:06.157+08:00 DEBUG --- [nio-8080-exec-9] c.a.a.a.p.i.e.ExecuteStepExecutor        : AbstractStepExecutor#execute - reason=executing step, stepId=execute, type=EXECUTE
2026-01-22T15:18:06.157+08:00 DEBUG --- [nio-8080-exec-9] c.a.a.a.p.i.e.ExecuteStepExecutor        : ExecuteStepExecutor#doExecute - reason=executing execute step, stepId=execute
2026-01-22T15:18:06.157+08:00 DEBUG --- [nio-8080-exec-9] c.a.a.a.p.i.e.ExecuteStepExecutor        : ExecuteStepExecutor#prepareParams - stepId=execute, userId=null, params=[end_date, reason, check_uids, types, action_id, context, start_date]
2026-01-22T15:18:06.158+08:00 DEBUG --- [nio-8080-exec-9] c.a.a.a.p.e.ActionExecutorFactory        : ActionExecutorFactory#execute - executing actionId=execute, type=INTERNAL, executor=InternalExecutor
2026-01-22T15:18:06.158+08:00 DEBUG --- [nio-8080-exec-9] c.a.a.a.p.e.ActionExecutorFactory        : ActionExecutorFactory#execute - skipping permission check (missing userId or systemId)
2026-01-22T15:18:06.158+08:00  INFO --- [nio-8080-exec-9] c.a.a.a.p.executor.InternalExecutor      : InternalExecutor#execute - invoking bean method, actionId=execute, bean=oaSystemActionService, method=execute
2026-01-22T15:18:06.158+08:00 DEBUG --- [nio-8080-exec-9] c.a.a.a.p.executor.InternalExecutor      : InternalExecutor#prepareArguments - passing entire params as Map argument
2026-01-22T15:18:06.163+08:00 ERROR --- [nio-8080-exec-9] c.a.a.a.planning.system.OaSystemHandler  : OaSystemHandler#execute - failed, actionId=execute, time=5ms, error=Action不存在: execute

java.lang.IllegalArgumentException: Action不存在: execute
	at com.alibaba.assistant.agent.planning.system.OaSystemHandler.lambda$execute$0(OaSystemHandler.java:89)
	at java.base/java.util.Optional.orElseThrow(Optional.java:403)
	at com.alibaba.assistant.agent.planning.system.OaSystemHandler.execute(OaSystemHandler.java:89)
	at com.alibaba.assistant.agent.planning.system.OaSystemActionService.execute(OaSystemActionService.java:65)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at com.alibaba.assistant.agent.planning.executor.InternalExecutor.execute(InternalExecutor.java:106)
	at com.alibaba.assistant.agent.planning.executor.ActionExecutorFactory.execute(ActionExecutorFactory.java:192)
	at com.alibaba.assistant.agent.planning.internal.executor.ExecuteStepExecutor.doExecute(ExecuteStepExecutor.java:65)
	at com.alibaba.assistant.agent.planning.internal.executor.AbstractStepExecutor.execute(AbstractStepExecutor.java:47)
	at com.alibaba.assistant.agent.planning.internal.DefaultPlanExecutor.executeSteps(DefaultPlanExecutor.java:127)
	at com.alibaba.assistant.agent.planning.internal.DefaultPlanExecutor.execute(DefaultPlanExecutor.java:78)
	at com.alibaba.assistant.agent.planning.intent.UnifiedIntentRecognitionHook.handlePlanningDirectExecution(UnifiedIntentRecognitionHook.java:439)
	at com.alibaba.assistant.agent.planning.intent.UnifiedIntentRecognitionHook.handleParamCollectionContinuation(UnifiedIntentRecognitionHook.java:696)
	at com.alibaba.assistant.agent.planning.intent.UnifiedIntentRecognitionHook.beforeAgent(UnifiedIntentRecognitionHook.java:186)
	at com.alibaba.cloud.ai.graph.executor.NodeExecutor.executeNode(NodeExecutor.java:122)
	at com.alibaba.cloud.ai.graph.executor.NodeExecutor.execute(NodeExecutor.java:84)
	at com.alibaba.cloud.ai.graph.executor.MainGraphExecutor.execute(MainGraphExecutor.java:108)
	at com.alibaba.cloud.ai.graph.executor.MainGraphExecutor.lambda$handleStartNode$0(MainGraphExecutor.java:135)
	at reactor.core.publisher.FluxDefer.subscribe(FluxDefer.java:46)
	at reactor.core.publisher.Flux.subscribe(Flux.java:8891)
	at reactor.core.publisher.FluxConcatArray$ConcatArraySubscriber.onComplete(FluxConcatArray.java:238)
	at reactor.core.publisher.FluxConcatArray.subscribe(FluxConcatArray.java:79)
	at reactor.core.publisher.FluxDefer.subscribe(FluxDefer.java:54)
	at reactor.core.publisher.Flux.subscribe(Flux.java:8891)
	at org.springframework.web.servlet.mvc.method.annotation.ReactiveTypeHandler$AbstractEmitterSubscriber.connect(ReactiveTypeHandler.java:295)
	at org.springframework.web.servlet.mvc.method.annotation.ReactiveTypeHandler.handleValue(ReactiveTypeHandler.java:168)
	at org.springframework.web.servlet.mvc.method.annotation.ResponseBodyEmitterReturnValueHandler.handleReturnValue(ResponseBodyEmitterReturnValueHandler.java:215)
	at org.springframework.web.method.support.HandlerMethodReturnValueHandlerComposite.handleReturnValue(HandlerMethodReturnValueHandlerComposite.java:78)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:136)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.alibaba.assistant.agent.start.auth.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:87)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$4(HandlerMappingIntrospector.java:267)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)

2026-01-22T15:18:06.167+08:00  INFO --- [nio-8080-exec-9] c.a.a.a.p.executor.InternalExecutor      : InternalExecutor#execute - method invoked successfully, actionId=execute, time=9ms
2026-01-22T15:18:06.169+08:00  INFO --- [nio-8080-exec-9] c.a.a.a.p.i.e.ExecuteStepExecutor        : ExecuteStepExecutor#doExecute - reason=step executed, stepId=execute, success=true
2026-01-22T15:18:06.171+08:00  INFO --- [nio-8080-exec-9] c.a.a.a.p.internal.DefaultPlanExecutor   : DefaultPlanExecutor#execute - reason=plan completed, planId=464807c4-4b24-4e41-a616-be373704ed94, stepCount=1
2026-01-22T15:18:06.173+08:00  INFO --- [nio-8080-exec-9] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handlePlanningDirectExecution - reason=execution completed, planId=464807c4-4b24-4e41-a616-be373704ed94, success=true
2026-01-22T15:18:57.600+08:00  INFO --- [r-shutdown-hook] c.a.c.a.g.internal.node.ParallelNode     : Shutting down ParallelNode default executor
2026-01-22T15:18:57.600+08:00  INFO --- [r-shutdown-hook] c.a.c.a.g.internal.node.ParallelNode     : ParallelNode default thread pool terminated
2026-01-22T15:18:57.601+08:00  INFO --- [r-shutdown-hook] c.a.c.a.g.internal.node.ParallelNode     : ParallelNode default executor shut down successfully
2026-01-22T15:18:57.603+08:00  INFO --- [ionShutdownHook] o.s.b.w.e.tomcat.GracefulShutdown        : Commencing graceful shutdown. Waiting for active requests to complete
2026-01-22T15:18:57.613+08:00  INFO --- [tomcat-shutdown] o.s.b.w.e.tomcat.GracefulShutdown        : Graceful shutdown complete
2026-01-22T15:18:57.621+08:00  INFO --- [ionShutdownHook] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#shutdown - reason=shutdown completed
2026-01-22T15:18:57.622+08:00  INFO --- [ionShutdownHook] c.a.a.a.e.e.GraphBasedEvaluationExecutor : Shutting down ExecutorService
2026-01-22T15:18:57.625+08:00  INFO --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2026-01-22T15:18:57.636+08:00  INFO --- [ionShutdownHook] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
