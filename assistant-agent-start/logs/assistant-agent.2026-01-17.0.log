2026-01-17T22:51:49.495+08:00  INFO --- [           main] c.a.a.a.start.AssistantAgentApplication  : Starting AssistantAgentApplication using Java 21.0.9 with PID 22640 (D:\devfive\AssistantAgent\assistant-agent-start\target\classes started by zhou_ in D:\devfive\AssistantAgent\assistant-agent-start)
2026-01-17T22:51:49.496+08:00 DEBUG --- [           main] c.a.a.a.start.AssistantAgentApplication  : Running with Spring Boot v3.4.8, Spring v6.2.9
2026-01-17T22:51:49.497+08:00  INFO --- [           main] c.a.a.a.start.AssistantAgentApplication  : No active profile set, falling back to 1 default profile: "default"
2026-01-17T22:51:50.838+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Elasticsearch repositories in DEFAULT mode.
2026-01-17T22:51:50.872+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 26 ms. Found 0 Elasticsearch repository interfaces.
2026-01-17T22:51:50.877+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Reactive Elasticsearch repositories in DEFAULT mode.
2026-01-17T22:51:50.884+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 7 ms. Found 0 Reactive Elasticsearch repository interfaces.
2026-01-17T22:51:52.243+08:00  INFO --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2026-01-17T22:51:52.262+08:00  INFO --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2026-01-17T22:51:52.263+08:00  INFO --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.43]
2026-01-17T22:51:52.362+08:00  INFO --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2026-01-17T22:51:52.362+08:00  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2814 ms
2026-01-17T22:51:52.434+08:00  INFO --- [           main] e.l.c.LearningExtensionAutoConfiguration : LearningExtensionAutoConfiguration#constructor - reason=learning extension auto-configuration initialized
2026-01-17T22:51:52.451+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#init - reason=search extension framework is enabled
2026-01-17T22:51:52.451+08:00  INFO --- [           main] c.a.a.a.s.s.MockBaiduWebSearchProvider   : MockBaiduWebSearchProvider#init - reason=使用简单模式初始化
2026-01-17T22:51:52.451+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#unifiedSearchCodeactTool - reason=创建统一搜索工具, providerCount=3
2026-01-17T22:51:52.502+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#init - reason=planning extension is enabled
2026-01-17T22:51:52.503+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#init - reason=ES configuration class loaded (elasticsearch.enabled=true)
2026-01-17T22:51:52.504+08:00  INFO --- [           main] toConfiguration$MybatisPlusConfiguration : MybatisPlusConfiguration#init - reason=MySQL configuration class loaded (mysql.enabled=true, MyBatisPlus present)
2026-01-17T22:51:52.822+08:00  INFO --- [           main] toConfiguration$MybatisPlusConfiguration : MybatisPlusConfiguration#actionEntityConverter - reason=creating entity converter
2026-01-17T22:51:52.827+08:00  INFO --- [           main] toConfiguration$MybatisPlusConfiguration : MybatisPlusConfiguration#mybatisPlusActionRepository - reason=ActionRegistryMapper found, creating MySQL repository
2026-01-17T22:51:53.366+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#actionVectorizationService - reason=creating ES vectorization service
2026-01-17T22:51:53.448+08:00  INFO --- [           main] c.a.a.a.p.v.ActionVectorizationService   : ActionVectorizationService#init - reason=ES index initialized on startup
2026-01-17T22:51:53.461+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#semanticActionProvider - reason=creating semantic action provider, semanticWeight=0.6, keywordWeight=0.4, matchThreshold=0.5
2026-01-17T22:51:53.461+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#defaultPlanGenerator - reason=creating default plan generator
2026-01-17T22:51:53.466+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#planActionCodeactTool - reason=creating plan_action tool
2026-01-17T22:51:53.466+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#queryStepExecutor - reason=creating query step executor
2026-01-17T22:51:53.472+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#inputStepExecutor - reason=creating input step executor
2026-01-17T22:51:53.472+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#executeStepExecutor - reason=creating execute step executor
2026-01-17T22:51:53.472+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#apiCallStepExecutor - reason=creating api call step executor
2026-01-17T22:51:53.477+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#validationStepExecutor - reason=creating validation step executor
2026-01-17T22:51:53.477+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#stepExecutorRegistry - reason=creating executor registry, executorCount=5
2026-01-17T22:51:53.482+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=QUERY, executorClass=QueryStepExecutor
2026-01-17T22:51:53.482+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=INPUT, executorClass=InputStepExecutor
2026-01-17T22:51:53.482+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=EXECUTE, executorClass=ExecuteStepExecutor
2026-01-17T22:51:53.482+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=API_CALL, executorClass=ApiCallStepExecutor
2026-01-17T22:51:53.482+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=VALIDATION, executorClass=ValidationStepExecutor
2026-01-17T22:51:53.483+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#defaultPlanExecutor - reason=creating default plan executor
2026-01-17T22:51:53.484+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#executeActionCodeactTool - reason=creating execute_action tool
2026-01-17T22:51:53.485+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#listActionsCodeactTool - reason=creating list_actions tool
2026-01-17T22:51:53.486+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#getActionDetailsCodeactTool - reason=creating get_action_details tool
2026-01-17T22:51:53.552+08:00  INFO --- [           main] e.l.c.LearningExtensionAutoConfiguration : LearningExtensionAutoConfiguration#experienceLearningExtractor - reason=creating LLM-based experience learning extractor
2026-01-17T22:51:53.552+08:00  INFO --- [           main] .a.a.a.e.l.e.ExperienceLearningExtractor : ExperienceLearningExtractor#constructor - reason=LLM-based extractor initialized
2026-01-17T22:51:53.557+08:00  INFO --- [           main] e.l.c.LearningExtensionAutoConfiguration : LearningExtensionAutoConfiguration#inMemoryLearningRepository - reason=creating in-memory learning repository
2026-01-17T22:51:53.562+08:00  INFO --- [           main] c.a.a.a.start.config.PersistenceConfig   : PersistenceConfig#init - reason=persistence configuration loaded
2026-01-17T22:51:53.562+08:00  INFO --- [           main] c.a.a.a.start.config.PersistenceConfig   : PersistenceConfig#elasticsearchExperienceRepository - reason=creating Elasticsearch experience repository (PRIMARY), indexName=experiences
2026-01-17T22:51:53.567+08:00  INFO --- [           main] e.l.c.LearningExtensionAutoConfiguration : LearningExtensionAutoConfiguration#experienceLearningRepository - reason=creating experience learning repository
2026-01-17T22:51:53.577+08:00  INFO --- [           main] e.l.c.LearningExtensionAutoConfiguration : LearningExtensionAutoConfiguration#learningStrategy - reason=creating learning strategy, asyncEnabled=true
2026-01-17T22:51:53.577+08:00  INFO --- [           main] e.l.c.LearningExtensionAutoConfiguration : LearningExtensionAutoConfiguration#asyncLearningHandler - reason=creating async learning handler, threadPoolSize=2, queueCapacity=100
2026-01-17T22:51:53.577+08:00  INFO --- [           main] c.a.a.a.e.l.i.AsyncLearningHandler       : AsyncLearningHandler#constructor - reason=async learning handler initialized, threadPoolSize=2, queueCapacity=100
2026-01-17T22:51:53.577+08:00  INFO --- [           main] e.l.c.LearningExtensionAutoConfiguration : LearningExtensionAutoConfiguration#learningExecutor - reason=creating learning executor, extractorCount=1, repositoryCount=2
2026-01-17T22:51:53.582+08:00  INFO --- [           main] e.l.c.LearningExtensionAutoConfiguration : LearningExtensionAutoConfiguration#afterAgentLearningHook - reason=creating after agent learning hook, learningType=experience
2026-01-17T22:51:53.588+08:00  INFO --- [           main] c.a.a.a.start.config.PersistenceConfig   : PersistenceConfig#elasticsearchExperienceProvider - reason=creating Elasticsearch experience provider (PRIMARY), indexName=experiences
2026-01-17T22:51:53.588+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#<init> - reason=初始化默认评估套件配置, experienceProviderAvailable=true
2026-01-17T22:51:53.593+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#evaluatorRegistry - reason=创建 EvaluatorRegistry Bean
2026-01-17T22:51:53.593+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'llm-based' of type LLMBasedEvaluator
2026-01-17T22:51:53.593+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'passthrough' of type RuleBasedEvaluator
2026-01-17T22:51:53.593+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'react_experience_evaluator' of type RuleBasedEvaluator
2026-01-17T22:51:53.593+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createDefaultEvaluatorRegistry - reason=注册 React 阶段经验检索评估器
2026-01-17T22:51:53.593+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'codeact_experience_evaluator' of type RuleBasedEvaluator
2026-01-17T22:51:53.593+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createDefaultEvaluatorRegistry - reason=注册 CodeAct 阶段经验检索评估器
2026-01-17T22:51:53.593+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#evaluationService - reason=创建默认 EvaluationService, sharedRegistryEvaluators=[llm-based, passthrough, codeact_experience_evaluator, react_experience_evaluator]
2026-01-17T22:51:53.598+08:00 DEBUG --- [           main] c.a.a.a.e.e.GraphBasedEvaluationExecutor : Created default ExecutorService for batch processing
2026-01-17T22:51:53.598+08:00  INFO --- [           main] .c.ExperienceEvaluationCriterionProvider : ExperienceEvaluationCriterionProvider#<init> - reason=初始化经验评估 Criterion 提供者
2026-01-17T22:51:53.598+08:00  INFO --- [           main] .p.i.PlanningEvaluationCriterionProvider : PlanningEvaluationCriterionProvider#init - initialized, llmVerificationEnabled=true
2026-01-17T22:51:53.598+08:00  INFO --- [           main] p.i.PlanningIntegrationAutoConfiguration : PlanningIntegrationAutoConfiguration#planningEvaluationCriterionProvider - registered planning evaluation criterion provider
2026-01-17T22:51:53.601+08:00  INFO --- [           main] .c.ExperienceEvaluationCriterionProvider : ExperienceEvaluationCriterionProvider#getReactPhaseCriteria - reason=提供 React 阶段评估 Criteria
2026-01-17T22:51:53.603+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createReactPhaseSuite - reason=添加自定义 Criterion, provider=ExperienceEvaluationCriterionProvider, count=3
2026-01-17T22:51:53.603+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createReactPhaseSuite - reason=添加自定义 Criterion, provider=PlanningEvaluationCriterionProvider, count=2
2026-01-17T22:51:53.603+08:00  INFO --- [           main] a.a.e.a.BatchAggregationStrategyRegistry : Registered batch aggregation strategy: ANY_TRUE
2026-01-17T22:51:53.603+08:00  INFO --- [           main] a.a.e.a.BatchAggregationStrategyRegistry : Registered batch aggregation strategy: ALL_TRUE
2026-01-17T22:51:53.603+08:00  WARN --- [           main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'codeactAgentConfig': Unsatisfied dependency expressed through field 'reactPhaseEvaluationHooks': Error creating bean with name 'reactPhaseEvaluationHooks' defined in class path resource [com/alibaba/assistant/agent/autoconfigure/evaluation/DefaultEvaluationSuiteConfig.class]: Unsatisfied dependency expressed through method 'reactPhaseEvaluationHooks' parameter 0: Error creating bean with name 'evaluationService' defined in class path resource [com/alibaba/assistant/agent/autoconfigure/evaluation/DefaultEvaluationSuiteConfig.class]: Failed to instantiate [com.alibaba.assistant.agent.evaluation.EvaluationService]: Factory method 'evaluationService' threw exception with message: Criterion 'action_intent_match' references unknown evaluator 'action_intent_evaluator'. Available evaluators: [llm-based, passthrough, codeact_experience_evaluator, react_experience_evaluator]
2026-01-17T22:51:53.603+08:00  INFO --- [           main] c.a.a.a.e.l.i.AsyncLearningHandler       : AsyncLearningHandler#shutdown - reason=shutting down async learning handler
2026-01-17T22:51:53.608+08:00  INFO --- [           main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2026-01-17T22:51:53.625+08:00  INFO --- [           main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2026-01-17T22:51:53.652+08:00 ERROR --- [           main] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'codeactAgentConfig': Unsatisfied dependency expressed through field 'reactPhaseEvaluationHooks': Error creating bean with name 'reactPhaseEvaluationHooks' defined in class path resource [com/alibaba/assistant/agent/autoconfigure/evaluation/DefaultEvaluationSuiteConfig.class]: Unsatisfied dependency expressed through method 'reactPhaseEvaluationHooks' parameter 0: Error creating bean with name 'evaluationService' defined in class path resource [com/alibaba/assistant/agent/autoconfigure/evaluation/DefaultEvaluationSuiteConfig.class]: Failed to instantiate [com.alibaba.assistant.agent.evaluation.EvaluationService]: Factory method 'evaluationService' threw exception with message: Criterion 'action_intent_match' references unknown evaluator 'action_intent_evaluator'. Available evaluators: [llm-based, passthrough, codeact_experience_evaluator, react_experience_evaluator]
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:788)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:768)
	at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:146)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:509)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1459)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:606)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.instantiateSingleton(DefaultListableBeanFactory.java:1222)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingleton(DefaultListableBeanFactory.java:1188)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:1123)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:987)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.alibaba.assistant.agent.start.AssistantAgentApplication.main(AssistantAgentApplication.java:62)
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'reactPhaseEvaluationHooks' defined in class path resource [com/alibaba/assistant/agent/autoconfigure/evaluation/DefaultEvaluationSuiteConfig.class]: Unsatisfied dependency expressed through method 'reactPhaseEvaluationHooks' parameter 0: Error creating bean with name 'evaluationService' defined in class path resource [com/alibaba/assistant/agent/autoconfigure/evaluation/DefaultEvaluationSuiteConfig.class]: Failed to instantiate [com.alibaba.assistant.agent.evaluation.EvaluationService]: Factory method 'evaluationService' threw exception with message: Criterion 'action_intent_match' references unknown evaluator 'action_intent_evaluator'. Available evaluators: [llm-based, passthrough, codeact_experience_evaluator, react_experience_evaluator]
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:804)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:546)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1375)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1205)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:569)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1683)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1628)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:785)
	... 22 common frames omitted
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'evaluationService' defined in class path resource [com/alibaba/assistant/agent/autoconfigure/evaluation/DefaultEvaluationSuiteConfig.class]: Failed to instantiate [com.alibaba.assistant.agent.evaluation.EvaluationService]: Factory method 'evaluationService' threw exception with message: Criterion 'action_intent_match' references unknown evaluator 'action_intent_evaluator'. Available evaluators: [llm-based, passthrough, codeact_experience_evaluator, react_experience_evaluator]
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:657)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:645)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1375)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1205)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:569)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1745)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1628)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:913)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791)
	... 34 common frames omitted
Caused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.alibaba.assistant.agent.evaluation.EvaluationService]: Factory method 'evaluationService' threw exception with message: Criterion 'action_intent_match' references unknown evaluator 'action_intent_evaluator'. Available evaluators: [llm-based, passthrough, codeact_experience_evaluator, react_experience_evaluator]
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.lambda$instantiate$0(SimpleInstantiationStrategy.java:200)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiateWithFactoryMethod(SimpleInstantiationStrategy.java:89)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:169)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:653)
	... 48 common frames omitted
Caused by: java.lang.IllegalStateException: Criterion 'action_intent_match' references unknown evaluator 'action_intent_evaluator'. Available evaluators: [llm-based, passthrough, codeact_experience_evaluator, react_experience_evaluator]
	at com.alibaba.assistant.agent.evaluation.builder.EvaluationSuiteBuilder.validateEvaluatorReferences(EvaluationSuiteBuilder.java:260)
	at com.alibaba.assistant.agent.evaluation.builder.EvaluationSuiteBuilder.build(EvaluationSuiteBuilder.java:129)
	at com.alibaba.assistant.agent.autoconfigure.evaluation.DefaultEvaluationSuiteConfig.createReactPhaseSuite(DefaultEvaluationSuiteConfig.java:226)
	at com.alibaba.assistant.agent.autoconfigure.evaluation.DefaultEvaluationSuiteConfig.evaluationService(DefaultEvaluationSuiteConfig.java:111)
	at com.alibaba.assistant.agent.autoconfigure.evaluation.DefaultEvaluationSuiteConfig$$SpringCGLIB$$0.CGLIB$evaluationService$4(<generated>)
	at com.alibaba.assistant.agent.autoconfigure.evaluation.DefaultEvaluationSuiteConfig$$SpringCGLIB$$FastClass$$1.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invokeSuper(MethodProxy.java:258)
	at org.springframework.context.annotation.ConfigurationClassEnhancer$BeanMethodInterceptor.intercept(ConfigurationClassEnhancer.java:400)
	at com.alibaba.assistant.agent.autoconfigure.evaluation.DefaultEvaluationSuiteConfig$$SpringCGLIB$$0.evaluationService(<generated>)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.beans.factory.support.SimpleInstantiationStrategy.lambda$instantiate$0(SimpleInstantiationStrategy.java:172)
	... 51 common frames omitted

2026-01-17T22:53:30.586+08:00  INFO --- [           main] c.a.a.a.start.AssistantAgentApplication  : Starting AssistantAgentApplication using Java 21.0.9 with PID 3324 (D:\devfive\AssistantAgent\assistant-agent-start\target\classes started by zhou_ in D:\devfive\AssistantAgent\assistant-agent-start)
2026-01-17T22:53:30.586+08:00 DEBUG --- [           main] c.a.a.a.start.AssistantAgentApplication  : Running with Spring Boot v3.4.8, Spring v6.2.9
2026-01-17T22:53:30.588+08:00  INFO --- [           main] c.a.a.a.start.AssistantAgentApplication  : No active profile set, falling back to 1 default profile: "default"
2026-01-17T22:53:31.801+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Elasticsearch repositories in DEFAULT mode.
2026-01-17T22:53:31.830+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 24 ms. Found 0 Elasticsearch repository interfaces.
2026-01-17T22:53:31.835+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Reactive Elasticsearch repositories in DEFAULT mode.
2026-01-17T22:53:31.845+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 5 ms. Found 0 Reactive Elasticsearch repository interfaces.
2026-01-17T22:53:32.924+08:00  INFO --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2026-01-17T22:53:32.942+08:00  INFO --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2026-01-17T22:53:32.942+08:00  INFO --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.43]
2026-01-17T22:53:33.034+08:00  INFO --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2026-01-17T22:53:33.034+08:00  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2403 ms
2026-01-17T22:53:33.092+08:00  INFO --- [           main] e.l.c.LearningExtensionAutoConfiguration : LearningExtensionAutoConfiguration#constructor - reason=learning extension auto-configuration initialized
2026-01-17T22:53:33.106+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#init - reason=search extension framework is enabled
2026-01-17T22:53:33.106+08:00  INFO --- [           main] c.a.a.a.s.s.MockBaiduWebSearchProvider   : MockBaiduWebSearchProvider#init - reason=使用简单模式初始化
2026-01-17T22:53:33.112+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#unifiedSearchCodeactTool - reason=创建统一搜索工具, providerCount=3
2026-01-17T22:53:33.158+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#init - reason=planning extension is enabled
2026-01-17T22:53:33.159+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#init - reason=ES configuration class loaded (elasticsearch.enabled=true)
2026-01-17T22:53:33.160+08:00  INFO --- [           main] toConfiguration$MybatisPlusConfiguration : MybatisPlusConfiguration#init - reason=MySQL configuration class loaded (mysql.enabled=true, MyBatisPlus present)
2026-01-17T22:53:33.455+08:00  INFO --- [           main] toConfiguration$MybatisPlusConfiguration : MybatisPlusConfiguration#actionEntityConverter - reason=creating entity converter
2026-01-17T22:53:33.456+08:00  INFO --- [           main] toConfiguration$MybatisPlusConfiguration : MybatisPlusConfiguration#mybatisPlusActionRepository - reason=ActionRegistryMapper found, creating MySQL repository
2026-01-17T22:53:33.916+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#actionVectorizationService - reason=creating ES vectorization service
2026-01-17T22:53:33.991+08:00  INFO --- [           main] c.a.a.a.p.v.ActionVectorizationService   : ActionVectorizationService#init - reason=ES index initialized on startup
2026-01-17T22:53:34.005+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#semanticActionProvider - reason=creating semantic action provider, semanticWeight=0.6, keywordWeight=0.4, matchThreshold=0.5
2026-01-17T22:53:34.008+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#defaultPlanGenerator - reason=creating default plan generator
2026-01-17T22:53:34.011+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#planActionCodeactTool - reason=creating plan_action tool
2026-01-17T22:53:34.014+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#queryStepExecutor - reason=creating query step executor
2026-01-17T22:53:34.015+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#inputStepExecutor - reason=creating input step executor
2026-01-17T22:53:34.017+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#executeStepExecutor - reason=creating execute step executor
2026-01-17T22:53:34.017+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#apiCallStepExecutor - reason=creating api call step executor
2026-01-17T22:53:34.022+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#validationStepExecutor - reason=creating validation step executor
2026-01-17T22:53:34.022+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#stepExecutorRegistry - reason=creating executor registry, executorCount=5
2026-01-17T22:53:34.022+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=QUERY, executorClass=QueryStepExecutor
2026-01-17T22:53:34.022+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=INPUT, executorClass=InputStepExecutor
2026-01-17T22:53:34.022+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=EXECUTE, executorClass=ExecuteStepExecutor
2026-01-17T22:53:34.022+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=API_CALL, executorClass=ApiCallStepExecutor
2026-01-17T22:53:34.022+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=VALIDATION, executorClass=ValidationStepExecutor
2026-01-17T22:53:34.028+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#defaultPlanExecutor - reason=creating default plan executor
2026-01-17T22:53:34.029+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#executeActionCodeactTool - reason=creating execute_action tool
2026-01-17T22:53:34.030+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#listActionsCodeactTool - reason=creating list_actions tool
2026-01-17T22:53:34.031+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#getActionDetailsCodeactTool - reason=creating get_action_details tool
2026-01-17T22:53:34.096+08:00  INFO --- [           main] e.l.c.LearningExtensionAutoConfiguration : LearningExtensionAutoConfiguration#experienceLearningExtractor - reason=creating LLM-based experience learning extractor
2026-01-17T22:53:34.096+08:00  INFO --- [           main] .a.a.a.e.l.e.ExperienceLearningExtractor : ExperienceLearningExtractor#constructor - reason=LLM-based extractor initialized
2026-01-17T22:53:34.101+08:00  INFO --- [           main] e.l.c.LearningExtensionAutoConfiguration : LearningExtensionAutoConfiguration#inMemoryLearningRepository - reason=creating in-memory learning repository
2026-01-17T22:53:34.106+08:00  INFO --- [           main] c.a.a.a.start.config.PersistenceConfig   : PersistenceConfig#init - reason=persistence configuration loaded
2026-01-17T22:53:34.106+08:00  INFO --- [           main] c.a.a.a.start.config.PersistenceConfig   : PersistenceConfig#elasticsearchExperienceRepository - reason=creating Elasticsearch experience repository (PRIMARY), indexName=experiences
2026-01-17T22:53:34.116+08:00  INFO --- [           main] e.l.c.LearningExtensionAutoConfiguration : LearningExtensionAutoConfiguration#experienceLearningRepository - reason=creating experience learning repository
2026-01-17T22:53:34.123+08:00  INFO --- [           main] e.l.c.LearningExtensionAutoConfiguration : LearningExtensionAutoConfiguration#learningStrategy - reason=creating learning strategy, asyncEnabled=true
2026-01-17T22:53:34.125+08:00  INFO --- [           main] e.l.c.LearningExtensionAutoConfiguration : LearningExtensionAutoConfiguration#asyncLearningHandler - reason=creating async learning handler, threadPoolSize=2, queueCapacity=100
2026-01-17T22:53:34.126+08:00  INFO --- [           main] c.a.a.a.e.l.i.AsyncLearningHandler       : AsyncLearningHandler#constructor - reason=async learning handler initialized, threadPoolSize=2, queueCapacity=100
2026-01-17T22:53:34.128+08:00  INFO --- [           main] e.l.c.LearningExtensionAutoConfiguration : LearningExtensionAutoConfiguration#learningExecutor - reason=creating learning executor, extractorCount=1, repositoryCount=2
2026-01-17T22:53:34.129+08:00  INFO --- [           main] e.l.c.LearningExtensionAutoConfiguration : LearningExtensionAutoConfiguration#afterAgentLearningHook - reason=creating after agent learning hook, learningType=experience
2026-01-17T22:53:34.134+08:00  INFO --- [           main] c.a.a.a.start.config.PersistenceConfig   : PersistenceConfig#elasticsearchExperienceProvider - reason=creating Elasticsearch experience provider (PRIMARY), indexName=experiences
2026-01-17T22:53:34.138+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#<init> - reason=初始化默认评估套件配置, experienceProviderAvailable=true
2026-01-17T22:53:34.141+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#evaluatorRegistry - reason=创建 EvaluatorRegistry Bean
2026-01-17T22:53:34.143+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'llm-based' of type LLMBasedEvaluator
2026-01-17T22:53:34.144+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'passthrough' of type RuleBasedEvaluator
2026-01-17T22:53:34.146+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'react_experience_evaluator' of type RuleBasedEvaluator
2026-01-17T22:53:34.146+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createDefaultEvaluatorRegistry - reason=注册 React 阶段经验检索评估器
2026-01-17T22:53:34.146+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'codeact_experience_evaluator' of type RuleBasedEvaluator
2026-01-17T22:53:34.146+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createDefaultEvaluatorRegistry - reason=注册 CodeAct 阶段经验检索评估器
2026-01-17T22:53:34.146+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#evaluationService - reason=创建默认 EvaluationService, sharedRegistryEvaluators=[llm-based, passthrough, codeact_experience_evaluator, react_experience_evaluator]
2026-01-17T22:53:34.148+08:00 DEBUG --- [           main] c.a.a.a.e.e.GraphBasedEvaluationExecutor : Created default ExecutorService for batch processing
2026-01-17T22:53:34.150+08:00  INFO --- [           main] .c.ExperienceEvaluationCriterionProvider : ExperienceEvaluationCriterionProvider#<init> - reason=初始化经验评估 Criterion 提供者
2026-01-17T22:53:34.152+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#structuredParamExtractor - reason=creating structured param extractor
2026-01-17T22:53:34.162+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#parameterValidator - reason=creating parameter validator
2026-01-17T22:53:34.164+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#restTemplate - reason=creating RestTemplate bean
2026-01-17T22:53:34.168+08:00  INFO --- [           main] c.a.a.a.planning.executor.HttpExecutor   : HttpExecutor#init - initialized
2026-01-17T22:53:34.168+08:00  INFO --- [           main] c.a.a.a.p.executor.InternalExecutor      : InternalExecutor#init - initialized
2026-01-17T22:53:34.174+08:00  INFO --- [           main] c.a.a.a.p.e.ActionExecutorFactory        : ActionExecutorFactory#init - initialized executors: INTERNAL(InternalExecutor), HTTP(HttpExecutor), DATA_AGENT(DataAgentExecutor), MCP(McpExecutor)
2026-01-17T22:53:34.174+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#sessionProvider - reason=creating in-memory session provider
2026-01-17T22:53:34.174+08:00  INFO --- [           main] c.a.a.a.p.s.InMemorySessionProvider      : InMemorySessionProvider#init - initialized
2026-01-17T22:53:34.174+08:00  INFO --- [           main] c.a.a.a.p.s.ParamCollectionService       : ParamCollectionService#init - sessionProvider=InMemory
2026-01-17T22:53:34.179+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'action_intent_evaluator' of type ActionIntentEvaluator
2026-01-17T22:53:34.179+08:00  INFO --- [           main] p.i.PlanningIntegrationAutoConfiguration : PlanningIntegrationAutoConfiguration#actionIntentEvaluator - initialized and registered, paramCollection=true, llmVerification=true, maxCandidates=5
2026-01-17T22:53:34.180+08:00  INFO --- [           main] .p.i.PlanningEvaluationCriterionProvider : PlanningEvaluationCriterionProvider#init - initialized, llmVerificationEnabled=true
2026-01-17T22:53:34.180+08:00  INFO --- [           main] p.i.PlanningIntegrationAutoConfiguration : PlanningIntegrationAutoConfiguration#planningEvaluationCriterionProvider - registered planning evaluation criterion provider
2026-01-17T22:53:34.180+08:00  INFO --- [           main] .c.ExperienceEvaluationCriterionProvider : ExperienceEvaluationCriterionProvider#getReactPhaseCriteria - reason=提供 React 阶段评估 Criteria
2026-01-17T22:53:34.182+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createReactPhaseSuite - reason=添加自定义 Criterion, provider=ExperienceEvaluationCriterionProvider, count=3
2026-01-17T22:53:34.183+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createReactPhaseSuite - reason=添加自定义 Criterion, provider=PlanningEvaluationCriterionProvider, count=2
2026-01-17T22:53:34.186+08:00  INFO --- [           main] a.a.e.a.BatchAggregationStrategyRegistry : Registered batch aggregation strategy: ANY_TRUE
2026-01-17T22:53:34.187+08:00  INFO --- [           main] a.a.e.a.BatchAggregationStrategyRegistry : Registered batch aggregation strategy: ALL_TRUE
2026-01-17T22:53:34.218+08:00  INFO --- [           main] c.a.c.a.g.internal.node.ParallelNode     : Calculated core pool size: 32 (CPU cores: 16)
2026-01-17T22:53:34.218+08:00  INFO --- [           main] c.a.c.a.g.internal.node.ParallelNode     : Calculated maximum pool size: 64 (CPU cores: 16)
2026-01-17T22:53:34.218+08:00  INFO --- [           main] c.a.c.a.g.internal.node.ParallelNode     : Calculated queue capacity: 1000
2026-01-17T22:53:34.218+08:00  INFO --- [           main] c.a.a.a.e.DefaultEvaluationService       : Registered evaluation suite: react-phase-suite
2026-01-17T22:53:34.218+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#evaluationService - reason=注册 React Phase Suite, suiteId=react-phase-suite
2026-01-17T22:53:34.223+08:00  INFO --- [           main] .c.ExperienceEvaluationCriterionProvider : ExperienceEvaluationCriterionProvider#getCodeActPhaseCriteria - reason=提供 CodeAct 阶段评估 Criteria
2026-01-17T22:53:34.223+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createCodeActPhaseSuite - reason=添加自定义 Criterion, provider=ExperienceEvaluationCriterionProvider, count=3
2026-01-17T22:53:34.223+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createCodeActPhaseSuite - reason=添加自定义 Criterion, provider=PlanningEvaluationCriterionProvider, count=2
2026-01-17T22:53:34.223+08:00  INFO --- [           main] a.a.e.a.BatchAggregationStrategyRegistry : Registered batch aggregation strategy: ANY_TRUE
2026-01-17T22:53:34.223+08:00  INFO --- [           main] a.a.e.a.BatchAggregationStrategyRegistry : Registered batch aggregation strategy: ALL_TRUE
2026-01-17T22:53:34.223+08:00  INFO --- [           main] c.a.a.a.e.DefaultEvaluationService       : Registered evaluation suite: codeact-phase-suite
2026-01-17T22:53:34.223+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#evaluationService - reason=注册 CodeAct Phase Suite, suiteId=codeact-phase-suite
2026-01-17T22:53:34.223+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#codeactEvaluationContextFactory - reason=创建 EvaluationContextFactory
2026-01-17T22:53:34.223+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#codeactEvaluationResultAttacher - reason=创建 EvaluationResultAttacher
2026-01-17T22:53:34.230+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#reactPhaseEvaluationHooks - reason=创建 React Phase ModelInputEvaluationHook
2026-01-17T22:53:34.230+08:00  INFO --- [           main] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#<init> - reason=初始化, phase=REACT, providerCount=1
2026-01-17T22:53:34.230+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#reactPhaseEvaluationHooks - reason=创建 React Phase EvaluationPromptInjectionHook, providersCount=2
2026-01-17T22:53:34.234+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#codeactPhaseEvaluationHooks - reason=创建 CodeAct Phase ModelInputEvaluationHook
2026-01-17T22:53:34.234+08:00  INFO --- [           main] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#<init> - reason=初始化, phase=CODEACT, providerCount=1
2026-01-17T22:53:34.234+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#codeactPhaseEvaluationHooks - reason=创建 CodeAct Phase EvaluationPromptInjectionHook, providersCount=2
2026-01-17T22:53:34.234+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#keywordMatcher - reason=creating keyword matcher
2026-01-17T22:53:34.234+08:00  INFO --- [           main] iguration$UnifiedIntentHookConfiguration : UnifiedIntentHookConfiguration#unifiedIntentRecognitionHook - reason=creating unified intent hook, experienceProviderPresent=true, directExecuteThreshold=0.95, hintThreshold=0.5
2026-01-17T22:53:34.349+08:00  INFO --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2026-01-17T22:53:34.591+08:00  INFO --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@36e358de
2026-01-17T22:53:34.593+08:00  INFO --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2026-01-17T22:53:34.759+08:00 DEBUG --- [           main] c.a.a.a.planning.intent.KeywordMatcher   : KeywordMatcher#registerAction - actionId=erp:product-unit:create, keywords=18
2026-01-17T22:53:34.759+08:00  INFO --- [           main] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#initKeywordMatcher - reason=initialized, actionCount=1, keywordIndexSize=18
2026-01-17T22:53:34.763+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#init - reason=reply module enabled
2026-01-17T22:53:34.763+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactToolFactory - reason=创建CodeactTool工厂, channels=1
2026-01-17T22:53:34.763+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#init - reason=工厂初始化完成, channels=1
2026-01-17T22:53:34.772+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=开始创建Reply工具
2026-01-17T22:53:34.781+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#createTools - reason=创建工具成功, toolName=send_success_message, channelCode=IDE_TEXT
2026-01-17T22:53:34.782+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#createTools - reason=创建工具成功, toolName=send_error_message, channelCode=IDE_TEXT
2026-01-17T22:53:34.782+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#createTools - reason=创建工具成功, toolName=send_notification, channelCode=IDE_TEXT
2026-01-17T22:53:34.782+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#createTools - reason=工具创建完成, totalCount=3
2026-01-17T22:53:34.782+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=Reply工具创建完成, count=3
2026-01-17T22:53:34.782+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=创建Reply工具, index=1, name=send_success_message, description=Send a success message to the IDE console
2026-01-17T22:53:34.782+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=创建Reply工具, index=2, name=send_error_message, description=Send an error message to the IDE console
2026-01-17T22:53:34.782+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=创建Reply工具, index=3, name=send_notification, description=Send a notification message
2026-01-17T22:53:34.782+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactToolFactory - reason=创建SearchCodeactTool工厂, providerCount=3
2026-01-17T22:53:34.798+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactToolFactory - reason=创建TriggerCodeactTool工厂
2026-01-17T22:53:34.798+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=开始创建Trigger工具
2026-01-17T22:53:34.798+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=创建SubscribeTriggerCodeactTool成功
2026-01-17T22:53:34.804+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=创建UnsubscribeTriggerCodeactTool成功
2026-01-17T22:53:34.804+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=创建ListTriggersCodeactTool成功
2026-01-17T22:53:34.804+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=创建GetTriggerDetailCodeactTool成功
2026-01-17T22:53:34.804+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=触发器工具创建完成, count=4
2026-01-17T22:53:34.804+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=Trigger工具创建完成, count=4
2026-01-17T22:53:34.804+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=创建Trigger工具, index=1, name=subscribe_trigger, description=创建并订阅一个新的触发器
2026-01-17T22:53:34.804+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=创建Trigger工具, index=2, name=unsubscribe_trigger, description=取消订阅并删除一个触发器
2026-01-17T22:53:34.804+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=创建Trigger工具, index=3, name=list_triggers, description=列出所有触发器
2026-01-17T22:53:34.804+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=创建Trigger工具, index=4, name=get_trigger_detail, description=获取指定触发器的详细信息
2026-01-17T22:53:34.818+08:00  INFO --- [           main] e.c.ExperienceExtensionAutoConfiguration : ExperienceExtensionAutoConfiguration#fastIntentService - reason=creating FastIntentService, extraMatchers=0
2026-01-17T22:53:34.818+08:00  INFO --- [           main] e.c.ExperienceExtensionAutoConfiguration : ExperienceExtensionAutoConfiguration#fastIntentReactHook - reason=creating fast intent react hook bean
2026-01-17T22:53:34.831+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=创建 CodeactAgent
2026-01-17T22:53:34.832+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=配置 MemorySaver 以支持多轮对话上下文保持
2026-01-17T22:53:34.832+08:00  WARN --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=临时禁用 streaming 模式以排查循环问题
2026-01-17T22:53:34.832+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加UnifiedSearchCodeactTool
2026-01-17T22:53:34.836+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockBaiduWebSearchProvider, toolName=search_web
2026-01-17T22:53:34.836+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockKnowledgeStoreSearchProvider, toolName=search_knowledge
2026-01-17T22:53:34.840+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockProjectContextSearchProvider, toolName=search_project
2026-01-17T22:53:34.840+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=搜索工具创建完成, totalCount=3
2026-01-17T22:53:34.840+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加SearchCodeactTools, count=3
2026-01-17T22:53:34.840+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加ReplyCodeactTools, count=3
2026-01-17T22:53:34.840+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加TriggerCodeactTools, count=4
2026-01-17T22:53:34.840+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#createMcpDynamicTools - reason=Creating MCP dynamic tools
2026-01-17T22:53:34.840+08:00  INFO --- [           main] c.a.a.a.e.d.mcp.McpDynamicToolFactory    : McpDynamicToolFactory#createTools - reason=开始创建MCP动态工具
2026-01-17T22:53:34.845+08:00  INFO --- [           main] c.a.a.a.e.d.mcp.McpDynamicToolFactory    : McpDynamicToolFactory#createTools - reason=无可用的MCP工具
2026-01-17T22:53:34.845+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#createMcpDynamicTools - reason=MCP dynamic tools created, count=0
2026-01-17T22:53:34.845+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=Added MCP dynamic tools, count=0
2026-01-17T22:53:34.845+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#createHttpDynamicTools - reason=HTTP dynamic tools disabled by default
2026-01-17T22:53:34.845+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=合并后CodeactTool总数, count=11
2026-01-17T22:53:34.845+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=React阶段使用内置工具(write_code, execute_code, write_condition_code)
2026-01-17T22:53:34.845+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=注入 React Phase 评估 Hooks, count=2
2026-01-17T22:53:34.845+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=注入 CodeAct Phase 评估 Hooks, count=2
2026-01-17T22:53:34.845+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=已准备注入AfterAgentLearningHook
2026-01-17T22:53:34.845+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=已准备注入FastIntentReactHook
2026-01-17T22:53:34.845+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=已准备注入UnifiedIntentRecognitionHook
2026-01-17T22:53:34.848+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 开始构建CodeactAgent
2026-01-17T22:53:34.848+08:00  INFO --- [           main] .a.a.a.c.t.s.DefaultReturnSchemaRegistry : DefaultReturnSchemaRegistry#<init> - reason=创建新实例, hashCode=241403219
2026-01-17T22:53:34.848+08:00 DEBUG --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#<init> - reason=创建注册表, returnSchemaRegistry=DefaultReturnSchemaRegistry
2026-01-17T22:53:34.848+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=创建默认CodeactToolRegistry
2026-01-17T22:53:34.848+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=开始注册CodeactTool, count=11
2026-01-17T22:53:34.848+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=unified_search
2026-01-17T22:53:34.848+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=unified_search
2026-01-17T22:53:34.848+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=search_web
2026-01-17T22:53:34.848+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=search_web
2026-01-17T22:53:34.848+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=search_knowledge
2026-01-17T22:53:34.848+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=search_knowledge
2026-01-17T22:53:34.848+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=search_project
2026-01-17T22:53:34.848+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=search_project
2026-01-17T22:53:34.848+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=send_success_message
2026-01-17T22:53:34.848+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=send_success_message
2026-01-17T22:53:34.848+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=send_error_message
2026-01-17T22:53:34.848+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=send_error_message
2026-01-17T22:53:34.848+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=send_notification
2026-01-17T22:53:34.848+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=send_notification
2026-01-17T22:53:34.854+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=subscribe_trigger
2026-01-17T22:53:34.854+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=subscribe_trigger
2026-01-17T22:53:34.854+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=unsubscribe_trigger
2026-01-17T22:53:34.854+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=unsubscribe_trigger
2026-01-17T22:53:34.854+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=list_triggers
2026-01-17T22:53:34.854+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=list_triggers
2026-01-17T22:53:34.854+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=get_trigger_detail
2026-01-17T22:53:34.854+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=get_trigger_detail
2026-01-17T22:53:34.854+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册完成, count=11
2026-01-17T22:53:34.854+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 创建默认CodeContext: language=PYTHON
2026-01-17T22:53:34.854+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 创建默认RuntimeEnvironmentManager: language=PYTHON
2026-01-17T22:53:34.854+08:00 DEBUG --- [           main] c.a.a.a.c.e.bridge.AgentToolBridge       : AgentToolBridge#<init> 初始化: 注册了0个工具
2026-01-17T22:53:34.854+08:00 DEBUG --- [           main] c.a.a.a.c.executor.bridge.StateBridge    : StateBridge#<init> 初始化完成
2026-01-17T22:53:34.854+08:00  INFO --- [           main] c.a.a.a.core.executor.GraalCodeExecutor  : GraalCodeExecutor#<init> 初始化完成: language=PYTHON, allowIO=false, timeout=30000ms, executableTools=true, customBridgeFactory=false
2026-01-17T22:53:34.854+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#createCodeactSubAgentInterceptor 创建子Agent拦截器
2026-01-17T22:53:34.859+08:00  INFO --- [           main] c.a.a.a.a.subagent.CodeactSubAgent       : CodeactSubAgent#<init> 初始化: name=code-generator
2026-01-17T22:53:34.859+08:00  INFO --- [           main] c.a.a.a.a.subagent.CodeactSubAgent       : CodeactSubAgent#<init> 初始化: name=condition-code-generator
2026-01-17T22:53:34.859+08:00  INFO --- [           main] c.a.a.a.a.s.CodeactSubAgentInterceptor   : CodeactSubAgentInterceptor#<init> 创建默认代码生成子Agent
2026-01-17T22:53:34.997+08:00  INFO --- [           main] c.a.a.a.a.s.CodeactSubAgentInterceptor   : CodeactSubAgentInterceptor#<init> 初始化完成: subAgentCount=2
2026-01-17T22:53:34.998+08:00  INFO --- [           main] c.a.a.a.a.tools.ExecuteCodeTool          : ExecuteCodeTool#<init> 初始化完成
2026-01-17T22:53:35.000+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 拦截器分类完成: modelInterceptors=1, toolInterceptors=0
2026-01-17T22:53:35.000+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 从拦截器提取工具: interceptor=CodeactSubAgent, toolCount=2
2026-01-17T22:53:35.009+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 工具收集完成: interceptorTools=2, regularTools=3, total=6
2026-01-17T22:53:35.011+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 设置ModelInterceptors到LlmNode: count=1
2026-01-17T22:53:35.012+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build CodeactAgent构建完成
2026-01-17T22:53:35.012+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=开始罗列已注册的工具
2026-01-17T22:53:35.013+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct阶段工具数量, count=11
2026-01-17T22:53:35.013+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=1, name=unified_search, description=统一搜索工具，可同时搜索项目、知识库、Web等多个数据源
2026-01-17T22:53:35.013+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=2, name=search_knowledge, description=搜索团队知识库，包括FAQ、规范、最佳实践等
2026-01-17T22:53:35.013+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=3, name=send_success_message, description=Send a success message to the IDE console
2026-01-17T22:53:35.013+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=4, name=search_web, description=执行Web搜索，获取公开互联网信息
2026-01-17T22:53:35.013+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=5, name=unsubscribe_trigger, description=取消订阅并删除一个触发器
2026-01-17T22:53:35.013+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=6, name=get_trigger_detail, description=获取指定触发器的详细信息
2026-01-17T22:53:35.013+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=7, name=send_error_message, description=Send an error message to the IDE console
2026-01-17T22:53:35.013+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=8, name=search_project, description=搜索项目上下文信息，包括代码、配置、文档等
2026-01-17T22:53:35.013+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=9, name=send_notification, description=Send a notification message
2026-01-17T22:53:35.013+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=10, name=subscribe_trigger, description=创建并订阅一个新的触发器
2026-01-17T22:53:35.013+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=11, name=list_triggers, description=列出所有触发器
2026-01-17T22:53:35.013+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React阶段工具数量, count=6
2026-01-17T22:53:35.013+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=1, name=write_code, description=Generate and register a new function with specified name and parameters. IMPORTANT: You MUST provide both 'functionName' and 'parameters' fields. Example: write_code(requirement='calculate sum', functionName='calculate_sum', parameters=['a', 'b'])
2026-01-17T22:53:35.013+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=2, name=write_condition_code, description=Generate and register a condition check function for triggers. This function MUST return a boolean value (True/False). Example: write_condition_code(requirement='check if it is a working day', functionName='check_is_working_day', parameters=['date'])
2026-01-17T22:53:35.013+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=3, name=send_success_message, description=Send a success message to the IDE console
2026-01-17T22:53:35.013+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=4, name=send_error_message, description=Send an error message to the IDE console
2026-01-17T22:53:35.013+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=5, name=send_notification, description=Send a notification message
2026-01-17T22:53:35.013+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=6, name=execute_code, description=Execute a previously generated function by its exact name with matching parameters. CRITICAL: The functionName MUST exactly match the name used in write_code. The 'args' parameter names MUST exactly match the 'parameters' specified in write_code. Example: If you called write_code with functionName='calculate_sum' and parameters=['a', 'b'], then you must call execute_code with functionName='calculate_sum' and args={'a': 10, 'b': 20}. Parameter value types supported: String, Number, Boolean, List, Map/Object.
2026-01-17T22:53:35.013+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=工具罗列完成
2026-01-17T22:53:35.013+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgent#<init> 初始化完成: language=PYTHON
2026-01-17T22:53:35.013+08:00  INFO --- [           main] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#<init> 初始化 Agent 加载器
2026-01-17T22:53:35.028+08:00 DEBUG --- [           main] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#<init> Agent 图结构:
@startuml CodeactAgent
skinparam usecaseFontSize 14
skinparam usecaseStereotypeFontSize 12
skinparam hexagonFontSize 14
skinparam hexagonStereotypeFontSize 12
title "CodeactAgent"
footer

powered by spring-ai-alibaba
end footer
circle start<<input>> as __START__
circle stop as __END__
usecase "_AGENT_MODEL_"<<Node>>
usecase "_AGENT_TOOL_"<<Node>>
usecase "_AGENT_HOOK_FastIntentReactHook.before"<<Node>>
usecase "_AGENT_HOOK_UnifiedIntentRecognitionHook.before"<<Node>>
usecase "_AGENT_HOOK_AfterAgentLearningHook.after"<<Node>>
usecase "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"<<Node>>
usecase "_AGENT_HOOK_EvaluationPromptInjectionHook-REACT.beforeModel"<<Node>>
hexagon "check state" as condition1<<Condition>>
hexagon "check state" as condition2<<Condition>>
hexagon "check state" as condition3<<Condition>>
hexagon "check state" as condition4<<Condition>>
"__START__" -down-> "_AGENT_HOOK_FastIntentReactHook.before"
"_AGENT_HOOK_FastIntentReactHook.before" .down.> "condition1"
"condition1" .down.> "_AGENT_TOOL_"
'"_AGENT_HOOK_FastIntentReactHook.before" .down.> "_AGENT_TOOL_"
"condition1" .down.> "_AGENT_HOOK_UnifiedIntentRecognitionHook.before"
'"_AGENT_HOOK_FastIntentReactHook.before" .down.> "_AGENT_HOOK_UnifiedIntentRecognitionHook.before"
"_AGENT_HOOK_UnifiedIntentRecognitionHook.before" .down.> "condition2"
"condition2" .down.> "_AGENT_HOOK_AfterAgentLearningHook.after"
'"_AGENT_HOOK_UnifiedIntentRecognitionHook.before" .down.> "_AGENT_HOOK_AfterAgentLearningHook.after"
"condition2" .down.> "_AGENT_TOOL_"
'"_AGENT_HOOK_UnifiedIntentRecognitionHook.before" .down.> "_AGENT_TOOL_"
"condition2" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
'"_AGENT_HOOK_UnifiedIntentRecognitionHook.before" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
"_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel" -down-> "_AGENT_HOOK_EvaluationPromptInjectionHook-REACT.beforeModel"
"_AGENT_HOOK_EvaluationPromptInjectionHook-REACT.beforeModel" -down-> "_AGENT_MODEL_"
"_AGENT_HOOK_AfterAgentLearningHook.after" -down-> "__END__"
"_AGENT_MODEL_" .down.> "condition3"
"condition3" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
'"_AGENT_MODEL_" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
"condition3" .down.> "_AGENT_TOOL_"
'"_AGENT_MODEL_" .down.> "_AGENT_TOOL_"
"condition3" .down.> "_AGENT_HOOK_AfterAgentLearningHook.after"
'"_AGENT_MODEL_" .down.> "_AGENT_HOOK_AfterAgentLearningHook.after"
"_AGENT_TOOL_" .down.> "condition4"
"condition4" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
'"_AGENT_TOOL_" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
"condition4" .down.> "_AGENT_HOOK_AfterAgentLearningHook.after"
'"_AGENT_TOOL_" .down.> "_AGENT_HOOK_AfterAgentLearningHook.after"
@enduml

2026-01-17T22:53:35.028+08:00  INFO --- [           main] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#<init> 已注册 agent: grayscale_agent
2026-01-17T22:53:35.033+08:00 DEBUG --- [           main] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#listAgents 列出所有 agent
2026-01-17T22:53:35.033+08:00  INFO --- [           main] c.a.c.a.a.s.controller.AgentController   : AgentController initialized with 1 dynamic agents: [grayscale_agent]
2026-01-17T22:53:35.046+08:00  INFO --- [           main] e.e.c.CodeactEvaluationAutoConfiguration : CodeactEvaluationAutoConfiguration#inputRoutingEvaluationHook - reason=创建输入路由评估 Hook
2026-01-17T22:53:35.046+08:00  INFO --- [           main] e.c.ExperienceExtensionAutoConfiguration : ExperienceExtensionAutoConfiguration#codeExperienceModelHook - reason=creating code experience model hook bean
2026-01-17T22:53:35.046+08:00  INFO --- [           main] e.c.ExperienceExtensionAutoConfiguration : ExperienceExtensionAutoConfiguration#reactExperienceAgentHook - reason=creating react experience agent hook bean
2026-01-17T22:53:35.046+08:00  INFO --- [           main] e.c.ExperienceExtensionAutoConfiguration : ExperienceExtensionAutoConfiguration#commonSenseExperienceModelHook - reason=creating common sense prompt model hook bean
2026-01-17T22:53:35.051+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchFacade - reason=creating search facade with 3 providers
2026-01-17T22:53:35.052+08:00  INFO --- [           main] c.a.a.a.e.s.i.DefaultSearchFacade        : DefaultSearchFacade#init - reason=initialized with 3 providers
2026-01-17T22:53:35.053+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=开始创建Search工具
2026-01-17T22:53:35.053+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockBaiduWebSearchProvider, toolName=search_web
2026-01-17T22:53:35.053+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockKnowledgeStoreSearchProvider, toolName=search_knowledge
2026-01-17T22:53:35.053+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockProjectContextSearchProvider, toolName=search_project
2026-01-17T22:53:35.058+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=搜索工具创建完成, totalCount=3
2026-01-17T22:53:35.058+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=Search工具创建完成, count=3
2026-01-17T22:53:35.058+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=创建Search工具, index=1, name=search_web, description=执行Web搜索，获取公开互联网信息
2026-01-17T22:53:35.058+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=创建Search工具, index=2, name=search_knowledge, description=搜索团队知识库，包括FAQ、规范、最佳实践等
2026-01-17T22:53:35.058+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=创建Search工具, index=3, name=search_project, description=搜索项目上下文信息，包括代码、配置、文档等
2026-01-17T22:53:35.058+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#diagnostics - reason=ElasticsearchClient bean found
2026-01-17T22:53:35.058+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#diagnostics - reason=EmbeddingModel bean found
2026-01-17T22:53:35.064+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#diagnostics - Planning module status:
2026-01-17T22:53:35.064+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration :   - ActionRepository: MybatisPlusActionRepository
2026-01-17T22:53:35.064+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration :   - ActionProvider: SemanticActionProvider
2026-01-17T22:53:35.064+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration :   - PlanGenerator: DefaultPlanGenerator
2026-01-17T22:53:35.064+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration :   - PlanExecutor: DefaultPlanExecutor
2026-01-17T22:53:35.064+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#planningCodeactTools - reason=creating planning tools list
2026-01-17T22:53:35.064+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#planningCodeactTools - reason=created planning tools, count=4
2026-01-17T22:53:35.331+08:00  INFO --- [           main] c.a.a.a.c.c.CodeactCoreAutoConfiguration : CodeactCoreAutoConfiguration#returnSchemaRegistry - reason=创建ReturnSchemaRegistry单例Bean
2026-01-17T22:53:35.331+08:00  INFO --- [           main] .a.a.a.c.t.s.DefaultReturnSchemaRegistry : DefaultReturnSchemaRegistry#<init> - reason=创建新实例, hashCode=1895617509
2026-01-17T22:53:35.719+08:00  WARN --- [           main] o.s.m.p.s.SyncMcpSamplingProvider        : No sampling methods found
2026-01-17T22:53:35.719+08:00  WARN --- [           main] o.s.m.p.e.SyncMcpElicitationProvider     : No elicitation methods found
2026-01-17T22:53:35.747+08:00  INFO --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2026-01-17T22:53:35.755+08:00  INFO --- [           main] c.a.a.a.start.AssistantAgentApplication  : Started AssistantAgentApplication in 5.853 seconds (process running for 6.349)
2026-01-17T22:53:35.759+08:00  INFO --- [           main] c.a.a.a.s.config.DemoExperienceConfig    : DemoExperienceConfig#run - reason=Initializing Demo Experiences
2026-01-17T22:53:35.759+08:00  INFO --- [           main] c.a.a.a.s.config.DemoExperienceConfig    : DemoExperienceConfig#run - reason=Demo Experiences initialization completed
2026-01-17T22:53:35.759+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#run - reason=Starting experience module validation
2026-01-17T22:53:35.913+08:00 DEBUG --- [           main] .p.e.r.ElasticsearchExperienceRepository : ElasticsearchExperienceRepository#count - reason=count completed, count=0
2026-01-17T22:53:35.937+08:00 DEBUG --- [           main] .p.e.r.ElasticsearchExperienceRepository : ElasticsearchExperienceRepository#countByTypeAndScope - reason=count completed, type=CODE, scope=null, count=0
2026-01-17T22:53:35.949+08:00 DEBUG --- [           main] .p.e.r.ElasticsearchExperienceRepository : ElasticsearchExperienceRepository#countByTypeAndScope - reason=count completed, type=REACT, scope=null, count=0
2026-01-17T22:53:35.958+08:00 DEBUG --- [           main] .p.e.r.ElasticsearchExperienceRepository : ElasticsearchExperienceRepository#countByTypeAndScope - reason=count completed, type=COMMON, scope=null, count=0
2026-01-17T22:53:35.959+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testExperienceCount - reason=Experience stats: total=0, code=0, react=0, common=0
2026-01-17T22:53:35.959+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCommonExperienceQuery - reason=Testing common experience query
2026-01-17T22:53:36.135+08:00 DEBUG --- [           main] .s.p.e.p.ElasticsearchExperienceProvider : ElasticsearchExperienceProvider#query - reason=query completed, type=COMMON, text=null, count=0
2026-01-17T22:53:36.135+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCommonExperienceQuery - reason=Found 0 common experiences
2026-01-17T22:53:36.135+08:00  WARN --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCommonExperienceQuery - reason=❌ MoLiHong identity experience not found
2026-01-17T22:53:36.135+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCodeExperienceQuery - reason=Testing code experience query (demo keyword)
2026-01-17T22:53:36.146+08:00 DEBUG --- [           main] .s.p.e.p.ElasticsearchExperienceProvider : ElasticsearchExperienceProvider#query - reason=query completed, type=CODE, text=null, count=0
2026-01-17T22:53:36.146+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCodeExperienceQuery - reason=Found 0 demo code experiences
2026-01-17T22:53:36.146+08:00  WARN --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCodeExperienceQuery - reason=❌ Demo code experience not found
2026-01-17T22:53:36.146+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testReactExperienceQuery - reason=Testing react experience query
2026-01-17T22:53:36.155+08:00 DEBUG --- [           main] .s.p.e.p.ElasticsearchExperienceProvider : ElasticsearchExperienceProvider#query - reason=query completed, type=REACT, text=null, count=0
2026-01-17T22:53:36.155+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testReactExperienceQuery - reason=Found 0 react experiences
2026-01-17T22:53:36.155+08:00  WARN --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testReactExperienceQuery - reason=❌ Ambiguous intent strategy not found
2026-01-17T22:53:36.155+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#run - reason=Experience module validation completed
2026-01-17T22:54:58.528+08:00  INFO --- [           main] c.a.a.a.start.AssistantAgentApplication  : Starting AssistantAgentApplication using Java 21.0.9 with PID 5436 (D:\devfive\AssistantAgent\assistant-agent-start\target\classes started by zhou_ in D:\devfive\AssistantAgent\assistant-agent-start)
2026-01-17T22:54:58.529+08:00 DEBUG --- [           main] c.a.a.a.start.AssistantAgentApplication  : Running with Spring Boot v3.4.8, Spring v6.2.9
2026-01-17T22:54:58.530+08:00  INFO --- [           main] c.a.a.a.start.AssistantAgentApplication  : No active profile set, falling back to 1 default profile: "default"
2026-01-17T22:54:59.731+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Elasticsearch repositories in DEFAULT mode.
2026-01-17T22:54:59.759+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 21 ms. Found 0 Elasticsearch repository interfaces.
2026-01-17T22:54:59.761+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Reactive Elasticsearch repositories in DEFAULT mode.
2026-01-17T22:54:59.773+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 6 ms. Found 0 Reactive Elasticsearch repository interfaces.
2026-01-17T22:55:00.860+08:00  INFO --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2026-01-17T22:55:00.879+08:00  INFO --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2026-01-17T22:55:00.879+08:00  INFO --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.43]
2026-01-17T22:55:00.969+08:00  INFO --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2026-01-17T22:55:00.969+08:00  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2392 ms
2026-01-17T22:55:01.030+08:00  INFO --- [           main] e.l.c.LearningExtensionAutoConfiguration : LearningExtensionAutoConfiguration#constructor - reason=learning extension auto-configuration initialized
2026-01-17T22:55:01.048+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#init - reason=search extension framework is enabled
2026-01-17T22:55:01.053+08:00  INFO --- [           main] c.a.a.a.s.s.MockBaiduWebSearchProvider   : MockBaiduWebSearchProvider#init - reason=使用简单模式初始化
2026-01-17T22:55:01.053+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#unifiedSearchCodeactTool - reason=创建统一搜索工具, providerCount=3
2026-01-17T22:55:01.101+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#init - reason=planning extension is enabled
2026-01-17T22:55:01.102+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#init - reason=ES configuration class loaded (elasticsearch.enabled=true)
2026-01-17T22:55:01.104+08:00  INFO --- [           main] toConfiguration$MybatisPlusConfiguration : MybatisPlusConfiguration#init - reason=MySQL configuration class loaded (mysql.enabled=true, MyBatisPlus present)
2026-01-17T22:55:01.396+08:00  INFO --- [           main] toConfiguration$MybatisPlusConfiguration : MybatisPlusConfiguration#actionEntityConverter - reason=creating entity converter
2026-01-17T22:55:01.396+08:00  INFO --- [           main] toConfiguration$MybatisPlusConfiguration : MybatisPlusConfiguration#mybatisPlusActionRepository - reason=ActionRegistryMapper found, creating MySQL repository
2026-01-17T22:55:01.849+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#actionVectorizationService - reason=creating ES vectorization service
2026-01-17T22:55:01.924+08:00  INFO --- [           main] c.a.a.a.p.v.ActionVectorizationService   : ActionVectorizationService#init - reason=ES index initialized on startup
2026-01-17T22:55:01.938+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#semanticActionProvider - reason=creating semantic action provider, semanticWeight=0.6, keywordWeight=0.4, matchThreshold=0.5
2026-01-17T22:55:01.941+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#defaultPlanGenerator - reason=creating default plan generator
2026-01-17T22:55:01.944+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#planActionCodeactTool - reason=creating plan_action tool
2026-01-17T22:55:01.946+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#queryStepExecutor - reason=creating query step executor
2026-01-17T22:55:01.948+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#inputStepExecutor - reason=creating input step executor
2026-01-17T22:55:01.949+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#executeStepExecutor - reason=creating execute step executor
2026-01-17T22:55:01.951+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#apiCallStepExecutor - reason=creating api call step executor
2026-01-17T22:55:01.957+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#validationStepExecutor - reason=creating validation step executor
2026-01-17T22:55:01.958+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#stepExecutorRegistry - reason=creating executor registry, executorCount=5
2026-01-17T22:55:01.960+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=QUERY, executorClass=QueryStepExecutor
2026-01-17T22:55:01.960+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=INPUT, executorClass=InputStepExecutor
2026-01-17T22:55:01.960+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=EXECUTE, executorClass=ExecuteStepExecutor
2026-01-17T22:55:01.960+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=API_CALL, executorClass=ApiCallStepExecutor
2026-01-17T22:55:01.960+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=VALIDATION, executorClass=ValidationStepExecutor
2026-01-17T22:55:01.961+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#defaultPlanExecutor - reason=creating default plan executor
2026-01-17T22:55:01.962+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#executeActionCodeactTool - reason=creating execute_action tool
2026-01-17T22:55:01.963+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#listActionsCodeactTool - reason=creating list_actions tool
2026-01-17T22:55:01.964+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#getActionDetailsCodeactTool - reason=creating get_action_details tool
2026-01-17T22:55:02.030+08:00  INFO --- [           main] e.l.c.LearningExtensionAutoConfiguration : LearningExtensionAutoConfiguration#experienceLearningExtractor - reason=creating LLM-based experience learning extractor
2026-01-17T22:55:02.030+08:00  INFO --- [           main] .a.a.a.e.l.e.ExperienceLearningExtractor : ExperienceLearningExtractor#constructor - reason=LLM-based extractor initialized
2026-01-17T22:55:02.035+08:00  INFO --- [           main] e.l.c.LearningExtensionAutoConfiguration : LearningExtensionAutoConfiguration#inMemoryLearningRepository - reason=creating in-memory learning repository
2026-01-17T22:55:02.043+08:00  INFO --- [           main] c.a.a.a.start.config.PersistenceConfig   : PersistenceConfig#init - reason=persistence configuration loaded
2026-01-17T22:55:02.046+08:00  INFO --- [           main] c.a.a.a.start.config.PersistenceConfig   : PersistenceConfig#elasticsearchExperienceRepository - reason=creating Elasticsearch experience repository (PRIMARY), indexName=experiences
2026-01-17T22:55:02.049+08:00  INFO --- [           main] e.l.c.LearningExtensionAutoConfiguration : LearningExtensionAutoConfiguration#experienceLearningRepository - reason=creating experience learning repository
2026-01-17T22:55:02.058+08:00  INFO --- [           main] e.l.c.LearningExtensionAutoConfiguration : LearningExtensionAutoConfiguration#learningStrategy - reason=creating learning strategy, asyncEnabled=true
2026-01-17T22:55:02.060+08:00  INFO --- [           main] e.l.c.LearningExtensionAutoConfiguration : LearningExtensionAutoConfiguration#asyncLearningHandler - reason=creating async learning handler, threadPoolSize=2, queueCapacity=100
2026-01-17T22:55:02.060+08:00  INFO --- [           main] c.a.a.a.e.l.i.AsyncLearningHandler       : AsyncLearningHandler#constructor - reason=async learning handler initialized, threadPoolSize=2, queueCapacity=100
2026-01-17T22:55:02.061+08:00  INFO --- [           main] e.l.c.LearningExtensionAutoConfiguration : LearningExtensionAutoConfiguration#learningExecutor - reason=creating learning executor, extractorCount=1, repositoryCount=2
2026-01-17T22:55:02.063+08:00  INFO --- [           main] e.l.c.LearningExtensionAutoConfiguration : LearningExtensionAutoConfiguration#afterAgentLearningHook - reason=creating after agent learning hook, learningType=experience
2026-01-17T22:55:02.068+08:00  INFO --- [           main] c.a.a.a.start.config.PersistenceConfig   : PersistenceConfig#elasticsearchExperienceProvider - reason=creating Elasticsearch experience provider (PRIMARY), indexName=experiences
2026-01-17T22:55:02.072+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#<init> - reason=初始化默认评估套件配置, experienceProviderAvailable=true
2026-01-17T22:55:02.073+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#evaluatorRegistry - reason=创建 EvaluatorRegistry Bean
2026-01-17T22:55:02.074+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'llm-based' of type LLMBasedEvaluator
2026-01-17T22:55:02.075+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'passthrough' of type RuleBasedEvaluator
2026-01-17T22:55:02.075+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'react_experience_evaluator' of type RuleBasedEvaluator
2026-01-17T22:55:02.075+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createDefaultEvaluatorRegistry - reason=注册 React 阶段经验检索评估器
2026-01-17T22:55:02.075+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'codeact_experience_evaluator' of type RuleBasedEvaluator
2026-01-17T22:55:02.075+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createDefaultEvaluatorRegistry - reason=注册 CodeAct 阶段经验检索评估器
2026-01-17T22:55:02.075+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#evaluationService - reason=创建默认 EvaluationService, sharedRegistryEvaluators=[llm-based, passthrough, codeact_experience_evaluator, react_experience_evaluator]
2026-01-17T22:55:02.075+08:00 DEBUG --- [           main] c.a.a.a.e.e.GraphBasedEvaluationExecutor : Created default ExecutorService for batch processing
2026-01-17T22:55:02.080+08:00  INFO --- [           main] .c.ExperienceEvaluationCriterionProvider : ExperienceEvaluationCriterionProvider#<init> - reason=初始化经验评估 Criterion 提供者
2026-01-17T22:55:02.080+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#structuredParamExtractor - reason=creating structured param extractor
2026-01-17T22:55:02.086+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#parameterValidator - reason=creating parameter validator
2026-01-17T22:55:02.092+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#restTemplate - reason=creating RestTemplate bean
2026-01-17T22:55:02.092+08:00  INFO --- [           main] c.a.a.a.planning.executor.HttpExecutor   : HttpExecutor#init - initialized
2026-01-17T22:55:02.097+08:00  INFO --- [           main] c.a.a.a.p.executor.InternalExecutor      : InternalExecutor#init - initialized
2026-01-17T22:55:02.097+08:00  INFO --- [           main] c.a.a.a.p.e.ActionExecutorFactory        : ActionExecutorFactory#init - initialized executors: INTERNAL(InternalExecutor), HTTP(HttpExecutor), DATA_AGENT(DataAgentExecutor), MCP(McpExecutor)
2026-01-17T22:55:02.097+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#sessionProvider - reason=creating in-memory session provider
2026-01-17T22:55:02.097+08:00  INFO --- [           main] c.a.a.a.p.s.InMemorySessionProvider      : InMemorySessionProvider#init - initialized
2026-01-17T22:55:02.097+08:00  INFO --- [           main] c.a.a.a.p.s.ParamCollectionService       : ParamCollectionService#init - sessionProvider=InMemory
2026-01-17T22:55:02.102+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'action_intent_evaluator' of type ActionIntentEvaluator
2026-01-17T22:55:02.102+08:00  INFO --- [           main] p.i.PlanningIntegrationAutoConfiguration : PlanningIntegrationAutoConfiguration#actionIntentEvaluator - initialized and registered, paramCollection=true, llmVerification=true, maxCandidates=5
2026-01-17T22:55:02.102+08:00  INFO --- [           main] .p.i.PlanningEvaluationCriterionProvider : PlanningEvaluationCriterionProvider#init - initialized, llmVerificationEnabled=true
2026-01-17T22:55:02.102+08:00  INFO --- [           main] p.i.PlanningIntegrationAutoConfiguration : PlanningIntegrationAutoConfiguration#planningEvaluationCriterionProvider - registered planning evaluation criterion provider
2026-01-17T22:55:02.102+08:00  INFO --- [           main] .c.ExperienceEvaluationCriterionProvider : ExperienceEvaluationCriterionProvider#getReactPhaseCriteria - reason=提供 React 阶段评估 Criteria
2026-01-17T22:55:02.102+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createReactPhaseSuite - reason=添加自定义 Criterion, provider=ExperienceEvaluationCriterionProvider, count=3
2026-01-17T22:55:02.107+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createReactPhaseSuite - reason=添加自定义 Criterion, provider=PlanningEvaluationCriterionProvider, count=2
2026-01-17T22:55:02.109+08:00  INFO --- [           main] a.a.e.a.BatchAggregationStrategyRegistry : Registered batch aggregation strategy: ANY_TRUE
2026-01-17T22:55:02.109+08:00  INFO --- [           main] a.a.e.a.BatchAggregationStrategyRegistry : Registered batch aggregation strategy: ALL_TRUE
2026-01-17T22:55:02.138+08:00  INFO --- [           main] c.a.c.a.g.internal.node.ParallelNode     : Calculated core pool size: 32 (CPU cores: 16)
2026-01-17T22:55:02.138+08:00  INFO --- [           main] c.a.c.a.g.internal.node.ParallelNode     : Calculated maximum pool size: 64 (CPU cores: 16)
2026-01-17T22:55:02.138+08:00  INFO --- [           main] c.a.c.a.g.internal.node.ParallelNode     : Calculated queue capacity: 1000
2026-01-17T22:55:02.139+08:00  INFO --- [           main] c.a.a.a.e.DefaultEvaluationService       : Registered evaluation suite: react-phase-suite
2026-01-17T22:55:02.139+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#evaluationService - reason=注册 React Phase Suite, suiteId=react-phase-suite
2026-01-17T22:55:02.139+08:00  INFO --- [           main] .c.ExperienceEvaluationCriterionProvider : ExperienceEvaluationCriterionProvider#getCodeActPhaseCriteria - reason=提供 CodeAct 阶段评估 Criteria
2026-01-17T22:55:02.139+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createCodeActPhaseSuite - reason=添加自定义 Criterion, provider=ExperienceEvaluationCriterionProvider, count=3
2026-01-17T22:55:02.140+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createCodeActPhaseSuite - reason=添加自定义 Criterion, provider=PlanningEvaluationCriterionProvider, count=2
2026-01-17T22:55:02.140+08:00  INFO --- [           main] a.a.e.a.BatchAggregationStrategyRegistry : Registered batch aggregation strategy: ANY_TRUE
2026-01-17T22:55:02.140+08:00  INFO --- [           main] a.a.e.a.BatchAggregationStrategyRegistry : Registered batch aggregation strategy: ALL_TRUE
2026-01-17T22:55:02.140+08:00  INFO --- [           main] c.a.a.a.e.DefaultEvaluationService       : Registered evaluation suite: codeact-phase-suite
2026-01-17T22:55:02.140+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#evaluationService - reason=注册 CodeAct Phase Suite, suiteId=codeact-phase-suite
2026-01-17T22:55:02.143+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#codeactEvaluationContextFactory - reason=创建 EvaluationContextFactory
2026-01-17T22:55:02.144+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#codeactEvaluationResultAttacher - reason=创建 EvaluationResultAttacher
2026-01-17T22:55:02.146+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#reactPhaseEvaluationHooks - reason=创建 React Phase ModelInputEvaluationHook
2026-01-17T22:55:02.146+08:00  INFO --- [           main] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#<init> - reason=初始化, phase=REACT, providerCount=1
2026-01-17T22:55:02.146+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#reactPhaseEvaluationHooks - reason=创建 React Phase EvaluationPromptInjectionHook, providersCount=2
2026-01-17T22:55:02.146+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#codeactPhaseEvaluationHooks - reason=创建 CodeAct Phase ModelInputEvaluationHook
2026-01-17T22:55:02.146+08:00  INFO --- [           main] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#<init> - reason=初始化, phase=CODEACT, providerCount=1
2026-01-17T22:55:02.146+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#codeactPhaseEvaluationHooks - reason=创建 CodeAct Phase EvaluationPromptInjectionHook, providersCount=2
2026-01-17T22:55:02.152+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#keywordMatcher - reason=creating keyword matcher
2026-01-17T22:55:02.152+08:00  INFO --- [           main] iguration$UnifiedIntentHookConfiguration : UnifiedIntentHookConfiguration#unifiedIntentRecognitionHook - reason=creating unified intent hook, experienceProviderPresent=true, directExecuteThreshold=0.95, hintThreshold=0.5
2026-01-17T22:55:02.253+08:00  INFO --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2026-01-17T22:55:02.454+08:00  INFO --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@50aa9a91
2026-01-17T22:55:02.457+08:00  INFO --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2026-01-17T22:55:02.593+08:00 DEBUG --- [           main] c.a.a.a.planning.intent.KeywordMatcher   : KeywordMatcher#registerAction - actionId=erp:product-unit:create, keywords=18
2026-01-17T22:55:02.593+08:00  INFO --- [           main] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#initKeywordMatcher - reason=initialized, actionCount=1, keywordIndexSize=18
2026-01-17T22:55:02.598+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#init - reason=reply module enabled
2026-01-17T22:55:02.598+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactToolFactory - reason=创建CodeactTool工厂, channels=1
2026-01-17T22:55:02.598+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#init - reason=工厂初始化完成, channels=1
2026-01-17T22:55:02.608+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=开始创建Reply工具
2026-01-17T22:55:02.613+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#createTools - reason=创建工具成功, toolName=send_success_message, channelCode=IDE_TEXT
2026-01-17T22:55:02.613+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#createTools - reason=创建工具成功, toolName=send_error_message, channelCode=IDE_TEXT
2026-01-17T22:55:02.613+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#createTools - reason=创建工具成功, toolName=send_notification, channelCode=IDE_TEXT
2026-01-17T22:55:02.613+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#createTools - reason=工具创建完成, totalCount=3
2026-01-17T22:55:02.613+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=Reply工具创建完成, count=3
2026-01-17T22:55:02.613+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=创建Reply工具, index=1, name=send_success_message, description=Send a success message to the IDE console
2026-01-17T22:55:02.613+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=创建Reply工具, index=2, name=send_error_message, description=Send an error message to the IDE console
2026-01-17T22:55:02.613+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=创建Reply工具, index=3, name=send_notification, description=Send a notification message
2026-01-17T22:55:02.618+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactToolFactory - reason=创建SearchCodeactTool工厂, providerCount=3
2026-01-17T22:55:02.632+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactToolFactory - reason=创建TriggerCodeactTool工厂
2026-01-17T22:55:02.633+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=开始创建Trigger工具
2026-01-17T22:55:02.634+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=创建SubscribeTriggerCodeactTool成功
2026-01-17T22:55:02.635+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=创建UnsubscribeTriggerCodeactTool成功
2026-01-17T22:55:02.636+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=创建ListTriggersCodeactTool成功
2026-01-17T22:55:02.637+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=创建GetTriggerDetailCodeactTool成功
2026-01-17T22:55:02.637+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=触发器工具创建完成, count=4
2026-01-17T22:55:02.637+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=Trigger工具创建完成, count=4
2026-01-17T22:55:02.638+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=创建Trigger工具, index=1, name=subscribe_trigger, description=创建并订阅一个新的触发器
2026-01-17T22:55:02.638+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=创建Trigger工具, index=2, name=unsubscribe_trigger, description=取消订阅并删除一个触发器
2026-01-17T22:55:02.638+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=创建Trigger工具, index=3, name=list_triggers, description=列出所有触发器
2026-01-17T22:55:02.638+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=创建Trigger工具, index=4, name=get_trigger_detail, description=获取指定触发器的详细信息
2026-01-17T22:55:02.649+08:00  INFO --- [           main] e.c.ExperienceExtensionAutoConfiguration : ExperienceExtensionAutoConfiguration#fastIntentService - reason=creating FastIntentService, extraMatchers=0
2026-01-17T22:55:02.651+08:00  INFO --- [           main] e.c.ExperienceExtensionAutoConfiguration : ExperienceExtensionAutoConfiguration#fastIntentReactHook - reason=creating fast intent react hook bean
2026-01-17T22:55:02.655+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=创建 CodeactAgent
2026-01-17T22:55:02.655+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=配置 MemorySaver 以支持多轮对话上下文保持
2026-01-17T22:55:02.655+08:00  WARN --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=临时禁用 streaming 模式以排查循环问题
2026-01-17T22:55:02.655+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加UnifiedSearchCodeactTool
2026-01-17T22:55:02.658+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockBaiduWebSearchProvider, toolName=search_web
2026-01-17T22:55:02.658+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockKnowledgeStoreSearchProvider, toolName=search_knowledge
2026-01-17T22:55:02.658+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockProjectContextSearchProvider, toolName=search_project
2026-01-17T22:55:02.658+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=搜索工具创建完成, totalCount=3
2026-01-17T22:55:02.658+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加SearchCodeactTools, count=3
2026-01-17T22:55:02.658+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加ReplyCodeactTools, count=3
2026-01-17T22:55:02.658+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加TriggerCodeactTools, count=4
2026-01-17T22:55:02.658+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#createMcpDynamicTools - reason=Creating MCP dynamic tools
2026-01-17T22:55:02.663+08:00  INFO --- [           main] c.a.a.a.e.d.mcp.McpDynamicToolFactory    : McpDynamicToolFactory#createTools - reason=开始创建MCP动态工具
2026-01-17T22:55:02.664+08:00  INFO --- [           main] c.a.a.a.e.d.mcp.McpDynamicToolFactory    : McpDynamicToolFactory#createTools - reason=无可用的MCP工具
2026-01-17T22:55:02.664+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#createMcpDynamicTools - reason=MCP dynamic tools created, count=0
2026-01-17T22:55:02.664+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=Added MCP dynamic tools, count=0
2026-01-17T22:55:02.664+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#createHttpDynamicTools - reason=HTTP dynamic tools disabled by default
2026-01-17T22:55:02.664+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=合并后CodeactTool总数, count=11
2026-01-17T22:55:02.664+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=React阶段使用内置工具(write_code, execute_code, write_condition_code)
2026-01-17T22:55:02.664+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=注入 React Phase 评估 Hooks, count=2
2026-01-17T22:55:02.664+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=注入 CodeAct Phase 评估 Hooks, count=2
2026-01-17T22:55:02.664+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=已准备注入AfterAgentLearningHook
2026-01-17T22:55:02.664+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=已准备注入FastIntentReactHook
2026-01-17T22:55:02.664+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=已准备注入UnifiedIntentRecognitionHook
2026-01-17T22:55:02.664+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 开始构建CodeactAgent
2026-01-17T22:55:02.669+08:00  INFO --- [           main] .a.a.a.c.t.s.DefaultReturnSchemaRegistry : DefaultReturnSchemaRegistry#<init> - reason=创建新实例, hashCode=1237065580
2026-01-17T22:55:02.669+08:00 DEBUG --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#<init> - reason=创建注册表, returnSchemaRegistry=DefaultReturnSchemaRegistry
2026-01-17T22:55:02.669+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=创建默认CodeactToolRegistry
2026-01-17T22:55:02.669+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=开始注册CodeactTool, count=11
2026-01-17T22:55:02.669+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=unified_search
2026-01-17T22:55:02.669+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=unified_search
2026-01-17T22:55:02.669+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=search_web
2026-01-17T22:55:02.669+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=search_web
2026-01-17T22:55:02.669+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=search_knowledge
2026-01-17T22:55:02.669+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=search_knowledge
2026-01-17T22:55:02.669+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=search_project
2026-01-17T22:55:02.669+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=search_project
2026-01-17T22:55:02.669+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=send_success_message
2026-01-17T22:55:02.669+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=send_success_message
2026-01-17T22:55:02.669+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=send_error_message
2026-01-17T22:55:02.669+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=send_error_message
2026-01-17T22:55:02.669+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=send_notification
2026-01-17T22:55:02.669+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=send_notification
2026-01-17T22:55:02.669+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=subscribe_trigger
2026-01-17T22:55:02.669+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=subscribe_trigger
2026-01-17T22:55:02.669+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=unsubscribe_trigger
2026-01-17T22:55:02.669+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=unsubscribe_trigger
2026-01-17T22:55:02.669+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=list_triggers
2026-01-17T22:55:02.669+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=list_triggers
2026-01-17T22:55:02.669+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=get_trigger_detail
2026-01-17T22:55:02.669+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=get_trigger_detail
2026-01-17T22:55:02.669+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册完成, count=11
2026-01-17T22:55:02.669+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 创建默认CodeContext: language=PYTHON
2026-01-17T22:55:02.674+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 创建默认RuntimeEnvironmentManager: language=PYTHON
2026-01-17T22:55:02.675+08:00 DEBUG --- [           main] c.a.a.a.c.e.bridge.AgentToolBridge       : AgentToolBridge#<init> 初始化: 注册了0个工具
2026-01-17T22:55:02.675+08:00 DEBUG --- [           main] c.a.a.a.c.executor.bridge.StateBridge    : StateBridge#<init> 初始化完成
2026-01-17T22:55:02.675+08:00  INFO --- [           main] c.a.a.a.core.executor.GraalCodeExecutor  : GraalCodeExecutor#<init> 初始化完成: language=PYTHON, allowIO=false, timeout=30000ms, executableTools=true, customBridgeFactory=false
2026-01-17T22:55:02.675+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#createCodeactSubAgentInterceptor 创建子Agent拦截器
2026-01-17T22:55:02.679+08:00  INFO --- [           main] c.a.a.a.a.subagent.CodeactSubAgent       : CodeactSubAgent#<init> 初始化: name=code-generator
2026-01-17T22:55:02.679+08:00  INFO --- [           main] c.a.a.a.a.subagent.CodeactSubAgent       : CodeactSubAgent#<init> 初始化: name=condition-code-generator
2026-01-17T22:55:02.679+08:00  INFO --- [           main] c.a.a.a.a.s.CodeactSubAgentInterceptor   : CodeactSubAgentInterceptor#<init> 创建默认代码生成子Agent
2026-01-17T22:55:02.808+08:00  INFO --- [           main] c.a.a.a.a.s.CodeactSubAgentInterceptor   : CodeactSubAgentInterceptor#<init> 初始化完成: subAgentCount=2
2026-01-17T22:55:02.808+08:00  INFO --- [           main] c.a.a.a.a.tools.ExecuteCodeTool          : ExecuteCodeTool#<init> 初始化完成
2026-01-17T22:55:02.808+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 拦截器分类完成: modelInterceptors=1, toolInterceptors=0
2026-01-17T22:55:02.808+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 从拦截器提取工具: interceptor=CodeactSubAgent, toolCount=2
2026-01-17T22:55:02.823+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 工具收集完成: interceptorTools=2, regularTools=3, total=6
2026-01-17T22:55:02.824+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 设置ModelInterceptors到LlmNode: count=1
2026-01-17T22:55:02.825+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build CodeactAgent构建完成
2026-01-17T22:55:02.825+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=开始罗列已注册的工具
2026-01-17T22:55:02.825+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct阶段工具数量, count=11
2026-01-17T22:55:02.825+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=1, name=unified_search, description=统一搜索工具，可同时搜索项目、知识库、Web等多个数据源
2026-01-17T22:55:02.825+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=2, name=search_knowledge, description=搜索团队知识库，包括FAQ、规范、最佳实践等
2026-01-17T22:55:02.825+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=3, name=send_success_message, description=Send a success message to the IDE console
2026-01-17T22:55:02.825+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=4, name=search_web, description=执行Web搜索，获取公开互联网信息
2026-01-17T22:55:02.825+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=5, name=unsubscribe_trigger, description=取消订阅并删除一个触发器
2026-01-17T22:55:02.825+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=6, name=get_trigger_detail, description=获取指定触发器的详细信息
2026-01-17T22:55:02.825+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=7, name=send_error_message, description=Send an error message to the IDE console
2026-01-17T22:55:02.825+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=8, name=search_project, description=搜索项目上下文信息，包括代码、配置、文档等
2026-01-17T22:55:02.825+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=9, name=send_notification, description=Send a notification message
2026-01-17T22:55:02.825+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=10, name=subscribe_trigger, description=创建并订阅一个新的触发器
2026-01-17T22:55:02.825+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=11, name=list_triggers, description=列出所有触发器
2026-01-17T22:55:02.826+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React阶段工具数量, count=6
2026-01-17T22:55:02.826+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=1, name=write_code, description=Generate and register a new function with specified name and parameters. IMPORTANT: You MUST provide both 'functionName' and 'parameters' fields. Example: write_code(requirement='calculate sum', functionName='calculate_sum', parameters=['a', 'b'])
2026-01-17T22:55:02.826+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=2, name=write_condition_code, description=Generate and register a condition check function for triggers. This function MUST return a boolean value (True/False). Example: write_condition_code(requirement='check if it is a working day', functionName='check_is_working_day', parameters=['date'])
2026-01-17T22:55:02.826+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=3, name=send_success_message, description=Send a success message to the IDE console
2026-01-17T22:55:02.826+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=4, name=send_error_message, description=Send an error message to the IDE console
2026-01-17T22:55:02.826+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=5, name=send_notification, description=Send a notification message
2026-01-17T22:55:02.826+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=6, name=execute_code, description=Execute a previously generated function by its exact name with matching parameters. CRITICAL: The functionName MUST exactly match the name used in write_code. The 'args' parameter names MUST exactly match the 'parameters' specified in write_code. Example: If you called write_code with functionName='calculate_sum' and parameters=['a', 'b'], then you must call execute_code with functionName='calculate_sum' and args={'a': 10, 'b': 20}. Parameter value types supported: String, Number, Boolean, List, Map/Object.
2026-01-17T22:55:02.826+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=工具罗列完成
2026-01-17T22:55:02.826+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgent#<init> 初始化完成: language=PYTHON
2026-01-17T22:55:02.828+08:00  INFO --- [           main] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#<init> 初始化 Agent 加载器
2026-01-17T22:55:02.836+08:00 DEBUG --- [           main] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#<init> Agent 图结构:
@startuml CodeactAgent
skinparam usecaseFontSize 14
skinparam usecaseStereotypeFontSize 12
skinparam hexagonFontSize 14
skinparam hexagonStereotypeFontSize 12
title "CodeactAgent"
footer

powered by spring-ai-alibaba
end footer
circle start<<input>> as __START__
circle stop as __END__
usecase "_AGENT_MODEL_"<<Node>>
usecase "_AGENT_TOOL_"<<Node>>
usecase "_AGENT_HOOK_FastIntentReactHook.before"<<Node>>
usecase "_AGENT_HOOK_UnifiedIntentRecognitionHook.before"<<Node>>
usecase "_AGENT_HOOK_AfterAgentLearningHook.after"<<Node>>
usecase "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"<<Node>>
usecase "_AGENT_HOOK_EvaluationPromptInjectionHook-REACT.beforeModel"<<Node>>
hexagon "check state" as condition1<<Condition>>
hexagon "check state" as condition2<<Condition>>
hexagon "check state" as condition3<<Condition>>
hexagon "check state" as condition4<<Condition>>
"__START__" -down-> "_AGENT_HOOK_FastIntentReactHook.before"
"_AGENT_HOOK_FastIntentReactHook.before" .down.> "condition1"
"condition1" .down.> "_AGENT_TOOL_"
'"_AGENT_HOOK_FastIntentReactHook.before" .down.> "_AGENT_TOOL_"
"condition1" .down.> "_AGENT_HOOK_UnifiedIntentRecognitionHook.before"
'"_AGENT_HOOK_FastIntentReactHook.before" .down.> "_AGENT_HOOK_UnifiedIntentRecognitionHook.before"
"_AGENT_HOOK_UnifiedIntentRecognitionHook.before" .down.> "condition2"
"condition2" .down.> "_AGENT_HOOK_AfterAgentLearningHook.after"
'"_AGENT_HOOK_UnifiedIntentRecognitionHook.before" .down.> "_AGENT_HOOK_AfterAgentLearningHook.after"
"condition2" .down.> "_AGENT_TOOL_"
'"_AGENT_HOOK_UnifiedIntentRecognitionHook.before" .down.> "_AGENT_TOOL_"
"condition2" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
'"_AGENT_HOOK_UnifiedIntentRecognitionHook.before" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
"_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel" -down-> "_AGENT_HOOK_EvaluationPromptInjectionHook-REACT.beforeModel"
"_AGENT_HOOK_EvaluationPromptInjectionHook-REACT.beforeModel" -down-> "_AGENT_MODEL_"
"_AGENT_HOOK_AfterAgentLearningHook.after" -down-> "__END__"
"_AGENT_MODEL_" .down.> "condition3"
"condition3" .down.> "_AGENT_HOOK_AfterAgentLearningHook.after"
'"_AGENT_MODEL_" .down.> "_AGENT_HOOK_AfterAgentLearningHook.after"
"condition3" .down.> "_AGENT_TOOL_"
'"_AGENT_MODEL_" .down.> "_AGENT_TOOL_"
"condition3" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
'"_AGENT_MODEL_" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
"_AGENT_TOOL_" .down.> "condition4"
"condition4" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
'"_AGENT_TOOL_" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
"condition4" .down.> "_AGENT_HOOK_AfterAgentLearningHook.after"
'"_AGENT_TOOL_" .down.> "_AGENT_HOOK_AfterAgentLearningHook.after"
@enduml

2026-01-17T22:55:02.836+08:00  INFO --- [           main] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#<init> 已注册 agent: grayscale_agent
2026-01-17T22:55:02.846+08:00 DEBUG --- [           main] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#listAgents 列出所有 agent
2026-01-17T22:55:02.846+08:00  INFO --- [           main] c.a.c.a.a.s.controller.AgentController   : AgentController initialized with 1 dynamic agents: [grayscale_agent]
2026-01-17T22:55:02.851+08:00  INFO --- [           main] e.e.c.CodeactEvaluationAutoConfiguration : CodeactEvaluationAutoConfiguration#inputRoutingEvaluationHook - reason=创建输入路由评估 Hook
2026-01-17T22:55:02.851+08:00  INFO --- [           main] e.c.ExperienceExtensionAutoConfiguration : ExperienceExtensionAutoConfiguration#codeExperienceModelHook - reason=creating code experience model hook bean
2026-01-17T22:55:02.851+08:00  INFO --- [           main] e.c.ExperienceExtensionAutoConfiguration : ExperienceExtensionAutoConfiguration#reactExperienceAgentHook - reason=creating react experience agent hook bean
2026-01-17T22:55:02.856+08:00  INFO --- [           main] e.c.ExperienceExtensionAutoConfiguration : ExperienceExtensionAutoConfiguration#commonSenseExperienceModelHook - reason=creating common sense prompt model hook bean
2026-01-17T22:55:02.858+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchFacade - reason=creating search facade with 3 providers
2026-01-17T22:55:02.859+08:00  INFO --- [           main] c.a.a.a.e.s.i.DefaultSearchFacade        : DefaultSearchFacade#init - reason=initialized with 3 providers
2026-01-17T22:55:02.861+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=开始创建Search工具
2026-01-17T22:55:02.863+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockBaiduWebSearchProvider, toolName=search_web
2026-01-17T22:55:02.865+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockKnowledgeStoreSearchProvider, toolName=search_knowledge
2026-01-17T22:55:02.866+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockProjectContextSearchProvider, toolName=search_project
2026-01-17T22:55:02.866+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=搜索工具创建完成, totalCount=3
2026-01-17T22:55:02.866+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=Search工具创建完成, count=3
2026-01-17T22:55:02.866+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=创建Search工具, index=1, name=search_web, description=执行Web搜索，获取公开互联网信息
2026-01-17T22:55:02.866+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=创建Search工具, index=2, name=search_knowledge, description=搜索团队知识库，包括FAQ、规范、最佳实践等
2026-01-17T22:55:02.866+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=创建Search工具, index=3, name=search_project, description=搜索项目上下文信息，包括代码、配置、文档等
2026-01-17T22:55:02.871+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#diagnostics - reason=ElasticsearchClient bean found
2026-01-17T22:55:02.871+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#diagnostics - reason=EmbeddingModel bean found
2026-01-17T22:55:02.873+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#diagnostics - Planning module status:
2026-01-17T22:55:02.873+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration :   - ActionRepository: MybatisPlusActionRepository
2026-01-17T22:55:02.873+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration :   - ActionProvider: SemanticActionProvider
2026-01-17T22:55:02.873+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration :   - PlanGenerator: DefaultPlanGenerator
2026-01-17T22:55:02.873+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration :   - PlanExecutor: DefaultPlanExecutor
2026-01-17T22:55:02.875+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#planningCodeactTools - reason=creating planning tools list
2026-01-17T22:55:02.875+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#planningCodeactTools - reason=created planning tools, count=4
2026-01-17T22:55:03.094+08:00  INFO --- [           main] c.a.a.a.c.c.CodeactCoreAutoConfiguration : CodeactCoreAutoConfiguration#returnSchemaRegistry - reason=创建ReturnSchemaRegistry单例Bean
2026-01-17T22:55:03.095+08:00  INFO --- [           main] .a.a.a.c.t.s.DefaultReturnSchemaRegistry : DefaultReturnSchemaRegistry#<init> - reason=创建新实例, hashCode=118902356
2026-01-17T22:55:03.431+08:00  WARN --- [           main] o.s.m.p.s.SyncMcpSamplingProvider        : No sampling methods found
2026-01-17T22:55:03.437+08:00  WARN --- [           main] o.s.m.p.e.SyncMcpElicitationProvider     : No elicitation methods found
2026-01-17T22:55:03.458+08:00  INFO --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2026-01-17T22:55:03.466+08:00  INFO --- [           main] c.a.a.a.start.AssistantAgentApplication  : Started AssistantAgentApplication in 5.633 seconds (process running for 6.106)
2026-01-17T22:55:03.469+08:00  INFO --- [           main] c.a.a.a.s.config.DemoExperienceConfig    : DemoExperienceConfig#run - reason=Initializing Demo Experiences
2026-01-17T22:55:03.470+08:00  INFO --- [           main] c.a.a.a.s.config.DemoExperienceConfig    : DemoExperienceConfig#run - reason=Demo Experiences initialization completed
2026-01-17T22:55:03.470+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#run - reason=Starting experience module validation
2026-01-17T22:55:03.516+08:00 DEBUG --- [           main] .p.e.r.ElasticsearchExperienceRepository : ElasticsearchExperienceRepository#count - reason=count completed, count=0
2026-01-17T22:55:03.535+08:00 DEBUG --- [           main] .p.e.r.ElasticsearchExperienceRepository : ElasticsearchExperienceRepository#countByTypeAndScope - reason=count completed, type=CODE, scope=null, count=0
2026-01-17T22:55:03.541+08:00 DEBUG --- [           main] .p.e.r.ElasticsearchExperienceRepository : ElasticsearchExperienceRepository#countByTypeAndScope - reason=count completed, type=REACT, scope=null, count=0
2026-01-17T22:55:03.551+08:00 DEBUG --- [           main] .p.e.r.ElasticsearchExperienceRepository : ElasticsearchExperienceRepository#countByTypeAndScope - reason=count completed, type=COMMON, scope=null, count=0
2026-01-17T22:55:03.551+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testExperienceCount - reason=Experience stats: total=0, code=0, react=0, common=0
2026-01-17T22:55:03.551+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCommonExperienceQuery - reason=Testing common experience query
2026-01-17T22:55:03.676+08:00 DEBUG --- [           main] .s.p.e.p.ElasticsearchExperienceProvider : ElasticsearchExperienceProvider#query - reason=query completed, type=COMMON, text=null, count=0
2026-01-17T22:55:03.676+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCommonExperienceQuery - reason=Found 0 common experiences
2026-01-17T22:55:03.676+08:00  WARN --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCommonExperienceQuery - reason=❌ MoLiHong identity experience not found
2026-01-17T22:55:03.676+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCodeExperienceQuery - reason=Testing code experience query (demo keyword)
2026-01-17T22:55:03.685+08:00 DEBUG --- [           main] .s.p.e.p.ElasticsearchExperienceProvider : ElasticsearchExperienceProvider#query - reason=query completed, type=CODE, text=null, count=0
2026-01-17T22:55:03.685+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCodeExperienceQuery - reason=Found 0 demo code experiences
2026-01-17T22:55:03.685+08:00  WARN --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCodeExperienceQuery - reason=❌ Demo code experience not found
2026-01-17T22:55:03.685+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testReactExperienceQuery - reason=Testing react experience query
2026-01-17T22:55:03.700+08:00 DEBUG --- [           main] .s.p.e.p.ElasticsearchExperienceProvider : ElasticsearchExperienceProvider#query - reason=query completed, type=REACT, text=null, count=0
2026-01-17T22:55:03.700+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testReactExperienceQuery - reason=Found 0 react experiences
2026-01-17T22:55:03.700+08:00  WARN --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testReactExperienceQuery - reason=❌ Ambiguous intent strategy not found
2026-01-17T22:55:03.700+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#run - reason=Experience module validation completed
2026-01-17T22:55:20.328+08:00  INFO --- [nio-8080-exec-1] o.apache.tomcat.util.http.parser.Cookie  : A cookie header was received [Hm_lvt_b79d8f49e2d38b26503b92810b740f45=1767609436,1767669208,1767767035] that contained an invalid cookie. That cookie will be ignored.
 Note: further occurrences of this error will be logged at DEBUG level.
2026-01-17T22:55:20.338+08:00  INFO --- [nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-01-17T22:55:20.338+08:00  INFO --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2026-01-17T22:55:20.338+08:00  INFO --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 0 ms
2026-01-17T22:55:57.270+08:00  INFO --- [nio-8080-exec-5] c.a.c.a.a.s.controller.ThreadController  : Request received for POST /apps/research_agent/users/user-001/threads (service generates ID) with state: {}
2026-01-17T22:55:57.272+08:00  INFO --- [nio-8080-exec-5] c.a.c.a.a.s.service.ThreadServiceImpl    : Created thread: 27c58c0f-e7c3-4c21-9318-8089cd4cb194 for app=research_agent, user=user-001
2026-01-17T22:55:57.272+08:00  INFO --- [nio-8080-exec-5] c.a.c.a.a.s.controller.ThreadController  : Thread created successfully with generated id: 27c58c0f-e7c3-4c21-9318-8089cd4cb194
2026-01-17T22:55:57.308+08:00  INFO --- [nio-8080-exec-6] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#loadAgent 加载 agent: research_agent
2026-01-17T22:55:57.309+08:00  INFO --- [nio-8080-exec-6] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#loadAgent 成功加载 agent: research_agent
2026-01-17T22:55:57.310+08:00  INFO --- [nio-8080-exec-7] c.a.c.a.a.s.controller.ThreadController  : Request received for GET /apps/research_agent/users/user-001/threads/27c58c0f-e7c3-4c21-9318-8089cd4cb194
2026-01-17T22:55:57.372+08:00  INFO --- [nio-8080-exec-6] c.a.a.a.e.e.hook.FastIntentReactHook     : FastIntentReactHook#beforeAgent - reason=try react fast-intent match
2026-01-17T22:55:57.373+08:00 DEBUG --- [nio-8080-exec-6] c.a.a.a.e.e.hook.FastIntentReactHook     : FastIntentReactHook#beforeAgent - reason=fast-intent disabled
2026-01-17T22:55:57.381+08:00 DEBUG --- [nio-8080-exec-6] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#beforeAgent - reason=checking unified intent
2026-01-17T22:55:57.382+08:00 DEBUG --- [nio-8080-exec-6] c.a.a.a.p.i.SemanticActionProvider       : SemanticActionProvider#matchActions - reason=matching actions, userInput=添加产品
2026-01-17T22:55:58.098+08:00 DEBUG --- [nio-8080-exec-6] c.a.a.a.p.v.ActionVectorizationService   : ActionVectorizationService#hybridSearch - actionId=erp:product-unit:create, rawScore=3.3946586, maxScore=3.3946586, normalizedScore=0.95
2026-01-17T22:55:58.115+08:00  INFO --- [nio-8080-exec-6] c.a.a.a.p.i.SemanticActionProvider       : SemanticActionProvider#matchActions - reason=matching completed, userInput=添加产品, matchCount=1
2026-01-17T22:55:58.115+08:00  INFO --- [nio-8080-exec-6] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#beforeAgent - reason=match found, actionId=erp:product-unit:create, confidence=0.57, matchType=SEMANTIC
2026-01-17T22:55:58.115+08:00 DEBUG --- [nio-8080-exec-6] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#beforeAgent - reason=confidence < 0.95, defer to evaluation module, confidence=0.57
2026-01-17T22:55:58.115+08:00  INFO --- [nio-8080-exec-6] c.a.a.a.e.e.h.ModelInputEvaluationHook   : ModelInputEvaluationHook#beforeModel - reason=开始模型输入评估, phase=REACT
2026-01-17T22:55:58.115+08:00 DEBUG --- [nio-8080-exec-6] .a.e.e.c.CodeactEvaluationContextFactory : CodeactEvaluationContextFactory#createInputRoutingContext - reason=开始构造输入路由评估上下文
2026-01-17T22:55:58.120+08:00  INFO --- [pool-3-thread-1] c.a.a.a.e.DefaultEvaluationService       : Starting evaluation for suite: React Phase Evaluation Suite
2026-01-17T22:55:58.181+08:00  INFO --- [pool-2-thread-1] c.a.a.a.e.e.CriterionEvaluationAction    : Executing criterion: enhanced_user_input
2026-01-17T22:55:58.181+08:00  INFO --- [pool-2-thread-2] c.a.a.a.e.e.CriterionEvaluationAction    : Executing criterion: is_fuzzy
2026-01-17T22:55:58.181+08:00  INFO --- [pool-2-thread-3] c.a.a.a.e.e.CriterionEvaluationAction    : Executing criterion: action_intent_match
2026-01-17T22:55:58.181+08:00 DEBUG --- [pool-2-thread-2] c.a.a.a.e.e.CriterionEvaluationAction    : Batching not enabled for criterion: is_fuzzy
2026-01-17T22:55:58.181+08:00 DEBUG --- [pool-2-thread-1] c.a.a.a.e.e.CriterionEvaluationAction    : Batching not enabled for criterion: enhanced_user_input
2026-01-17T22:55:58.181+08:00 DEBUG --- [pool-2-thread-3] c.a.a.a.e.e.CriterionEvaluationAction    : Batching not enabled for criterion: action_intent_match
2026-01-17T22:55:58.181+08:00 DEBUG --- [pool-2-thread-3] c.a.a.a.p.i.SemanticActionProvider       : SemanticActionProvider#matchActions - reason=matching actions, userInput=添加产品
2026-01-17T22:55:58.186+08:00 DEBUG --- [pool-2-thread-1] c.a.a.a.e.evaluator.LLMBasedEvaluator    : Evaluating criterion enhanced_user_input with LLM, prompt: You are an evaluator performing the following evaluation task:

Evaluation Criterion Description: 改写用户输入，使其更加清晰、完整

Working Mechanism:
你是一个用户输入优化专家。请根据用户输入，改写并完善需求。改写要求：1. 补全隐含的约束条件2. 明确输入输出格式3. 保持原始意图不变4. 直接输出改写后的内容，不要添加任何解释

Output your response in the following format:

RESULT: (your evaluation result)
(No reasoning required for this evaluation)

Context:
- userInput: null

Your evaluation result:

2026-01-17T22:55:58.186+08:00 DEBUG --- [pool-2-thread-2] c.a.a.a.e.evaluator.LLMBasedEvaluator    : Evaluating criterion is_fuzzy with LLM, prompt: You are an evaluator performing the following evaluation task:

Evaluation Criterion Description: 判断用户输入是否模糊，是否需要向用户澄清

Working Mechanism:
你是一个用户意图清晰度判断专家。请判断用户输入是否明确。

【模糊】的特征：
- 没有具体指明要做什么操作
- 使用模糊词汇如'帮我看看'、'处理一下'
- 请求可能有多种理解方式
- 缺少必要的参数或信息

【清晰】的特征：
- 明确提到要查询、搜索、获取某个具体信息
- 提供了具体的查询关键词或目标
- 意图明确，执行路径清晰

请直接输出'模糊'或'清晰'，不要添加任何解释。

Output your response in the following format:

RESULT: (one of: 模糊, 清晰)
(No reasoning required for this evaluation)

Context:
- userInput: null

Your evaluation result:

2026-01-17T22:55:58.377+08:00 DEBUG --- [pool-2-thread-3] c.a.a.a.p.v.ActionVectorizationService   : ActionVectorizationService#hybridSearch - actionId=erp:product-unit:create, rawScore=3.3946586, maxScore=3.3946586, normalizedScore=0.95
2026-01-17T22:55:58.388+08:00  INFO --- [pool-2-thread-3] c.a.a.a.p.i.SemanticActionProvider       : SemanticActionProvider#matchActions - reason=matching completed, userInput=添加产品, matchCount=1
2026-01-17T22:55:58.390+08:00  INFO --- [pool-2-thread-3] c.a.a.a.p.i.ActionIntentEvaluator        : ActionIntentEvaluator#buildCandidatesResult - reason=candidates built for LLM verification, userInput=添加产品, candidateCount=1
2026-01-17T22:55:58.390+08:00  INFO --- [pool-2-thread-3] c.a.a.a.e.e.CriterionEvaluationAction    : Criterion action_intent_match completed with result: {"candidates":[{"matchType":"SEMANTIC","confidence":0.57,"actionId":"erp:product-unit:create","description":"在ERP系统中创建新的产品计量单位，如：个、台、箱、件等","actionName":"添加产品单位"}],"userInput":"添加产品","candidateCount":1,"status":"CANDIDATES"}
2026-01-17T22:55:58.864+08:00  INFO --- [pool-2-thread-2] c.a.a.a.e.e.CriterionEvaluationAction    : Criterion is_fuzzy completed with result: 模糊
2026-01-17T22:55:58.920+08:00  INFO --- [pool-2-thread-1] c.a.a.a.e.e.CriterionEvaluationAction    : Criterion enhanced_user_input completed with result: 请提供具体的用户输入内容以便进行优化处理。
2026-01-17T22:55:58.976+08:00  INFO --- [action-thread-1] c.a.a.a.e.e.CriterionEvaluationAction    : Executing criterion: react_experience_retrieval
2026-01-17T22:55:58.976+08:00  INFO --- [action-thread-2] c.a.a.a.e.e.CriterionEvaluationAction    : Executing criterion: action_intent_llm_verify
2026-01-17T22:55:58.976+08:00 DEBUG --- [action-thread-1] c.a.a.a.e.e.CriterionEvaluationAction    : Batching not enabled for criterion: react_experience_retrieval
2026-01-17T22:55:58.976+08:00 DEBUG --- [action-thread-2] c.a.a.a.e.e.CriterionEvaluationAction    : Batching not enabled for criterion: action_intent_llm_verify
2026-01-17T22:55:58.977+08:00 DEBUG --- [action-thread-2] c.a.a.a.e.evaluator.LLMBasedEvaluator    : Evaluating criterion action_intent_llm_verify with LLM, prompt: 你是一个意图识别专家。请根据用户输入和候选动作列表，判断用户最可能想要执行的动作。

## 用户输入
添加产品

## 候选动作列表
{"candidates":[{"matchType":"SEMANTIC","confidence":0.57,"actionId":"erp:product-unit:create","description":"在ERP系统中创建新的产品计量单位，如：个、台、箱、件等","actionName":"添加产品单位"}],"userInput":"添加产品","candidateCount":1,"status":"CANDIDATES"}

## 判断要求
1. 仔细分析用户输入的语义和意图
2. 对比每个候选动作的名称、描述和触发关键词
3. 选择最匹配的动作，如果没有合适的动作则返回 NO_MATCH
4. 给出置信度评分（0-1），表示匹配的确信程度

## 返回格式（严格 JSON）
RESULT: {"actionId": "选中的动作ID或NO_MATCH", "confidence": 0.95, "reason": "判断理由"}

2026-01-17T22:55:58.987+08:00 DEBUG --- [action-thread-1] .s.p.e.p.ElasticsearchExperienceProvider : ElasticsearchExperienceProvider#query - reason=query completed, type=COMMON, text=null, count=0
2026-01-17T22:55:58.991+08:00 DEBUG --- [action-thread-1] .s.p.e.p.ElasticsearchExperienceProvider : ElasticsearchExperienceProvider#query - reason=query completed, type=REACT, text=null, count=0
2026-01-17T22:55:58.991+08:00  INFO --- [action-thread-1] .e.e.ExperienceRetrievalEvaluatorFactory : ExperienceRetrievalEvaluatorFactory#react_experience_evaluator - reason=未检索到经验
2026-01-17T22:55:58.997+08:00  INFO --- [action-thread-1] c.a.a.a.e.e.CriterionEvaluationAction    : Criterion react_experience_retrieval completed with result: 
2026-01-17T22:56:01.815+08:00  INFO --- [action-thread-2] c.a.a.a.e.e.CriterionEvaluationAction    : Criterion action_intent_llm_verify completed with result: {actionId=NO_MATCH, confidence=0.9, reason=用户意图可能是添加一个新的产品条目到系统中，但给定的候选动作仅涉及创建产品计量单位，这与用户需求不符。}
2026-01-17T22:56:01.876+08:00 DEBUG --- [pool-3-thread-1] c.a.a.a.e.e.GraphBasedEvaluationExecutor : Collected result for criterion 'enhanced_user_input': status=SUCCESS, value=请提供具体的用户输入内容以便进行优化处理。
2026-01-17T22:56:01.876+08:00 DEBUG --- [pool-3-thread-1] c.a.a.a.e.e.GraphBasedEvaluationExecutor : Collected result for criterion 'is_fuzzy': status=SUCCESS, value=模糊
2026-01-17T22:56:01.876+08:00 DEBUG --- [pool-3-thread-1] c.a.a.a.e.e.GraphBasedEvaluationExecutor : Collected result for criterion 'react_experience_retrieval': status=SUCCESS, value=
2026-01-17T22:56:01.876+08:00 DEBUG --- [pool-3-thread-1] c.a.a.a.e.e.GraphBasedEvaluationExecutor : Collected result for criterion 'action_intent_match': status=SUCCESS, value={"candidates":[{"matchType":"SEMANTIC","confidence":0.57,"actionId":"erp:product-unit:create","description":"在ERP系统中创建新的产品计量单位，如：个、台、箱、件等","actionName":"添加产品单位"}],"userInput":"添加产品","candidateCount":1,"status":"CANDIDATES"}
2026-01-17T22:56:01.876+08:00 DEBUG --- [pool-3-thread-1] c.a.a.a.e.e.GraphBasedEvaluationExecutor : Collected result for criterion 'action_intent_llm_verify': status=SUCCESS, value={reason=用户意图可能是添加一个新的产品条目到系统中，但给定的候选动作仅涉及创建产品计量单位，这与用户需求不符。, @class=java.util.LinkedHashMap, confidence=0.9, actionId=NO_MATCH}
2026-01-17T22:56:01.881+08:00  INFO --- [pool-3-thread-1] c.a.a.a.e.e.GraphBasedEvaluationExecutor : Collected 5 criterion results from final state
2026-01-17T22:56:01.881+08:00  INFO --- [pool-3-thread-1] c.a.a.a.e.DefaultEvaluationService       : Evaluation completed for suite: React Phase Evaluation Suite
2026-01-17T22:56:01.881+08:00  INFO --- [pool-3-thread-1] c.a.a.a.e.e.h.ModelInputEvaluationHook   : ModelInputEvaluationHook#beforeModel - reason=评估完成, phase=REACT
2026-01-17T22:56:01.881+08:00 DEBUG --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#attachInputRoutingResult - reason=写入输入路由评估结果
2026-01-17T22:56:01.881+08:00  INFO --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#appendEvaluationResultToMessages - reason=开始处理评估结果注入
2026-01-17T22:56:01.881+08:00  INFO --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#appendEvaluationResultToMessages - reason=已解析历史评估结果, 历史条目数=0
2026-01-17T22:56:01.882+08:00 DEBUG --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#appendEvaluationResultToMessages - reason=检查criterion metadata, criterion=action_intent_match, metadata=[topActionId, topConfidence, needsLLMVerification, candidateCount]
2026-01-17T22:56:01.882+08:00 DEBUG --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#appendEvaluationResultToMessages - reason=添加无ref-id的criterion, criterion=action_intent_match
2026-01-17T22:56:01.882+08:00 DEBUG --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#appendEvaluationResultToMessages - reason=检查criterion metadata, criterion=react_experience_retrieval, metadata=[is_empty]
2026-01-17T22:56:01.882+08:00 DEBUG --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#appendEvaluationResultToMessages - reason=跳过空结果的criterion, criterion=react_experience_retrieval
2026-01-17T22:56:01.882+08:00 DEBUG --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#appendEvaluationResultToMessages - reason=检查criterion metadata, criterion=enhanced_user_input, metadata=[]
2026-01-17T22:56:01.882+08:00 DEBUG --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#appendEvaluationResultToMessages - reason=添加无ref-id的criterion, criterion=enhanced_user_input
2026-01-17T22:56:01.882+08:00 DEBUG --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#appendEvaluationResultToMessages - reason=检查criterion metadata, criterion=is_fuzzy, metadata=[]
2026-01-17T22:56:01.882+08:00 DEBUG --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#appendEvaluationResultToMessages - reason=添加无ref-id的criterion, criterion=is_fuzzy
2026-01-17T22:56:01.882+08:00 DEBUG --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#appendEvaluationResultToMessages - reason=检查criterion metadata, criterion=action_intent_llm_verify, metadata=[]
2026-01-17T22:56:01.882+08:00 DEBUG --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#appendEvaluationResultToMessages - reason=添加无ref-id的criterion, criterion=action_intent_llm_verify
2026-01-17T22:56:01.882+08:00  INFO --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#appendEvaluationResultToMessages - reason=筛选出新评估条目, 新条目数=4
2026-01-17T22:56:01.882+08:00  INFO --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#appendEvaluationResultToMessages - reason=已创建增量评估消息对, 新消息数=2
2026-01-17T22:56:01.882+08:00  INFO --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#attachResult - reason=评估结果已写入, path=evaluation.inputRouting, suiteId=react-phase-suite
2026-01-17T22:56:01.895+08:00 ERROR --- [pool-3-thread-1] c.a.c.a.a.s.c.ExecutionController        : Error occurred during agent stream execution

com.fasterxml.jackson.core.JsonParseException: Duplicate field '@class'
 at [Source: REDACTED (`StreamReadFeature.INCLUDE_SOURCE_IN_LOCATION` disabled); line: 1, column: 2136]
	at com.fasterxml.jackson.core.json.JsonReadContext._checkDup(JsonReadContext.java:250)
	at com.fasterxml.jackson.core.json.JsonReadContext.setCurrentName(JsonReadContext.java:244)
	at com.fasterxml.jackson.core.json.ReaderBasedJsonParser.nextFieldName(ReaderBasedJsonParser.java:940)
	at com.fasterxml.jackson.databind.deser.std.BaseNodeDeserializer._deserializeContainerNoRecursion(JsonNodeDeserializer.java:539)
	at com.fasterxml.jackson.databind.deser.std.JsonNodeDeserializer.deserialize(JsonNodeDeserializer.java:100)
	at com.fasterxml.jackson.databind.deser.std.JsonNodeDeserializer.deserialize(JsonNodeDeserializer.java:25)
	at com.fasterxml.jackson.databind.deser.DefaultDeserializationContext.readRootValue(DefaultDeserializationContext.java:342)
	at com.fasterxml.jackson.databind.ObjectMapper._readValue(ObjectMapper.java:4904)
	at com.fasterxml.jackson.databind.ObjectMapper.readTree(ObjectMapper.java:3146)
	at com.alibaba.cloud.ai.graph.serializer.plain_text.jackson.GenericMapDeserializer.deserialize(GenericMapDeserializer.java:42)
	at com.alibaba.cloud.ai.graph.serializer.plain_text.jackson.GenericMapDeserializer.deserialize(GenericMapDeserializer.java:30)
	at com.fasterxml.jackson.databind.deser.DefaultDeserializationContext.readRootValue(DefaultDeserializationContext.java:342)
	at com.fasterxml.jackson.databind.ObjectMapper._readMapAndClose(ObjectMapper.java:4931)
	at com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3868)
	at com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3851)
	at com.alibaba.cloud.ai.graph.serializer.plain_text.jackson.JacksonStateSerializer.readData(JacksonStateSerializer.java:106)
	at com.alibaba.cloud.ai.graph.serializer.StateSerializer.read(StateSerializer.java:60)
	at com.alibaba.cloud.ai.graph.serializer.StateSerializer.read(StateSerializer.java:31)
	at com.alibaba.cloud.ai.graph.serializer.Serializer.bytesToObject(Serializer.java:55)
	at com.alibaba.cloud.ai.graph.serializer.Serializer.readObject(Serializer.java:66)
	at com.alibaba.cloud.ai.graph.serializer.Serializer.cloneObject(Serializer.java:71)
	at com.alibaba.cloud.ai.graph.serializer.StateSerializer.cloneObject(StateSerializer.java:50)
	at com.alibaba.cloud.ai.graph.CompiledGraph.cloneState(CompiledGraph.java:407)
	at com.alibaba.cloud.ai.graph.GraphRunnerContext.cloneState(GraphRunnerContext.java:280)
	at com.alibaba.cloud.ai.graph.GraphRunnerContext.addCheckpoint(GraphRunnerContext.java:228)
	at com.alibaba.cloud.ai.graph.GraphRunnerContext.buildNodeOutputAndAddCheckpoint(GraphRunnerContext.java:428)
	at com.alibaba.cloud.ai.graph.executor.NodeExecutor.handleActionResult(NodeExecutor.java:178)
	at com.alibaba.cloud.ai.graph.executor.NodeExecutor.lambda$executeNode$1(NodeExecutor.java:126)
	at reactor.core.publisher.MonoFlatMapMany$FlatMapManyMain.onNext(MonoFlatMapMany.java:163)
	at reactor.core.publisher.MonoCompletionStage$MonoCompletionStageSubscription.apply(MonoCompletionStage.java:121)
	at reactor.core.publisher.MonoCompletionStage$MonoCompletionStageSubscription.apply(MonoCompletionStage.java:67)
	at java.base/java.util.concurrent.CompletableFuture.uniHandle(CompletableFuture.java:934)
	at java.base/java.util.concurrent.CompletableFuture$UniHandle.tryFire(CompletableFuture.java:911)
	at java.base/java.util.concurrent.CompletableFuture.postComplete(CompletableFuture.java:510)
	at java.base/java.util.concurrent.CompletableFuture$AsyncSupply.run(CompletableFuture.java:1773)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)

2026-01-17T22:56:19.754+08:00  INFO --- [nio-8080-exec-9] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#loadAgent 加载 agent: research_agent
2026-01-17T22:56:19.754+08:00  INFO --- [nio-8080-exec-9] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#loadAgent 成功加载 agent: research_agent
2026-01-17T22:56:19.757+08:00  INFO --- [nio-8080-exec-9] c.a.a.a.e.e.hook.FastIntentReactHook     : FastIntentReactHook#beforeAgent - reason=try react fast-intent match
2026-01-17T22:56:19.758+08:00 DEBUG --- [nio-8080-exec-9] c.a.a.a.e.e.hook.FastIntentReactHook     : FastIntentReactHook#beforeAgent - reason=fast-intent disabled
2026-01-17T22:56:19.760+08:00 DEBUG --- [nio-8080-exec-9] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#beforeAgent - reason=checking unified intent
2026-01-17T22:56:19.761+08:00 DEBUG --- [nio-8080-exec-9] c.a.a.a.p.i.SemanticActionProvider       : SemanticActionProvider#matchActions - reason=matching actions, userInput=添加单位
2026-01-17T22:56:20.053+08:00 DEBUG --- [nio-8080-exec-9] c.a.a.a.p.v.ActionVectorizationService   : ActionVectorizationService#hybridSearch - actionId=erp:product-unit:create, rawScore=3.4759183, maxScore=3.4759183, normalizedScore=0.95
2026-01-17T22:56:20.063+08:00  INFO --- [nio-8080-exec-9] c.a.a.a.p.i.SemanticActionProvider       : SemanticActionProvider#matchActions - reason=matching completed, userInput=添加单位, matchCount=1
2026-01-17T22:56:20.063+08:00  INFO --- [nio-8080-exec-9] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#beforeAgent - reason=match found, actionId=erp:product-unit:create, confidence=0.95, matchType=KEYWORD_EXACT
2026-01-17T22:56:20.074+08:00 DEBUG --- [nio-8080-exec-9] .s.p.e.p.ElasticsearchExperienceProvider : ElasticsearchExperienceProvider#query - reason=query completed, type=REACT, text=null, count=0
2026-01-17T22:56:20.074+08:00  INFO --- [nio-8080-exec-9] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handleHighConfidence - reason=no experience, using Planning direct execution, actionId=erp:product-unit:create
2026-01-17T22:56:20.074+08:00  INFO --- [nio-8080-exec-9] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handlePlanningDirectExecution - reason=direct execution, actionId=erp:product-unit:create
2026-01-17T22:56:20.074+08:00 DEBUG --- [nio-8080-exec-9] c.a.a.a.p.internal.DefaultPlanGenerator  : DefaultPlanGenerator#generate - reason=generating plan, actionId=erp:product-unit:create, actionName=添加产品单位
2026-01-17T22:56:20.079+08:00  INFO --- [nio-8080-exec-9] c.a.a.a.p.internal.DefaultPlanGenerator  : DefaultPlanGenerator#generate - reason=plan generated, planId=3a85898b-4fa0-4efa-8a41-08a1936a676e, stepCount=1
2026-01-17T22:56:20.079+08:00  INFO --- [nio-8080-exec-9] c.a.a.a.p.internal.DefaultPlanExecutor   : DefaultPlanExecutor#execute - reason=starting plan execution, planId=3a85898b-4fa0-4efa-8a41-08a1936a676e, actionId=erp:product-unit:create
2026-01-17T22:56:20.079+08:00 DEBUG --- [nio-8080-exec-9] c.a.a.a.p.internal.DefaultPlanExecutor   : DefaultPlanExecutor#executeSteps - reason=executing step, planId=3a85898b-4fa0-4efa-8a41-08a1936a676e, stepId=execute, stepIndex=0
2026-01-17T22:56:20.079+08:00 DEBUG --- [nio-8080-exec-9] c.a.a.a.p.i.e.ApiCallStepExecutor        : AbstractStepExecutor#execute - reason=executing step, stepId=execute, type=API_CALL
2026-01-17T22:56:20.079+08:00 DEBUG --- [nio-8080-exec-9] c.a.a.a.p.i.e.ApiCallStepExecutor        : ApiCallStepExecutor#doExecute - reason=executing API call step, stepId=execute
2026-01-17T22:56:20.079+08:00  INFO --- [nio-8080-exec-9] c.a.a.a.p.i.e.ApiCallStepExecutor        : ApiCallStepExecutor#doExecute - reason=calling API, url=https://api.simplify.devefive.com/admin-api/erp/product-unit/create, method=POST
2026-01-17T22:56:22.159+08:00  INFO --- [nio-8080-exec-9] c.a.a.a.p.internal.DefaultPlanExecutor   : DefaultPlanExecutor#execute - reason=plan completed, planId=3a85898b-4fa0-4efa-8a41-08a1936a676e, stepCount=1
2026-01-17T22:56:22.160+08:00  INFO --- [nio-8080-exec-9] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handlePlanningDirectExecution - reason=execution completed, planId=3a85898b-4fa0-4efa-8a41-08a1936a676e, success=true
2026-01-17T22:56:22.172+08:00  INFO --- [nio-8080-exec-9] c.a.a.a.e.l.hook.AfterAgentLearningHook  : AfterAgentLearningHook#afterAgent - reason=agent execution completed, starting learning process
2026-01-17T22:56:22.174+08:00  INFO --- [nio-8080-exec-9] c.a.a.a.e.l.hook.AfterAgentLearningHook  : AfterAgentLearningHook#afterAgent - reason=executing learning asynchronously, taskId=262c330a-2255-4596-87ed-a0bb9da38f61
2026-01-17T22:56:22.174+08:00  INFO --- [nio-8080-exec-9] c.a.a.a.e.l.i.DefaultLearningExecutor    : DefaultLearningExecutor#executeAsync - reason=start async execute learning task, taskId=262c330a-2255-4596-87ed-a0bb9da38f61, learningType=experience
2026-01-17T22:56:22.175+08:00  INFO --- [earning-async-0] c.a.a.a.e.l.i.DefaultLearningExecutor    : DefaultLearningExecutor#execute - reason=start execute learning task, taskId=262c330a-2255-4596-87ed-a0bb9da38f61, learningType=experience
2026-01-17T22:56:22.176+08:00 DEBUG --- [earning-async-0] c.a.a.a.e.l.i.DefaultLearningStrategy    : DefaultLearningStrategy#selectExtractor - reason=extractor found, learningType=experience, extractorClass=ExperienceLearningExtractor
2026-01-17T22:56:22.575+08:00  INFO --- [earning-async-0] .a.a.a.e.l.e.ExperienceLearningExtractor : ExperienceLearningExtractor#llmJudgeWorthLearning - reason=llm answered, answer=NO
2026-01-17T22:56:22.575+08:00  INFO --- [earning-async-0] .a.a.a.e.l.e.ExperienceLearningExtractor : ExperienceLearningExtractor#shouldLearn - reason=llm judgment completed, worthLearning=false, result=false
2026-01-17T22:56:22.575+08:00  INFO --- [earning-async-0] c.a.a.a.e.l.i.DefaultLearningExecutor    : DefaultLearningExecutor#execute - reason=extractor decided not to learn, taskId=262c330a-2255-4596-87ed-a0bb9da38f61, learningType=experience
2026-01-17T23:01:59.347+08:00  INFO --- [           main] c.a.a.a.start.AssistantAgentApplication  : Starting AssistantAgentApplication using Java 21.0.9 with PID 19952 (D:\devfive\AssistantAgent\assistant-agent-start\target\classes started by zhou_ in D:\devfive\AssistantAgent\assistant-agent-start)
2026-01-17T23:01:59.348+08:00 DEBUG --- [           main] c.a.a.a.start.AssistantAgentApplication  : Running with Spring Boot v3.4.8, Spring v6.2.9
2026-01-17T23:01:59.348+08:00  INFO --- [           main] c.a.a.a.start.AssistantAgentApplication  : No active profile set, falling back to 1 default profile: "default"
2026-01-17T23:02:00.597+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Elasticsearch repositories in DEFAULT mode.
2026-01-17T23:02:00.629+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 22 ms. Found 0 Elasticsearch repository interfaces.
2026-01-17T23:02:00.634+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Reactive Elasticsearch repositories in DEFAULT mode.
2026-01-17T23:02:00.639+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 5 ms. Found 0 Reactive Elasticsearch repository interfaces.
2026-01-17T23:02:01.806+08:00  INFO --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2026-01-17T23:02:01.823+08:00  INFO --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2026-01-17T23:02:01.824+08:00  INFO --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.43]
2026-01-17T23:02:01.919+08:00  INFO --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2026-01-17T23:02:01.919+08:00  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2516 ms
2026-01-17T23:02:01.988+08:00  INFO --- [           main] e.l.c.LearningExtensionAutoConfiguration : LearningExtensionAutoConfiguration#constructor - reason=learning extension auto-configuration initialized
2026-01-17T23:02:02.007+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#init - reason=search extension framework is enabled
2026-01-17T23:02:02.007+08:00  INFO --- [           main] c.a.a.a.s.s.MockBaiduWebSearchProvider   : MockBaiduWebSearchProvider#init - reason=使用简单模式初始化
2026-01-17T23:02:02.007+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#unifiedSearchCodeactTool - reason=创建统一搜索工具, providerCount=3
2026-01-17T23:02:02.061+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#init - reason=planning extension is enabled
2026-01-17T23:02:02.064+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#init - reason=ES configuration class loaded (elasticsearch.enabled=true)
2026-01-17T23:02:02.064+08:00  INFO --- [           main] toConfiguration$MybatisPlusConfiguration : MybatisPlusConfiguration#init - reason=MySQL configuration class loaded (mysql.enabled=true, MyBatisPlus present)
2026-01-17T23:02:02.366+08:00  INFO --- [           main] toConfiguration$MybatisPlusConfiguration : MybatisPlusConfiguration#actionEntityConverter - reason=creating entity converter
2026-01-17T23:02:02.367+08:00  INFO --- [           main] toConfiguration$MybatisPlusConfiguration : MybatisPlusConfiguration#mybatisPlusActionRepository - reason=ActionRegistryMapper found, creating MySQL repository
2026-01-17T23:02:02.853+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#actionVectorizationService - reason=creating ES vectorization service
2026-01-17T23:02:02.931+08:00  INFO --- [           main] c.a.a.a.p.v.ActionVectorizationService   : ActionVectorizationService#init - reason=ES index initialized on startup
2026-01-17T23:02:02.947+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#semanticActionProvider - reason=creating semantic action provider, semanticWeight=0.6, keywordWeight=0.4, matchThreshold=0.5
2026-01-17T23:02:02.951+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#defaultPlanGenerator - reason=creating default plan generator
2026-01-17T23:02:02.953+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#planActionCodeactTool - reason=creating plan_action tool
2026-01-17T23:02:02.956+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#queryStepExecutor - reason=creating query step executor
2026-01-17T23:02:02.957+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#inputStepExecutor - reason=creating input step executor
2026-01-17T23:02:02.959+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#executeStepExecutor - reason=creating execute step executor
2026-01-17T23:02:02.960+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#apiCallStepExecutor - reason=creating api call step executor
2026-01-17T23:02:02.967+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#validationStepExecutor - reason=creating validation step executor
2026-01-17T23:02:02.969+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#stepExecutorRegistry - reason=creating executor registry, executorCount=5
2026-01-17T23:02:02.970+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=QUERY, executorClass=QueryStepExecutor
2026-01-17T23:02:02.971+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=INPUT, executorClass=InputStepExecutor
2026-01-17T23:02:02.971+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=EXECUTE, executorClass=ExecuteStepExecutor
2026-01-17T23:02:02.971+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=API_CALL, executorClass=ApiCallStepExecutor
2026-01-17T23:02:02.971+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=VALIDATION, executorClass=ValidationStepExecutor
2026-01-17T23:02:02.971+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#defaultPlanExecutor - reason=creating default plan executor
2026-01-17T23:02:02.973+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#executeActionCodeactTool - reason=creating execute_action tool
2026-01-17T23:02:02.974+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#listActionsCodeactTool - reason=creating list_actions tool
2026-01-17T23:02:02.975+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#getActionDetailsCodeactTool - reason=creating get_action_details tool
2026-01-17T23:02:03.041+08:00  INFO --- [           main] e.l.c.LearningExtensionAutoConfiguration : LearningExtensionAutoConfiguration#experienceLearningExtractor - reason=creating LLM-based experience learning extractor
2026-01-17T23:02:03.041+08:00  INFO --- [           main] .a.a.a.e.l.e.ExperienceLearningExtractor : ExperienceLearningExtractor#constructor - reason=LLM-based extractor initialized
2026-01-17T23:02:03.049+08:00  INFO --- [           main] e.l.c.LearningExtensionAutoConfiguration : LearningExtensionAutoConfiguration#inMemoryLearningRepository - reason=creating in-memory learning repository
2026-01-17T23:02:03.053+08:00  INFO --- [           main] c.a.a.a.start.config.PersistenceConfig   : PersistenceConfig#init - reason=persistence configuration loaded
2026-01-17T23:02:03.057+08:00  INFO --- [           main] c.a.a.a.start.config.PersistenceConfig   : PersistenceConfig#elasticsearchExperienceRepository - reason=creating Elasticsearch experience repository (PRIMARY), indexName=experiences
2026-01-17T23:02:03.062+08:00  INFO --- [           main] e.l.c.LearningExtensionAutoConfiguration : LearningExtensionAutoConfiguration#experienceLearningRepository - reason=creating experience learning repository
2026-01-17T23:02:03.069+08:00  INFO --- [           main] e.l.c.LearningExtensionAutoConfiguration : LearningExtensionAutoConfiguration#learningStrategy - reason=creating learning strategy, asyncEnabled=true
2026-01-17T23:02:03.069+08:00  INFO --- [           main] e.l.c.LearningExtensionAutoConfiguration : LearningExtensionAutoConfiguration#asyncLearningHandler - reason=creating async learning handler, threadPoolSize=2, queueCapacity=100
2026-01-17T23:02:03.069+08:00  INFO --- [           main] c.a.a.a.e.l.i.AsyncLearningHandler       : AsyncLearningHandler#constructor - reason=async learning handler initialized, threadPoolSize=2, queueCapacity=100
2026-01-17T23:02:03.075+08:00  INFO --- [           main] e.l.c.LearningExtensionAutoConfiguration : LearningExtensionAutoConfiguration#learningExecutor - reason=creating learning executor, extractorCount=1, repositoryCount=2
2026-01-17T23:02:03.077+08:00  INFO --- [           main] e.l.c.LearningExtensionAutoConfiguration : LearningExtensionAutoConfiguration#afterAgentLearningHook - reason=creating after agent learning hook, learningType=experience
2026-01-17T23:02:03.081+08:00  INFO --- [           main] c.a.a.a.start.config.PersistenceConfig   : PersistenceConfig#elasticsearchExperienceProvider - reason=creating Elasticsearch experience provider (PRIMARY), indexName=experiences
2026-01-17T23:02:03.086+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#<init> - reason=初始化默认评估套件配置, experienceProviderAvailable=true
2026-01-17T23:02:03.086+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#evaluatorRegistry - reason=创建 EvaluatorRegistry Bean
2026-01-17T23:02:03.086+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'llm-based' of type LLMBasedEvaluator
2026-01-17T23:02:03.086+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'passthrough' of type RuleBasedEvaluator
2026-01-17T23:02:03.092+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'react_experience_evaluator' of type RuleBasedEvaluator
2026-01-17T23:02:03.092+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createDefaultEvaluatorRegistry - reason=注册 React 阶段经验检索评估器
2026-01-17T23:02:03.092+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'codeact_experience_evaluator' of type RuleBasedEvaluator
2026-01-17T23:02:03.092+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createDefaultEvaluatorRegistry - reason=注册 CodeAct 阶段经验检索评估器
2026-01-17T23:02:03.092+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#evaluationService - reason=创建默认 EvaluationService, sharedRegistryEvaluators=[llm-based, passthrough, codeact_experience_evaluator, react_experience_evaluator]
2026-01-17T23:02:03.092+08:00 DEBUG --- [           main] c.a.a.a.e.e.GraphBasedEvaluationExecutor : Created default ExecutorService for batch processing
2026-01-17T23:02:03.092+08:00  INFO --- [           main] .c.ExperienceEvaluationCriterionProvider : ExperienceEvaluationCriterionProvider#<init> - reason=初始化经验评估 Criterion 提供者
2026-01-17T23:02:03.098+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#structuredParamExtractor - reason=creating structured param extractor
2026-01-17T23:02:03.104+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#parameterValidator - reason=creating parameter validator
2026-01-17T23:02:03.110+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#restTemplate - reason=creating RestTemplate bean
2026-01-17T23:02:03.113+08:00  INFO --- [           main] c.a.a.a.planning.executor.HttpExecutor   : HttpExecutor#init - initialized
2026-01-17T23:02:03.113+08:00  INFO --- [           main] c.a.a.a.p.executor.InternalExecutor      : InternalExecutor#init - initialized
2026-01-17T23:02:03.114+08:00  INFO --- [           main] c.a.a.a.p.e.ActionExecutorFactory        : ActionExecutorFactory#init - initialized executors: INTERNAL(InternalExecutor), HTTP(HttpExecutor), DATA_AGENT(DataAgentExecutor), MCP(McpExecutor)
2026-01-17T23:02:03.114+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#sessionProvider - reason=creating in-memory session provider
2026-01-17T23:02:03.114+08:00  INFO --- [           main] c.a.a.a.p.s.InMemorySessionProvider      : InMemorySessionProvider#init - initialized
2026-01-17T23:02:03.118+08:00  INFO --- [           main] c.a.a.a.p.s.ParamCollectionService       : ParamCollectionService#init - sessionProvider=InMemory
2026-01-17T23:02:03.118+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'action_intent_evaluator' of type ActionIntentEvaluator
2026-01-17T23:02:03.118+08:00  INFO --- [           main] p.i.PlanningIntegrationAutoConfiguration : PlanningIntegrationAutoConfiguration#actionIntentEvaluator - initialized and registered, paramCollection=true, llmVerification=true, maxCandidates=5
2026-01-17T23:02:03.118+08:00  INFO --- [           main] .p.i.PlanningEvaluationCriterionProvider : PlanningEvaluationCriterionProvider#init - initialized, llmVerificationEnabled=true
2026-01-17T23:02:03.118+08:00  INFO --- [           main] p.i.PlanningIntegrationAutoConfiguration : PlanningIntegrationAutoConfiguration#planningEvaluationCriterionProvider - registered planning evaluation criterion provider
2026-01-17T23:02:03.118+08:00  INFO --- [           main] .c.ExperienceEvaluationCriterionProvider : ExperienceEvaluationCriterionProvider#getReactPhaseCriteria - reason=提供 React 阶段评估 Criteria
2026-01-17T23:02:03.123+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createReactPhaseSuite - reason=添加自定义 Criterion, provider=ExperienceEvaluationCriterionProvider, count=3
2026-01-17T23:02:03.123+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createReactPhaseSuite - reason=添加自定义 Criterion, provider=PlanningEvaluationCriterionProvider, count=2
2026-01-17T23:02:03.123+08:00  INFO --- [           main] a.a.e.a.BatchAggregationStrategyRegistry : Registered batch aggregation strategy: ANY_TRUE
2026-01-17T23:02:03.123+08:00  INFO --- [           main] a.a.e.a.BatchAggregationStrategyRegistry : Registered batch aggregation strategy: ALL_TRUE
2026-01-17T23:02:03.158+08:00  INFO --- [           main] c.a.c.a.g.internal.node.ParallelNode     : Calculated core pool size: 32 (CPU cores: 16)
2026-01-17T23:02:03.158+08:00  INFO --- [           main] c.a.c.a.g.internal.node.ParallelNode     : Calculated maximum pool size: 64 (CPU cores: 16)
2026-01-17T23:02:03.158+08:00  INFO --- [           main] c.a.c.a.g.internal.node.ParallelNode     : Calculated queue capacity: 1000
2026-01-17T23:02:03.158+08:00  INFO --- [           main] c.a.a.a.e.DefaultEvaluationService       : Registered evaluation suite: react-phase-suite
2026-01-17T23:02:03.158+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#evaluationService - reason=注册 React Phase Suite, suiteId=react-phase-suite
2026-01-17T23:02:03.158+08:00  INFO --- [           main] .c.ExperienceEvaluationCriterionProvider : ExperienceEvaluationCriterionProvider#getCodeActPhaseCriteria - reason=提供 CodeAct 阶段评估 Criteria
2026-01-17T23:02:03.158+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createCodeActPhaseSuite - reason=添加自定义 Criterion, provider=ExperienceEvaluationCriterionProvider, count=3
2026-01-17T23:02:03.158+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createCodeActPhaseSuite - reason=添加自定义 Criterion, provider=PlanningEvaluationCriterionProvider, count=2
2026-01-17T23:02:03.158+08:00  INFO --- [           main] a.a.e.a.BatchAggregationStrategyRegistry : Registered batch aggregation strategy: ANY_TRUE
2026-01-17T23:02:03.158+08:00  INFO --- [           main] a.a.e.a.BatchAggregationStrategyRegistry : Registered batch aggregation strategy: ALL_TRUE
2026-01-17T23:02:03.158+08:00  INFO --- [           main] c.a.a.a.e.DefaultEvaluationService       : Registered evaluation suite: codeact-phase-suite
2026-01-17T23:02:03.158+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#evaluationService - reason=注册 CodeAct Phase Suite, suiteId=codeact-phase-suite
2026-01-17T23:02:03.164+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#codeactEvaluationContextFactory - reason=创建 EvaluationContextFactory
2026-01-17T23:02:03.165+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#codeactEvaluationResultAttacher - reason=创建 EvaluationResultAttacher
2026-01-17T23:02:03.168+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#reactPhaseEvaluationHooks - reason=创建 React Phase ModelInputEvaluationHook
2026-01-17T23:02:03.170+08:00  INFO --- [           main] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#<init> - reason=初始化, phase=REACT, providerCount=1
2026-01-17T23:02:03.170+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#reactPhaseEvaluationHooks - reason=创建 React Phase EvaluationPromptInjectionHook, providersCount=2
2026-01-17T23:02:03.171+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#codeactPhaseEvaluationHooks - reason=创建 CodeAct Phase ModelInputEvaluationHook
2026-01-17T23:02:03.172+08:00  INFO --- [           main] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#<init> - reason=初始化, phase=CODEACT, providerCount=1
2026-01-17T23:02:03.172+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#codeactPhaseEvaluationHooks - reason=创建 CodeAct Phase EvaluationPromptInjectionHook, providersCount=2
2026-01-17T23:02:03.173+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#keywordMatcher - reason=creating keyword matcher
2026-01-17T23:02:03.175+08:00  INFO --- [           main] iguration$UnifiedIntentHookConfiguration : UnifiedIntentHookConfiguration#unifiedIntentRecognitionHook - reason=creating unified intent hook, experienceProviderPresent=true, directExecuteThreshold=0.95, hintThreshold=0.5
2026-01-17T23:02:03.273+08:00  INFO --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2026-01-17T23:02:03.494+08:00  INFO --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@36e358de
2026-01-17T23:02:03.495+08:00  INFO --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2026-01-17T23:02:03.636+08:00 DEBUG --- [           main] c.a.a.a.planning.intent.KeywordMatcher   : KeywordMatcher#registerAction - actionId=erp:product-unit:create, keywords=18
2026-01-17T23:02:03.636+08:00  INFO --- [           main] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#initKeywordMatcher - reason=initialized, actionCount=1, keywordIndexSize=18
2026-01-17T23:02:03.636+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#init - reason=reply module enabled
2026-01-17T23:02:03.641+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactToolFactory - reason=创建CodeactTool工厂, channels=1
2026-01-17T23:02:03.641+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#init - reason=工厂初始化完成, channels=1
2026-01-17T23:02:03.652+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=开始创建Reply工具
2026-01-17T23:02:03.655+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#createTools - reason=创建工具成功, toolName=send_success_message, channelCode=IDE_TEXT
2026-01-17T23:02:03.656+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#createTools - reason=创建工具成功, toolName=send_error_message, channelCode=IDE_TEXT
2026-01-17T23:02:03.656+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#createTools - reason=创建工具成功, toolName=send_notification, channelCode=IDE_TEXT
2026-01-17T23:02:03.657+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#createTools - reason=工具创建完成, totalCount=3
2026-01-17T23:02:03.657+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=Reply工具创建完成, count=3
2026-01-17T23:02:03.657+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=创建Reply工具, index=1, name=send_success_message, description=Send a success message to the IDE console
2026-01-17T23:02:03.657+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=创建Reply工具, index=2, name=send_error_message, description=Send an error message to the IDE console
2026-01-17T23:02:03.657+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=创建Reply工具, index=3, name=send_notification, description=Send a notification message
2026-01-17T23:02:03.659+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactToolFactory - reason=创建SearchCodeactTool工厂, providerCount=3
2026-01-17T23:02:03.672+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactToolFactory - reason=创建TriggerCodeactTool工厂
2026-01-17T23:02:03.672+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=开始创建Trigger工具
2026-01-17T23:02:03.673+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=创建SubscribeTriggerCodeactTool成功
2026-01-17T23:02:03.675+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=创建UnsubscribeTriggerCodeactTool成功
2026-01-17T23:02:03.676+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=创建ListTriggersCodeactTool成功
2026-01-17T23:02:03.677+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=创建GetTriggerDetailCodeactTool成功
2026-01-17T23:02:03.677+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=触发器工具创建完成, count=4
2026-01-17T23:02:03.677+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=Trigger工具创建完成, count=4
2026-01-17T23:02:03.677+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=创建Trigger工具, index=1, name=subscribe_trigger, description=创建并订阅一个新的触发器
2026-01-17T23:02:03.677+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=创建Trigger工具, index=2, name=unsubscribe_trigger, description=取消订阅并删除一个触发器
2026-01-17T23:02:03.677+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=创建Trigger工具, index=3, name=list_triggers, description=列出所有触发器
2026-01-17T23:02:03.678+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=创建Trigger工具, index=4, name=get_trigger_detail, description=获取指定触发器的详细信息
2026-01-17T23:02:03.686+08:00  INFO --- [           main] e.c.ExperienceExtensionAutoConfiguration : ExperienceExtensionAutoConfiguration#fastIntentService - reason=creating FastIntentService, extraMatchers=0
2026-01-17T23:02:03.691+08:00  INFO --- [           main] e.c.ExperienceExtensionAutoConfiguration : ExperienceExtensionAutoConfiguration#fastIntentReactHook - reason=creating fast intent react hook bean
2026-01-17T23:02:03.696+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=创建 CodeactAgent
2026-01-17T23:02:03.696+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=配置 MemorySaver 以支持多轮对话上下文保持
2026-01-17T23:02:03.696+08:00  WARN --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=临时禁用 streaming 模式以排查循环问题
2026-01-17T23:02:03.696+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加UnifiedSearchCodeactTool
2026-01-17T23:02:03.696+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockBaiduWebSearchProvider, toolName=search_web
2026-01-17T23:02:03.701+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockKnowledgeStoreSearchProvider, toolName=search_knowledge
2026-01-17T23:02:03.702+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockProjectContextSearchProvider, toolName=search_project
2026-01-17T23:02:03.702+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=搜索工具创建完成, totalCount=3
2026-01-17T23:02:03.702+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加SearchCodeactTools, count=3
2026-01-17T23:02:03.702+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加ReplyCodeactTools, count=3
2026-01-17T23:02:03.702+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加TriggerCodeactTools, count=4
2026-01-17T23:02:03.702+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#createMcpDynamicTools - reason=Creating MCP dynamic tools
2026-01-17T23:02:03.702+08:00  INFO --- [           main] c.a.a.a.e.d.mcp.McpDynamicToolFactory    : McpDynamicToolFactory#createTools - reason=开始创建MCP动态工具
2026-01-17T23:02:03.706+08:00  INFO --- [           main] c.a.a.a.e.d.mcp.McpDynamicToolFactory    : McpDynamicToolFactory#createTools - reason=无可用的MCP工具
2026-01-17T23:02:03.706+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#createMcpDynamicTools - reason=MCP dynamic tools created, count=0
2026-01-17T23:02:03.706+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=Added MCP dynamic tools, count=0
2026-01-17T23:02:03.706+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#createHttpDynamicTools - reason=HTTP dynamic tools disabled by default
2026-01-17T23:02:03.706+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=合并后CodeactTool总数, count=11
2026-01-17T23:02:03.706+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=React阶段使用内置工具(write_code, execute_code, write_condition_code)
2026-01-17T23:02:03.706+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=注入 React Phase 评估 Hooks, count=2
2026-01-17T23:02:03.706+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=注入 CodeAct Phase 评估 Hooks, count=2
2026-01-17T23:02:03.706+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=已准备注入AfterAgentLearningHook
2026-01-17T23:02:03.706+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=已准备注入FastIntentReactHook
2026-01-17T23:02:03.706+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=已准备注入UnifiedIntentRecognitionHook
2026-01-17T23:02:03.706+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 开始构建CodeactAgent
2026-01-17T23:02:03.706+08:00  INFO --- [           main] .a.a.a.c.t.s.DefaultReturnSchemaRegistry : DefaultReturnSchemaRegistry#<init> - reason=创建新实例, hashCode=241403219
2026-01-17T23:02:03.706+08:00 DEBUG --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#<init> - reason=创建注册表, returnSchemaRegistry=DefaultReturnSchemaRegistry
2026-01-17T23:02:03.706+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=创建默认CodeactToolRegistry
2026-01-17T23:02:03.706+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=开始注册CodeactTool, count=11
2026-01-17T23:02:03.706+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=unified_search
2026-01-17T23:02:03.706+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=unified_search
2026-01-17T23:02:03.706+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=search_web
2026-01-17T23:02:03.706+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=search_web
2026-01-17T23:02:03.706+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=search_knowledge
2026-01-17T23:02:03.706+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=search_knowledge
2026-01-17T23:02:03.706+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=search_project
2026-01-17T23:02:03.706+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=search_project
2026-01-17T23:02:03.706+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=send_success_message
2026-01-17T23:02:03.706+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=send_success_message
2026-01-17T23:02:03.706+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=send_error_message
2026-01-17T23:02:03.706+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=send_error_message
2026-01-17T23:02:03.706+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=send_notification
2026-01-17T23:02:03.706+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=send_notification
2026-01-17T23:02:03.706+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=subscribe_trigger
2026-01-17T23:02:03.711+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=subscribe_trigger
2026-01-17T23:02:03.711+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=unsubscribe_trigger
2026-01-17T23:02:03.711+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=unsubscribe_trigger
2026-01-17T23:02:03.711+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=list_triggers
2026-01-17T23:02:03.711+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=list_triggers
2026-01-17T23:02:03.711+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=get_trigger_detail
2026-01-17T23:02:03.711+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=get_trigger_detail
2026-01-17T23:02:03.711+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册完成, count=11
2026-01-17T23:02:03.711+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 创建默认CodeContext: language=PYTHON
2026-01-17T23:02:03.711+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 创建默认RuntimeEnvironmentManager: language=PYTHON
2026-01-17T23:02:03.711+08:00 DEBUG --- [           main] c.a.a.a.c.e.bridge.AgentToolBridge       : AgentToolBridge#<init> 初始化: 注册了0个工具
2026-01-17T23:02:03.711+08:00 DEBUG --- [           main] c.a.a.a.c.executor.bridge.StateBridge    : StateBridge#<init> 初始化完成
2026-01-17T23:02:03.711+08:00  INFO --- [           main] c.a.a.a.core.executor.GraalCodeExecutor  : GraalCodeExecutor#<init> 初始化完成: language=PYTHON, allowIO=false, timeout=30000ms, executableTools=true, customBridgeFactory=false
2026-01-17T23:02:03.711+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#createCodeactSubAgentInterceptor 创建子Agent拦截器
2026-01-17T23:02:03.718+08:00  INFO --- [           main] c.a.a.a.a.subagent.CodeactSubAgent       : CodeactSubAgent#<init> 初始化: name=code-generator
2026-01-17T23:02:03.718+08:00  INFO --- [           main] c.a.a.a.a.subagent.CodeactSubAgent       : CodeactSubAgent#<init> 初始化: name=condition-code-generator
2026-01-17T23:02:03.718+08:00  INFO --- [           main] c.a.a.a.a.s.CodeactSubAgentInterceptor   : CodeactSubAgentInterceptor#<init> 创建默认代码生成子Agent
2026-01-17T23:02:03.845+08:00  INFO --- [           main] c.a.a.a.a.s.CodeactSubAgentInterceptor   : CodeactSubAgentInterceptor#<init> 初始化完成: subAgentCount=2
2026-01-17T23:02:03.846+08:00  INFO --- [           main] c.a.a.a.a.tools.ExecuteCodeTool          : ExecuteCodeTool#<init> 初始化完成
2026-01-17T23:02:03.847+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 拦截器分类完成: modelInterceptors=1, toolInterceptors=0
2026-01-17T23:02:03.847+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 从拦截器提取工具: interceptor=CodeactSubAgent, toolCount=2
2026-01-17T23:02:03.857+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 工具收集完成: interceptorTools=2, regularTools=3, total=6
2026-01-17T23:02:03.857+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 设置ModelInterceptors到LlmNode: count=1
2026-01-17T23:02:03.862+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build CodeactAgent构建完成
2026-01-17T23:02:03.862+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=开始罗列已注册的工具
2026-01-17T23:02:03.862+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct阶段工具数量, count=11
2026-01-17T23:02:03.862+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=1, name=unified_search, description=统一搜索工具，可同时搜索项目、知识库、Web等多个数据源
2026-01-17T23:02:03.862+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=2, name=search_knowledge, description=搜索团队知识库，包括FAQ、规范、最佳实践等
2026-01-17T23:02:03.862+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=3, name=send_success_message, description=Send a success message to the IDE console
2026-01-17T23:02:03.862+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=4, name=search_web, description=执行Web搜索，获取公开互联网信息
2026-01-17T23:02:03.862+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=5, name=unsubscribe_trigger, description=取消订阅并删除一个触发器
2026-01-17T23:02:03.862+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=6, name=get_trigger_detail, description=获取指定触发器的详细信息
2026-01-17T23:02:03.862+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=7, name=send_error_message, description=Send an error message to the IDE console
2026-01-17T23:02:03.862+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=8, name=search_project, description=搜索项目上下文信息，包括代码、配置、文档等
2026-01-17T23:02:03.862+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=9, name=send_notification, description=Send a notification message
2026-01-17T23:02:03.862+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=10, name=subscribe_trigger, description=创建并订阅一个新的触发器
2026-01-17T23:02:03.862+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=11, name=list_triggers, description=列出所有触发器
2026-01-17T23:02:03.862+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React阶段工具数量, count=6
2026-01-17T23:02:03.862+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=1, name=write_code, description=Generate and register a new function with specified name and parameters. IMPORTANT: You MUST provide both 'functionName' and 'parameters' fields. Example: write_code(requirement='calculate sum', functionName='calculate_sum', parameters=['a', 'b'])
2026-01-17T23:02:03.862+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=2, name=write_condition_code, description=Generate and register a condition check function for triggers. This function MUST return a boolean value (True/False). Example: write_condition_code(requirement='check if it is a working day', functionName='check_is_working_day', parameters=['date'])
2026-01-17T23:02:03.862+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=3, name=send_success_message, description=Send a success message to the IDE console
2026-01-17T23:02:03.862+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=4, name=send_error_message, description=Send an error message to the IDE console
2026-01-17T23:02:03.862+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=5, name=send_notification, description=Send a notification message
2026-01-17T23:02:03.862+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=6, name=execute_code, description=Execute a previously generated function by its exact name with matching parameters. CRITICAL: The functionName MUST exactly match the name used in write_code. The 'args' parameter names MUST exactly match the 'parameters' specified in write_code. Example: If you called write_code with functionName='calculate_sum' and parameters=['a', 'b'], then you must call execute_code with functionName='calculate_sum' and args={'a': 10, 'b': 20}. Parameter value types supported: String, Number, Boolean, List, Map/Object.
2026-01-17T23:02:03.862+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=工具罗列完成
2026-01-17T23:02:03.863+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgent#<init> 初始化完成: language=PYTHON
2026-01-17T23:02:03.865+08:00  INFO --- [           main] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#<init> 初始化 Agent 加载器
2026-01-17T23:02:03.874+08:00 DEBUG --- [           main] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#<init> Agent 图结构:
@startuml CodeactAgent
skinparam usecaseFontSize 14
skinparam usecaseStereotypeFontSize 12
skinparam hexagonFontSize 14
skinparam hexagonStereotypeFontSize 12
title "CodeactAgent"
footer

powered by spring-ai-alibaba
end footer
circle start<<input>> as __START__
circle stop as __END__
usecase "_AGENT_MODEL_"<<Node>>
usecase "_AGENT_TOOL_"<<Node>>
usecase "_AGENT_HOOK_FastIntentReactHook.before"<<Node>>
usecase "_AGENT_HOOK_UnifiedIntentRecognitionHook.before"<<Node>>
usecase "_AGENT_HOOK_AfterAgentLearningHook.after"<<Node>>
usecase "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"<<Node>>
usecase "_AGENT_HOOK_EvaluationPromptInjectionHook-REACT.beforeModel"<<Node>>
hexagon "check state" as condition1<<Condition>>
hexagon "check state" as condition2<<Condition>>
hexagon "check state" as condition3<<Condition>>
hexagon "check state" as condition4<<Condition>>
"__START__" -down-> "_AGENT_HOOK_FastIntentReactHook.before"
"_AGENT_HOOK_FastIntentReactHook.before" .down.> "condition1"
"condition1" .down.> "_AGENT_TOOL_"
'"_AGENT_HOOK_FastIntentReactHook.before" .down.> "_AGENT_TOOL_"
"condition1" .down.> "_AGENT_HOOK_UnifiedIntentRecognitionHook.before"
'"_AGENT_HOOK_FastIntentReactHook.before" .down.> "_AGENT_HOOK_UnifiedIntentRecognitionHook.before"
"_AGENT_HOOK_UnifiedIntentRecognitionHook.before" .down.> "condition2"
"condition2" .down.> "_AGENT_HOOK_AfterAgentLearningHook.after"
'"_AGENT_HOOK_UnifiedIntentRecognitionHook.before" .down.> "_AGENT_HOOK_AfterAgentLearningHook.after"
"condition2" .down.> "_AGENT_TOOL_"
'"_AGENT_HOOK_UnifiedIntentRecognitionHook.before" .down.> "_AGENT_TOOL_"
"condition2" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
'"_AGENT_HOOK_UnifiedIntentRecognitionHook.before" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
"_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel" -down-> "_AGENT_HOOK_EvaluationPromptInjectionHook-REACT.beforeModel"
"_AGENT_HOOK_EvaluationPromptInjectionHook-REACT.beforeModel" -down-> "_AGENT_MODEL_"
"_AGENT_HOOK_AfterAgentLearningHook.after" -down-> "__END__"
"_AGENT_MODEL_" .down.> "condition3"
"condition3" .down.> "_AGENT_TOOL_"
'"_AGENT_MODEL_" .down.> "_AGENT_TOOL_"
"condition3" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
'"_AGENT_MODEL_" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
"condition3" .down.> "_AGENT_HOOK_AfterAgentLearningHook.after"
'"_AGENT_MODEL_" .down.> "_AGENT_HOOK_AfterAgentLearningHook.after"
"_AGENT_TOOL_" .down.> "condition4"
"condition4" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
'"_AGENT_TOOL_" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
"condition4" .down.> "_AGENT_HOOK_AfterAgentLearningHook.after"
'"_AGENT_TOOL_" .down.> "_AGENT_HOOK_AfterAgentLearningHook.after"
@enduml

2026-01-17T23:02:03.874+08:00  INFO --- [           main] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#<init> 已注册 agent: grayscale_agent
2026-01-17T23:02:03.882+08:00 DEBUG --- [           main] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#listAgents 列出所有 agent
2026-01-17T23:02:03.882+08:00  INFO --- [           main] c.a.c.a.a.s.controller.AgentController   : AgentController initialized with 1 dynamic agents: [grayscale_agent]
2026-01-17T23:02:03.892+08:00  INFO --- [           main] e.e.c.CodeactEvaluationAutoConfiguration : CodeactEvaluationAutoConfiguration#inputRoutingEvaluationHook - reason=创建输入路由评估 Hook
2026-01-17T23:02:03.894+08:00  INFO --- [           main] e.c.ExperienceExtensionAutoConfiguration : ExperienceExtensionAutoConfiguration#codeExperienceModelHook - reason=creating code experience model hook bean
2026-01-17T23:02:03.895+08:00  INFO --- [           main] e.c.ExperienceExtensionAutoConfiguration : ExperienceExtensionAutoConfiguration#reactExperienceAgentHook - reason=creating react experience agent hook bean
2026-01-17T23:02:03.896+08:00  INFO --- [           main] e.c.ExperienceExtensionAutoConfiguration : ExperienceExtensionAutoConfiguration#commonSenseExperienceModelHook - reason=creating common sense prompt model hook bean
2026-01-17T23:02:03.898+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchFacade - reason=creating search facade with 3 providers
2026-01-17T23:02:03.899+08:00  INFO --- [           main] c.a.a.a.e.s.i.DefaultSearchFacade        : DefaultSearchFacade#init - reason=initialized with 3 providers
2026-01-17T23:02:03.900+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=开始创建Search工具
2026-01-17T23:02:03.904+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockBaiduWebSearchProvider, toolName=search_web
2026-01-17T23:02:03.905+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockKnowledgeStoreSearchProvider, toolName=search_knowledge
2026-01-17T23:02:03.907+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockProjectContextSearchProvider, toolName=search_project
2026-01-17T23:02:03.907+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=搜索工具创建完成, totalCount=3
2026-01-17T23:02:03.907+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=Search工具创建完成, count=3
2026-01-17T23:02:03.907+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=创建Search工具, index=1, name=search_web, description=执行Web搜索，获取公开互联网信息
2026-01-17T23:02:03.907+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=创建Search工具, index=2, name=search_knowledge, description=搜索团队知识库，包括FAQ、规范、最佳实践等
2026-01-17T23:02:03.907+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=创建Search工具, index=3, name=search_project, description=搜索项目上下文信息，包括代码、配置、文档等
2026-01-17T23:02:03.910+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#diagnostics - reason=ElasticsearchClient bean found
2026-01-17T23:02:03.910+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#diagnostics - reason=EmbeddingModel bean found
2026-01-17T23:02:03.913+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#diagnostics - Planning module status:
2026-01-17T23:02:03.914+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration :   - ActionRepository: MybatisPlusActionRepository
2026-01-17T23:02:03.914+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration :   - ActionProvider: SemanticActionProvider
2026-01-17T23:02:03.914+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration :   - PlanGenerator: DefaultPlanGenerator
2026-01-17T23:02:03.914+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration :   - PlanExecutor: DefaultPlanExecutor
2026-01-17T23:02:03.914+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#planningCodeactTools - reason=creating planning tools list
2026-01-17T23:02:03.914+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#planningCodeactTools - reason=created planning tools, count=4
2026-01-17T23:02:04.164+08:00  INFO --- [           main] c.a.a.a.c.c.CodeactCoreAutoConfiguration : CodeactCoreAutoConfiguration#returnSchemaRegistry - reason=创建ReturnSchemaRegistry单例Bean
2026-01-17T23:02:04.165+08:00  INFO --- [           main] .a.a.a.c.t.s.DefaultReturnSchemaRegistry : DefaultReturnSchemaRegistry#<init> - reason=创建新实例, hashCode=1895617509
2026-01-17T23:02:04.521+08:00  WARN --- [           main] o.s.m.p.s.SyncMcpSamplingProvider        : No sampling methods found
2026-01-17T23:02:04.522+08:00  WARN --- [           main] o.s.m.p.e.SyncMcpElicitationProvider     : No elicitation methods found
2026-01-17T23:02:04.531+08:00  WARN --- [           main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException: Failed to start bean 'webServerStartStop'
2026-01-17T23:02:04.536+08:00  INFO --- [           main] c.a.a.a.e.e.GraphBasedEvaluationExecutor : Shutting down ExecutorService
2026-01-17T23:02:04.536+08:00  INFO --- [           main] c.a.a.a.e.l.i.AsyncLearningHandler       : AsyncLearningHandler#shutdown - reason=shutting down async learning handler
2026-01-17T23:02:04.541+08:00  INFO --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2026-01-17T23:02:04.547+08:00  INFO --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2026-01-17T23:02:04.557+08:00  INFO --- [           main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2026-01-17T23:02:04.581+08:00 ERROR --- [           main] o.s.b.d.LoggingFailureAnalysisReporter   : 

***************************
APPLICATION FAILED TO START
***************************

Description:

Web server failed to start. Port 8080 was already in use.

Action:

Identify and stop the process that's listening on port 8080 or configure this application to listen on another port.

2026-01-17T23:02:04.586+08:00  INFO --- [r-shutdown-hook] c.a.c.a.g.internal.node.ParallelNode     : Shutting down ParallelNode default executor
2026-01-17T23:02:04.586+08:00  INFO --- [r-shutdown-hook] c.a.c.a.g.internal.node.ParallelNode     : ParallelNode default thread pool terminated
2026-01-17T23:02:04.586+08:00  INFO --- [r-shutdown-hook] c.a.c.a.g.internal.node.ParallelNode     : ParallelNode default executor shut down successfully
2026-01-17T23:07:52.236+08:00  INFO --- [           main] c.a.a.a.start.AssistantAgentApplication  : Starting AssistantAgentApplication using Java 21.0.9 with PID 26244 (D:\devfive\AssistantAgent\assistant-agent-start\target\classes started by zhou_ in D:\devfive\AssistantAgent\assistant-agent-start)
2026-01-17T23:07:52.239+08:00 DEBUG --- [           main] c.a.a.a.start.AssistantAgentApplication  : Running with Spring Boot v3.4.8, Spring v6.2.9
2026-01-17T23:07:52.239+08:00  INFO --- [           main] c.a.a.a.start.AssistantAgentApplication  : No active profile set, falling back to 1 default profile: "default"
2026-01-17T23:07:53.456+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Elasticsearch repositories in DEFAULT mode.
2026-01-17T23:07:53.487+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 21 ms. Found 0 Elasticsearch repository interfaces.
2026-01-17T23:07:53.492+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Reactive Elasticsearch repositories in DEFAULT mode.
2026-01-17T23:07:53.497+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 5 ms. Found 0 Reactive Elasticsearch repository interfaces.
2026-01-17T23:07:54.527+08:00  INFO --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2026-01-17T23:07:54.542+08:00  INFO --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2026-01-17T23:07:54.548+08:00  INFO --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.43]
2026-01-17T23:07:54.632+08:00  INFO --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2026-01-17T23:07:54.632+08:00  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2339 ms
2026-01-17T23:07:54.690+08:00  INFO --- [           main] e.l.c.LearningExtensionAutoConfiguration : LearningExtensionAutoConfiguration#constructor - reason=learning extension auto-configuration initialized
2026-01-17T23:07:54.705+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#init - reason=search extension framework is enabled
2026-01-17T23:07:54.710+08:00  INFO --- [           main] c.a.a.a.s.s.MockBaiduWebSearchProvider   : MockBaiduWebSearchProvider#init - reason=使用简单模式初始化
2026-01-17T23:07:54.710+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#unifiedSearchCodeactTool - reason=创建统一搜索工具, providerCount=3
2026-01-17T23:07:54.751+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#init - reason=planning extension is enabled
2026-01-17T23:07:54.751+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#init - reason=ES configuration class loaded (elasticsearch.enabled=true)
2026-01-17T23:07:54.757+08:00  INFO --- [           main] toConfiguration$MybatisPlusConfiguration : MybatisPlusConfiguration#init - reason=MySQL configuration class loaded (mysql.enabled=true, MyBatisPlus present)
2026-01-17T23:07:55.023+08:00  INFO --- [           main] toConfiguration$MybatisPlusConfiguration : MybatisPlusConfiguration#actionEntityConverter - reason=creating entity converter
2026-01-17T23:07:55.023+08:00  INFO --- [           main] toConfiguration$MybatisPlusConfiguration : MybatisPlusConfiguration#mybatisPlusActionRepository - reason=ActionRegistryMapper found, creating MySQL repository
2026-01-17T23:07:55.444+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#actionVectorizationService - reason=creating ES vectorization service
2026-01-17T23:07:55.506+08:00  INFO --- [           main] c.a.a.a.p.v.ActionVectorizationService   : ActionVectorizationService#init - reason=ES index initialized on startup
2026-01-17T23:07:55.522+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#semanticActionProvider - reason=creating semantic action provider, semanticWeight=0.6, keywordWeight=0.4, matchThreshold=0.5
2026-01-17T23:07:55.527+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#defaultPlanGenerator - reason=creating default plan generator
2026-01-17T23:07:55.527+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#planActionCodeactTool - reason=creating plan_action tool
2026-01-17T23:07:55.527+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#queryStepExecutor - reason=creating query step executor
2026-01-17T23:07:55.533+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#inputStepExecutor - reason=creating input step executor
2026-01-17T23:07:55.533+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#executeStepExecutor - reason=creating execute step executor
2026-01-17T23:07:55.533+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#apiCallStepExecutor - reason=creating api call step executor
2026-01-17T23:07:55.538+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#validationStepExecutor - reason=creating validation step executor
2026-01-17T23:07:55.543+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#stepExecutorRegistry - reason=creating executor registry, executorCount=5
2026-01-17T23:07:55.543+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=QUERY, executorClass=QueryStepExecutor
2026-01-17T23:07:55.543+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=INPUT, executorClass=InputStepExecutor
2026-01-17T23:07:55.543+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=EXECUTE, executorClass=ExecuteStepExecutor
2026-01-17T23:07:55.543+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=API_CALL, executorClass=ApiCallStepExecutor
2026-01-17T23:07:55.543+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=VALIDATION, executorClass=ValidationStepExecutor
2026-01-17T23:07:55.543+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#defaultPlanExecutor - reason=creating default plan executor
2026-01-17T23:07:55.543+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#executeActionCodeactTool - reason=creating execute_action tool
2026-01-17T23:07:55.543+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#listActionsCodeactTool - reason=creating list_actions tool
2026-01-17T23:07:55.543+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#getActionDetailsCodeactTool - reason=creating get_action_details tool
2026-01-17T23:07:55.617+08:00  INFO --- [           main] e.l.c.LearningExtensionAutoConfiguration : LearningExtensionAutoConfiguration#experienceLearningExtractor - reason=creating LLM-based experience learning extractor
2026-01-17T23:07:55.617+08:00  INFO --- [           main] .a.a.a.e.l.e.ExperienceLearningExtractor : ExperienceLearningExtractor#constructor - reason=LLM-based extractor initialized
2026-01-17T23:07:55.617+08:00  INFO --- [           main] e.l.c.LearningExtensionAutoConfiguration : LearningExtensionAutoConfiguration#inMemoryLearningRepository - reason=creating in-memory learning repository
2026-01-17T23:07:55.622+08:00  INFO --- [           main] c.a.a.a.start.config.PersistenceConfig   : PersistenceConfig#init - reason=persistence configuration loaded
2026-01-17T23:07:55.627+08:00  INFO --- [           main] c.a.a.a.start.config.PersistenceConfig   : PersistenceConfig#elasticsearchExperienceRepository - reason=creating Elasticsearch experience repository (PRIMARY), indexName=experiences
2026-01-17T23:07:55.627+08:00  INFO --- [           main] e.l.c.LearningExtensionAutoConfiguration : LearningExtensionAutoConfiguration#experienceLearningRepository - reason=creating experience learning repository
2026-01-17T23:07:55.637+08:00  INFO --- [           main] e.l.c.LearningExtensionAutoConfiguration : LearningExtensionAutoConfiguration#learningStrategy - reason=creating learning strategy, asyncEnabled=true
2026-01-17T23:07:55.637+08:00  INFO --- [           main] e.l.c.LearningExtensionAutoConfiguration : LearningExtensionAutoConfiguration#asyncLearningHandler - reason=creating async learning handler, threadPoolSize=2, queueCapacity=100
2026-01-17T23:07:55.637+08:00  INFO --- [           main] c.a.a.a.e.l.i.AsyncLearningHandler       : AsyncLearningHandler#constructor - reason=async learning handler initialized, threadPoolSize=2, queueCapacity=100
2026-01-17T23:07:55.637+08:00  INFO --- [           main] e.l.c.LearningExtensionAutoConfiguration : LearningExtensionAutoConfiguration#learningExecutor - reason=creating learning executor, extractorCount=1, repositoryCount=2
2026-01-17T23:07:55.642+08:00  INFO --- [           main] e.l.c.LearningExtensionAutoConfiguration : LearningExtensionAutoConfiguration#afterAgentLearningHook - reason=creating after agent learning hook, learningType=experience
2026-01-17T23:07:55.642+08:00  INFO --- [           main] c.a.a.a.start.config.PersistenceConfig   : PersistenceConfig#elasticsearchExperienceProvider - reason=creating Elasticsearch experience provider (PRIMARY), indexName=experiences
2026-01-17T23:07:55.648+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#<init> - reason=初始化默认评估套件配置, experienceProviderAvailable=true
2026-01-17T23:07:55.648+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#evaluatorRegistry - reason=创建 EvaluatorRegistry Bean
2026-01-17T23:07:55.654+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'llm-based' of type LLMBasedEvaluator
2026-01-17T23:07:55.654+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'passthrough' of type RuleBasedEvaluator
2026-01-17T23:07:55.654+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'react_experience_evaluator' of type RuleBasedEvaluator
2026-01-17T23:07:55.654+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createDefaultEvaluatorRegistry - reason=注册 React 阶段经验检索评估器
2026-01-17T23:07:55.654+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'codeact_experience_evaluator' of type RuleBasedEvaluator
2026-01-17T23:07:55.654+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createDefaultEvaluatorRegistry - reason=注册 CodeAct 阶段经验检索评估器
2026-01-17T23:07:55.654+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#evaluationService - reason=创建默认 EvaluationService, sharedRegistryEvaluators=[llm-based, passthrough, codeact_experience_evaluator, react_experience_evaluator]
2026-01-17T23:07:55.659+08:00 DEBUG --- [           main] c.a.a.a.e.e.GraphBasedEvaluationExecutor : Created default ExecutorService for batch processing
2026-01-17T23:07:55.659+08:00  INFO --- [           main] .c.ExperienceEvaluationCriterionProvider : ExperienceEvaluationCriterionProvider#<init> - reason=初始化经验评估 Criterion 提供者
2026-01-17T23:07:55.659+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#structuredParamExtractor - reason=creating structured param extractor
2026-01-17T23:07:55.664+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#parameterValidator - reason=creating parameter validator
2026-01-17T23:07:55.669+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#restTemplate - reason=creating RestTemplate bean
2026-01-17T23:07:55.669+08:00  INFO --- [           main] c.a.a.a.planning.executor.HttpExecutor   : HttpExecutor#init - initialized
2026-01-17T23:07:55.674+08:00  INFO --- [           main] c.a.a.a.p.executor.InternalExecutor      : InternalExecutor#init - initialized
2026-01-17T23:07:55.674+08:00  INFO --- [           main] c.a.a.a.p.e.ActionExecutorFactory        : ActionExecutorFactory#init - initialized executors: INTERNAL(InternalExecutor), HTTP(HttpExecutor), DATA_AGENT(DataAgentExecutor), MCP(McpExecutor)
2026-01-17T23:07:55.674+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#sessionProvider - reason=creating in-memory session provider
2026-01-17T23:07:55.674+08:00  INFO --- [           main] c.a.a.a.p.s.InMemorySessionProvider      : InMemorySessionProvider#init - initialized
2026-01-17T23:07:55.674+08:00  INFO --- [           main] c.a.a.a.p.s.ParamCollectionService       : ParamCollectionService#init - sessionProvider=InMemory
2026-01-17T23:07:55.680+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'action_intent_evaluator' of type ActionIntentEvaluator
2026-01-17T23:07:55.680+08:00  INFO --- [           main] p.i.PlanningIntegrationAutoConfiguration : PlanningIntegrationAutoConfiguration#actionIntentEvaluator - initialized and registered, paramCollection=true, llmVerification=true, maxCandidates=5
2026-01-17T23:07:55.680+08:00  INFO --- [           main] .p.i.PlanningEvaluationCriterionProvider : PlanningEvaluationCriterionProvider#init - initialized, llmVerificationEnabled=true
2026-01-17T23:07:55.680+08:00  INFO --- [           main] p.i.PlanningIntegrationAutoConfiguration : PlanningIntegrationAutoConfiguration#planningEvaluationCriterionProvider - registered planning evaluation criterion provider
2026-01-17T23:07:55.680+08:00  INFO --- [           main] .c.ExperienceEvaluationCriterionProvider : ExperienceEvaluationCriterionProvider#getReactPhaseCriteria - reason=提供 React 阶段评估 Criteria
2026-01-17T23:07:55.680+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createReactPhaseSuite - reason=添加自定义 Criterion, provider=ExperienceEvaluationCriterionProvider, count=3
2026-01-17T23:07:55.680+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createReactPhaseSuite - reason=添加自定义 Criterion, provider=PlanningEvaluationCriterionProvider, count=2
2026-01-17T23:07:55.685+08:00  INFO --- [           main] a.a.e.a.BatchAggregationStrategyRegistry : Registered batch aggregation strategy: ANY_TRUE
2026-01-17T23:07:55.685+08:00  INFO --- [           main] a.a.e.a.BatchAggregationStrategyRegistry : Registered batch aggregation strategy: ALL_TRUE
2026-01-17T23:07:55.711+08:00  INFO --- [           main] c.a.c.a.g.internal.node.ParallelNode     : Calculated core pool size: 32 (CPU cores: 16)
2026-01-17T23:07:55.711+08:00  INFO --- [           main] c.a.c.a.g.internal.node.ParallelNode     : Calculated maximum pool size: 64 (CPU cores: 16)
2026-01-17T23:07:55.711+08:00  INFO --- [           main] c.a.c.a.g.internal.node.ParallelNode     : Calculated queue capacity: 1000
2026-01-17T23:07:55.716+08:00  INFO --- [           main] c.a.a.a.e.DefaultEvaluationService       : Registered evaluation suite: react-phase-suite
2026-01-17T23:07:55.716+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#evaluationService - reason=注册 React Phase Suite, suiteId=react-phase-suite
2026-01-17T23:07:55.716+08:00  INFO --- [           main] .c.ExperienceEvaluationCriterionProvider : ExperienceEvaluationCriterionProvider#getCodeActPhaseCriteria - reason=提供 CodeAct 阶段评估 Criteria
2026-01-17T23:07:55.716+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createCodeActPhaseSuite - reason=添加自定义 Criterion, provider=ExperienceEvaluationCriterionProvider, count=3
2026-01-17T23:07:55.716+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createCodeActPhaseSuite - reason=添加自定义 Criterion, provider=PlanningEvaluationCriterionProvider, count=2
2026-01-17T23:07:55.716+08:00  INFO --- [           main] a.a.e.a.BatchAggregationStrategyRegistry : Registered batch aggregation strategy: ANY_TRUE
2026-01-17T23:07:55.716+08:00  INFO --- [           main] a.a.e.a.BatchAggregationStrategyRegistry : Registered batch aggregation strategy: ALL_TRUE
2026-01-17T23:07:55.716+08:00  INFO --- [           main] c.a.a.a.e.DefaultEvaluationService       : Registered evaluation suite: codeact-phase-suite
2026-01-17T23:07:55.716+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#evaluationService - reason=注册 CodeAct Phase Suite, suiteId=codeact-phase-suite
2026-01-17T23:07:55.716+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#codeactEvaluationContextFactory - reason=创建 EvaluationContextFactory
2026-01-17T23:07:55.721+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#codeactEvaluationResultAttacher - reason=创建 EvaluationResultAttacher
2026-01-17T23:07:55.721+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#reactPhaseEvaluationHooks - reason=创建 React Phase ModelInputEvaluationHook
2026-01-17T23:07:55.721+08:00  INFO --- [           main] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#<init> - reason=初始化, phase=REACT, providerCount=1
2026-01-17T23:07:55.721+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#reactPhaseEvaluationHooks - reason=创建 React Phase EvaluationPromptInjectionHook, providersCount=2
2026-01-17T23:07:55.727+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#codeactPhaseEvaluationHooks - reason=创建 CodeAct Phase ModelInputEvaluationHook
2026-01-17T23:07:55.727+08:00  INFO --- [           main] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#<init> - reason=初始化, phase=CODEACT, providerCount=1
2026-01-17T23:07:55.727+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#codeactPhaseEvaluationHooks - reason=创建 CodeAct Phase EvaluationPromptInjectionHook, providersCount=2
2026-01-17T23:07:55.727+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#keywordMatcher - reason=creating keyword matcher
2026-01-17T23:07:55.727+08:00  INFO --- [           main] iguration$UnifiedIntentHookConfiguration : UnifiedIntentHookConfiguration#unifiedIntentRecognitionHook - reason=creating unified intent hook, experienceProviderPresent=true, directExecuteThreshold=0.95, hintThreshold=0.5
2026-01-17T23:07:55.814+08:00  INFO --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2026-01-17T23:07:55.998+08:00  INFO --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@400d1c30
2026-01-17T23:07:55.998+08:00  INFO --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2026-01-17T23:07:56.133+08:00 DEBUG --- [           main] c.a.a.a.planning.intent.KeywordMatcher   : KeywordMatcher#registerAction - actionId=erp:product-unit:create, keywords=18
2026-01-17T23:07:56.133+08:00  INFO --- [           main] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#initKeywordMatcher - reason=initialized, actionCount=1, keywordIndexSize=18
2026-01-17T23:07:56.138+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#init - reason=reply module enabled
2026-01-17T23:07:56.138+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactToolFactory - reason=创建CodeactTool工厂, channels=1
2026-01-17T23:07:56.138+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#init - reason=工厂初始化完成, channels=1
2026-01-17T23:07:56.148+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=开始创建Reply工具
2026-01-17T23:07:56.148+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#createTools - reason=创建工具成功, toolName=send_success_message, channelCode=IDE_TEXT
2026-01-17T23:07:56.153+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#createTools - reason=创建工具成功, toolName=send_error_message, channelCode=IDE_TEXT
2026-01-17T23:07:56.153+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#createTools - reason=创建工具成功, toolName=send_notification, channelCode=IDE_TEXT
2026-01-17T23:07:56.153+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#createTools - reason=工具创建完成, totalCount=3
2026-01-17T23:07:56.153+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=Reply工具创建完成, count=3
2026-01-17T23:07:56.153+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=创建Reply工具, index=1, name=send_success_message, description=Send a success message to the IDE console
2026-01-17T23:07:56.153+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=创建Reply工具, index=2, name=send_error_message, description=Send an error message to the IDE console
2026-01-17T23:07:56.153+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=创建Reply工具, index=3, name=send_notification, description=Send a notification message
2026-01-17T23:07:56.153+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactToolFactory - reason=创建SearchCodeactTool工厂, providerCount=3
2026-01-17T23:07:56.174+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactToolFactory - reason=创建TriggerCodeactTool工厂
2026-01-17T23:07:56.174+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=开始创建Trigger工具
2026-01-17T23:07:56.174+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=创建SubscribeTriggerCodeactTool成功
2026-01-17T23:07:56.179+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=创建UnsubscribeTriggerCodeactTool成功
2026-01-17T23:07:56.179+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=创建ListTriggersCodeactTool成功
2026-01-17T23:07:56.179+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=创建GetTriggerDetailCodeactTool成功
2026-01-17T23:07:56.179+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=触发器工具创建完成, count=4
2026-01-17T23:07:56.179+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=Trigger工具创建完成, count=4
2026-01-17T23:07:56.179+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=创建Trigger工具, index=1, name=subscribe_trigger, description=创建并订阅一个新的触发器
2026-01-17T23:07:56.179+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=创建Trigger工具, index=2, name=unsubscribe_trigger, description=取消订阅并删除一个触发器
2026-01-17T23:07:56.179+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=创建Trigger工具, index=3, name=list_triggers, description=列出所有触发器
2026-01-17T23:07:56.179+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=创建Trigger工具, index=4, name=get_trigger_detail, description=获取指定触发器的详细信息
2026-01-17T23:07:56.189+08:00  INFO --- [           main] e.c.ExperienceExtensionAutoConfiguration : ExperienceExtensionAutoConfiguration#fastIntentService - reason=creating FastIntentService, extraMatchers=0
2026-01-17T23:07:56.195+08:00  INFO --- [           main] e.c.ExperienceExtensionAutoConfiguration : ExperienceExtensionAutoConfiguration#fastIntentReactHook - reason=creating fast intent react hook bean
2026-01-17T23:07:56.195+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=创建 CodeactAgent
2026-01-17T23:07:56.195+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=配置 MemorySaver 以支持多轮对话上下文保持
2026-01-17T23:07:56.195+08:00  WARN --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=临时禁用 streaming 模式以排查循环问题
2026-01-17T23:07:56.195+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加UnifiedSearchCodeactTool
2026-01-17T23:07:56.200+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockBaiduWebSearchProvider, toolName=search_web
2026-01-17T23:07:56.200+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockKnowledgeStoreSearchProvider, toolName=search_knowledge
2026-01-17T23:07:56.200+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockProjectContextSearchProvider, toolName=search_project
2026-01-17T23:07:56.200+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=搜索工具创建完成, totalCount=3
2026-01-17T23:07:56.205+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加SearchCodeactTools, count=3
2026-01-17T23:07:56.205+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加ReplyCodeactTools, count=3
2026-01-17T23:07:56.205+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加TriggerCodeactTools, count=4
2026-01-17T23:07:56.205+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#createMcpDynamicTools - reason=Creating MCP dynamic tools
2026-01-17T23:07:56.205+08:00  INFO --- [           main] c.a.a.a.e.d.mcp.McpDynamicToolFactory    : McpDynamicToolFactory#createTools - reason=开始创建MCP动态工具
2026-01-17T23:07:56.210+08:00  INFO --- [           main] c.a.a.a.e.d.mcp.McpDynamicToolFactory    : McpDynamicToolFactory#createTools - reason=无可用的MCP工具
2026-01-17T23:07:56.210+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#createMcpDynamicTools - reason=MCP dynamic tools created, count=0
2026-01-17T23:07:56.210+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=Added MCP dynamic tools, count=0
2026-01-17T23:07:56.210+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#createHttpDynamicTools - reason=HTTP dynamic tools disabled by default
2026-01-17T23:07:56.210+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=合并后CodeactTool总数, count=11
2026-01-17T23:07:56.210+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=React阶段使用内置工具(write_code, execute_code, write_condition_code)
2026-01-17T23:07:56.210+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=注入 React Phase 评估 Hooks, count=2
2026-01-17T23:07:56.210+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=注入 CodeAct Phase 评估 Hooks, count=2
2026-01-17T23:07:56.210+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=已准备注入AfterAgentLearningHook
2026-01-17T23:07:56.210+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=已准备注入FastIntentReactHook
2026-01-17T23:07:56.210+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=已准备注入UnifiedIntentRecognitionHook
2026-01-17T23:07:56.210+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 开始构建CodeactAgent
2026-01-17T23:07:56.216+08:00  INFO --- [           main] .a.a.a.c.t.s.DefaultReturnSchemaRegistry : DefaultReturnSchemaRegistry#<init> - reason=创建新实例, hashCode=1524462464
2026-01-17T23:07:56.216+08:00 DEBUG --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#<init> - reason=创建注册表, returnSchemaRegistry=DefaultReturnSchemaRegistry
2026-01-17T23:07:56.216+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=创建默认CodeactToolRegistry
2026-01-17T23:07:56.216+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=开始注册CodeactTool, count=11
2026-01-17T23:07:56.216+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=unified_search
2026-01-17T23:07:56.216+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=unified_search
2026-01-17T23:07:56.216+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=search_web
2026-01-17T23:07:56.216+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=search_web
2026-01-17T23:07:56.216+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=search_knowledge
2026-01-17T23:07:56.216+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=search_knowledge
2026-01-17T23:07:56.216+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=search_project
2026-01-17T23:07:56.216+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=search_project
2026-01-17T23:07:56.216+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=send_success_message
2026-01-17T23:07:56.216+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=send_success_message
2026-01-17T23:07:56.216+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=send_error_message
2026-01-17T23:07:56.216+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=send_error_message
2026-01-17T23:07:56.216+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=send_notification
2026-01-17T23:07:56.216+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=send_notification
2026-01-17T23:07:56.216+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=subscribe_trigger
2026-01-17T23:07:56.216+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=subscribe_trigger
2026-01-17T23:07:56.216+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=unsubscribe_trigger
2026-01-17T23:07:56.216+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=unsubscribe_trigger
2026-01-17T23:07:56.216+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=list_triggers
2026-01-17T23:07:56.216+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=list_triggers
2026-01-17T23:07:56.216+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=get_trigger_detail
2026-01-17T23:07:56.216+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=get_trigger_detail
2026-01-17T23:07:56.216+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册完成, count=11
2026-01-17T23:07:56.216+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 创建默认CodeContext: language=PYTHON
2026-01-17T23:07:56.216+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 创建默认RuntimeEnvironmentManager: language=PYTHON
2026-01-17T23:07:56.216+08:00 DEBUG --- [           main] c.a.a.a.c.e.bridge.AgentToolBridge       : AgentToolBridge#<init> 初始化: 注册了0个工具
2026-01-17T23:07:56.216+08:00 DEBUG --- [           main] c.a.a.a.c.executor.bridge.StateBridge    : StateBridge#<init> 初始化完成
2026-01-17T23:07:56.222+08:00  INFO --- [           main] c.a.a.a.core.executor.GraalCodeExecutor  : GraalCodeExecutor#<init> 初始化完成: language=PYTHON, allowIO=false, timeout=30000ms, executableTools=true, customBridgeFactory=false
2026-01-17T23:07:56.222+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#createCodeactSubAgentInterceptor 创建子Agent拦截器
2026-01-17T23:07:56.222+08:00  INFO --- [           main] c.a.a.a.a.subagent.CodeactSubAgent       : CodeactSubAgent#<init> 初始化: name=code-generator
2026-01-17T23:07:56.222+08:00  INFO --- [           main] c.a.a.a.a.subagent.CodeactSubAgent       : CodeactSubAgent#<init> 初始化: name=condition-code-generator
2026-01-17T23:07:56.222+08:00  INFO --- [           main] c.a.a.a.a.s.CodeactSubAgentInterceptor   : CodeactSubAgentInterceptor#<init> 创建默认代码生成子Agent
2026-01-17T23:07:56.340+08:00  INFO --- [           main] c.a.a.a.a.s.CodeactSubAgentInterceptor   : CodeactSubAgentInterceptor#<init> 初始化完成: subAgentCount=2
2026-01-17T23:07:56.340+08:00  INFO --- [           main] c.a.a.a.a.tools.ExecuteCodeTool          : ExecuteCodeTool#<init> 初始化完成
2026-01-17T23:07:56.345+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 拦截器分类完成: modelInterceptors=1, toolInterceptors=0
2026-01-17T23:07:56.345+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 从拦截器提取工具: interceptor=CodeactSubAgent, toolCount=2
2026-01-17T23:07:56.356+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 工具收集完成: interceptorTools=2, regularTools=3, total=6
2026-01-17T23:07:56.356+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 设置ModelInterceptors到LlmNode: count=1
2026-01-17T23:07:56.356+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build CodeactAgent构建完成
2026-01-17T23:07:56.356+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=开始罗列已注册的工具
2026-01-17T23:07:56.356+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct阶段工具数量, count=11
2026-01-17T23:07:56.356+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=1, name=unified_search, description=统一搜索工具，可同时搜索项目、知识库、Web等多个数据源
2026-01-17T23:07:56.356+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=2, name=search_knowledge, description=搜索团队知识库，包括FAQ、规范、最佳实践等
2026-01-17T23:07:56.356+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=3, name=send_success_message, description=Send a success message to the IDE console
2026-01-17T23:07:56.356+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=4, name=search_web, description=执行Web搜索，获取公开互联网信息
2026-01-17T23:07:56.356+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=5, name=unsubscribe_trigger, description=取消订阅并删除一个触发器
2026-01-17T23:07:56.356+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=6, name=get_trigger_detail, description=获取指定触发器的详细信息
2026-01-17T23:07:56.356+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=7, name=send_error_message, description=Send an error message to the IDE console
2026-01-17T23:07:56.356+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=8, name=search_project, description=搜索项目上下文信息，包括代码、配置、文档等
2026-01-17T23:07:56.356+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=9, name=send_notification, description=Send a notification message
2026-01-17T23:07:56.356+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=10, name=subscribe_trigger, description=创建并订阅一个新的触发器
2026-01-17T23:07:56.356+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=11, name=list_triggers, description=列出所有触发器
2026-01-17T23:07:56.356+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React阶段工具数量, count=6
2026-01-17T23:07:56.356+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=1, name=write_code, description=Generate and register a new function with specified name and parameters. IMPORTANT: You MUST provide both 'functionName' and 'parameters' fields. Example: write_code(requirement='calculate sum', functionName='calculate_sum', parameters=['a', 'b'])
2026-01-17T23:07:56.356+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=2, name=write_condition_code, description=Generate and register a condition check function for triggers. This function MUST return a boolean value (True/False). Example: write_condition_code(requirement='check if it is a working day', functionName='check_is_working_day', parameters=['date'])
2026-01-17T23:07:56.356+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=3, name=send_success_message, description=Send a success message to the IDE console
2026-01-17T23:07:56.356+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=4, name=send_error_message, description=Send an error message to the IDE console
2026-01-17T23:07:56.356+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=5, name=send_notification, description=Send a notification message
2026-01-17T23:07:56.356+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=6, name=execute_code, description=Execute a previously generated function by its exact name with matching parameters. CRITICAL: The functionName MUST exactly match the name used in write_code. The 'args' parameter names MUST exactly match the 'parameters' specified in write_code. Example: If you called write_code with functionName='calculate_sum' and parameters=['a', 'b'], then you must call execute_code with functionName='calculate_sum' and args={'a': 10, 'b': 20}. Parameter value types supported: String, Number, Boolean, List, Map/Object.
2026-01-17T23:07:56.356+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=工具罗列完成
2026-01-17T23:07:56.356+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgent#<init> 初始化完成: language=PYTHON
2026-01-17T23:07:56.356+08:00  INFO --- [           main] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#<init> 初始化 Agent 加载器
2026-01-17T23:07:56.366+08:00 DEBUG --- [           main] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#<init> Agent 图结构:
@startuml CodeactAgent
skinparam usecaseFontSize 14
skinparam usecaseStereotypeFontSize 12
skinparam hexagonFontSize 14
skinparam hexagonStereotypeFontSize 12
title "CodeactAgent"
footer

powered by spring-ai-alibaba
end footer
circle start<<input>> as __START__
circle stop as __END__
usecase "_AGENT_MODEL_"<<Node>>
usecase "_AGENT_TOOL_"<<Node>>
usecase "_AGENT_HOOK_FastIntentReactHook.before"<<Node>>
usecase "_AGENT_HOOK_UnifiedIntentRecognitionHook.before"<<Node>>
usecase "_AGENT_HOOK_AfterAgentLearningHook.after"<<Node>>
usecase "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"<<Node>>
usecase "_AGENT_HOOK_EvaluationPromptInjectionHook-REACT.beforeModel"<<Node>>
hexagon "check state" as condition1<<Condition>>
hexagon "check state" as condition2<<Condition>>
hexagon "check state" as condition3<<Condition>>
hexagon "check state" as condition4<<Condition>>
"__START__" -down-> "_AGENT_HOOK_FastIntentReactHook.before"
"_AGENT_HOOK_FastIntentReactHook.before" .down.> "condition1"
"condition1" .down.> "_AGENT_TOOL_"
'"_AGENT_HOOK_FastIntentReactHook.before" .down.> "_AGENT_TOOL_"
"condition1" .down.> "_AGENT_HOOK_UnifiedIntentRecognitionHook.before"
'"_AGENT_HOOK_FastIntentReactHook.before" .down.> "_AGENT_HOOK_UnifiedIntentRecognitionHook.before"
"_AGENT_HOOK_UnifiedIntentRecognitionHook.before" .down.> "condition2"
"condition2" .down.> "_AGENT_HOOK_AfterAgentLearningHook.after"
'"_AGENT_HOOK_UnifiedIntentRecognitionHook.before" .down.> "_AGENT_HOOK_AfterAgentLearningHook.after"
"condition2" .down.> "_AGENT_TOOL_"
'"_AGENT_HOOK_UnifiedIntentRecognitionHook.before" .down.> "_AGENT_TOOL_"
"condition2" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
'"_AGENT_HOOK_UnifiedIntentRecognitionHook.before" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
"_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel" -down-> "_AGENT_HOOK_EvaluationPromptInjectionHook-REACT.beforeModel"
"_AGENT_HOOK_EvaluationPromptInjectionHook-REACT.beforeModel" -down-> "_AGENT_MODEL_"
"_AGENT_HOOK_AfterAgentLearningHook.after" -down-> "__END__"
"_AGENT_MODEL_" .down.> "condition3"
"condition3" .down.> "_AGENT_HOOK_AfterAgentLearningHook.after"
'"_AGENT_MODEL_" .down.> "_AGENT_HOOK_AfterAgentLearningHook.after"
"condition3" .down.> "_AGENT_TOOL_"
'"_AGENT_MODEL_" .down.> "_AGENT_TOOL_"
"condition3" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
'"_AGENT_MODEL_" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
"_AGENT_TOOL_" .down.> "condition4"
"condition4" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
'"_AGENT_TOOL_" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
"condition4" .down.> "_AGENT_HOOK_AfterAgentLearningHook.after"
'"_AGENT_TOOL_" .down.> "_AGENT_HOOK_AfterAgentLearningHook.after"
@enduml

2026-01-17T23:07:56.366+08:00  INFO --- [           main] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#<init> 已注册 agent: grayscale_agent
2026-01-17T23:07:56.371+08:00 DEBUG --- [           main] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#listAgents 列出所有 agent
2026-01-17T23:07:56.371+08:00  INFO --- [           main] c.a.c.a.a.s.controller.AgentController   : AgentController initialized with 1 dynamic agents: [grayscale_agent]
2026-01-17T23:07:56.382+08:00  INFO --- [           main] e.e.c.CodeactEvaluationAutoConfiguration : CodeactEvaluationAutoConfiguration#inputRoutingEvaluationHook - reason=创建输入路由评估 Hook
2026-01-17T23:07:56.382+08:00  INFO --- [           main] e.c.ExperienceExtensionAutoConfiguration : ExperienceExtensionAutoConfiguration#codeExperienceModelHook - reason=creating code experience model hook bean
2026-01-17T23:07:56.382+08:00  INFO --- [           main] e.c.ExperienceExtensionAutoConfiguration : ExperienceExtensionAutoConfiguration#reactExperienceAgentHook - reason=creating react experience agent hook bean
2026-01-17T23:07:56.382+08:00  INFO --- [           main] e.c.ExperienceExtensionAutoConfiguration : ExperienceExtensionAutoConfiguration#commonSenseExperienceModelHook - reason=creating common sense prompt model hook bean
2026-01-17T23:07:56.382+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchFacade - reason=creating search facade with 3 providers
2026-01-17T23:07:56.387+08:00  INFO --- [           main] c.a.a.a.e.s.i.DefaultSearchFacade        : DefaultSearchFacade#init - reason=initialized with 3 providers
2026-01-17T23:07:56.387+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=开始创建Search工具
2026-01-17T23:07:56.387+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockBaiduWebSearchProvider, toolName=search_web
2026-01-17T23:07:56.392+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockKnowledgeStoreSearchProvider, toolName=search_knowledge
2026-01-17T23:07:56.392+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockProjectContextSearchProvider, toolName=search_project
2026-01-17T23:07:56.392+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=搜索工具创建完成, totalCount=3
2026-01-17T23:07:56.392+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=Search工具创建完成, count=3
2026-01-17T23:07:56.392+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=创建Search工具, index=1, name=search_web, description=执行Web搜索，获取公开互联网信息
2026-01-17T23:07:56.392+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=创建Search工具, index=2, name=search_knowledge, description=搜索团队知识库，包括FAQ、规范、最佳实践等
2026-01-17T23:07:56.392+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=创建Search工具, index=3, name=search_project, description=搜索项目上下文信息，包括代码、配置、文档等
2026-01-17T23:07:56.397+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#diagnostics - reason=ElasticsearchClient bean found
2026-01-17T23:07:56.397+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#diagnostics - reason=EmbeddingModel bean found
2026-01-17T23:07:56.397+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#diagnostics - Planning module status:
2026-01-17T23:07:56.397+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration :   - ActionRepository: MybatisPlusActionRepository
2026-01-17T23:07:56.397+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration :   - ActionProvider: SemanticActionProvider
2026-01-17T23:07:56.397+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration :   - PlanGenerator: DefaultPlanGenerator
2026-01-17T23:07:56.397+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration :   - PlanExecutor: DefaultPlanExecutor
2026-01-17T23:07:56.397+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#planningCodeactTools - reason=creating planning tools list
2026-01-17T23:07:56.402+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#planningCodeactTools - reason=created planning tools, count=4
2026-01-17T23:07:56.603+08:00  INFO --- [           main] c.a.a.a.c.c.CodeactCoreAutoConfiguration : CodeactCoreAutoConfiguration#returnSchemaRegistry - reason=创建ReturnSchemaRegistry单例Bean
2026-01-17T23:07:56.603+08:00  INFO --- [           main] .a.a.a.c.t.s.DefaultReturnSchemaRegistry : DefaultReturnSchemaRegistry#<init> - reason=创建新实例, hashCode=537136238
2026-01-17T23:07:56.910+08:00  WARN --- [           main] o.s.m.p.s.SyncMcpSamplingProvider        : No sampling methods found
2026-01-17T23:07:56.915+08:00  WARN --- [           main] o.s.m.p.e.SyncMcpElicitationProvider     : No elicitation methods found
2026-01-17T23:07:56.931+08:00  INFO --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2026-01-17T23:07:56.941+08:00  INFO --- [           main] c.a.a.a.start.AssistantAgentApplication  : Started AssistantAgentApplication in 5.428 seconds (process running for 5.929)
2026-01-17T23:07:56.946+08:00  INFO --- [           main] c.a.a.a.s.config.DemoExperienceConfig    : DemoExperienceConfig#run - reason=Initializing Demo Experiences
2026-01-17T23:07:56.946+08:00  INFO --- [           main] c.a.a.a.s.config.DemoExperienceConfig    : DemoExperienceConfig#run - reason=Demo Experiences initialization completed
2026-01-17T23:07:56.946+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#run - reason=Starting experience module validation
2026-01-17T23:07:56.988+08:00 DEBUG --- [           main] .p.e.r.ElasticsearchExperienceRepository : ElasticsearchExperienceRepository#count - reason=count completed, count=0
2026-01-17T23:07:57.004+08:00 DEBUG --- [           main] .p.e.r.ElasticsearchExperienceRepository : ElasticsearchExperienceRepository#countByTypeAndScope - reason=count completed, type=CODE, scope=null, count=0
2026-01-17T23:07:57.016+08:00 DEBUG --- [           main] .p.e.r.ElasticsearchExperienceRepository : ElasticsearchExperienceRepository#countByTypeAndScope - reason=count completed, type=REACT, scope=null, count=0
2026-01-17T23:07:57.024+08:00 DEBUG --- [           main] .p.e.r.ElasticsearchExperienceRepository : ElasticsearchExperienceRepository#countByTypeAndScope - reason=count completed, type=COMMON, scope=null, count=0
2026-01-17T23:07:57.024+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testExperienceCount - reason=Experience stats: total=0, code=0, react=0, common=0
2026-01-17T23:07:57.024+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCommonExperienceQuery - reason=Testing common experience query
2026-01-17T23:07:57.129+08:00 DEBUG --- [           main] .s.p.e.p.ElasticsearchExperienceProvider : ElasticsearchExperienceProvider#query - reason=query completed, type=COMMON, text=null, count=0
2026-01-17T23:07:57.129+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCommonExperienceQuery - reason=Found 0 common experiences
2026-01-17T23:07:57.129+08:00  WARN --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCommonExperienceQuery - reason=❌ MoLiHong identity experience not found
2026-01-17T23:07:57.129+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCodeExperienceQuery - reason=Testing code experience query (demo keyword)
2026-01-17T23:07:57.140+08:00 DEBUG --- [           main] .s.p.e.p.ElasticsearchExperienceProvider : ElasticsearchExperienceProvider#query - reason=query completed, type=CODE, text=null, count=0
2026-01-17T23:07:57.140+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCodeExperienceQuery - reason=Found 0 demo code experiences
2026-01-17T23:07:57.140+08:00  WARN --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCodeExperienceQuery - reason=❌ Demo code experience not found
2026-01-17T23:07:57.140+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testReactExperienceQuery - reason=Testing react experience query
2026-01-17T23:07:57.150+08:00 DEBUG --- [           main] .s.p.e.p.ElasticsearchExperienceProvider : ElasticsearchExperienceProvider#query - reason=query completed, type=REACT, text=null, count=0
2026-01-17T23:07:57.150+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testReactExperienceQuery - reason=Found 0 react experiences
2026-01-17T23:07:57.150+08:00  WARN --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testReactExperienceQuery - reason=❌ Ambiguous intent strategy not found
2026-01-17T23:07:57.150+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#run - reason=Experience module validation completed
2026-01-17T23:09:51.485+08:00  INFO --- [nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-01-17T23:09:51.485+08:00  INFO --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2026-01-17T23:09:51.488+08:00  INFO --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 3 ms
2026-01-17T23:14:07.058+08:00  INFO --- [nio-8080-exec-4] o.apache.tomcat.util.http.parser.Cookie  : A cookie header was received [Hm_lvt_b79d8f49e2d38b26503b92810b740f45=1767609436,1767669208,1767767035] that contained an invalid cookie. That cookie will be ignored.
 Note: further occurrences of this error will be logged at DEBUG level.
2026-01-17T23:17:06.453+08:00  INFO --- [           main] c.a.a.a.start.AssistantAgentApplication  : Starting AssistantAgentApplication using Java 21.0.9 with PID 15684 (D:\devfive\AssistantAgent\assistant-agent-start\target\classes started by zhou_ in D:\devfive\AssistantAgent\assistant-agent-start)
2026-01-17T23:17:06.454+08:00 DEBUG --- [           main] c.a.a.a.start.AssistantAgentApplication  : Running with Spring Boot v3.4.8, Spring v6.2.9
2026-01-17T23:17:06.455+08:00  INFO --- [           main] c.a.a.a.start.AssistantAgentApplication  : No active profile set, falling back to 1 default profile: "default"
2026-01-17T23:17:07.855+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Elasticsearch repositories in DEFAULT mode.
2026-01-17T23:17:07.886+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 23 ms. Found 0 Elasticsearch repository interfaces.
2026-01-17T23:17:07.893+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Reactive Elasticsearch repositories in DEFAULT mode.
2026-01-17T23:17:07.902+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 7 ms. Found 0 Reactive Elasticsearch repository interfaces.
2026-01-17T23:17:09.338+08:00  INFO --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2026-01-17T23:17:09.364+08:00  INFO --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2026-01-17T23:17:09.365+08:00  INFO --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.43]
2026-01-17T23:17:09.486+08:00  INFO --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2026-01-17T23:17:09.487+08:00  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2984 ms
2026-01-17T23:17:09.560+08:00  INFO --- [           main] e.l.c.LearningExtensionAutoConfiguration : LearningExtensionAutoConfiguration#constructor - reason=learning extension auto-configuration initialized
2026-01-17T23:17:09.579+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#init - reason=search extension framework is enabled
2026-01-17T23:17:09.581+08:00  INFO --- [           main] c.a.a.a.s.s.MockBaiduWebSearchProvider   : MockBaiduWebSearchProvider#init - reason=使用简单模式初始化
2026-01-17T23:17:09.583+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#unifiedSearchCodeactTool - reason=创建统一搜索工具, providerCount=3
2026-01-17T23:17:09.636+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#init - reason=planning extension is enabled
2026-01-17T23:17:09.637+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#init - reason=ES configuration class loaded (elasticsearch.enabled=true)
2026-01-17T23:17:09.639+08:00  INFO --- [           main] toConfiguration$MybatisPlusConfiguration : MybatisPlusConfiguration#init - reason=MySQL configuration class loaded (mysql.enabled=true, MyBatisPlus present)
2026-01-17T23:17:10.045+08:00  INFO --- [           main] toConfiguration$MybatisPlusConfiguration : MybatisPlusConfiguration#actionEntityConverter - reason=creating entity converter
2026-01-17T23:17:10.047+08:00  INFO --- [           main] toConfiguration$MybatisPlusConfiguration : MybatisPlusConfiguration#mybatisPlusActionRepository - reason=ActionRegistryMapper found, creating MySQL repository
2026-01-17T23:17:10.581+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#actionVectorizationService - reason=creating ES vectorization service
2026-01-17T23:17:10.667+08:00  INFO --- [           main] c.a.a.a.p.v.ActionVectorizationService   : ActionVectorizationService#init - reason=ES index initialized on startup
2026-01-17T23:17:10.685+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#semanticActionProvider - reason=creating semantic action provider, semanticWeight=0.6, keywordWeight=0.4, matchThreshold=0.5
2026-01-17T23:17:10.689+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#defaultPlanGenerator - reason=creating default plan generator
2026-01-17T23:17:10.689+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#planActionCodeactTool - reason=creating plan_action tool
2026-01-17T23:17:10.694+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#queryStepExecutor - reason=creating query step executor
2026-01-17T23:17:10.694+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#inputStepExecutor - reason=creating input step executor
2026-01-17T23:17:10.694+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#executeStepExecutor - reason=creating execute step executor
2026-01-17T23:17:10.694+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#apiCallStepExecutor - reason=creating api call step executor
2026-01-17T23:17:10.707+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#validationStepExecutor - reason=creating validation step executor
2026-01-17T23:17:10.709+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#stepExecutorRegistry - reason=creating executor registry, executorCount=5
2026-01-17T23:17:10.710+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=QUERY, executorClass=QueryStepExecutor
2026-01-17T23:17:10.710+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=INPUT, executorClass=InputStepExecutor
2026-01-17T23:17:10.710+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=EXECUTE, executorClass=ExecuteStepExecutor
2026-01-17T23:17:10.710+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=API_CALL, executorClass=ApiCallStepExecutor
2026-01-17T23:17:10.710+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=VALIDATION, executorClass=ValidationStepExecutor
2026-01-17T23:17:10.711+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#defaultPlanExecutor - reason=creating default plan executor
2026-01-17T23:17:10.713+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#executeActionCodeactTool - reason=creating execute_action tool
2026-01-17T23:17:10.715+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#listActionsCodeactTool - reason=creating list_actions tool
2026-01-17T23:17:10.717+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#getActionDetailsCodeactTool - reason=creating get_action_details tool
2026-01-17T23:17:10.795+08:00  INFO --- [           main] e.l.c.LearningExtensionAutoConfiguration : LearningExtensionAutoConfiguration#experienceLearningExtractor - reason=creating LLM-based experience learning extractor
2026-01-17T23:17:10.795+08:00  INFO --- [           main] .a.a.a.e.l.e.ExperienceLearningExtractor : ExperienceLearningExtractor#constructor - reason=LLM-based extractor initialized
2026-01-17T23:17:10.802+08:00  INFO --- [           main] e.l.c.LearningExtensionAutoConfiguration : LearningExtensionAutoConfiguration#inMemoryLearningRepository - reason=creating in-memory learning repository
2026-01-17T23:17:10.804+08:00  INFO --- [           main] c.a.a.a.start.config.PersistenceConfig   : PersistenceConfig#init - reason=persistence configuration loaded
2026-01-17T23:17:10.807+08:00  INFO --- [           main] c.a.a.a.start.config.PersistenceConfig   : PersistenceConfig#elasticsearchExperienceRepository - reason=creating Elasticsearch experience repository (PRIMARY), indexName=experiences
2026-01-17T23:17:10.814+08:00  INFO --- [           main] e.l.c.LearningExtensionAutoConfiguration : LearningExtensionAutoConfiguration#experienceLearningRepository - reason=creating experience learning repository
2026-01-17T23:17:10.824+08:00  INFO --- [           main] e.l.c.LearningExtensionAutoConfiguration : LearningExtensionAutoConfiguration#learningStrategy - reason=creating learning strategy, asyncEnabled=true
2026-01-17T23:17:10.826+08:00  INFO --- [           main] e.l.c.LearningExtensionAutoConfiguration : LearningExtensionAutoConfiguration#asyncLearningHandler - reason=creating async learning handler, threadPoolSize=2, queueCapacity=100
2026-01-17T23:17:10.827+08:00  INFO --- [           main] c.a.a.a.e.l.i.AsyncLearningHandler       : AsyncLearningHandler#constructor - reason=async learning handler initialized, threadPoolSize=2, queueCapacity=100
2026-01-17T23:17:10.829+08:00  INFO --- [           main] e.l.c.LearningExtensionAutoConfiguration : LearningExtensionAutoConfiguration#learningExecutor - reason=creating learning executor, extractorCount=1, repositoryCount=2
2026-01-17T23:17:10.831+08:00  INFO --- [           main] e.l.c.LearningExtensionAutoConfiguration : LearningExtensionAutoConfiguration#afterAgentLearningHook - reason=creating after agent learning hook, learningType=experience
2026-01-17T23:17:10.834+08:00  INFO --- [           main] c.a.a.a.start.config.PersistenceConfig   : PersistenceConfig#elasticsearchExperienceProvider - reason=creating Elasticsearch experience provider (PRIMARY), indexName=experiences
2026-01-17T23:17:10.838+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#<init> - reason=初始化默认评估套件配置, experienceProviderAvailable=true
2026-01-17T23:17:10.838+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#evaluatorRegistry - reason=创建 EvaluatorRegistry Bean
2026-01-17T23:17:10.838+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'llm-based' of type LLMBasedEvaluator
2026-01-17T23:17:10.844+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'passthrough' of type RuleBasedEvaluator
2026-01-17T23:17:10.852+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'react_experience_evaluator' of type RuleBasedEvaluator
2026-01-17T23:17:10.852+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createDefaultEvaluatorRegistry - reason=注册 React 阶段经验检索评估器
2026-01-17T23:17:10.852+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'codeact_experience_evaluator' of type RuleBasedEvaluator
2026-01-17T23:17:10.852+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createDefaultEvaluatorRegistry - reason=注册 CodeAct 阶段经验检索评估器
2026-01-17T23:17:10.852+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#evaluationService - reason=创建默认 EvaluationService, sharedRegistryEvaluators=[llm-based, passthrough, codeact_experience_evaluator, react_experience_evaluator]
2026-01-17T23:17:10.852+08:00 DEBUG --- [           main] c.a.a.a.e.e.GraphBasedEvaluationExecutor : Created default ExecutorService for batch processing
2026-01-17T23:17:10.857+08:00  INFO --- [           main] .c.ExperienceEvaluationCriterionProvider : ExperienceEvaluationCriterionProvider#<init> - reason=初始化经验评估 Criterion 提供者
2026-01-17T23:17:10.857+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#structuredParamExtractor - reason=creating structured param extractor
2026-01-17T23:17:10.862+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#parameterValidator - reason=creating parameter validator
2026-01-17T23:17:10.869+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#restTemplate - reason=creating RestTemplate bean
2026-01-17T23:17:10.874+08:00  INFO --- [           main] c.a.a.a.planning.executor.HttpExecutor   : HttpExecutor#init - initialized
2026-01-17T23:17:10.875+08:00  INFO --- [           main] c.a.a.a.p.executor.InternalExecutor      : InternalExecutor#init - initialized
2026-01-17T23:17:10.876+08:00  INFO --- [           main] c.a.a.a.p.e.ActionExecutorFactory        : ActionExecutorFactory#init - initialized executors: INTERNAL(InternalExecutor), HTTP(HttpExecutor), DATA_AGENT(DataAgentExecutor), MCP(McpExecutor)
2026-01-17T23:17:10.877+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#sessionProvider - reason=creating in-memory session provider
2026-01-17T23:17:10.877+08:00  INFO --- [           main] c.a.a.a.p.s.InMemorySessionProvider      : InMemorySessionProvider#init - initialized
2026-01-17T23:17:10.877+08:00  INFO --- [           main] c.a.a.a.p.s.ParamCollectionService       : ParamCollectionService#init - sessionProvider=InMemory
2026-01-17T23:17:10.881+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'action_intent_evaluator' of type ActionIntentEvaluator
2026-01-17T23:17:10.881+08:00  INFO --- [           main] p.i.PlanningIntegrationAutoConfiguration : PlanningIntegrationAutoConfiguration#actionIntentEvaluator - initialized and registered, paramCollection=true, llmVerification=true, maxCandidates=5
2026-01-17T23:17:10.881+08:00  INFO --- [           main] .p.i.PlanningEvaluationCriterionProvider : PlanningEvaluationCriterionProvider#init - initialized, llmVerificationEnabled=true
2026-01-17T23:17:10.881+08:00  INFO --- [           main] p.i.PlanningIntegrationAutoConfiguration : PlanningIntegrationAutoConfiguration#planningEvaluationCriterionProvider - registered planning evaluation criterion provider
2026-01-17T23:17:10.884+08:00  INFO --- [           main] .c.ExperienceEvaluationCriterionProvider : ExperienceEvaluationCriterionProvider#getReactPhaseCriteria - reason=提供 React 阶段评估 Criteria
2026-01-17T23:17:10.885+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createReactPhaseSuite - reason=添加自定义 Criterion, provider=ExperienceEvaluationCriterionProvider, count=3
2026-01-17T23:17:10.885+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createReactPhaseSuite - reason=添加自定义 Criterion, provider=PlanningEvaluationCriterionProvider, count=2
2026-01-17T23:17:10.889+08:00  INFO --- [           main] a.a.e.a.BatchAggregationStrategyRegistry : Registered batch aggregation strategy: ANY_TRUE
2026-01-17T23:17:10.889+08:00  INFO --- [           main] a.a.e.a.BatchAggregationStrategyRegistry : Registered batch aggregation strategy: ALL_TRUE
2026-01-17T23:17:10.924+08:00  INFO --- [           main] c.a.c.a.g.internal.node.ParallelNode     : Calculated core pool size: 32 (CPU cores: 16)
2026-01-17T23:17:10.925+08:00  INFO --- [           main] c.a.c.a.g.internal.node.ParallelNode     : Calculated maximum pool size: 64 (CPU cores: 16)
2026-01-17T23:17:10.925+08:00  INFO --- [           main] c.a.c.a.g.internal.node.ParallelNode     : Calculated queue capacity: 1000
2026-01-17T23:17:10.926+08:00  INFO --- [           main] c.a.a.a.e.DefaultEvaluationService       : Registered evaluation suite: react-phase-suite
2026-01-17T23:17:10.926+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#evaluationService - reason=注册 React Phase Suite, suiteId=react-phase-suite
2026-01-17T23:17:10.926+08:00  INFO --- [           main] .c.ExperienceEvaluationCriterionProvider : ExperienceEvaluationCriterionProvider#getCodeActPhaseCriteria - reason=提供 CodeAct 阶段评估 Criteria
2026-01-17T23:17:10.927+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createCodeActPhaseSuite - reason=添加自定义 Criterion, provider=ExperienceEvaluationCriterionProvider, count=3
2026-01-17T23:17:10.927+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createCodeActPhaseSuite - reason=添加自定义 Criterion, provider=PlanningEvaluationCriterionProvider, count=2
2026-01-17T23:17:10.927+08:00  INFO --- [           main] a.a.e.a.BatchAggregationStrategyRegistry : Registered batch aggregation strategy: ANY_TRUE
2026-01-17T23:17:10.927+08:00  INFO --- [           main] a.a.e.a.BatchAggregationStrategyRegistry : Registered batch aggregation strategy: ALL_TRUE
2026-01-17T23:17:10.928+08:00  INFO --- [           main] c.a.a.a.e.DefaultEvaluationService       : Registered evaluation suite: codeact-phase-suite
2026-01-17T23:17:10.929+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#evaluationService - reason=注册 CodeAct Phase Suite, suiteId=codeact-phase-suite
2026-01-17T23:17:10.930+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#codeactEvaluationContextFactory - reason=创建 EvaluationContextFactory
2026-01-17T23:17:10.931+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#codeactEvaluationResultAttacher - reason=创建 EvaluationResultAttacher
2026-01-17T23:17:10.934+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#reactPhaseEvaluationHooks - reason=创建 React Phase ModelInputEvaluationHook
2026-01-17T23:17:10.938+08:00  INFO --- [           main] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#<init> - reason=初始化, phase=REACT, providerCount=1
2026-01-17T23:17:10.938+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#reactPhaseEvaluationHooks - reason=创建 React Phase EvaluationPromptInjectionHook, providersCount=2
2026-01-17T23:17:10.938+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#codeactPhaseEvaluationHooks - reason=创建 CodeAct Phase ModelInputEvaluationHook
2026-01-17T23:17:10.938+08:00  INFO --- [           main] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#<init> - reason=初始化, phase=CODEACT, providerCount=1
2026-01-17T23:17:10.938+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#codeactPhaseEvaluationHooks - reason=创建 CodeAct Phase EvaluationPromptInjectionHook, providersCount=2
2026-01-17T23:17:10.938+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#keywordMatcher - reason=creating keyword matcher
2026-01-17T23:17:10.943+08:00  INFO --- [           main] iguration$UnifiedIntentHookConfiguration : UnifiedIntentHookConfiguration#unifiedIntentRecognitionHook - reason=creating unified intent hook, experienceProviderPresent=true, directExecuteThreshold=0.95, hintThreshold=0.5
2026-01-17T23:17:11.075+08:00  INFO --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2026-01-17T23:17:11.358+08:00  INFO --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@346a2799
2026-01-17T23:17:11.360+08:00  INFO --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2026-01-17T23:17:11.542+08:00 DEBUG --- [           main] c.a.a.a.planning.intent.KeywordMatcher   : KeywordMatcher#registerAction - actionId=erp:product-unit:create, keywords=18
2026-01-17T23:17:11.542+08:00  INFO --- [           main] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#initKeywordMatcher - reason=initialized, actionCount=1, keywordIndexSize=18
2026-01-17T23:17:11.547+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#init - reason=reply module enabled
2026-01-17T23:17:11.548+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactToolFactory - reason=创建CodeactTool工厂, channels=1
2026-01-17T23:17:11.549+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#init - reason=工厂初始化完成, channels=1
2026-01-17T23:17:11.559+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=开始创建Reply工具
2026-01-17T23:17:11.564+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#createTools - reason=创建工具成功, toolName=send_success_message, channelCode=IDE_TEXT
2026-01-17T23:17:11.565+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#createTools - reason=创建工具成功, toolName=send_error_message, channelCode=IDE_TEXT
2026-01-17T23:17:11.566+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#createTools - reason=创建工具成功, toolName=send_notification, channelCode=IDE_TEXT
2026-01-17T23:17:11.567+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#createTools - reason=工具创建完成, totalCount=3
2026-01-17T23:17:11.567+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=Reply工具创建完成, count=3
2026-01-17T23:17:11.567+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=创建Reply工具, index=1, name=send_success_message, description=Send a success message to the IDE console
2026-01-17T23:17:11.567+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=创建Reply工具, index=2, name=send_error_message, description=Send an error message to the IDE console
2026-01-17T23:17:11.567+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=创建Reply工具, index=3, name=send_notification, description=Send a notification message
2026-01-17T23:17:11.570+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactToolFactory - reason=创建SearchCodeactTool工厂, providerCount=3
2026-01-17T23:17:11.591+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactToolFactory - reason=创建TriggerCodeactTool工厂
2026-01-17T23:17:11.592+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=开始创建Trigger工具
2026-01-17T23:17:11.593+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=创建SubscribeTriggerCodeactTool成功
2026-01-17T23:17:11.596+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=创建UnsubscribeTriggerCodeactTool成功
2026-01-17T23:17:11.597+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=创建ListTriggersCodeactTool成功
2026-01-17T23:17:11.599+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=创建GetTriggerDetailCodeactTool成功
2026-01-17T23:17:11.600+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=触发器工具创建完成, count=4
2026-01-17T23:17:11.600+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=Trigger工具创建完成, count=4
2026-01-17T23:17:11.600+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=创建Trigger工具, index=1, name=subscribe_trigger, description=创建并订阅一个新的触发器
2026-01-17T23:17:11.600+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=创建Trigger工具, index=2, name=unsubscribe_trigger, description=取消订阅并删除一个触发器
2026-01-17T23:17:11.601+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=创建Trigger工具, index=3, name=list_triggers, description=列出所有触发器
2026-01-17T23:17:11.601+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=创建Trigger工具, index=4, name=get_trigger_detail, description=获取指定触发器的详细信息
2026-01-17T23:17:11.623+08:00  INFO --- [           main] e.c.ExperienceExtensionAutoConfiguration : ExperienceExtensionAutoConfiguration#fastIntentService - reason=creating FastIntentService, extraMatchers=0
2026-01-17T23:17:11.629+08:00  INFO --- [           main] e.c.ExperienceExtensionAutoConfiguration : ExperienceExtensionAutoConfiguration#fastIntentReactHook - reason=creating fast intent react hook bean
2026-01-17T23:17:11.636+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=创建 CodeactAgent
2026-01-17T23:17:11.636+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=配置 MemorySaver 以支持多轮对话上下文保持
2026-01-17T23:17:11.636+08:00  WARN --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=临时禁用 streaming 模式以排查循环问题
2026-01-17T23:17:11.637+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加UnifiedSearchCodeactTool
2026-01-17T23:17:11.641+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockBaiduWebSearchProvider, toolName=search_web
2026-01-17T23:17:11.644+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockKnowledgeStoreSearchProvider, toolName=search_knowledge
2026-01-17T23:17:11.647+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockProjectContextSearchProvider, toolName=search_project
2026-01-17T23:17:11.647+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=搜索工具创建完成, totalCount=3
2026-01-17T23:17:11.647+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加SearchCodeactTools, count=3
2026-01-17T23:17:11.647+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加ReplyCodeactTools, count=3
2026-01-17T23:17:11.647+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加TriggerCodeactTools, count=4
2026-01-17T23:17:11.648+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#createMcpDynamicTools - reason=Creating MCP dynamic tools
2026-01-17T23:17:11.653+08:00  INFO --- [           main] c.a.a.a.e.d.mcp.McpDynamicToolFactory    : McpDynamicToolFactory#createTools - reason=开始创建MCP动态工具
2026-01-17T23:17:11.657+08:00  INFO --- [           main] c.a.a.a.e.d.mcp.McpDynamicToolFactory    : McpDynamicToolFactory#createTools - reason=无可用的MCP工具
2026-01-17T23:17:11.657+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#createMcpDynamicTools - reason=MCP dynamic tools created, count=0
2026-01-17T23:17:11.657+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=Added MCP dynamic tools, count=0
2026-01-17T23:17:11.657+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#createHttpDynamicTools - reason=HTTP dynamic tools disabled by default
2026-01-17T23:17:11.657+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=合并后CodeactTool总数, count=11
2026-01-17T23:17:11.657+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=React阶段使用内置工具(write_code, execute_code, write_condition_code)
2026-01-17T23:17:11.657+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=注入 React Phase 评估 Hooks, count=2
2026-01-17T23:17:11.657+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=注入 CodeAct Phase 评估 Hooks, count=2
2026-01-17T23:17:11.657+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=已准备注入AfterAgentLearningHook
2026-01-17T23:17:11.657+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=已准备注入FastIntentReactHook
2026-01-17T23:17:11.657+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=已准备注入UnifiedIntentRecognitionHook
2026-01-17T23:17:11.660+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 开始构建CodeactAgent
2026-01-17T23:17:11.663+08:00  INFO --- [           main] .a.a.a.c.t.s.DefaultReturnSchemaRegistry : DefaultReturnSchemaRegistry#<init> - reason=创建新实例, hashCode=221971351
2026-01-17T23:17:11.664+08:00 DEBUG --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#<init> - reason=创建注册表, returnSchemaRegistry=DefaultReturnSchemaRegistry
2026-01-17T23:17:11.665+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=创建默认CodeactToolRegistry
2026-01-17T23:17:11.665+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=开始注册CodeactTool, count=11
2026-01-17T23:17:11.665+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=unified_search
2026-01-17T23:17:11.665+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=unified_search
2026-01-17T23:17:11.665+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=search_web
2026-01-17T23:17:11.665+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=search_web
2026-01-17T23:17:11.665+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=search_knowledge
2026-01-17T23:17:11.665+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=search_knowledge
2026-01-17T23:17:11.665+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=search_project
2026-01-17T23:17:11.665+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=search_project
2026-01-17T23:17:11.665+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=send_success_message
2026-01-17T23:17:11.665+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=send_success_message
2026-01-17T23:17:11.665+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=send_error_message
2026-01-17T23:17:11.665+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=send_error_message
2026-01-17T23:17:11.665+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=send_notification
2026-01-17T23:17:11.665+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=send_notification
2026-01-17T23:17:11.665+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=subscribe_trigger
2026-01-17T23:17:11.666+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=subscribe_trigger
2026-01-17T23:17:11.666+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=unsubscribe_trigger
2026-01-17T23:17:11.666+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=unsubscribe_trigger
2026-01-17T23:17:11.666+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=list_triggers
2026-01-17T23:17:11.666+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=list_triggers
2026-01-17T23:17:11.666+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=get_trigger_detail
2026-01-17T23:17:11.666+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=get_trigger_detail
2026-01-17T23:17:11.666+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册完成, count=11
2026-01-17T23:17:11.666+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 创建默认CodeContext: language=PYTHON
2026-01-17T23:17:11.667+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 创建默认RuntimeEnvironmentManager: language=PYTHON
2026-01-17T23:17:11.670+08:00 DEBUG --- [           main] c.a.a.a.c.e.bridge.AgentToolBridge       : AgentToolBridge#<init> 初始化: 注册了0个工具
2026-01-17T23:17:11.671+08:00 DEBUG --- [           main] c.a.a.a.c.executor.bridge.StateBridge    : StateBridge#<init> 初始化完成
2026-01-17T23:17:11.672+08:00  INFO --- [           main] c.a.a.a.core.executor.GraalCodeExecutor  : GraalCodeExecutor#<init> 初始化完成: language=PYTHON, allowIO=false, timeout=30000ms, executableTools=true, customBridgeFactory=false
2026-01-17T23:17:11.673+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#createCodeactSubAgentInterceptor 创建子Agent拦截器
2026-01-17T23:17:11.679+08:00  INFO --- [           main] c.a.a.a.a.subagent.CodeactSubAgent       : CodeactSubAgent#<init> 初始化: name=code-generator
2026-01-17T23:17:11.679+08:00  INFO --- [           main] c.a.a.a.a.subagent.CodeactSubAgent       : CodeactSubAgent#<init> 初始化: name=condition-code-generator
2026-01-17T23:17:11.679+08:00  INFO --- [           main] c.a.a.a.a.s.CodeactSubAgentInterceptor   : CodeactSubAgentInterceptor#<init> 创建默认代码生成子Agent
2026-01-17T23:17:11.883+08:00  INFO --- [           main] c.a.a.a.a.s.CodeactSubAgentInterceptor   : CodeactSubAgentInterceptor#<init> 初始化完成: subAgentCount=2
2026-01-17T23:17:11.884+08:00  INFO --- [           main] c.a.a.a.a.tools.ExecuteCodeTool          : ExecuteCodeTool#<init> 初始化完成
2026-01-17T23:17:11.888+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 拦截器分类完成: modelInterceptors=1, toolInterceptors=0
2026-01-17T23:17:11.888+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 从拦截器提取工具: interceptor=CodeactSubAgent, toolCount=2
2026-01-17T23:17:11.900+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 工具收集完成: interceptorTools=2, regularTools=3, total=6
2026-01-17T23:17:11.902+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 设置ModelInterceptors到LlmNode: count=1
2026-01-17T23:17:11.904+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build CodeactAgent构建完成
2026-01-17T23:17:11.904+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=开始罗列已注册的工具
2026-01-17T23:17:11.904+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct阶段工具数量, count=11
2026-01-17T23:17:11.904+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=1, name=unified_search, description=统一搜索工具，可同时搜索项目、知识库、Web等多个数据源
2026-01-17T23:17:11.904+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=2, name=search_knowledge, description=搜索团队知识库，包括FAQ、规范、最佳实践等
2026-01-17T23:17:11.904+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=3, name=send_success_message, description=Send a success message to the IDE console
2026-01-17T23:17:11.904+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=4, name=search_web, description=执行Web搜索，获取公开互联网信息
2026-01-17T23:17:11.904+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=5, name=unsubscribe_trigger, description=取消订阅并删除一个触发器
2026-01-17T23:17:11.905+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=6, name=get_trigger_detail, description=获取指定触发器的详细信息
2026-01-17T23:17:11.905+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=7, name=send_error_message, description=Send an error message to the IDE console
2026-01-17T23:17:11.905+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=8, name=search_project, description=搜索项目上下文信息，包括代码、配置、文档等
2026-01-17T23:17:11.905+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=9, name=send_notification, description=Send a notification message
2026-01-17T23:17:11.905+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=10, name=subscribe_trigger, description=创建并订阅一个新的触发器
2026-01-17T23:17:11.905+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=11, name=list_triggers, description=列出所有触发器
2026-01-17T23:17:11.905+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React阶段工具数量, count=6
2026-01-17T23:17:11.905+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=1, name=write_code, description=Generate and register a new function with specified name and parameters. IMPORTANT: You MUST provide both 'functionName' and 'parameters' fields. Example: write_code(requirement='calculate sum', functionName='calculate_sum', parameters=['a', 'b'])
2026-01-17T23:17:11.905+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=2, name=write_condition_code, description=Generate and register a condition check function for triggers. This function MUST return a boolean value (True/False). Example: write_condition_code(requirement='check if it is a working day', functionName='check_is_working_day', parameters=['date'])
2026-01-17T23:17:11.905+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=3, name=send_success_message, description=Send a success message to the IDE console
2026-01-17T23:17:11.905+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=4, name=send_error_message, description=Send an error message to the IDE console
2026-01-17T23:17:11.905+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=5, name=send_notification, description=Send a notification message
2026-01-17T23:17:11.905+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=6, name=execute_code, description=Execute a previously generated function by its exact name with matching parameters. CRITICAL: The functionName MUST exactly match the name used in write_code. The 'args' parameter names MUST exactly match the 'parameters' specified in write_code. Example: If you called write_code with functionName='calculate_sum' and parameters=['a', 'b'], then you must call execute_code with functionName='calculate_sum' and args={'a': 10, 'b': 20}. Parameter value types supported: String, Number, Boolean, List, Map/Object.
2026-01-17T23:17:11.905+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=工具罗列完成
2026-01-17T23:17:11.906+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgent#<init> 初始化完成: language=PYTHON
2026-01-17T23:17:11.909+08:00  INFO --- [           main] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#<init> 初始化 Agent 加载器
2026-01-17T23:17:11.922+08:00 DEBUG --- [           main] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#<init> Agent 图结构:
@startuml CodeactAgent
skinparam usecaseFontSize 14
skinparam usecaseStereotypeFontSize 12
skinparam hexagonFontSize 14
skinparam hexagonStereotypeFontSize 12
title "CodeactAgent"
footer

powered by spring-ai-alibaba
end footer
circle start<<input>> as __START__
circle stop as __END__
usecase "_AGENT_MODEL_"<<Node>>
usecase "_AGENT_TOOL_"<<Node>>
usecase "_AGENT_HOOK_FastIntentReactHook.before"<<Node>>
usecase "_AGENT_HOOK_UnifiedIntentRecognitionHook.before"<<Node>>
usecase "_AGENT_HOOK_AfterAgentLearningHook.after"<<Node>>
usecase "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"<<Node>>
usecase "_AGENT_HOOK_EvaluationPromptInjectionHook-REACT.beforeModel"<<Node>>
hexagon "check state" as condition1<<Condition>>
hexagon "check state" as condition2<<Condition>>
hexagon "check state" as condition3<<Condition>>
hexagon "check state" as condition4<<Condition>>
"__START__" -down-> "_AGENT_HOOK_FastIntentReactHook.before"
"_AGENT_HOOK_FastIntentReactHook.before" .down.> "condition1"
"condition1" .down.> "_AGENT_TOOL_"
'"_AGENT_HOOK_FastIntentReactHook.before" .down.> "_AGENT_TOOL_"
"condition1" .down.> "_AGENT_HOOK_UnifiedIntentRecognitionHook.before"
'"_AGENT_HOOK_FastIntentReactHook.before" .down.> "_AGENT_HOOK_UnifiedIntentRecognitionHook.before"
"_AGENT_HOOK_UnifiedIntentRecognitionHook.before" .down.> "condition2"
"condition2" .down.> "_AGENT_HOOK_AfterAgentLearningHook.after"
'"_AGENT_HOOK_UnifiedIntentRecognitionHook.before" .down.> "_AGENT_HOOK_AfterAgentLearningHook.after"
"condition2" .down.> "_AGENT_TOOL_"
'"_AGENT_HOOK_UnifiedIntentRecognitionHook.before" .down.> "_AGENT_TOOL_"
"condition2" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
'"_AGENT_HOOK_UnifiedIntentRecognitionHook.before" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
"_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel" -down-> "_AGENT_HOOK_EvaluationPromptInjectionHook-REACT.beforeModel"
"_AGENT_HOOK_EvaluationPromptInjectionHook-REACT.beforeModel" -down-> "_AGENT_MODEL_"
"_AGENT_HOOK_AfterAgentLearningHook.after" -down-> "__END__"
"_AGENT_MODEL_" .down.> "condition3"
"condition3" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
'"_AGENT_MODEL_" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
"condition3" .down.> "_AGENT_TOOL_"
'"_AGENT_MODEL_" .down.> "_AGENT_TOOL_"
"condition3" .down.> "_AGENT_HOOK_AfterAgentLearningHook.after"
'"_AGENT_MODEL_" .down.> "_AGENT_HOOK_AfterAgentLearningHook.after"
"_AGENT_TOOL_" .down.> "condition4"
"condition4" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
'"_AGENT_TOOL_" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
"condition4" .down.> "_AGENT_HOOK_AfterAgentLearningHook.after"
'"_AGENT_TOOL_" .down.> "_AGENT_HOOK_AfterAgentLearningHook.after"
@enduml

2026-01-17T23:17:11.923+08:00  INFO --- [           main] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#<init> 已注册 agent: grayscale_agent
2026-01-17T23:17:11.933+08:00 DEBUG --- [           main] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#listAgents 列出所有 agent
2026-01-17T23:17:11.934+08:00  INFO --- [           main] c.a.c.a.a.s.controller.AgentController   : AgentController initialized with 1 dynamic agents: [grayscale_agent]
2026-01-17T23:17:11.946+08:00  INFO --- [           main] e.e.c.CodeactEvaluationAutoConfiguration : CodeactEvaluationAutoConfiguration#inputRoutingEvaluationHook - reason=创建输入路由评估 Hook
2026-01-17T23:17:11.947+08:00  INFO --- [           main] e.c.ExperienceExtensionAutoConfiguration : ExperienceExtensionAutoConfiguration#codeExperienceModelHook - reason=creating code experience model hook bean
2026-01-17T23:17:11.948+08:00  INFO --- [           main] e.c.ExperienceExtensionAutoConfiguration : ExperienceExtensionAutoConfiguration#reactExperienceAgentHook - reason=creating react experience agent hook bean
2026-01-17T23:17:11.949+08:00  INFO --- [           main] e.c.ExperienceExtensionAutoConfiguration : ExperienceExtensionAutoConfiguration#commonSenseExperienceModelHook - reason=creating common sense prompt model hook bean
2026-01-17T23:17:11.951+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchFacade - reason=creating search facade with 3 providers
2026-01-17T23:17:11.953+08:00  INFO --- [           main] c.a.a.a.e.s.i.DefaultSearchFacade        : DefaultSearchFacade#init - reason=initialized with 3 providers
2026-01-17T23:17:11.954+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=开始创建Search工具
2026-01-17T23:17:11.956+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockBaiduWebSearchProvider, toolName=search_web
2026-01-17T23:17:11.958+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockKnowledgeStoreSearchProvider, toolName=search_knowledge
2026-01-17T23:17:11.960+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockProjectContextSearchProvider, toolName=search_project
2026-01-17T23:17:11.960+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=搜索工具创建完成, totalCount=3
2026-01-17T23:17:11.960+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=Search工具创建完成, count=3
2026-01-17T23:17:11.960+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=创建Search工具, index=1, name=search_web, description=执行Web搜索，获取公开互联网信息
2026-01-17T23:17:11.961+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=创建Search工具, index=2, name=search_knowledge, description=搜索团队知识库，包括FAQ、规范、最佳实践等
2026-01-17T23:17:11.961+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=创建Search工具, index=3, name=search_project, description=搜索项目上下文信息，包括代码、配置、文档等
2026-01-17T23:17:11.966+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#diagnostics - reason=ElasticsearchClient bean found
2026-01-17T23:17:11.966+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#diagnostics - reason=EmbeddingModel bean found
2026-01-17T23:17:11.969+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#diagnostics - Planning module status:
2026-01-17T23:17:11.969+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration :   - ActionRepository: MybatisPlusActionRepository
2026-01-17T23:17:11.969+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration :   - ActionProvider: SemanticActionProvider
2026-01-17T23:17:11.969+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration :   - PlanGenerator: DefaultPlanGenerator
2026-01-17T23:17:11.969+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration :   - PlanExecutor: DefaultPlanExecutor
2026-01-17T23:17:11.972+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#planningCodeactTools - reason=creating planning tools list
2026-01-17T23:17:11.973+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#planningCodeactTools - reason=created planning tools, count=4
2026-01-17T23:17:12.507+08:00  INFO --- [           main] c.a.a.a.c.c.CodeactCoreAutoConfiguration : CodeactCoreAutoConfiguration#returnSchemaRegistry - reason=创建ReturnSchemaRegistry单例Bean
2026-01-17T23:17:12.507+08:00  INFO --- [           main] .a.a.a.c.t.s.DefaultReturnSchemaRegistry : DefaultReturnSchemaRegistry#<init> - reason=创建新实例, hashCode=1158234446
2026-01-17T23:17:12.980+08:00  WARN --- [           main] o.s.m.p.s.SyncMcpSamplingProvider        : No sampling methods found
2026-01-17T23:17:12.982+08:00  WARN --- [           main] o.s.m.p.e.SyncMcpElicitationProvider     : No elicitation methods found
2026-01-17T23:17:13.004+08:00  WARN --- [           main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException: Failed to start bean 'webServerStartStop'
2026-01-17T23:17:13.010+08:00  INFO --- [           main] c.a.a.a.e.e.GraphBasedEvaluationExecutor : Shutting down ExecutorService
2026-01-17T23:17:13.010+08:00  INFO --- [           main] c.a.a.a.e.l.i.AsyncLearningHandler       : AsyncLearningHandler#shutdown - reason=shutting down async learning handler
2026-01-17T23:17:13.015+08:00  INFO --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2026-01-17T23:17:13.028+08:00  INFO --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2026-01-17T23:17:13.047+08:00  INFO --- [           main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2026-01-17T23:17:13.074+08:00 ERROR --- [           main] o.s.b.d.LoggingFailureAnalysisReporter   : 

***************************
APPLICATION FAILED TO START
***************************

Description:

Web server failed to start. Port 8080 was already in use.

Action:

Identify and stop the process that's listening on port 8080 or configure this application to listen on another port.

2026-01-17T23:17:13.075+08:00  INFO --- [r-shutdown-hook] c.a.c.a.g.internal.node.ParallelNode     : Shutting down ParallelNode default executor
2026-01-17T23:17:13.075+08:00  INFO --- [r-shutdown-hook] c.a.c.a.g.internal.node.ParallelNode     : ParallelNode default thread pool terminated
2026-01-17T23:17:13.075+08:00  INFO --- [r-shutdown-hook] c.a.c.a.g.internal.node.ParallelNode     : ParallelNode default executor shut down successfully
2026-01-17T23:18:15.092+08:00  INFO --- [           main] c.a.a.a.start.AssistantAgentApplication  : Starting AssistantAgentApplication using Java 21.0.9 with PID 20048 (D:\devfive\AssistantAgent\assistant-agent-start\target\classes started by zhou_ in D:\devfive\AssistantAgent\assistant-agent-start)
2026-01-17T23:18:15.093+08:00 DEBUG --- [           main] c.a.a.a.start.AssistantAgentApplication  : Running with Spring Boot v3.4.8, Spring v6.2.9
2026-01-17T23:18:15.093+08:00  INFO --- [           main] c.a.a.a.start.AssistantAgentApplication  : No active profile set, falling back to 1 default profile: "default"
2026-01-17T23:18:16.288+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Elasticsearch repositories in DEFAULT mode.
2026-01-17T23:18:16.316+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 24 ms. Found 0 Elasticsearch repository interfaces.
2026-01-17T23:18:16.326+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Reactive Elasticsearch repositories in DEFAULT mode.
2026-01-17T23:18:16.333+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 5 ms. Found 0 Reactive Elasticsearch repository interfaces.
2026-01-17T23:18:17.410+08:00  INFO --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2026-01-17T23:18:17.430+08:00  INFO --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2026-01-17T23:18:17.431+08:00  INFO --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.43]
2026-01-17T23:18:17.520+08:00  INFO --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2026-01-17T23:18:17.520+08:00  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2377 ms
2026-01-17T23:18:17.583+08:00  INFO --- [           main] e.l.c.LearningExtensionAutoConfiguration : LearningExtensionAutoConfiguration#constructor - reason=learning extension auto-configuration initialized
2026-01-17T23:18:17.600+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#init - reason=search extension framework is enabled
2026-01-17T23:18:17.601+08:00  INFO --- [           main] c.a.a.a.s.s.MockBaiduWebSearchProvider   : MockBaiduWebSearchProvider#init - reason=使用简单模式初始化
2026-01-17T23:18:17.603+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#unifiedSearchCodeactTool - reason=创建统一搜索工具, providerCount=3
2026-01-17T23:18:17.652+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#init - reason=planning extension is enabled
2026-01-17T23:18:17.653+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#init - reason=ES configuration class loaded (elasticsearch.enabled=true)
2026-01-17T23:18:17.655+08:00  INFO --- [           main] toConfiguration$MybatisPlusConfiguration : MybatisPlusConfiguration#init - reason=MySQL configuration class loaded (mysql.enabled=true, MyBatisPlus present)
2026-01-17T23:18:17.938+08:00  INFO --- [           main] toConfiguration$MybatisPlusConfiguration : MybatisPlusConfiguration#actionEntityConverter - reason=creating entity converter
2026-01-17T23:18:17.939+08:00  INFO --- [           main] toConfiguration$MybatisPlusConfiguration : MybatisPlusConfiguration#mybatisPlusActionRepository - reason=ActionRegistryMapper found, creating MySQL repository
2026-01-17T23:18:18.387+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#actionVectorizationService - reason=creating ES vectorization service
2026-01-17T23:18:18.456+08:00  INFO --- [           main] c.a.a.a.p.v.ActionVectorizationService   : ActionVectorizationService#init - reason=ES index initialized on startup
2026-01-17T23:18:18.470+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#semanticActionProvider - reason=creating semantic action provider, semanticWeight=0.6, keywordWeight=0.4, matchThreshold=0.5
2026-01-17T23:18:18.471+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#defaultPlanGenerator - reason=creating default plan generator
2026-01-17T23:18:18.476+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#planActionCodeactTool - reason=creating plan_action tool
2026-01-17T23:18:18.477+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#queryStepExecutor - reason=creating query step executor
2026-01-17T23:18:18.477+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#inputStepExecutor - reason=creating input step executor
2026-01-17T23:18:18.482+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#executeStepExecutor - reason=creating execute step executor
2026-01-17T23:18:18.482+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#apiCallStepExecutor - reason=creating api call step executor
2026-01-17T23:18:18.488+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#validationStepExecutor - reason=creating validation step executor
2026-01-17T23:18:18.492+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#stepExecutorRegistry - reason=creating executor registry, executorCount=5
2026-01-17T23:18:18.493+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=QUERY, executorClass=QueryStepExecutor
2026-01-17T23:18:18.494+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=INPUT, executorClass=InputStepExecutor
2026-01-17T23:18:18.494+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=EXECUTE, executorClass=ExecuteStepExecutor
2026-01-17T23:18:18.494+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=API_CALL, executorClass=ApiCallStepExecutor
2026-01-17T23:18:18.494+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=VALIDATION, executorClass=ValidationStepExecutor
2026-01-17T23:18:18.495+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#defaultPlanExecutor - reason=creating default plan executor
2026-01-17T23:18:18.497+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#executeActionCodeactTool - reason=creating execute_action tool
2026-01-17T23:18:18.498+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#listActionsCodeactTool - reason=creating list_actions tool
2026-01-17T23:18:18.499+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#getActionDetailsCodeactTool - reason=creating get_action_details tool
2026-01-17T23:18:18.566+08:00  INFO --- [           main] e.l.c.LearningExtensionAutoConfiguration : LearningExtensionAutoConfiguration#experienceLearningExtractor - reason=creating LLM-based experience learning extractor
2026-01-17T23:18:18.566+08:00  INFO --- [           main] .a.a.a.e.l.e.ExperienceLearningExtractor : ExperienceLearningExtractor#constructor - reason=LLM-based extractor initialized
2026-01-17T23:18:18.566+08:00  INFO --- [           main] e.l.c.LearningExtensionAutoConfiguration : LearningExtensionAutoConfiguration#inMemoryLearningRepository - reason=creating in-memory learning repository
2026-01-17T23:18:18.571+08:00  INFO --- [           main] c.a.a.a.start.config.PersistenceConfig   : PersistenceConfig#init - reason=persistence configuration loaded
2026-01-17T23:18:18.576+08:00  INFO --- [           main] c.a.a.a.start.config.PersistenceConfig   : PersistenceConfig#elasticsearchExperienceRepository - reason=creating Elasticsearch experience repository (PRIMARY), indexName=experiences
2026-01-17T23:18:18.584+08:00  INFO --- [           main] e.l.c.LearningExtensionAutoConfiguration : LearningExtensionAutoConfiguration#experienceLearningRepository - reason=creating experience learning repository
2026-01-17T23:18:18.594+08:00  INFO --- [           main] e.l.c.LearningExtensionAutoConfiguration : LearningExtensionAutoConfiguration#learningStrategy - reason=creating learning strategy, asyncEnabled=true
2026-01-17T23:18:18.598+08:00  INFO --- [           main] e.l.c.LearningExtensionAutoConfiguration : LearningExtensionAutoConfiguration#asyncLearningHandler - reason=creating async learning handler, threadPoolSize=2, queueCapacity=100
2026-01-17T23:18:18.598+08:00  INFO --- [           main] c.a.a.a.e.l.i.AsyncLearningHandler       : AsyncLearningHandler#constructor - reason=async learning handler initialized, threadPoolSize=2, queueCapacity=100
2026-01-17T23:18:18.598+08:00  INFO --- [           main] e.l.c.LearningExtensionAutoConfiguration : LearningExtensionAutoConfiguration#learningExecutor - reason=creating learning executor, extractorCount=1, repositoryCount=2
2026-01-17T23:18:18.598+08:00  INFO --- [           main] e.l.c.LearningExtensionAutoConfiguration : LearningExtensionAutoConfiguration#afterAgentLearningHook - reason=creating after agent learning hook, learningType=experience
2026-01-17T23:18:18.604+08:00  INFO --- [           main] c.a.a.a.start.config.PersistenceConfig   : PersistenceConfig#elasticsearchExperienceProvider - reason=creating Elasticsearch experience provider (PRIMARY), indexName=experiences
2026-01-17T23:18:18.612+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#<init> - reason=初始化默认评估套件配置, experienceProviderAvailable=true
2026-01-17T23:18:18.614+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#evaluatorRegistry - reason=创建 EvaluatorRegistry Bean
2026-01-17T23:18:18.616+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'llm-based' of type LLMBasedEvaluator
2026-01-17T23:18:18.617+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'passthrough' of type RuleBasedEvaluator
2026-01-17T23:18:18.619+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'react_experience_evaluator' of type RuleBasedEvaluator
2026-01-17T23:18:18.619+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createDefaultEvaluatorRegistry - reason=注册 React 阶段经验检索评估器
2026-01-17T23:18:18.619+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'codeact_experience_evaluator' of type RuleBasedEvaluator
2026-01-17T23:18:18.619+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createDefaultEvaluatorRegistry - reason=注册 CodeAct 阶段经验检索评估器
2026-01-17T23:18:18.619+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#evaluationService - reason=创建默认 EvaluationService, sharedRegistryEvaluators=[llm-based, passthrough, codeact_experience_evaluator, react_experience_evaluator]
2026-01-17T23:18:18.621+08:00 DEBUG --- [           main] c.a.a.a.e.e.GraphBasedEvaluationExecutor : Created default ExecutorService for batch processing
2026-01-17T23:18:18.622+08:00  INFO --- [           main] .c.ExperienceEvaluationCriterionProvider : ExperienceEvaluationCriterionProvider#<init> - reason=初始化经验评估 Criterion 提供者
2026-01-17T23:18:18.624+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#structuredParamExtractor - reason=creating structured param extractor
2026-01-17T23:18:18.632+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#parameterValidator - reason=creating parameter validator
2026-01-17T23:18:18.635+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#restTemplate - reason=creating RestTemplate bean
2026-01-17T23:18:18.639+08:00  INFO --- [           main] c.a.a.a.planning.executor.HttpExecutor   : HttpExecutor#init - initialized
2026-01-17T23:18:18.640+08:00  INFO --- [           main] c.a.a.a.p.executor.InternalExecutor      : InternalExecutor#init - initialized
2026-01-17T23:18:18.641+08:00  INFO --- [           main] c.a.a.a.p.e.ActionExecutorFactory        : ActionExecutorFactory#init - initialized executors: INTERNAL(InternalExecutor), HTTP(HttpExecutor), DATA_AGENT(DataAgentExecutor), MCP(McpExecutor)
2026-01-17T23:18:18.642+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#sessionProvider - reason=creating in-memory session provider
2026-01-17T23:18:18.643+08:00  INFO --- [           main] c.a.a.a.p.s.InMemorySessionProvider      : InMemorySessionProvider#init - initialized
2026-01-17T23:18:18.644+08:00  INFO --- [           main] c.a.a.a.p.s.ParamCollectionService       : ParamCollectionService#init - sessionProvider=InMemory
2026-01-17T23:18:18.644+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'action_intent_evaluator' of type ActionIntentEvaluator
2026-01-17T23:18:18.644+08:00  INFO --- [           main] p.i.PlanningIntegrationAutoConfiguration : PlanningIntegrationAutoConfiguration#actionIntentEvaluator - initialized and registered, paramCollection=true, llmVerification=true, maxCandidates=5
2026-01-17T23:18:18.644+08:00  INFO --- [           main] .p.i.PlanningEvaluationCriterionProvider : PlanningEvaluationCriterionProvider#init - initialized, llmVerificationEnabled=true
2026-01-17T23:18:18.644+08:00  INFO --- [           main] p.i.PlanningIntegrationAutoConfiguration : PlanningIntegrationAutoConfiguration#planningEvaluationCriterionProvider - registered planning evaluation criterion provider
2026-01-17T23:18:18.644+08:00  INFO --- [           main] .c.ExperienceEvaluationCriterionProvider : ExperienceEvaluationCriterionProvider#getReactPhaseCriteria - reason=提供 React 阶段评估 Criteria
2026-01-17T23:18:18.650+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createReactPhaseSuite - reason=添加自定义 Criterion, provider=ExperienceEvaluationCriterionProvider, count=3
2026-01-17T23:18:18.651+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createReactPhaseSuite - reason=添加自定义 Criterion, provider=PlanningEvaluationCriterionProvider, count=2
2026-01-17T23:18:18.651+08:00  INFO --- [           main] a.a.e.a.BatchAggregationStrategyRegistry : Registered batch aggregation strategy: ANY_TRUE
2026-01-17T23:18:18.651+08:00  INFO --- [           main] a.a.e.a.BatchAggregationStrategyRegistry : Registered batch aggregation strategy: ALL_TRUE
2026-01-17T23:18:18.684+08:00  INFO --- [           main] c.a.c.a.g.internal.node.ParallelNode     : Calculated core pool size: 32 (CPU cores: 16)
2026-01-17T23:18:18.684+08:00  INFO --- [           main] c.a.c.a.g.internal.node.ParallelNode     : Calculated maximum pool size: 64 (CPU cores: 16)
2026-01-17T23:18:18.684+08:00  INFO --- [           main] c.a.c.a.g.internal.node.ParallelNode     : Calculated queue capacity: 1000
2026-01-17T23:18:18.685+08:00  INFO --- [           main] c.a.a.a.e.DefaultEvaluationService       : Registered evaluation suite: react-phase-suite
2026-01-17T23:18:18.685+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#evaluationService - reason=注册 React Phase Suite, suiteId=react-phase-suite
2026-01-17T23:18:18.685+08:00  INFO --- [           main] .c.ExperienceEvaluationCriterionProvider : ExperienceEvaluationCriterionProvider#getCodeActPhaseCriteria - reason=提供 CodeAct 阶段评估 Criteria
2026-01-17T23:18:18.685+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createCodeActPhaseSuite - reason=添加自定义 Criterion, provider=ExperienceEvaluationCriterionProvider, count=3
2026-01-17T23:18:18.685+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createCodeActPhaseSuite - reason=添加自定义 Criterion, provider=PlanningEvaluationCriterionProvider, count=2
2026-01-17T23:18:18.685+08:00  INFO --- [           main] a.a.e.a.BatchAggregationStrategyRegistry : Registered batch aggregation strategy: ANY_TRUE
2026-01-17T23:18:18.685+08:00  INFO --- [           main] a.a.e.a.BatchAggregationStrategyRegistry : Registered batch aggregation strategy: ALL_TRUE
2026-01-17T23:18:18.686+08:00  INFO --- [           main] c.a.a.a.e.DefaultEvaluationService       : Registered evaluation suite: codeact-phase-suite
2026-01-17T23:18:18.687+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#evaluationService - reason=注册 CodeAct Phase Suite, suiteId=codeact-phase-suite
2026-01-17T23:18:18.688+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#codeactEvaluationContextFactory - reason=创建 EvaluationContextFactory
2026-01-17T23:18:18.689+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#codeactEvaluationResultAttacher - reason=创建 EvaluationResultAttacher
2026-01-17T23:18:18.693+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#reactPhaseEvaluationHooks - reason=创建 React Phase ModelInputEvaluationHook
2026-01-17T23:18:18.696+08:00  INFO --- [           main] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#<init> - reason=初始化, phase=REACT, providerCount=1
2026-01-17T23:18:18.696+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#reactPhaseEvaluationHooks - reason=创建 React Phase EvaluationPromptInjectionHook, providersCount=2
2026-01-17T23:18:18.697+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#codeactPhaseEvaluationHooks - reason=创建 CodeAct Phase ModelInputEvaluationHook
2026-01-17T23:18:18.697+08:00  INFO --- [           main] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#<init> - reason=初始化, phase=CODEACT, providerCount=1
2026-01-17T23:18:18.697+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#codeactPhaseEvaluationHooks - reason=创建 CodeAct Phase EvaluationPromptInjectionHook, providersCount=2
2026-01-17T23:18:18.699+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#keywordMatcher - reason=creating keyword matcher
2026-01-17T23:18:18.702+08:00  INFO --- [           main] iguration$UnifiedIntentHookConfiguration : UnifiedIntentHookConfiguration#unifiedIntentRecognitionHook - reason=creating unified intent hook, experienceProviderPresent=true, directExecuteThreshold=0.95, hintThreshold=0.5
2026-01-17T23:18:18.799+08:00  INFO --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2026-01-17T23:18:19.004+08:00  INFO --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@29c76d75
2026-01-17T23:18:19.004+08:00  INFO --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2026-01-17T23:18:19.154+08:00 DEBUG --- [           main] c.a.a.a.planning.intent.KeywordMatcher   : KeywordMatcher#registerAction - actionId=erp:product-unit:create, keywords=18
2026-01-17T23:18:19.154+08:00  INFO --- [           main] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#initKeywordMatcher - reason=initialized, actionCount=1, keywordIndexSize=18
2026-01-17T23:18:19.158+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#init - reason=reply module enabled
2026-01-17T23:18:19.160+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactToolFactory - reason=创建CodeactTool工厂, channels=1
2026-01-17T23:18:19.160+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#init - reason=工厂初始化完成, channels=1
2026-01-17T23:18:19.172+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=开始创建Reply工具
2026-01-17T23:18:19.176+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#createTools - reason=创建工具成功, toolName=send_success_message, channelCode=IDE_TEXT
2026-01-17T23:18:19.178+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#createTools - reason=创建工具成功, toolName=send_error_message, channelCode=IDE_TEXT
2026-01-17T23:18:19.179+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#createTools - reason=创建工具成功, toolName=send_notification, channelCode=IDE_TEXT
2026-01-17T23:18:19.179+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#createTools - reason=工具创建完成, totalCount=3
2026-01-17T23:18:19.179+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=Reply工具创建完成, count=3
2026-01-17T23:18:19.179+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=创建Reply工具, index=1, name=send_success_message, description=Send a success message to the IDE console
2026-01-17T23:18:19.179+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=创建Reply工具, index=2, name=send_error_message, description=Send an error message to the IDE console
2026-01-17T23:18:19.179+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=创建Reply工具, index=3, name=send_notification, description=Send a notification message
2026-01-17T23:18:19.179+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactToolFactory - reason=创建SearchCodeactTool工厂, providerCount=3
2026-01-17T23:18:19.194+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactToolFactory - reason=创建TriggerCodeactTool工厂
2026-01-17T23:18:19.199+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=开始创建Trigger工具
2026-01-17T23:18:19.199+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=创建SubscribeTriggerCodeactTool成功
2026-01-17T23:18:19.199+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=创建UnsubscribeTriggerCodeactTool成功
2026-01-17T23:18:19.199+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=创建ListTriggersCodeactTool成功
2026-01-17T23:18:19.199+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=创建GetTriggerDetailCodeactTool成功
2026-01-17T23:18:19.199+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=触发器工具创建完成, count=4
2026-01-17T23:18:19.199+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=Trigger工具创建完成, count=4
2026-01-17T23:18:19.199+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=创建Trigger工具, index=1, name=subscribe_trigger, description=创建并订阅一个新的触发器
2026-01-17T23:18:19.199+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=创建Trigger工具, index=2, name=unsubscribe_trigger, description=取消订阅并删除一个触发器
2026-01-17T23:18:19.199+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=创建Trigger工具, index=3, name=list_triggers, description=列出所有触发器
2026-01-17T23:18:19.205+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=创建Trigger工具, index=4, name=get_trigger_detail, description=获取指定触发器的详细信息
2026-01-17T23:18:19.217+08:00  INFO --- [           main] e.c.ExperienceExtensionAutoConfiguration : ExperienceExtensionAutoConfiguration#fastIntentService - reason=creating FastIntentService, extraMatchers=0
2026-01-17T23:18:19.220+08:00  INFO --- [           main] e.c.ExperienceExtensionAutoConfiguration : ExperienceExtensionAutoConfiguration#fastIntentReactHook - reason=creating fast intent react hook bean
2026-01-17T23:18:19.225+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=创建 CodeactAgent
2026-01-17T23:18:19.225+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=配置 MemorySaver 以支持多轮对话上下文保持
2026-01-17T23:18:19.226+08:00  WARN --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=临时禁用 streaming 模式以排查循环问题
2026-01-17T23:18:19.226+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加UnifiedSearchCodeactTool
2026-01-17T23:18:19.230+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockBaiduWebSearchProvider, toolName=search_web
2026-01-17T23:18:19.231+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockKnowledgeStoreSearchProvider, toolName=search_knowledge
2026-01-17T23:18:19.233+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockProjectContextSearchProvider, toolName=search_project
2026-01-17T23:18:19.233+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=搜索工具创建完成, totalCount=3
2026-01-17T23:18:19.233+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加SearchCodeactTools, count=3
2026-01-17T23:18:19.233+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加ReplyCodeactTools, count=3
2026-01-17T23:18:19.233+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加TriggerCodeactTools, count=4
2026-01-17T23:18:19.233+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#createMcpDynamicTools - reason=Creating MCP dynamic tools
2026-01-17T23:18:19.237+08:00  INFO --- [           main] c.a.a.a.e.d.mcp.McpDynamicToolFactory    : McpDynamicToolFactory#createTools - reason=开始创建MCP动态工具
2026-01-17T23:18:19.239+08:00  INFO --- [           main] c.a.a.a.e.d.mcp.McpDynamicToolFactory    : McpDynamicToolFactory#createTools - reason=无可用的MCP工具
2026-01-17T23:18:19.239+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#createMcpDynamicTools - reason=MCP dynamic tools created, count=0
2026-01-17T23:18:19.239+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=Added MCP dynamic tools, count=0
2026-01-17T23:18:19.239+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#createHttpDynamicTools - reason=HTTP dynamic tools disabled by default
2026-01-17T23:18:19.239+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=合并后CodeactTool总数, count=11
2026-01-17T23:18:19.239+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=React阶段使用内置工具(write_code, execute_code, write_condition_code)
2026-01-17T23:18:19.239+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=注入 React Phase 评估 Hooks, count=2
2026-01-17T23:18:19.239+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=注入 CodeAct Phase 评估 Hooks, count=2
2026-01-17T23:18:19.239+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=已准备注入AfterAgentLearningHook
2026-01-17T23:18:19.239+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=已准备注入FastIntentReactHook
2026-01-17T23:18:19.239+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=已准备注入UnifiedIntentRecognitionHook
2026-01-17T23:18:19.241+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 开始构建CodeactAgent
2026-01-17T23:18:19.244+08:00  INFO --- [           main] .a.a.a.c.t.s.DefaultReturnSchemaRegistry : DefaultReturnSchemaRegistry#<init> - reason=创建新实例, hashCode=437475
2026-01-17T23:18:19.244+08:00 DEBUG --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#<init> - reason=创建注册表, returnSchemaRegistry=DefaultReturnSchemaRegistry
2026-01-17T23:18:19.244+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=创建默认CodeactToolRegistry
2026-01-17T23:18:19.244+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=开始注册CodeactTool, count=11
2026-01-17T23:18:19.244+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=unified_search
2026-01-17T23:18:19.244+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=unified_search
2026-01-17T23:18:19.244+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=search_web
2026-01-17T23:18:19.244+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=search_web
2026-01-17T23:18:19.244+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=search_knowledge
2026-01-17T23:18:19.244+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=search_knowledge
2026-01-17T23:18:19.244+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=search_project
2026-01-17T23:18:19.244+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=search_project
2026-01-17T23:18:19.244+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=send_success_message
2026-01-17T23:18:19.244+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=send_success_message
2026-01-17T23:18:19.244+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=send_error_message
2026-01-17T23:18:19.244+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=send_error_message
2026-01-17T23:18:19.244+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=send_notification
2026-01-17T23:18:19.244+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=send_notification
2026-01-17T23:18:19.244+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=subscribe_trigger
2026-01-17T23:18:19.244+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=subscribe_trigger
2026-01-17T23:18:19.244+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=unsubscribe_trigger
2026-01-17T23:18:19.244+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=unsubscribe_trigger
2026-01-17T23:18:19.244+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=list_triggers
2026-01-17T23:18:19.244+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=list_triggers
2026-01-17T23:18:19.244+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=get_trigger_detail
2026-01-17T23:18:19.244+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=get_trigger_detail
2026-01-17T23:18:19.244+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册完成, count=11
2026-01-17T23:18:19.244+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 创建默认CodeContext: language=PYTHON
2026-01-17T23:18:19.244+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 创建默认RuntimeEnvironmentManager: language=PYTHON
2026-01-17T23:18:19.249+08:00 DEBUG --- [           main] c.a.a.a.c.e.bridge.AgentToolBridge       : AgentToolBridge#<init> 初始化: 注册了0个工具
2026-01-17T23:18:19.249+08:00 DEBUG --- [           main] c.a.a.a.c.executor.bridge.StateBridge    : StateBridge#<init> 初始化完成
2026-01-17T23:18:19.249+08:00  INFO --- [           main] c.a.a.a.core.executor.GraalCodeExecutor  : GraalCodeExecutor#<init> 初始化完成: language=PYTHON, allowIO=false, timeout=30000ms, executableTools=true, customBridgeFactory=false
2026-01-17T23:18:19.249+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#createCodeactSubAgentInterceptor 创建子Agent拦截器
2026-01-17T23:18:19.254+08:00  INFO --- [           main] c.a.a.a.a.subagent.CodeactSubAgent       : CodeactSubAgent#<init> 初始化: name=code-generator
2026-01-17T23:18:19.254+08:00  INFO --- [           main] c.a.a.a.a.subagent.CodeactSubAgent       : CodeactSubAgent#<init> 初始化: name=condition-code-generator
2026-01-17T23:18:19.254+08:00  INFO --- [           main] c.a.a.a.a.s.CodeactSubAgentInterceptor   : CodeactSubAgentInterceptor#<init> 创建默认代码生成子Agent
2026-01-17T23:18:19.378+08:00  INFO --- [           main] c.a.a.a.a.s.CodeactSubAgentInterceptor   : CodeactSubAgentInterceptor#<init> 初始化完成: subAgentCount=2
2026-01-17T23:18:19.379+08:00  INFO --- [           main] c.a.a.a.a.tools.ExecuteCodeTool          : ExecuteCodeTool#<init> 初始化完成
2026-01-17T23:18:19.381+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 拦截器分类完成: modelInterceptors=1, toolInterceptors=0
2026-01-17T23:18:19.381+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 从拦截器提取工具: interceptor=CodeactSubAgent, toolCount=2
2026-01-17T23:18:19.390+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 工具收集完成: interceptorTools=2, regularTools=3, total=6
2026-01-17T23:18:19.390+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 设置ModelInterceptors到LlmNode: count=1
2026-01-17T23:18:19.393+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build CodeactAgent构建完成
2026-01-17T23:18:19.393+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=开始罗列已注册的工具
2026-01-17T23:18:19.393+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct阶段工具数量, count=11
2026-01-17T23:18:19.394+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=1, name=unified_search, description=统一搜索工具，可同时搜索项目、知识库、Web等多个数据源
2026-01-17T23:18:19.394+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=2, name=search_knowledge, description=搜索团队知识库，包括FAQ、规范、最佳实践等
2026-01-17T23:18:19.394+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=3, name=send_success_message, description=Send a success message to the IDE console
2026-01-17T23:18:19.394+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=4, name=search_web, description=执行Web搜索，获取公开互联网信息
2026-01-17T23:18:19.394+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=5, name=unsubscribe_trigger, description=取消订阅并删除一个触发器
2026-01-17T23:18:19.394+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=6, name=get_trigger_detail, description=获取指定触发器的详细信息
2026-01-17T23:18:19.394+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=7, name=send_error_message, description=Send an error message to the IDE console
2026-01-17T23:18:19.394+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=8, name=search_project, description=搜索项目上下文信息，包括代码、配置、文档等
2026-01-17T23:18:19.394+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=9, name=send_notification, description=Send a notification message
2026-01-17T23:18:19.394+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=10, name=subscribe_trigger, description=创建并订阅一个新的触发器
2026-01-17T23:18:19.394+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=11, name=list_triggers, description=列出所有触发器
2026-01-17T23:18:19.394+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React阶段工具数量, count=6
2026-01-17T23:18:19.394+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=1, name=write_code, description=Generate and register a new function with specified name and parameters. IMPORTANT: You MUST provide both 'functionName' and 'parameters' fields. Example: write_code(requirement='calculate sum', functionName='calculate_sum', parameters=['a', 'b'])
2026-01-17T23:18:19.394+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=2, name=write_condition_code, description=Generate and register a condition check function for triggers. This function MUST return a boolean value (True/False). Example: write_condition_code(requirement='check if it is a working day', functionName='check_is_working_day', parameters=['date'])
2026-01-17T23:18:19.394+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=3, name=send_success_message, description=Send a success message to the IDE console
2026-01-17T23:18:19.394+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=4, name=send_error_message, description=Send an error message to the IDE console
2026-01-17T23:18:19.394+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=5, name=send_notification, description=Send a notification message
2026-01-17T23:18:19.394+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=6, name=execute_code, description=Execute a previously generated function by its exact name with matching parameters. CRITICAL: The functionName MUST exactly match the name used in write_code. The 'args' parameter names MUST exactly match the 'parameters' specified in write_code. Example: If you called write_code with functionName='calculate_sum' and parameters=['a', 'b'], then you must call execute_code with functionName='calculate_sum' and args={'a': 10, 'b': 20}. Parameter value types supported: String, Number, Boolean, List, Map/Object.
2026-01-17T23:18:19.394+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=工具罗列完成
2026-01-17T23:18:19.394+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgent#<init> 初始化完成: language=PYTHON
2026-01-17T23:18:19.394+08:00  INFO --- [           main] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#<init> 初始化 Agent 加载器
2026-01-17T23:18:19.403+08:00 DEBUG --- [           main] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#<init> Agent 图结构:
@startuml CodeactAgent
skinparam usecaseFontSize 14
skinparam usecaseStereotypeFontSize 12
skinparam hexagonFontSize 14
skinparam hexagonStereotypeFontSize 12
title "CodeactAgent"
footer

powered by spring-ai-alibaba
end footer
circle start<<input>> as __START__
circle stop as __END__
usecase "_AGENT_MODEL_"<<Node>>
usecase "_AGENT_TOOL_"<<Node>>
usecase "_AGENT_HOOK_FastIntentReactHook.before"<<Node>>
usecase "_AGENT_HOOK_UnifiedIntentRecognitionHook.before"<<Node>>
usecase "_AGENT_HOOK_AfterAgentLearningHook.after"<<Node>>
usecase "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"<<Node>>
usecase "_AGENT_HOOK_EvaluationPromptInjectionHook-REACT.beforeModel"<<Node>>
hexagon "check state" as condition1<<Condition>>
hexagon "check state" as condition2<<Condition>>
hexagon "check state" as condition3<<Condition>>
hexagon "check state" as condition4<<Condition>>
"__START__" -down-> "_AGENT_HOOK_FastIntentReactHook.before"
"_AGENT_HOOK_FastIntentReactHook.before" .down.> "condition1"
"condition1" .down.> "_AGENT_TOOL_"
'"_AGENT_HOOK_FastIntentReactHook.before" .down.> "_AGENT_TOOL_"
"condition1" .down.> "_AGENT_HOOK_UnifiedIntentRecognitionHook.before"
'"_AGENT_HOOK_FastIntentReactHook.before" .down.> "_AGENT_HOOK_UnifiedIntentRecognitionHook.before"
"_AGENT_HOOK_UnifiedIntentRecognitionHook.before" .down.> "condition2"
"condition2" .down.> "_AGENT_HOOK_AfterAgentLearningHook.after"
'"_AGENT_HOOK_UnifiedIntentRecognitionHook.before" .down.> "_AGENT_HOOK_AfterAgentLearningHook.after"
"condition2" .down.> "_AGENT_TOOL_"
'"_AGENT_HOOK_UnifiedIntentRecognitionHook.before" .down.> "_AGENT_TOOL_"
"condition2" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
'"_AGENT_HOOK_UnifiedIntentRecognitionHook.before" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
"_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel" -down-> "_AGENT_HOOK_EvaluationPromptInjectionHook-REACT.beforeModel"
"_AGENT_HOOK_EvaluationPromptInjectionHook-REACT.beforeModel" -down-> "_AGENT_MODEL_"
"_AGENT_HOOK_AfterAgentLearningHook.after" -down-> "__END__"
"_AGENT_MODEL_" .down.> "condition3"
"condition3" .down.> "_AGENT_TOOL_"
'"_AGENT_MODEL_" .down.> "_AGENT_TOOL_"
"condition3" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
'"_AGENT_MODEL_" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
"condition3" .down.> "_AGENT_HOOK_AfterAgentLearningHook.after"
'"_AGENT_MODEL_" .down.> "_AGENT_HOOK_AfterAgentLearningHook.after"
"_AGENT_TOOL_" .down.> "condition4"
"condition4" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
'"_AGENT_TOOL_" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
"condition4" .down.> "_AGENT_HOOK_AfterAgentLearningHook.after"
'"_AGENT_TOOL_" .down.> "_AGENT_HOOK_AfterAgentLearningHook.after"
@enduml

2026-01-17T23:18:19.403+08:00  INFO --- [           main] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#<init> 已注册 agent: grayscale_agent
2026-01-17T23:18:19.413+08:00 DEBUG --- [           main] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#listAgents 列出所有 agent
2026-01-17T23:18:19.413+08:00  INFO --- [           main] c.a.c.a.a.s.controller.AgentController   : AgentController initialized with 1 dynamic agents: [grayscale_agent]
2026-01-17T23:18:19.424+08:00  INFO --- [           main] e.e.c.CodeactEvaluationAutoConfiguration : CodeactEvaluationAutoConfiguration#inputRoutingEvaluationHook - reason=创建输入路由评估 Hook
2026-01-17T23:18:19.425+08:00  INFO --- [           main] e.c.ExperienceExtensionAutoConfiguration : ExperienceExtensionAutoConfiguration#codeExperienceModelHook - reason=creating code experience model hook bean
2026-01-17T23:18:19.426+08:00  INFO --- [           main] e.c.ExperienceExtensionAutoConfiguration : ExperienceExtensionAutoConfiguration#reactExperienceAgentHook - reason=creating react experience agent hook bean
2026-01-17T23:18:19.428+08:00  INFO --- [           main] e.c.ExperienceExtensionAutoConfiguration : ExperienceExtensionAutoConfiguration#commonSenseExperienceModelHook - reason=creating common sense prompt model hook bean
2026-01-17T23:18:19.429+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchFacade - reason=creating search facade with 3 providers
2026-01-17T23:18:19.430+08:00  INFO --- [           main] c.a.a.a.e.s.i.DefaultSearchFacade        : DefaultSearchFacade#init - reason=initialized with 3 providers
2026-01-17T23:18:19.431+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=开始创建Search工具
2026-01-17T23:18:19.432+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockBaiduWebSearchProvider, toolName=search_web
2026-01-17T23:18:19.433+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockKnowledgeStoreSearchProvider, toolName=search_knowledge
2026-01-17T23:18:19.434+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockProjectContextSearchProvider, toolName=search_project
2026-01-17T23:18:19.434+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=搜索工具创建完成, totalCount=3
2026-01-17T23:18:19.434+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=Search工具创建完成, count=3
2026-01-17T23:18:19.434+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=创建Search工具, index=1, name=search_web, description=执行Web搜索，获取公开互联网信息
2026-01-17T23:18:19.434+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=创建Search工具, index=2, name=search_knowledge, description=搜索团队知识库，包括FAQ、规范、最佳实践等
2026-01-17T23:18:19.434+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=创建Search工具, index=3, name=search_project, description=搜索项目上下文信息，包括代码、配置、文档等
2026-01-17T23:18:19.438+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#diagnostics - reason=ElasticsearchClient bean found
2026-01-17T23:18:19.438+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#diagnostics - reason=EmbeddingModel bean found
2026-01-17T23:18:19.440+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#diagnostics - Planning module status:
2026-01-17T23:18:19.440+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration :   - ActionRepository: MybatisPlusActionRepository
2026-01-17T23:18:19.440+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration :   - ActionProvider: SemanticActionProvider
2026-01-17T23:18:19.440+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration :   - PlanGenerator: DefaultPlanGenerator
2026-01-17T23:18:19.440+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration :   - PlanExecutor: DefaultPlanExecutor
2026-01-17T23:18:19.443+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#planningCodeactTools - reason=creating planning tools list
2026-01-17T23:18:19.443+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#planningCodeactTools - reason=created planning tools, count=4
2026-01-17T23:18:19.666+08:00  INFO --- [           main] c.a.a.a.c.c.CodeactCoreAutoConfiguration : CodeactCoreAutoConfiguration#returnSchemaRegistry - reason=创建ReturnSchemaRegistry单例Bean
2026-01-17T23:18:19.666+08:00  INFO --- [           main] .a.a.a.c.t.s.DefaultReturnSchemaRegistry : DefaultReturnSchemaRegistry#<init> - reason=创建新实例, hashCode=921270604
2026-01-17T23:18:19.995+08:00  WARN --- [           main] o.s.m.p.s.SyncMcpSamplingProvider        : No sampling methods found
2026-01-17T23:18:19.995+08:00  WARN --- [           main] o.s.m.p.e.SyncMcpElicitationProvider     : No elicitation methods found
2026-01-17T23:18:20.018+08:00  INFO --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2026-01-17T23:18:20.030+08:00  INFO --- [           main] c.a.a.a.start.AssistantAgentApplication  : Started AssistantAgentApplication in 5.621 seconds (process running for 6.169)
2026-01-17T23:18:20.034+08:00  INFO --- [           main] c.a.a.a.s.config.DemoExperienceConfig    : DemoExperienceConfig#run - reason=Initializing Demo Experiences
2026-01-17T23:18:20.034+08:00  INFO --- [           main] c.a.a.a.s.config.DemoExperienceConfig    : DemoExperienceConfig#run - reason=Demo Experiences initialization completed
2026-01-17T23:18:20.034+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#run - reason=Starting experience module validation
2026-01-17T23:18:20.088+08:00 DEBUG --- [           main] .p.e.r.ElasticsearchExperienceRepository : ElasticsearchExperienceRepository#count - reason=count completed, count=0
2026-01-17T23:18:20.114+08:00 DEBUG --- [           main] .p.e.r.ElasticsearchExperienceRepository : ElasticsearchExperienceRepository#countByTypeAndScope - reason=count completed, type=CODE, scope=null, count=0
2026-01-17T23:18:20.124+08:00 DEBUG --- [           main] .p.e.r.ElasticsearchExperienceRepository : ElasticsearchExperienceRepository#countByTypeAndScope - reason=count completed, type=REACT, scope=null, count=0
2026-01-17T23:18:20.133+08:00 DEBUG --- [           main] .p.e.r.ElasticsearchExperienceRepository : ElasticsearchExperienceRepository#countByTypeAndScope - reason=count completed, type=COMMON, scope=null, count=0
2026-01-17T23:18:20.133+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testExperienceCount - reason=Experience stats: total=0, code=0, react=0, common=0
2026-01-17T23:18:20.133+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCommonExperienceQuery - reason=Testing common experience query
2026-01-17T23:18:20.255+08:00 DEBUG --- [           main] .s.p.e.p.ElasticsearchExperienceProvider : ElasticsearchExperienceProvider#query - reason=query completed, type=COMMON, text=null, count=0
2026-01-17T23:18:20.255+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCommonExperienceQuery - reason=Found 0 common experiences
2026-01-17T23:18:20.255+08:00  WARN --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCommonExperienceQuery - reason=❌ MoLiHong identity experience not found
2026-01-17T23:18:20.255+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCodeExperienceQuery - reason=Testing code experience query (demo keyword)
2026-01-17T23:18:20.268+08:00 DEBUG --- [           main] .s.p.e.p.ElasticsearchExperienceProvider : ElasticsearchExperienceProvider#query - reason=query completed, type=CODE, text=null, count=0
2026-01-17T23:18:20.269+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCodeExperienceQuery - reason=Found 0 demo code experiences
2026-01-17T23:18:20.269+08:00  WARN --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCodeExperienceQuery - reason=❌ Demo code experience not found
2026-01-17T23:18:20.270+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testReactExperienceQuery - reason=Testing react experience query
2026-01-17T23:18:20.278+08:00 DEBUG --- [           main] .s.p.e.p.ElasticsearchExperienceProvider : ElasticsearchExperienceProvider#query - reason=query completed, type=REACT, text=null, count=0
2026-01-17T23:18:20.279+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testReactExperienceQuery - reason=Found 0 react experiences
2026-01-17T23:18:20.279+08:00  WARN --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testReactExperienceQuery - reason=❌ Ambiguous intent strategy not found
2026-01-17T23:18:20.279+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#run - reason=Experience module validation completed
2026-01-17T23:18:49.742+08:00  INFO --- [nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-01-17T23:18:49.742+08:00  INFO --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2026-01-17T23:18:49.747+08:00  INFO --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 5 ms
2026-01-17T23:21:26.115+08:00  INFO --- [           main] c.a.a.a.start.AssistantAgentApplication  : Starting AssistantAgentApplication using Java 21.0.9 with PID 24208 (D:\devfive\AssistantAgent\assistant-agent-start\target\classes started by zhou_ in D:\devfive\AssistantAgent\assistant-agent-start)
2026-01-17T23:21:26.116+08:00 DEBUG --- [           main] c.a.a.a.start.AssistantAgentApplication  : Running with Spring Boot v3.4.8, Spring v6.2.9
2026-01-17T23:21:26.117+08:00  INFO --- [           main] c.a.a.a.start.AssistantAgentApplication  : No active profile set, falling back to 1 default profile: "default"
2026-01-17T23:21:27.693+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Elasticsearch repositories in DEFAULT mode.
2026-01-17T23:21:27.727+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 25 ms. Found 0 Elasticsearch repository interfaces.
2026-01-17T23:21:27.735+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Reactive Elasticsearch repositories in DEFAULT mode.
2026-01-17T23:21:27.743+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 6 ms. Found 0 Reactive Elasticsearch repository interfaces.
2026-01-17T23:21:29.241+08:00  INFO --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2026-01-17T23:21:29.269+08:00  INFO --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2026-01-17T23:21:29.270+08:00  INFO --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.43]
2026-01-17T23:21:29.402+08:00  INFO --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2026-01-17T23:21:29.403+08:00  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 3232 ms
2026-01-17T23:21:29.502+08:00  INFO --- [           main] e.l.c.LearningExtensionAutoConfiguration : LearningExtensionAutoConfiguration#constructor - reason=learning extension auto-configuration initialized
2026-01-17T23:21:29.523+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#init - reason=search extension framework is enabled
2026-01-17T23:21:29.525+08:00  INFO --- [           main] c.a.a.a.s.s.MockBaiduWebSearchProvider   : MockBaiduWebSearchProvider#init - reason=使用简单模式初始化
2026-01-17T23:21:29.529+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#unifiedSearchCodeactTool - reason=创建统一搜索工具, providerCount=3
2026-01-17T23:21:29.593+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#init - reason=planning extension is enabled
2026-01-17T23:21:29.594+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#init - reason=ES configuration class loaded (elasticsearch.enabled=true)
2026-01-17T23:21:29.596+08:00  INFO --- [           main] toConfiguration$MybatisPlusConfiguration : MybatisPlusConfiguration#init - reason=MySQL configuration class loaded (mysql.enabled=true, MyBatisPlus present)
2026-01-17T23:21:29.957+08:00  INFO --- [           main] toConfiguration$MybatisPlusConfiguration : MybatisPlusConfiguration#actionEntityConverter - reason=creating entity converter
2026-01-17T23:21:29.957+08:00  INFO --- [           main] toConfiguration$MybatisPlusConfiguration : MybatisPlusConfiguration#mybatisPlusActionRepository - reason=ActionRegistryMapper found, creating MySQL repository
2026-01-17T23:21:30.398+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#actionVectorizationService - reason=creating ES vectorization service
2026-01-17T23:21:30.471+08:00  INFO --- [           main] c.a.a.a.p.v.ActionVectorizationService   : ActionVectorizationService#init - reason=ES index initialized on startup
2026-01-17T23:21:30.488+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#semanticActionProvider - reason=creating semantic action provider, semanticWeight=0.6, keywordWeight=0.4, matchThreshold=0.5
2026-01-17T23:21:30.491+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#defaultPlanGenerator - reason=creating default plan generator
2026-01-17T23:21:30.494+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#planActionCodeactTool - reason=creating plan_action tool
2026-01-17T23:21:30.497+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#queryStepExecutor - reason=creating query step executor
2026-01-17T23:21:30.499+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#inputStepExecutor - reason=creating input step executor
2026-01-17T23:21:30.500+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#executeStepExecutor - reason=creating execute step executor
2026-01-17T23:21:30.502+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#apiCallStepExecutor - reason=creating api call step executor
2026-01-17T23:21:30.507+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#validationStepExecutor - reason=creating validation step executor
2026-01-17T23:21:30.508+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#stepExecutorRegistry - reason=creating executor registry, executorCount=5
2026-01-17T23:21:30.510+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=QUERY, executorClass=QueryStepExecutor
2026-01-17T23:21:30.511+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=INPUT, executorClass=InputStepExecutor
2026-01-17T23:21:30.511+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=EXECUTE, executorClass=ExecuteStepExecutor
2026-01-17T23:21:30.511+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=API_CALL, executorClass=ApiCallStepExecutor
2026-01-17T23:21:30.511+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=VALIDATION, executorClass=ValidationStepExecutor
2026-01-17T23:21:30.512+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#defaultPlanExecutor - reason=creating default plan executor
2026-01-17T23:21:30.513+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#executeActionCodeactTool - reason=creating execute_action tool
2026-01-17T23:21:30.514+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#listActionsCodeactTool - reason=creating list_actions tool
2026-01-17T23:21:30.515+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#getActionDetailsCodeactTool - reason=creating get_action_details tool
2026-01-17T23:21:30.580+08:00  INFO --- [           main] e.l.c.LearningExtensionAutoConfiguration : LearningExtensionAutoConfiguration#experienceLearningExtractor - reason=creating LLM-based experience learning extractor
2026-01-17T23:21:30.580+08:00  INFO --- [           main] .a.a.a.e.l.e.ExperienceLearningExtractor : ExperienceLearningExtractor#constructor - reason=LLM-based extractor initialized
2026-01-17T23:21:30.580+08:00  INFO --- [           main] e.l.c.LearningExtensionAutoConfiguration : LearningExtensionAutoConfiguration#inMemoryLearningRepository - reason=creating in-memory learning repository
2026-01-17T23:21:30.587+08:00  INFO --- [           main] c.a.a.a.start.config.PersistenceConfig   : PersistenceConfig#init - reason=persistence configuration loaded
2026-01-17T23:21:30.590+08:00  INFO --- [           main] c.a.a.a.start.config.PersistenceConfig   : PersistenceConfig#elasticsearchExperienceRepository - reason=creating Elasticsearch experience repository (PRIMARY), indexName=experiences
2026-01-17T23:21:30.596+08:00  INFO --- [           main] e.l.c.LearningExtensionAutoConfiguration : LearningExtensionAutoConfiguration#experienceLearningRepository - reason=creating experience learning repository
2026-01-17T23:21:30.601+08:00  INFO --- [           main] e.l.c.LearningExtensionAutoConfiguration : LearningExtensionAutoConfiguration#learningStrategy - reason=creating learning strategy, asyncEnabled=true
2026-01-17T23:21:30.606+08:00  INFO --- [           main] e.l.c.LearningExtensionAutoConfiguration : LearningExtensionAutoConfiguration#asyncLearningHandler - reason=creating async learning handler, threadPoolSize=2, queueCapacity=100
2026-01-17T23:21:30.606+08:00  INFO --- [           main] c.a.a.a.e.l.i.AsyncLearningHandler       : AsyncLearningHandler#constructor - reason=async learning handler initialized, threadPoolSize=2, queueCapacity=100
2026-01-17T23:21:30.606+08:00  INFO --- [           main] e.l.c.LearningExtensionAutoConfiguration : LearningExtensionAutoConfiguration#learningExecutor - reason=creating learning executor, extractorCount=1, repositoryCount=2
2026-01-17T23:21:30.606+08:00  INFO --- [           main] e.l.c.LearningExtensionAutoConfiguration : LearningExtensionAutoConfiguration#afterAgentLearningHook - reason=creating after agent learning hook, learningType=experience
2026-01-17T23:21:30.613+08:00  INFO --- [           main] c.a.a.a.start.config.PersistenceConfig   : PersistenceConfig#elasticsearchExperienceProvider - reason=creating Elasticsearch experience provider (PRIMARY), indexName=experiences
2026-01-17T23:21:30.616+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#<init> - reason=初始化默认评估套件配置, experienceProviderAvailable=true
2026-01-17T23:21:30.619+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#evaluatorRegistry - reason=创建 EvaluatorRegistry Bean
2026-01-17T23:21:30.620+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'llm-based' of type LLMBasedEvaluator
2026-01-17T23:21:30.622+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'passthrough' of type RuleBasedEvaluator
2026-01-17T23:21:30.622+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'react_experience_evaluator' of type RuleBasedEvaluator
2026-01-17T23:21:30.622+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createDefaultEvaluatorRegistry - reason=注册 React 阶段经验检索评估器
2026-01-17T23:21:30.622+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'codeact_experience_evaluator' of type RuleBasedEvaluator
2026-01-17T23:21:30.622+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createDefaultEvaluatorRegistry - reason=注册 CodeAct 阶段经验检索评估器
2026-01-17T23:21:30.624+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#evaluationService - reason=创建默认 EvaluationService, sharedRegistryEvaluators=[llm-based, passthrough, codeact_experience_evaluator, react_experience_evaluator]
2026-01-17T23:21:30.624+08:00 DEBUG --- [           main] c.a.a.a.e.e.GraphBasedEvaluationExecutor : Created default ExecutorService for batch processing
2026-01-17T23:21:30.626+08:00  INFO --- [           main] .c.ExperienceEvaluationCriterionProvider : ExperienceEvaluationCriterionProvider#<init> - reason=初始化经验评估 Criterion 提供者
2026-01-17T23:21:30.627+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#structuredParamExtractor - reason=creating structured param extractor
2026-01-17T23:21:30.637+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#parameterValidator - reason=creating parameter validator
2026-01-17T23:21:30.637+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#restTemplate - reason=creating RestTemplate bean
2026-01-17T23:21:30.642+08:00  INFO --- [           main] c.a.a.a.planning.executor.HttpExecutor   : HttpExecutor#init - initialized
2026-01-17T23:21:30.642+08:00  INFO --- [           main] c.a.a.a.p.executor.InternalExecutor      : InternalExecutor#init - initialized
2026-01-17T23:21:30.642+08:00  INFO --- [           main] c.a.a.a.p.e.ActionExecutorFactory        : ActionExecutorFactory#init - initialized executors: INTERNAL(InternalExecutor), HTTP(HttpExecutor), DATA_AGENT(DataAgentExecutor), MCP(McpExecutor)
2026-01-17T23:21:30.647+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#sessionProvider - reason=creating in-memory session provider
2026-01-17T23:21:30.652+08:00  INFO --- [           main] c.a.a.a.p.s.InMemorySessionProvider      : InMemorySessionProvider#init - initialized
2026-01-17T23:21:30.654+08:00  INFO --- [           main] c.a.a.a.p.s.ParamCollectionService       : ParamCollectionService#init - sessionProvider=InMemory
2026-01-17T23:21:30.654+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'action_intent_evaluator' of type ActionIntentEvaluator
2026-01-17T23:21:30.657+08:00  INFO --- [           main] p.i.PlanningIntegrationAutoConfiguration : PlanningIntegrationAutoConfiguration#actionIntentEvaluator - initialized and registered, paramCollection=true, llmVerification=true, maxCandidates=5
2026-01-17T23:21:30.657+08:00  INFO --- [           main] .p.i.PlanningEvaluationCriterionProvider : PlanningEvaluationCriterionProvider#init - initialized, llmVerificationEnabled=true
2026-01-17T23:21:30.657+08:00  INFO --- [           main] p.i.PlanningIntegrationAutoConfiguration : PlanningIntegrationAutoConfiguration#planningEvaluationCriterionProvider - registered planning evaluation criterion provider
2026-01-17T23:21:30.658+08:00  INFO --- [           main] .c.ExperienceEvaluationCriterionProvider : ExperienceEvaluationCriterionProvider#getReactPhaseCriteria - reason=提供 React 阶段评估 Criteria
2026-01-17T23:21:30.658+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createReactPhaseSuite - reason=添加自定义 Criterion, provider=ExperienceEvaluationCriterionProvider, count=3
2026-01-17T23:21:30.658+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createReactPhaseSuite - reason=添加自定义 Criterion, provider=PlanningEvaluationCriterionProvider, count=2
2026-01-17T23:21:30.661+08:00  INFO --- [           main] a.a.e.a.BatchAggregationStrategyRegistry : Registered batch aggregation strategy: ANY_TRUE
2026-01-17T23:21:30.661+08:00  INFO --- [           main] a.a.e.a.BatchAggregationStrategyRegistry : Registered batch aggregation strategy: ALL_TRUE
2026-01-17T23:21:30.688+08:00  INFO --- [           main] c.a.c.a.g.internal.node.ParallelNode     : Calculated core pool size: 32 (CPU cores: 16)
2026-01-17T23:21:30.688+08:00  INFO --- [           main] c.a.c.a.g.internal.node.ParallelNode     : Calculated maximum pool size: 64 (CPU cores: 16)
2026-01-17T23:21:30.688+08:00  INFO --- [           main] c.a.c.a.g.internal.node.ParallelNode     : Calculated queue capacity: 1000
2026-01-17T23:21:30.688+08:00  INFO --- [           main] c.a.a.a.e.DefaultEvaluationService       : Registered evaluation suite: react-phase-suite
2026-01-17T23:21:30.688+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#evaluationService - reason=注册 React Phase Suite, suiteId=react-phase-suite
2026-01-17T23:21:30.688+08:00  INFO --- [           main] .c.ExperienceEvaluationCriterionProvider : ExperienceEvaluationCriterionProvider#getCodeActPhaseCriteria - reason=提供 CodeAct 阶段评估 Criteria
2026-01-17T23:21:30.688+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createCodeActPhaseSuite - reason=添加自定义 Criterion, provider=ExperienceEvaluationCriterionProvider, count=3
2026-01-17T23:21:30.688+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createCodeActPhaseSuite - reason=添加自定义 Criterion, provider=PlanningEvaluationCriterionProvider, count=2
2026-01-17T23:21:30.688+08:00  INFO --- [           main] a.a.e.a.BatchAggregationStrategyRegistry : Registered batch aggregation strategy: ANY_TRUE
2026-01-17T23:21:30.688+08:00  INFO --- [           main] a.a.e.a.BatchAggregationStrategyRegistry : Registered batch aggregation strategy: ALL_TRUE
2026-01-17T23:21:30.691+08:00  INFO --- [           main] c.a.a.a.e.DefaultEvaluationService       : Registered evaluation suite: codeact-phase-suite
2026-01-17T23:21:30.691+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#evaluationService - reason=注册 CodeAct Phase Suite, suiteId=codeact-phase-suite
2026-01-17T23:21:30.693+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#codeactEvaluationContextFactory - reason=创建 EvaluationContextFactory
2026-01-17T23:21:30.695+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#codeactEvaluationResultAttacher - reason=创建 EvaluationResultAttacher
2026-01-17T23:21:30.698+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#reactPhaseEvaluationHooks - reason=创建 React Phase ModelInputEvaluationHook
2026-01-17T23:21:30.698+08:00  INFO --- [           main] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#<init> - reason=初始化, phase=REACT, providerCount=1
2026-01-17T23:21:30.701+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#reactPhaseEvaluationHooks - reason=创建 React Phase EvaluationPromptInjectionHook, providersCount=2
2026-01-17T23:21:30.701+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#codeactPhaseEvaluationHooks - reason=创建 CodeAct Phase ModelInputEvaluationHook
2026-01-17T23:21:30.701+08:00  INFO --- [           main] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#<init> - reason=初始化, phase=CODEACT, providerCount=1
2026-01-17T23:21:30.701+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#codeactPhaseEvaluationHooks - reason=创建 CodeAct Phase EvaluationPromptInjectionHook, providersCount=2
2026-01-17T23:21:30.703+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#keywordMatcher - reason=creating keyword matcher
2026-01-17T23:21:30.705+08:00  INFO --- [           main] iguration$UnifiedIntentHookConfiguration : UnifiedIntentHookConfiguration#unifiedIntentRecognitionHook - reason=creating unified intent hook, experienceProviderPresent=true, directExecuteThreshold=0.95, hintThreshold=0.5
2026-01-17T23:21:30.802+08:00  INFO --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2026-01-17T23:21:31.008+08:00  INFO --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@346a2799
2026-01-17T23:21:31.014+08:00  INFO --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2026-01-17T23:21:31.187+08:00 DEBUG --- [           main] c.a.a.a.planning.intent.KeywordMatcher   : KeywordMatcher#registerAction - actionId=erp:product-unit:create, keywords=18
2026-01-17T23:21:31.187+08:00  INFO --- [           main] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#initKeywordMatcher - reason=initialized, actionCount=1, keywordIndexSize=18
2026-01-17T23:21:31.192+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#init - reason=reply module enabled
2026-01-17T23:21:31.192+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactToolFactory - reason=创建CodeactTool工厂, channels=1
2026-01-17T23:21:31.192+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#init - reason=工厂初始化完成, channels=1
2026-01-17T23:21:31.203+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=开始创建Reply工具
2026-01-17T23:21:31.207+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#createTools - reason=创建工具成功, toolName=send_success_message, channelCode=IDE_TEXT
2026-01-17T23:21:31.207+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#createTools - reason=创建工具成功, toolName=send_error_message, channelCode=IDE_TEXT
2026-01-17T23:21:31.207+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#createTools - reason=创建工具成功, toolName=send_notification, channelCode=IDE_TEXT
2026-01-17T23:21:31.207+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#createTools - reason=工具创建完成, totalCount=3
2026-01-17T23:21:31.207+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=Reply工具创建完成, count=3
2026-01-17T23:21:31.207+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=创建Reply工具, index=1, name=send_success_message, description=Send a success message to the IDE console
2026-01-17T23:21:31.207+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=创建Reply工具, index=2, name=send_error_message, description=Send an error message to the IDE console
2026-01-17T23:21:31.207+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=创建Reply工具, index=3, name=send_notification, description=Send a notification message
2026-01-17T23:21:31.207+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactToolFactory - reason=创建SearchCodeactTool工厂, providerCount=3
2026-01-17T23:21:31.230+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactToolFactory - reason=创建TriggerCodeactTool工厂
2026-01-17T23:21:31.230+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=开始创建Trigger工具
2026-01-17T23:21:31.232+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=创建SubscribeTriggerCodeactTool成功
2026-01-17T23:21:31.232+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=创建UnsubscribeTriggerCodeactTool成功
2026-01-17T23:21:31.234+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=创建ListTriggersCodeactTool成功
2026-01-17T23:21:31.235+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=创建GetTriggerDetailCodeactTool成功
2026-01-17T23:21:31.236+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=触发器工具创建完成, count=4
2026-01-17T23:21:31.236+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=Trigger工具创建完成, count=4
2026-01-17T23:21:31.236+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=创建Trigger工具, index=1, name=subscribe_trigger, description=创建并订阅一个新的触发器
2026-01-17T23:21:31.236+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=创建Trigger工具, index=2, name=unsubscribe_trigger, description=取消订阅并删除一个触发器
2026-01-17T23:21:31.236+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=创建Trigger工具, index=3, name=list_triggers, description=列出所有触发器
2026-01-17T23:21:31.236+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=创建Trigger工具, index=4, name=get_trigger_detail, description=获取指定触发器的详细信息
2026-01-17T23:21:31.248+08:00  INFO --- [           main] e.c.ExperienceExtensionAutoConfiguration : ExperienceExtensionAutoConfiguration#fastIntentService - reason=creating FastIntentService, extraMatchers=0
2026-01-17T23:21:31.252+08:00  INFO --- [           main] e.c.ExperienceExtensionAutoConfiguration : ExperienceExtensionAutoConfiguration#fastIntentReactHook - reason=creating fast intent react hook bean
2026-01-17T23:21:31.257+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=创建 CodeactAgent
2026-01-17T23:21:31.257+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=配置 MemorySaver 以支持多轮对话上下文保持
2026-01-17T23:21:31.257+08:00  WARN --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=临时禁用 streaming 模式以排查循环问题
2026-01-17T23:21:31.257+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加UnifiedSearchCodeactTool
2026-01-17T23:21:31.260+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockBaiduWebSearchProvider, toolName=search_web
2026-01-17T23:21:31.261+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockKnowledgeStoreSearchProvider, toolName=search_knowledge
2026-01-17T23:21:31.263+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockProjectContextSearchProvider, toolName=search_project
2026-01-17T23:21:31.263+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=搜索工具创建完成, totalCount=3
2026-01-17T23:21:31.263+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加SearchCodeactTools, count=3
2026-01-17T23:21:31.263+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加ReplyCodeactTools, count=3
2026-01-17T23:21:31.263+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加TriggerCodeactTools, count=4
2026-01-17T23:21:31.263+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#createMcpDynamicTools - reason=Creating MCP dynamic tools
2026-01-17T23:21:31.266+08:00  INFO --- [           main] c.a.a.a.e.d.mcp.McpDynamicToolFactory    : McpDynamicToolFactory#createTools - reason=开始创建MCP动态工具
2026-01-17T23:21:31.269+08:00  INFO --- [           main] c.a.a.a.e.d.mcp.McpDynamicToolFactory    : McpDynamicToolFactory#createTools - reason=无可用的MCP工具
2026-01-17T23:21:31.269+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#createMcpDynamicTools - reason=MCP dynamic tools created, count=0
2026-01-17T23:21:31.269+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=Added MCP dynamic tools, count=0
2026-01-17T23:21:31.269+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#createHttpDynamicTools - reason=HTTP dynamic tools disabled by default
2026-01-17T23:21:31.269+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=合并后CodeactTool总数, count=11
2026-01-17T23:21:31.269+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=React阶段使用内置工具(write_code, execute_code, write_condition_code)
2026-01-17T23:21:31.269+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=注入 React Phase 评估 Hooks, count=2
2026-01-17T23:21:31.269+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=注入 CodeAct Phase 评估 Hooks, count=2
2026-01-17T23:21:31.269+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=已准备注入AfterAgentLearningHook
2026-01-17T23:21:31.269+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=已准备注入FastIntentReactHook
2026-01-17T23:21:31.269+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=已准备注入UnifiedIntentRecognitionHook
2026-01-17T23:21:31.272+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 开始构建CodeactAgent
2026-01-17T23:21:31.272+08:00  INFO --- [           main] .a.a.a.c.t.s.DefaultReturnSchemaRegistry : DefaultReturnSchemaRegistry#<init> - reason=创建新实例, hashCode=221971351
2026-01-17T23:21:31.277+08:00 DEBUG --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#<init> - reason=创建注册表, returnSchemaRegistry=DefaultReturnSchemaRegistry
2026-01-17T23:21:31.277+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=创建默认CodeactToolRegistry
2026-01-17T23:21:31.277+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=开始注册CodeactTool, count=11
2026-01-17T23:21:31.277+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=unified_search
2026-01-17T23:21:31.277+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=unified_search
2026-01-17T23:21:31.277+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=search_web
2026-01-17T23:21:31.277+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=search_web
2026-01-17T23:21:31.277+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=search_knowledge
2026-01-17T23:21:31.277+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=search_knowledge
2026-01-17T23:21:31.277+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=search_project
2026-01-17T23:21:31.277+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=search_project
2026-01-17T23:21:31.277+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=send_success_message
2026-01-17T23:21:31.277+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=send_success_message
2026-01-17T23:21:31.277+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=send_error_message
2026-01-17T23:21:31.277+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=send_error_message
2026-01-17T23:21:31.277+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=send_notification
2026-01-17T23:21:31.277+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=send_notification
2026-01-17T23:21:31.277+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=subscribe_trigger
2026-01-17T23:21:31.277+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=subscribe_trigger
2026-01-17T23:21:31.277+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=unsubscribe_trigger
2026-01-17T23:21:31.277+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=unsubscribe_trigger
2026-01-17T23:21:31.277+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=list_triggers
2026-01-17T23:21:31.277+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=list_triggers
2026-01-17T23:21:31.277+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=get_trigger_detail
2026-01-17T23:21:31.277+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=get_trigger_detail
2026-01-17T23:21:31.277+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册完成, count=11
2026-01-17T23:21:31.277+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 创建默认CodeContext: language=PYTHON
2026-01-17T23:21:31.279+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 创建默认RuntimeEnvironmentManager: language=PYTHON
2026-01-17T23:21:31.281+08:00 DEBUG --- [           main] c.a.a.a.c.e.bridge.AgentToolBridge       : AgentToolBridge#<init> 初始化: 注册了0个工具
2026-01-17T23:21:31.282+08:00 DEBUG --- [           main] c.a.a.a.c.executor.bridge.StateBridge    : StateBridge#<init> 初始化完成
2026-01-17T23:21:31.282+08:00  INFO --- [           main] c.a.a.a.core.executor.GraalCodeExecutor  : GraalCodeExecutor#<init> 初始化完成: language=PYTHON, allowIO=false, timeout=30000ms, executableTools=true, customBridgeFactory=false
2026-01-17T23:21:31.282+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#createCodeactSubAgentInterceptor 创建子Agent拦截器
2026-01-17T23:21:31.286+08:00  INFO --- [           main] c.a.a.a.a.subagent.CodeactSubAgent       : CodeactSubAgent#<init> 初始化: name=code-generator
2026-01-17T23:21:31.286+08:00  INFO --- [           main] c.a.a.a.a.subagent.CodeactSubAgent       : CodeactSubAgent#<init> 初始化: name=condition-code-generator
2026-01-17T23:21:31.286+08:00  INFO --- [           main] c.a.a.a.a.s.CodeactSubAgentInterceptor   : CodeactSubAgentInterceptor#<init> 创建默认代码生成子Agent
2026-01-17T23:21:31.435+08:00  INFO --- [           main] c.a.a.a.a.s.CodeactSubAgentInterceptor   : CodeactSubAgentInterceptor#<init> 初始化完成: subAgentCount=2
2026-01-17T23:21:31.437+08:00  INFO --- [           main] c.a.a.a.a.tools.ExecuteCodeTool          : ExecuteCodeTool#<init> 初始化完成
2026-01-17T23:21:31.437+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 拦截器分类完成: modelInterceptors=1, toolInterceptors=0
2026-01-17T23:21:31.437+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 从拦截器提取工具: interceptor=CodeactSubAgent, toolCount=2
2026-01-17T23:21:31.449+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 工具收集完成: interceptorTools=2, regularTools=3, total=6
2026-01-17T23:21:31.449+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 设置ModelInterceptors到LlmNode: count=1
2026-01-17T23:21:31.451+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build CodeactAgent构建完成
2026-01-17T23:21:31.451+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=开始罗列已注册的工具
2026-01-17T23:21:31.451+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct阶段工具数量, count=11
2026-01-17T23:21:31.451+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=1, name=unified_search, description=统一搜索工具，可同时搜索项目、知识库、Web等多个数据源
2026-01-17T23:21:31.451+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=2, name=search_knowledge, description=搜索团队知识库，包括FAQ、规范、最佳实践等
2026-01-17T23:21:31.451+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=3, name=send_success_message, description=Send a success message to the IDE console
2026-01-17T23:21:31.451+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=4, name=search_web, description=执行Web搜索，获取公开互联网信息
2026-01-17T23:21:31.451+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=5, name=unsubscribe_trigger, description=取消订阅并删除一个触发器
2026-01-17T23:21:31.451+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=6, name=get_trigger_detail, description=获取指定触发器的详细信息
2026-01-17T23:21:31.451+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=7, name=send_error_message, description=Send an error message to the IDE console
2026-01-17T23:21:31.451+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=8, name=search_project, description=搜索项目上下文信息，包括代码、配置、文档等
2026-01-17T23:21:31.451+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=9, name=send_notification, description=Send a notification message
2026-01-17T23:21:31.451+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=10, name=subscribe_trigger, description=创建并订阅一个新的触发器
2026-01-17T23:21:31.451+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=11, name=list_triggers, description=列出所有触发器
2026-01-17T23:21:31.451+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React阶段工具数量, count=6
2026-01-17T23:21:31.451+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=1, name=write_code, description=Generate and register a new function with specified name and parameters. IMPORTANT: You MUST provide both 'functionName' and 'parameters' fields. Example: write_code(requirement='calculate sum', functionName='calculate_sum', parameters=['a', 'b'])
2026-01-17T23:21:31.451+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=2, name=write_condition_code, description=Generate and register a condition check function for triggers. This function MUST return a boolean value (True/False). Example: write_condition_code(requirement='check if it is a working day', functionName='check_is_working_day', parameters=['date'])
2026-01-17T23:21:31.451+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=3, name=send_success_message, description=Send a success message to the IDE console
2026-01-17T23:21:31.451+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=4, name=send_error_message, description=Send an error message to the IDE console
2026-01-17T23:21:31.451+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=5, name=send_notification, description=Send a notification message
2026-01-17T23:21:31.451+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=6, name=execute_code, description=Execute a previously generated function by its exact name with matching parameters. CRITICAL: The functionName MUST exactly match the name used in write_code. The 'args' parameter names MUST exactly match the 'parameters' specified in write_code. Example: If you called write_code with functionName='calculate_sum' and parameters=['a', 'b'], then you must call execute_code with functionName='calculate_sum' and args={'a': 10, 'b': 20}. Parameter value types supported: String, Number, Boolean, List, Map/Object.
2026-01-17T23:21:31.451+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=工具罗列完成
2026-01-17T23:21:31.452+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgent#<init> 初始化完成: language=PYTHON
2026-01-17T23:21:31.454+08:00  INFO --- [           main] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#<init> 初始化 Agent 加载器
2026-01-17T23:21:31.463+08:00 DEBUG --- [           main] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#<init> Agent 图结构:
@startuml CodeactAgent
skinparam usecaseFontSize 14
skinparam usecaseStereotypeFontSize 12
skinparam hexagonFontSize 14
skinparam hexagonStereotypeFontSize 12
title "CodeactAgent"
footer

powered by spring-ai-alibaba
end footer
circle start<<input>> as __START__
circle stop as __END__
usecase "_AGENT_MODEL_"<<Node>>
usecase "_AGENT_TOOL_"<<Node>>
usecase "_AGENT_HOOK_FastIntentReactHook.before"<<Node>>
usecase "_AGENT_HOOK_UnifiedIntentRecognitionHook.before"<<Node>>
usecase "_AGENT_HOOK_AfterAgentLearningHook.after"<<Node>>
usecase "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"<<Node>>
usecase "_AGENT_HOOK_EvaluationPromptInjectionHook-REACT.beforeModel"<<Node>>
hexagon "check state" as condition1<<Condition>>
hexagon "check state" as condition2<<Condition>>
hexagon "check state" as condition3<<Condition>>
hexagon "check state" as condition4<<Condition>>
"__START__" -down-> "_AGENT_HOOK_FastIntentReactHook.before"
"_AGENT_HOOK_FastIntentReactHook.before" .down.> "condition1"
"condition1" .down.> "_AGENT_TOOL_"
'"_AGENT_HOOK_FastIntentReactHook.before" .down.> "_AGENT_TOOL_"
"condition1" .down.> "_AGENT_HOOK_UnifiedIntentRecognitionHook.before"
'"_AGENT_HOOK_FastIntentReactHook.before" .down.> "_AGENT_HOOK_UnifiedIntentRecognitionHook.before"
"_AGENT_HOOK_UnifiedIntentRecognitionHook.before" .down.> "condition2"
"condition2" .down.> "_AGENT_HOOK_AfterAgentLearningHook.after"
'"_AGENT_HOOK_UnifiedIntentRecognitionHook.before" .down.> "_AGENT_HOOK_AfterAgentLearningHook.after"
"condition2" .down.> "_AGENT_TOOL_"
'"_AGENT_HOOK_UnifiedIntentRecognitionHook.before" .down.> "_AGENT_TOOL_"
"condition2" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
'"_AGENT_HOOK_UnifiedIntentRecognitionHook.before" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
"_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel" -down-> "_AGENT_HOOK_EvaluationPromptInjectionHook-REACT.beforeModel"
"_AGENT_HOOK_EvaluationPromptInjectionHook-REACT.beforeModel" -down-> "_AGENT_MODEL_"
"_AGENT_HOOK_AfterAgentLearningHook.after" -down-> "__END__"
"_AGENT_MODEL_" .down.> "condition3"
"condition3" .down.> "_AGENT_TOOL_"
'"_AGENT_MODEL_" .down.> "_AGENT_TOOL_"
"condition3" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
'"_AGENT_MODEL_" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
"condition3" .down.> "_AGENT_HOOK_AfterAgentLearningHook.after"
'"_AGENT_MODEL_" .down.> "_AGENT_HOOK_AfterAgentLearningHook.after"
"_AGENT_TOOL_" .down.> "condition4"
"condition4" .down.> "_AGENT_HOOK_AfterAgentLearningHook.after"
'"_AGENT_TOOL_" .down.> "_AGENT_HOOK_AfterAgentLearningHook.after"
"condition4" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
'"_AGENT_TOOL_" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
@enduml

2026-01-17T23:21:31.464+08:00  INFO --- [           main] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#<init> 已注册 agent: grayscale_agent
2026-01-17T23:21:31.472+08:00 DEBUG --- [           main] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#listAgents 列出所有 agent
2026-01-17T23:21:31.472+08:00  INFO --- [           main] c.a.c.a.a.s.controller.AgentController   : AgentController initialized with 1 dynamic agents: [grayscale_agent]
2026-01-17T23:21:31.481+08:00  INFO --- [           main] e.e.c.CodeactEvaluationAutoConfiguration : CodeactEvaluationAutoConfiguration#inputRoutingEvaluationHook - reason=创建输入路由评估 Hook
2026-01-17T23:21:31.482+08:00  INFO --- [           main] e.c.ExperienceExtensionAutoConfiguration : ExperienceExtensionAutoConfiguration#codeExperienceModelHook - reason=creating code experience model hook bean
2026-01-17T23:21:31.483+08:00  INFO --- [           main] e.c.ExperienceExtensionAutoConfiguration : ExperienceExtensionAutoConfiguration#reactExperienceAgentHook - reason=creating react experience agent hook bean
2026-01-17T23:21:31.485+08:00  INFO --- [           main] e.c.ExperienceExtensionAutoConfiguration : ExperienceExtensionAutoConfiguration#commonSenseExperienceModelHook - reason=creating common sense prompt model hook bean
2026-01-17T23:21:31.486+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchFacade - reason=creating search facade with 3 providers
2026-01-17T23:21:31.486+08:00  INFO --- [           main] c.a.a.a.e.s.i.DefaultSearchFacade        : DefaultSearchFacade#init - reason=initialized with 3 providers
2026-01-17T23:21:31.488+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=开始创建Search工具
2026-01-17T23:21:31.489+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockBaiduWebSearchProvider, toolName=search_web
2026-01-17T23:21:31.490+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockKnowledgeStoreSearchProvider, toolName=search_knowledge
2026-01-17T23:21:31.491+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockProjectContextSearchProvider, toolName=search_project
2026-01-17T23:21:31.491+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=搜索工具创建完成, totalCount=3
2026-01-17T23:21:31.491+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=Search工具创建完成, count=3
2026-01-17T23:21:31.491+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=创建Search工具, index=1, name=search_web, description=执行Web搜索，获取公开互联网信息
2026-01-17T23:21:31.491+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=创建Search工具, index=2, name=search_knowledge, description=搜索团队知识库，包括FAQ、规范、最佳实践等
2026-01-17T23:21:31.492+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=创建Search工具, index=3, name=search_project, description=搜索项目上下文信息，包括代码、配置、文档等
2026-01-17T23:21:31.495+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#diagnostics - reason=ElasticsearchClient bean found
2026-01-17T23:21:31.496+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#diagnostics - reason=EmbeddingModel bean found
2026-01-17T23:21:31.498+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#diagnostics - Planning module status:
2026-01-17T23:21:31.498+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration :   - ActionRepository: MybatisPlusActionRepository
2026-01-17T23:21:31.498+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration :   - ActionProvider: SemanticActionProvider
2026-01-17T23:21:31.498+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration :   - PlanGenerator: DefaultPlanGenerator
2026-01-17T23:21:31.498+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration :   - PlanExecutor: DefaultPlanExecutor
2026-01-17T23:21:31.501+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#planningCodeactTools - reason=creating planning tools list
2026-01-17T23:21:31.501+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#planningCodeactTools - reason=created planning tools, count=4
2026-01-17T23:21:31.730+08:00  INFO --- [           main] c.a.a.a.c.c.CodeactCoreAutoConfiguration : CodeactCoreAutoConfiguration#returnSchemaRegistry - reason=创建ReturnSchemaRegistry单例Bean
2026-01-17T23:21:31.730+08:00  INFO --- [           main] .a.a.a.c.t.s.DefaultReturnSchemaRegistry : DefaultReturnSchemaRegistry#<init> - reason=创建新实例, hashCode=97383965
2026-01-17T23:21:32.084+08:00  WARN --- [           main] o.s.m.p.s.SyncMcpSamplingProvider        : No sampling methods found
2026-01-17T23:21:32.085+08:00  WARN --- [           main] o.s.m.p.e.SyncMcpElicitationProvider     : No elicitation methods found
2026-01-17T23:21:32.103+08:00  INFO --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2026-01-17T23:21:32.114+08:00  INFO --- [           main] c.a.a.a.start.AssistantAgentApplication  : Started AssistantAgentApplication in 6.701 seconds (process running for 7.265)
2026-01-17T23:21:32.116+08:00  INFO --- [           main] c.a.a.a.s.config.DemoExperienceConfig    : DemoExperienceConfig#run - reason=Initializing Demo Experiences
2026-01-17T23:21:32.116+08:00  INFO --- [           main] c.a.a.a.s.config.DemoExperienceConfig    : DemoExperienceConfig#run - reason=Demo Experiences initialization completed
2026-01-17T23:21:32.116+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#run - reason=Starting experience module validation
2026-01-17T23:21:32.163+08:00 DEBUG --- [           main] .p.e.r.ElasticsearchExperienceRepository : ElasticsearchExperienceRepository#count - reason=count completed, count=0
2026-01-17T23:21:32.180+08:00 DEBUG --- [           main] .p.e.r.ElasticsearchExperienceRepository : ElasticsearchExperienceRepository#countByTypeAndScope - reason=count completed, type=CODE, scope=null, count=0
2026-01-17T23:21:32.190+08:00 DEBUG --- [           main] .p.e.r.ElasticsearchExperienceRepository : ElasticsearchExperienceRepository#countByTypeAndScope - reason=count completed, type=REACT, scope=null, count=0
2026-01-17T23:21:32.199+08:00 DEBUG --- [           main] .p.e.r.ElasticsearchExperienceRepository : ElasticsearchExperienceRepository#countByTypeAndScope - reason=count completed, type=COMMON, scope=null, count=0
2026-01-17T23:21:32.199+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testExperienceCount - reason=Experience stats: total=0, code=0, react=0, common=0
2026-01-17T23:21:32.199+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCommonExperienceQuery - reason=Testing common experience query
2026-01-17T23:21:32.317+08:00 DEBUG --- [           main] .s.p.e.p.ElasticsearchExperienceProvider : ElasticsearchExperienceProvider#query - reason=query completed, type=COMMON, text=null, count=0
2026-01-17T23:21:32.317+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCommonExperienceQuery - reason=Found 0 common experiences
2026-01-17T23:21:32.317+08:00  WARN --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCommonExperienceQuery - reason=❌ MoLiHong identity experience not found
2026-01-17T23:21:32.317+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCodeExperienceQuery - reason=Testing code experience query (demo keyword)
2026-01-17T23:21:32.325+08:00 DEBUG --- [           main] .s.p.e.p.ElasticsearchExperienceProvider : ElasticsearchExperienceProvider#query - reason=query completed, type=CODE, text=null, count=0
2026-01-17T23:21:32.325+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCodeExperienceQuery - reason=Found 0 demo code experiences
2026-01-17T23:21:32.325+08:00  WARN --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCodeExperienceQuery - reason=❌ Demo code experience not found
2026-01-17T23:21:32.325+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testReactExperienceQuery - reason=Testing react experience query
2026-01-17T23:21:32.341+08:00 DEBUG --- [           main] .s.p.e.p.ElasticsearchExperienceProvider : ElasticsearchExperienceProvider#query - reason=query completed, type=REACT, text=null, count=0
2026-01-17T23:21:32.341+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testReactExperienceQuery - reason=Found 0 react experiences
2026-01-17T23:21:32.341+08:00  WARN --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testReactExperienceQuery - reason=❌ Ambiguous intent strategy not found
2026-01-17T23:21:32.341+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#run - reason=Experience module validation completed
2026-01-17T23:24:52.146+08:00  INFO --- [           main] c.a.a.a.start.AssistantAgentApplication  : Starting AssistantAgentApplication using Java 21.0.9 with PID 24968 (D:\devfive\AssistantAgent\assistant-agent-start\target\classes started by zhou_ in D:\devfive\AssistantAgent\assistant-agent-start)
2026-01-17T23:24:52.148+08:00 DEBUG --- [           main] c.a.a.a.start.AssistantAgentApplication  : Running with Spring Boot v3.4.8, Spring v6.2.9
2026-01-17T23:24:52.148+08:00  INFO --- [           main] c.a.a.a.start.AssistantAgentApplication  : No active profile set, falling back to 1 default profile: "default"
2026-01-17T23:24:53.431+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Elasticsearch repositories in DEFAULT mode.
2026-01-17T23:24:53.461+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 22 ms. Found 0 Elasticsearch repository interfaces.
2026-01-17T23:24:53.463+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Reactive Elasticsearch repositories in DEFAULT mode.
2026-01-17T23:24:53.474+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 6 ms. Found 0 Reactive Elasticsearch repository interfaces.
2026-01-17T23:24:54.782+08:00  INFO --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2026-01-17T23:24:54.805+08:00  INFO --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2026-01-17T23:24:54.806+08:00  INFO --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.43]
2026-01-17T23:24:54.916+08:00  INFO --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2026-01-17T23:24:54.916+08:00  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2715 ms
2026-01-17T23:24:55.001+08:00  WARN --- [           main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'codeactAgentConfig' defined in file [D:\devfive\AssistantAgent\assistant-agent-start\target\classes\com\alibaba\assistant\agent\start\config\CodeactAgentConfig.class]: Post-processing of merged bean definition failed
2026-01-17T23:24:55.005+08:00  INFO --- [           main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]
2026-01-17T23:24:55.031+08:00  INFO --- [           main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2026-01-17T23:24:55.059+08:00 ERROR --- [           main] o.s.boot.SpringApplication               : Application run failed

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'codeactAgentConfig' defined in file [D:\devfive\AssistantAgent\assistant-agent-start\target\classes\com\alibaba\assistant\agent\start\config\CodeactAgentConfig.class]: Post-processing of merged bean definition failed
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:584)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.instantiateSingleton(DefaultListableBeanFactory.java:1222)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingleton(DefaultListableBeanFactory.java:1188)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:1123)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:987)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.alibaba.assistant.agent.start.AssistantAgentApplication.main(AssistantAgentApplication.java:62)
Caused by: java.lang.IllegalStateException: Failed to introspect Class [com.alibaba.assistant.agent.start.config.CodeactAgentConfig] from ClassLoader [jdk.internal.loader.ClassLoaders$AppClassLoader@6bc7c054]
	at org.springframework.util.ReflectionUtils.getDeclaredFields(ReflectionUtils.java:756)
	at org.springframework.util.ReflectionUtils.doWithLocalFields(ReflectionUtils.java:689)
	at org.springframework.context.annotation.CommonAnnotationBeanPostProcessor.buildResourceMetadata(CommonAnnotationBeanPostProcessor.java:432)
	at org.springframework.context.annotation.CommonAnnotationBeanPostProcessor.findResourceMetadata(CommonAnnotationBeanPostProcessor.java:413)
	at org.springframework.context.annotation.CommonAnnotationBeanPostProcessor.postProcessMergedBeanDefinition(CommonAnnotationBeanPostProcessor.java:313)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyMergedBeanDefinitionPostProcessors(AbstractAutowireCapableBeanFactory.java:1123)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:581)
	... 17 common frames omitted
Caused by: java.lang.NoClassDefFoundError: com/alibaba/assistant/agent/planning/integration/ParamCollectionResponseHook
	at java.base/java.lang.Class.getDeclaredFields0(Native Method)
	at java.base/java.lang.Class.privateGetDeclaredFields(Class.java:3475)
	at java.base/java.lang.Class.getDeclaredFields(Class.java:2544)
	at org.springframework.util.ReflectionUtils.getDeclaredFields(ReflectionUtils.java:751)
	... 23 common frames omitted
Caused by: java.lang.ClassNotFoundException: com.alibaba.assistant.agent.planning.integration.ParamCollectionResponseHook
	at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)
	at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)
	at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:526)
	... 27 common frames omitted

2026-01-17T23:27:24.234+08:00  INFO --- [           main] c.a.a.a.start.AssistantAgentApplication  : Starting AssistantAgentApplication using Java 21.0.9 with PID 13964 (D:\devfive\AssistantAgent\assistant-agent-start\target\classes started by zhou_ in D:\devfive\AssistantAgent\assistant-agent-start)
2026-01-17T23:27:24.236+08:00 DEBUG --- [           main] c.a.a.a.start.AssistantAgentApplication  : Running with Spring Boot v3.4.8, Spring v6.2.9
2026-01-17T23:27:24.237+08:00  INFO --- [           main] c.a.a.a.start.AssistantAgentApplication  : No active profile set, falling back to 1 default profile: "default"
2026-01-17T23:27:25.518+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Elasticsearch repositories in DEFAULT mode.
2026-01-17T23:27:25.546+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 21 ms. Found 0 Elasticsearch repository interfaces.
2026-01-17T23:27:25.553+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Reactive Elasticsearch repositories in DEFAULT mode.
2026-01-17T23:27:25.559+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 5 ms. Found 0 Reactive Elasticsearch repository interfaces.
2026-01-17T23:27:26.818+08:00  INFO --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2026-01-17T23:27:26.837+08:00  INFO --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2026-01-17T23:27:26.837+08:00  INFO --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.43]
2026-01-17T23:27:26.946+08:00  INFO --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2026-01-17T23:27:26.947+08:00  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2654 ms
2026-01-17T23:27:27.012+08:00  INFO --- [           main] e.l.c.LearningExtensionAutoConfiguration : LearningExtensionAutoConfiguration#constructor - reason=learning extension auto-configuration initialized
2026-01-17T23:27:27.032+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#init - reason=search extension framework is enabled
2026-01-17T23:27:27.035+08:00  INFO --- [           main] c.a.a.a.s.s.MockBaiduWebSearchProvider   : MockBaiduWebSearchProvider#init - reason=使用简单模式初始化
2026-01-17T23:27:27.035+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#unifiedSearchCodeactTool - reason=创建统一搜索工具, providerCount=3
2026-01-17T23:27:27.089+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#init - reason=planning extension is enabled
2026-01-17T23:27:27.094+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#init - reason=ES configuration class loaded (elasticsearch.enabled=true)
2026-01-17T23:27:27.094+08:00  INFO --- [           main] toConfiguration$MybatisPlusConfiguration : MybatisPlusConfiguration#init - reason=MySQL configuration class loaded (mysql.enabled=true, MyBatisPlus present)
2026-01-17T23:27:27.421+08:00  INFO --- [           main] toConfiguration$MybatisPlusConfiguration : MybatisPlusConfiguration#actionEntityConverter - reason=creating entity converter
2026-01-17T23:27:27.421+08:00  INFO --- [           main] toConfiguration$MybatisPlusConfiguration : MybatisPlusConfiguration#mybatisPlusActionRepository - reason=ActionRegistryMapper found, creating MySQL repository
2026-01-17T23:27:28.004+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#actionVectorizationService - reason=creating ES vectorization service
2026-01-17T23:27:28.094+08:00  INFO --- [           main] c.a.a.a.p.v.ActionVectorizationService   : ActionVectorizationService#init - reason=ES index initialized on startup
2026-01-17T23:27:28.116+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#semanticActionProvider - reason=creating semantic action provider, semanticWeight=0.6, keywordWeight=0.4, matchThreshold=0.5
2026-01-17T23:27:28.121+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#defaultPlanGenerator - reason=creating default plan generator
2026-01-17T23:27:28.124+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#planActionCodeactTool - reason=creating plan_action tool
2026-01-17T23:27:28.128+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#queryStepExecutor - reason=creating query step executor
2026-01-17T23:27:28.131+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#inputStepExecutor - reason=creating input step executor
2026-01-17T23:27:28.133+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#executeStepExecutor - reason=creating execute step executor
2026-01-17T23:27:28.136+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#apiCallStepExecutor - reason=creating api call step executor
2026-01-17T23:27:28.146+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#validationStepExecutor - reason=creating validation step executor
2026-01-17T23:27:28.148+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#stepExecutorRegistry - reason=creating executor registry, executorCount=5
2026-01-17T23:27:28.149+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=QUERY, executorClass=QueryStepExecutor
2026-01-17T23:27:28.149+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=INPUT, executorClass=InputStepExecutor
2026-01-17T23:27:28.149+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=EXECUTE, executorClass=ExecuteStepExecutor
2026-01-17T23:27:28.149+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=API_CALL, executorClass=ApiCallStepExecutor
2026-01-17T23:27:28.149+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=VALIDATION, executorClass=ValidationStepExecutor
2026-01-17T23:27:28.150+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#defaultPlanExecutor - reason=creating default plan executor
2026-01-17T23:27:28.152+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#executeActionCodeactTool - reason=creating execute_action tool
2026-01-17T23:27:28.152+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#listActionsCodeactTool - reason=creating list_actions tool
2026-01-17T23:27:28.152+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#getActionDetailsCodeactTool - reason=creating get_action_details tool
2026-01-17T23:27:28.242+08:00  INFO --- [           main] e.l.c.LearningExtensionAutoConfiguration : LearningExtensionAutoConfiguration#experienceLearningExtractor - reason=creating LLM-based experience learning extractor
2026-01-17T23:27:28.243+08:00  INFO --- [           main] .a.a.a.e.l.e.ExperienceLearningExtractor : ExperienceLearningExtractor#constructor - reason=LLM-based extractor initialized
2026-01-17T23:27:28.245+08:00  INFO --- [           main] e.l.c.LearningExtensionAutoConfiguration : LearningExtensionAutoConfiguration#inMemoryLearningRepository - reason=creating in-memory learning repository
2026-01-17T23:27:28.248+08:00  INFO --- [           main] c.a.a.a.start.config.PersistenceConfig   : PersistenceConfig#init - reason=persistence configuration loaded
2026-01-17T23:27:28.253+08:00  INFO --- [           main] c.a.a.a.start.config.PersistenceConfig   : PersistenceConfig#elasticsearchExperienceRepository - reason=creating Elasticsearch experience repository (PRIMARY), indexName=experiences
2026-01-17T23:27:28.260+08:00  INFO --- [           main] e.l.c.LearningExtensionAutoConfiguration : LearningExtensionAutoConfiguration#experienceLearningRepository - reason=creating experience learning repository
2026-01-17T23:27:28.272+08:00  INFO --- [           main] e.l.c.LearningExtensionAutoConfiguration : LearningExtensionAutoConfiguration#learningStrategy - reason=creating learning strategy, asyncEnabled=true
2026-01-17T23:27:28.275+08:00  INFO --- [           main] e.l.c.LearningExtensionAutoConfiguration : LearningExtensionAutoConfiguration#asyncLearningHandler - reason=creating async learning handler, threadPoolSize=2, queueCapacity=100
2026-01-17T23:27:28.276+08:00  INFO --- [           main] c.a.a.a.e.l.i.AsyncLearningHandler       : AsyncLearningHandler#constructor - reason=async learning handler initialized, threadPoolSize=2, queueCapacity=100
2026-01-17T23:27:28.277+08:00  INFO --- [           main] e.l.c.LearningExtensionAutoConfiguration : LearningExtensionAutoConfiguration#learningExecutor - reason=creating learning executor, extractorCount=1, repositoryCount=2
2026-01-17T23:27:28.280+08:00  INFO --- [           main] e.l.c.LearningExtensionAutoConfiguration : LearningExtensionAutoConfiguration#afterAgentLearningHook - reason=creating after agent learning hook, learningType=experience
2026-01-17T23:27:28.291+08:00  INFO --- [           main] c.a.a.a.start.config.PersistenceConfig   : PersistenceConfig#elasticsearchExperienceProvider - reason=creating Elasticsearch experience provider (PRIMARY), indexName=experiences
2026-01-17T23:27:28.299+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#<init> - reason=初始化默认评估套件配置, experienceProviderAvailable=true
2026-01-17T23:27:28.302+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#evaluatorRegistry - reason=创建 EvaluatorRegistry Bean
2026-01-17T23:27:28.304+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'llm-based' of type LLMBasedEvaluator
2026-01-17T23:27:28.306+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'passthrough' of type RuleBasedEvaluator
2026-01-17T23:27:28.309+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'react_experience_evaluator' of type RuleBasedEvaluator
2026-01-17T23:27:28.309+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createDefaultEvaluatorRegistry - reason=注册 React 阶段经验检索评估器
2026-01-17T23:27:28.309+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'codeact_experience_evaluator' of type RuleBasedEvaluator
2026-01-17T23:27:28.309+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createDefaultEvaluatorRegistry - reason=注册 CodeAct 阶段经验检索评估器
2026-01-17T23:27:28.311+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#evaluationService - reason=创建默认 EvaluationService, sharedRegistryEvaluators=[llm-based, passthrough, codeact_experience_evaluator, react_experience_evaluator]
2026-01-17T23:27:28.311+08:00 DEBUG --- [           main] c.a.a.a.e.e.GraphBasedEvaluationExecutor : Created default ExecutorService for batch processing
2026-01-17T23:27:28.315+08:00  INFO --- [           main] .c.ExperienceEvaluationCriterionProvider : ExperienceEvaluationCriterionProvider#<init> - reason=初始化经验评估 Criterion 提供者
2026-01-17T23:27:28.325+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#structuredParamExtractor - reason=creating structured param extractor
2026-01-17T23:27:28.338+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#parameterValidator - reason=creating parameter validator
2026-01-17T23:27:28.343+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#restTemplate - reason=creating RestTemplate bean
2026-01-17T23:27:28.343+08:00  INFO --- [           main] c.a.a.a.planning.executor.HttpExecutor   : HttpExecutor#init - initialized
2026-01-17T23:27:28.348+08:00  INFO --- [           main] c.a.a.a.p.executor.InternalExecutor      : InternalExecutor#init - initialized
2026-01-17T23:27:28.351+08:00  INFO --- [           main] c.a.a.a.p.e.ActionExecutorFactory        : ActionExecutorFactory#init - initialized executors: INTERNAL(InternalExecutor), HTTP(HttpExecutor), DATA_AGENT(DataAgentExecutor), MCP(McpExecutor)
2026-01-17T23:27:28.351+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#sessionProvider - reason=creating in-memory session provider
2026-01-17T23:27:28.354+08:00  INFO --- [           main] c.a.a.a.p.s.InMemorySessionProvider      : InMemorySessionProvider#init - initialized
2026-01-17T23:27:28.354+08:00  INFO --- [           main] c.a.a.a.p.s.ParamCollectionService       : ParamCollectionService#init - sessionProvider=InMemory
2026-01-17T23:27:28.354+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'action_intent_evaluator' of type ActionIntentEvaluator
2026-01-17T23:27:28.354+08:00  INFO --- [           main] p.i.PlanningIntegrationAutoConfiguration : PlanningIntegrationAutoConfiguration#actionIntentEvaluator - initialized and registered, paramCollection=true, llmVerification=true, maxCandidates=5
2026-01-17T23:27:28.354+08:00  INFO --- [           main] .p.i.PlanningEvaluationCriterionProvider : PlanningEvaluationCriterionProvider#init - initialized, llmVerificationEnabled=true
2026-01-17T23:27:28.359+08:00  INFO --- [           main] p.i.PlanningIntegrationAutoConfiguration : PlanningIntegrationAutoConfiguration#planningEvaluationCriterionProvider - registered planning evaluation criterion provider
2026-01-17T23:27:28.359+08:00  INFO --- [           main] .c.ExperienceEvaluationCriterionProvider : ExperienceEvaluationCriterionProvider#getReactPhaseCriteria - reason=提供 React 阶段评估 Criteria
2026-01-17T23:27:28.369+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createReactPhaseSuite - reason=添加自定义 Criterion, provider=ExperienceEvaluationCriterionProvider, count=3
2026-01-17T23:27:28.369+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createReactPhaseSuite - reason=添加自定义 Criterion, provider=PlanningEvaluationCriterionProvider, count=2
2026-01-17T23:27:28.369+08:00  INFO --- [           main] a.a.e.a.BatchAggregationStrategyRegistry : Registered batch aggregation strategy: ANY_TRUE
2026-01-17T23:27:28.374+08:00  INFO --- [           main] a.a.e.a.BatchAggregationStrategyRegistry : Registered batch aggregation strategy: ALL_TRUE
2026-01-17T23:27:28.413+08:00  INFO --- [           main] c.a.c.a.g.internal.node.ParallelNode     : Calculated core pool size: 32 (CPU cores: 16)
2026-01-17T23:27:28.413+08:00  INFO --- [           main] c.a.c.a.g.internal.node.ParallelNode     : Calculated maximum pool size: 64 (CPU cores: 16)
2026-01-17T23:27:28.413+08:00  INFO --- [           main] c.a.c.a.g.internal.node.ParallelNode     : Calculated queue capacity: 1000
2026-01-17T23:27:28.414+08:00  INFO --- [           main] c.a.a.a.e.DefaultEvaluationService       : Registered evaluation suite: react-phase-suite
2026-01-17T23:27:28.415+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#evaluationService - reason=注册 React Phase Suite, suiteId=react-phase-suite
2026-01-17T23:27:28.415+08:00  INFO --- [           main] .c.ExperienceEvaluationCriterionProvider : ExperienceEvaluationCriterionProvider#getCodeActPhaseCriteria - reason=提供 CodeAct 阶段评估 Criteria
2026-01-17T23:27:28.416+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createCodeActPhaseSuite - reason=添加自定义 Criterion, provider=ExperienceEvaluationCriterionProvider, count=3
2026-01-17T23:27:28.416+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createCodeActPhaseSuite - reason=添加自定义 Criterion, provider=PlanningEvaluationCriterionProvider, count=2
2026-01-17T23:27:28.416+08:00  INFO --- [           main] a.a.e.a.BatchAggregationStrategyRegistry : Registered batch aggregation strategy: ANY_TRUE
2026-01-17T23:27:28.416+08:00  INFO --- [           main] a.a.e.a.BatchAggregationStrategyRegistry : Registered batch aggregation strategy: ALL_TRUE
2026-01-17T23:27:28.417+08:00  INFO --- [           main] c.a.a.a.e.DefaultEvaluationService       : Registered evaluation suite: codeact-phase-suite
2026-01-17T23:27:28.417+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#evaluationService - reason=注册 CodeAct Phase Suite, suiteId=codeact-phase-suite
2026-01-17T23:27:28.418+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#codeactEvaluationContextFactory - reason=创建 EvaluationContextFactory
2026-01-17T23:27:28.420+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#codeactEvaluationResultAttacher - reason=创建 EvaluationResultAttacher
2026-01-17T23:27:28.424+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#reactPhaseEvaluationHooks - reason=创建 React Phase ModelInputEvaluationHook
2026-01-17T23:27:28.426+08:00  INFO --- [           main] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#<init> - reason=初始化, phase=REACT, providerCount=1
2026-01-17T23:27:28.427+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#reactPhaseEvaluationHooks - reason=创建 React Phase EvaluationPromptInjectionHook, providersCount=2
2026-01-17T23:27:28.429+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#codeactPhaseEvaluationHooks - reason=创建 CodeAct Phase ModelInputEvaluationHook
2026-01-17T23:27:28.429+08:00  INFO --- [           main] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#<init> - reason=初始化, phase=CODEACT, providerCount=1
2026-01-17T23:27:28.429+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#codeactPhaseEvaluationHooks - reason=创建 CodeAct Phase EvaluationPromptInjectionHook, providersCount=2
2026-01-17T23:27:28.431+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#keywordMatcher - reason=creating keyword matcher
2026-01-17T23:27:28.433+08:00  INFO --- [           main] iguration$UnifiedIntentHookConfiguration : UnifiedIntentHookConfiguration#unifiedIntentRecognitionHook - reason=creating unified intent hook, experienceProviderPresent=true, directExecuteThreshold=0.95, hintThreshold=0.5
2026-01-17T23:27:28.570+08:00  INFO --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2026-01-17T23:27:28.808+08:00  INFO --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@75b4db22
2026-01-17T23:27:28.812+08:00  INFO --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2026-01-17T23:27:29.031+08:00 DEBUG --- [           main] c.a.a.a.planning.intent.KeywordMatcher   : KeywordMatcher#registerAction - actionId=erp:product-unit:create, keywords=18
2026-01-17T23:27:29.032+08:00  INFO --- [           main] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#initKeywordMatcher - reason=initialized, actionCount=1, keywordIndexSize=18
2026-01-17T23:27:29.034+08:00  INFO --- [           main] p.i.PlanningIntegrationAutoConfiguration : PlanningIntegrationAutoConfiguration#paramCollectionResponseHook - initialized, enabled=true
2026-01-17T23:27:29.040+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#init - reason=reply module enabled
2026-01-17T23:27:29.043+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactToolFactory - reason=创建CodeactTool工厂, channels=1
2026-01-17T23:27:29.043+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#init - reason=工厂初始化完成, channels=1
2026-01-17T23:27:29.053+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=开始创建Reply工具
2026-01-17T23:27:29.059+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#createTools - reason=创建工具成功, toolName=send_success_message, channelCode=IDE_TEXT
2026-01-17T23:27:29.060+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#createTools - reason=创建工具成功, toolName=send_error_message, channelCode=IDE_TEXT
2026-01-17T23:27:29.060+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#createTools - reason=创建工具成功, toolName=send_notification, channelCode=IDE_TEXT
2026-01-17T23:27:29.061+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#createTools - reason=工具创建完成, totalCount=3
2026-01-17T23:27:29.061+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=Reply工具创建完成, count=3
2026-01-17T23:27:29.061+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=创建Reply工具, index=1, name=send_success_message, description=Send a success message to the IDE console
2026-01-17T23:27:29.061+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=创建Reply工具, index=2, name=send_error_message, description=Send an error message to the IDE console
2026-01-17T23:27:29.061+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=创建Reply工具, index=3, name=send_notification, description=Send a notification message
2026-01-17T23:27:29.062+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactToolFactory - reason=创建SearchCodeactTool工厂, providerCount=3
2026-01-17T23:27:29.081+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactToolFactory - reason=创建TriggerCodeactTool工厂
2026-01-17T23:27:29.082+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=开始创建Trigger工具
2026-01-17T23:27:29.083+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=创建SubscribeTriggerCodeactTool成功
2026-01-17T23:27:29.085+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=创建UnsubscribeTriggerCodeactTool成功
2026-01-17T23:27:29.086+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=创建ListTriggersCodeactTool成功
2026-01-17T23:27:29.088+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=创建GetTriggerDetailCodeactTool成功
2026-01-17T23:27:29.088+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=触发器工具创建完成, count=4
2026-01-17T23:27:29.088+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=Trigger工具创建完成, count=4
2026-01-17T23:27:29.089+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=创建Trigger工具, index=1, name=subscribe_trigger, description=创建并订阅一个新的触发器
2026-01-17T23:27:29.089+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=创建Trigger工具, index=2, name=unsubscribe_trigger, description=取消订阅并删除一个触发器
2026-01-17T23:27:29.089+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=创建Trigger工具, index=3, name=list_triggers, description=列出所有触发器
2026-01-17T23:27:29.089+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=创建Trigger工具, index=4, name=get_trigger_detail, description=获取指定触发器的详细信息
2026-01-17T23:27:29.107+08:00  INFO --- [           main] e.c.ExperienceExtensionAutoConfiguration : ExperienceExtensionAutoConfiguration#fastIntentService - reason=creating FastIntentService, extraMatchers=0
2026-01-17T23:27:29.109+08:00  INFO --- [           main] e.c.ExperienceExtensionAutoConfiguration : ExperienceExtensionAutoConfiguration#fastIntentReactHook - reason=creating fast intent react hook bean
2026-01-17T23:27:29.114+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=创建 CodeactAgent
2026-01-17T23:27:29.114+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=配置 MemorySaver 以支持多轮对话上下文保持
2026-01-17T23:27:29.114+08:00  WARN --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=临时禁用 streaming 模式以排查循环问题
2026-01-17T23:27:29.114+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加UnifiedSearchCodeactTool
2026-01-17T23:27:29.119+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockBaiduWebSearchProvider, toolName=search_web
2026-01-17T23:27:29.119+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockKnowledgeStoreSearchProvider, toolName=search_knowledge
2026-01-17T23:27:29.119+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockProjectContextSearchProvider, toolName=search_project
2026-01-17T23:27:29.125+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=搜索工具创建完成, totalCount=3
2026-01-17T23:27:29.125+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加SearchCodeactTools, count=3
2026-01-17T23:27:29.125+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加ReplyCodeactTools, count=3
2026-01-17T23:27:29.125+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加TriggerCodeactTools, count=4
2026-01-17T23:27:29.125+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#createMcpDynamicTools - reason=Creating MCP dynamic tools
2026-01-17T23:27:29.125+08:00  INFO --- [           main] c.a.a.a.e.d.mcp.McpDynamicToolFactory    : McpDynamicToolFactory#createTools - reason=开始创建MCP动态工具
2026-01-17T23:27:29.130+08:00  INFO --- [           main] c.a.a.a.e.d.mcp.McpDynamicToolFactory    : McpDynamicToolFactory#createTools - reason=无可用的MCP工具
2026-01-17T23:27:29.130+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#createMcpDynamicTools - reason=MCP dynamic tools created, count=0
2026-01-17T23:27:29.130+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=Added MCP dynamic tools, count=0
2026-01-17T23:27:29.130+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#createHttpDynamicTools - reason=HTTP dynamic tools disabled by default
2026-01-17T23:27:29.130+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=合并后CodeactTool总数, count=11
2026-01-17T23:27:29.130+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=React阶段使用内置工具(write_code, execute_code, write_condition_code)
2026-01-17T23:27:29.130+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=注入 React Phase 评估 Hooks, count=2
2026-01-17T23:27:29.130+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=注入 CodeAct Phase 评估 Hooks, count=2
2026-01-17T23:27:29.130+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=已准备注入AfterAgentLearningHook
2026-01-17T23:27:29.130+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=已准备注入FastIntentReactHook
2026-01-17T23:27:29.130+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=已准备注入UnifiedIntentRecognitionHook
2026-01-17T23:27:29.130+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=已准备注入ParamCollectionResponseHook
2026-01-17T23:27:29.130+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 开始构建CodeactAgent
2026-01-17T23:27:29.135+08:00  INFO --- [           main] .a.a.a.c.t.s.DefaultReturnSchemaRegistry : DefaultReturnSchemaRegistry#<init> - reason=创建新实例, hashCode=59725469
2026-01-17T23:27:29.135+08:00 DEBUG --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#<init> - reason=创建注册表, returnSchemaRegistry=DefaultReturnSchemaRegistry
2026-01-17T23:27:29.135+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=创建默认CodeactToolRegistry
2026-01-17T23:27:29.135+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=开始注册CodeactTool, count=11
2026-01-17T23:27:29.135+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=unified_search
2026-01-17T23:27:29.135+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=unified_search
2026-01-17T23:27:29.135+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=search_web
2026-01-17T23:27:29.135+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=search_web
2026-01-17T23:27:29.135+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=search_knowledge
2026-01-17T23:27:29.135+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=search_knowledge
2026-01-17T23:27:29.135+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=search_project
2026-01-17T23:27:29.135+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=search_project
2026-01-17T23:27:29.135+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=send_success_message
2026-01-17T23:27:29.135+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=send_success_message
2026-01-17T23:27:29.135+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=send_error_message
2026-01-17T23:27:29.135+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=send_error_message
2026-01-17T23:27:29.135+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=send_notification
2026-01-17T23:27:29.135+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=send_notification
2026-01-17T23:27:29.135+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=subscribe_trigger
2026-01-17T23:27:29.135+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=subscribe_trigger
2026-01-17T23:27:29.135+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=unsubscribe_trigger
2026-01-17T23:27:29.135+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=unsubscribe_trigger
2026-01-17T23:27:29.135+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=list_triggers
2026-01-17T23:27:29.135+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=list_triggers
2026-01-17T23:27:29.135+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=get_trigger_detail
2026-01-17T23:27:29.135+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=get_trigger_detail
2026-01-17T23:27:29.135+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册完成, count=11
2026-01-17T23:27:29.135+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 创建默认CodeContext: language=PYTHON
2026-01-17T23:27:29.140+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 创建默认RuntimeEnvironmentManager: language=PYTHON
2026-01-17T23:27:29.140+08:00 DEBUG --- [           main] c.a.a.a.c.e.bridge.AgentToolBridge       : AgentToolBridge#<init> 初始化: 注册了0个工具
2026-01-17T23:27:29.145+08:00 DEBUG --- [           main] c.a.a.a.c.executor.bridge.StateBridge    : StateBridge#<init> 初始化完成
2026-01-17T23:27:29.145+08:00  INFO --- [           main] c.a.a.a.core.executor.GraalCodeExecutor  : GraalCodeExecutor#<init> 初始化完成: language=PYTHON, allowIO=false, timeout=30000ms, executableTools=true, customBridgeFactory=false
2026-01-17T23:27:29.145+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#createCodeactSubAgentInterceptor 创建子Agent拦截器
2026-01-17T23:27:29.153+08:00  INFO --- [           main] c.a.a.a.a.subagent.CodeactSubAgent       : CodeactSubAgent#<init> 初始化: name=code-generator
2026-01-17T23:27:29.153+08:00  INFO --- [           main] c.a.a.a.a.subagent.CodeactSubAgent       : CodeactSubAgent#<init> 初始化: name=condition-code-generator
2026-01-17T23:27:29.153+08:00  INFO --- [           main] c.a.a.a.a.s.CodeactSubAgentInterceptor   : CodeactSubAgentInterceptor#<init> 创建默认代码生成子Agent
2026-01-17T23:27:29.327+08:00  INFO --- [           main] c.a.a.a.a.s.CodeactSubAgentInterceptor   : CodeactSubAgentInterceptor#<init> 初始化完成: subAgentCount=2
2026-01-17T23:27:29.328+08:00  INFO --- [           main] c.a.a.a.a.tools.ExecuteCodeTool          : ExecuteCodeTool#<init> 初始化完成
2026-01-17T23:27:29.332+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 拦截器分类完成: modelInterceptors=1, toolInterceptors=0
2026-01-17T23:27:29.333+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 从拦截器提取工具: interceptor=CodeactSubAgent, toolCount=2
2026-01-17T23:27:29.345+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 工具收集完成: interceptorTools=2, regularTools=3, total=6
2026-01-17T23:27:29.347+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 设置ModelInterceptors到LlmNode: count=1
2026-01-17T23:27:29.348+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build CodeactAgent构建完成
2026-01-17T23:27:29.348+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=开始罗列已注册的工具
2026-01-17T23:27:29.348+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct阶段工具数量, count=11
2026-01-17T23:27:29.348+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=1, name=unified_search, description=统一搜索工具，可同时搜索项目、知识库、Web等多个数据源
2026-01-17T23:27:29.348+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=2, name=search_knowledge, description=搜索团队知识库，包括FAQ、规范、最佳实践等
2026-01-17T23:27:29.348+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=3, name=send_success_message, description=Send a success message to the IDE console
2026-01-17T23:27:29.349+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=4, name=search_web, description=执行Web搜索，获取公开互联网信息
2026-01-17T23:27:29.349+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=5, name=unsubscribe_trigger, description=取消订阅并删除一个触发器
2026-01-17T23:27:29.349+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=6, name=get_trigger_detail, description=获取指定触发器的详细信息
2026-01-17T23:27:29.349+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=7, name=send_error_message, description=Send an error message to the IDE console
2026-01-17T23:27:29.349+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=8, name=search_project, description=搜索项目上下文信息，包括代码、配置、文档等
2026-01-17T23:27:29.349+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=9, name=send_notification, description=Send a notification message
2026-01-17T23:27:29.349+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=10, name=subscribe_trigger, description=创建并订阅一个新的触发器
2026-01-17T23:27:29.349+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=11, name=list_triggers, description=列出所有触发器
2026-01-17T23:27:29.349+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React阶段工具数量, count=6
2026-01-17T23:27:29.349+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=1, name=write_code, description=Generate and register a new function with specified name and parameters. IMPORTANT: You MUST provide both 'functionName' and 'parameters' fields. Example: write_code(requirement='calculate sum', functionName='calculate_sum', parameters=['a', 'b'])
2026-01-17T23:27:29.349+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=2, name=write_condition_code, description=Generate and register a condition check function for triggers. This function MUST return a boolean value (True/False). Example: write_condition_code(requirement='check if it is a working day', functionName='check_is_working_day', parameters=['date'])
2026-01-17T23:27:29.349+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=3, name=send_success_message, description=Send a success message to the IDE console
2026-01-17T23:27:29.349+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=4, name=send_error_message, description=Send an error message to the IDE console
2026-01-17T23:27:29.349+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=5, name=send_notification, description=Send a notification message
2026-01-17T23:27:29.349+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=6, name=execute_code, description=Execute a previously generated function by its exact name with matching parameters. CRITICAL: The functionName MUST exactly match the name used in write_code. The 'args' parameter names MUST exactly match the 'parameters' specified in write_code. Example: If you called write_code with functionName='calculate_sum' and parameters=['a', 'b'], then you must call execute_code with functionName='calculate_sum' and args={'a': 10, 'b': 20}. Parameter value types supported: String, Number, Boolean, List, Map/Object.
2026-01-17T23:27:29.349+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=工具罗列完成
2026-01-17T23:27:29.350+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgent#<init> 初始化完成: language=PYTHON
2026-01-17T23:27:29.354+08:00  INFO --- [           main] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#<init> 初始化 Agent 加载器
2026-01-17T23:27:29.368+08:00 DEBUG --- [           main] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#<init> Agent 图结构:
@startuml CodeactAgent
skinparam usecaseFontSize 14
skinparam usecaseStereotypeFontSize 12
skinparam hexagonFontSize 14
skinparam hexagonStereotypeFontSize 12
title "CodeactAgent"
footer

powered by spring-ai-alibaba
end footer
circle start<<input>> as __START__
circle stop as __END__
usecase "_AGENT_MODEL_"<<Node>>
usecase "_AGENT_TOOL_"<<Node>>
usecase "_AGENT_HOOK_FastIntentReactHook.before"<<Node>>
usecase "_AGENT_HOOK_UnifiedIntentRecognitionHook.before"<<Node>>
usecase "_AGENT_HOOK_ParamCollectionResponseHook.before"<<Node>>
usecase "_AGENT_HOOK_AfterAgentLearningHook.after"<<Node>>
usecase "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"<<Node>>
usecase "_AGENT_HOOK_EvaluationPromptInjectionHook-REACT.beforeModel"<<Node>>
hexagon "check state" as condition1<<Condition>>
hexagon "check state" as condition2<<Condition>>
hexagon "check state" as condition3<<Condition>>
hexagon "check state" as condition4<<Condition>>
hexagon "check state" as condition5<<Condition>>
"__START__" -down-> "_AGENT_HOOK_FastIntentReactHook.before"
"_AGENT_HOOK_FastIntentReactHook.before" .down.> "condition1"
"condition1" .down.> "_AGENT_TOOL_"
'"_AGENT_HOOK_FastIntentReactHook.before" .down.> "_AGENT_TOOL_"
"condition1" .down.> "_AGENT_HOOK_UnifiedIntentRecognitionHook.before"
'"_AGENT_HOOK_FastIntentReactHook.before" .down.> "_AGENT_HOOK_UnifiedIntentRecognitionHook.before"
"_AGENT_HOOK_UnifiedIntentRecognitionHook.before" .down.> "condition2"
"condition2" .down.> "_AGENT_HOOK_AfterAgentLearningHook.after"
'"_AGENT_HOOK_UnifiedIntentRecognitionHook.before" .down.> "_AGENT_HOOK_AfterAgentLearningHook.after"
"condition2" .down.> "_AGENT_TOOL_"
'"_AGENT_HOOK_UnifiedIntentRecognitionHook.before" .down.> "_AGENT_TOOL_"
"condition2" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
'"_AGENT_HOOK_UnifiedIntentRecognitionHook.before" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
"condition2" .down.> "_AGENT_HOOK_ParamCollectionResponseHook.before"
'"_AGENT_HOOK_UnifiedIntentRecognitionHook.before" .down.> "_AGENT_HOOK_ParamCollectionResponseHook.before"
"_AGENT_HOOK_ParamCollectionResponseHook.before" .down.> "condition3"
"condition3" .down.> "_AGENT_HOOK_AfterAgentLearningHook.after"
'"_AGENT_HOOK_ParamCollectionResponseHook.before" .down.> "_AGENT_HOOK_AfterAgentLearningHook.after"
"condition3" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
'"_AGENT_HOOK_ParamCollectionResponseHook.before" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
"_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel" -down-> "_AGENT_HOOK_EvaluationPromptInjectionHook-REACT.beforeModel"
"_AGENT_HOOK_EvaluationPromptInjectionHook-REACT.beforeModel" -down-> "_AGENT_MODEL_"
"_AGENT_HOOK_AfterAgentLearningHook.after" -down-> "__END__"
"_AGENT_MODEL_" .down.> "condition4"
"condition4" .down.> "_AGENT_TOOL_"
'"_AGENT_MODEL_" .down.> "_AGENT_TOOL_"
"condition4" .down.> "_AGENT_HOOK_AfterAgentLearningHook.after"
'"_AGENT_MODEL_" .down.> "_AGENT_HOOK_AfterAgentLearningHook.after"
"condition4" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
'"_AGENT_MODEL_" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
"_AGENT_TOOL_" .down.> "condition5"
"condition5" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
'"_AGENT_TOOL_" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
"condition5" .down.> "_AGENT_HOOK_AfterAgentLearningHook.after"
'"_AGENT_TOOL_" .down.> "_AGENT_HOOK_AfterAgentLearningHook.after"
@enduml

2026-01-17T23:27:29.369+08:00  INFO --- [           main] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#<init> 已注册 agent: grayscale_agent
2026-01-17T23:27:29.377+08:00 DEBUG --- [           main] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#listAgents 列出所有 agent
2026-01-17T23:27:29.378+08:00  INFO --- [           main] c.a.c.a.a.s.controller.AgentController   : AgentController initialized with 1 dynamic agents: [grayscale_agent]
2026-01-17T23:27:29.394+08:00  INFO --- [           main] e.e.c.CodeactEvaluationAutoConfiguration : CodeactEvaluationAutoConfiguration#inputRoutingEvaluationHook - reason=创建输入路由评估 Hook
2026-01-17T23:27:29.395+08:00  INFO --- [           main] e.c.ExperienceExtensionAutoConfiguration : ExperienceExtensionAutoConfiguration#codeExperienceModelHook - reason=creating code experience model hook bean
2026-01-17T23:27:29.396+08:00  INFO --- [           main] e.c.ExperienceExtensionAutoConfiguration : ExperienceExtensionAutoConfiguration#reactExperienceAgentHook - reason=creating react experience agent hook bean
2026-01-17T23:27:29.398+08:00  INFO --- [           main] e.c.ExperienceExtensionAutoConfiguration : ExperienceExtensionAutoConfiguration#commonSenseExperienceModelHook - reason=creating common sense prompt model hook bean
2026-01-17T23:27:29.399+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchFacade - reason=creating search facade with 3 providers
2026-01-17T23:27:29.401+08:00  INFO --- [           main] c.a.a.a.e.s.i.DefaultSearchFacade        : DefaultSearchFacade#init - reason=initialized with 3 providers
2026-01-17T23:27:29.403+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=开始创建Search工具
2026-01-17T23:27:29.404+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockBaiduWebSearchProvider, toolName=search_web
2026-01-17T23:27:29.406+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockKnowledgeStoreSearchProvider, toolName=search_knowledge
2026-01-17T23:27:29.407+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockProjectContextSearchProvider, toolName=search_project
2026-01-17T23:27:29.407+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=搜索工具创建完成, totalCount=3
2026-01-17T23:27:29.407+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=Search工具创建完成, count=3
2026-01-17T23:27:29.407+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=创建Search工具, index=1, name=search_web, description=执行Web搜索，获取公开互联网信息
2026-01-17T23:27:29.408+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=创建Search工具, index=2, name=search_knowledge, description=搜索团队知识库，包括FAQ、规范、最佳实践等
2026-01-17T23:27:29.408+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=创建Search工具, index=3, name=search_project, description=搜索项目上下文信息，包括代码、配置、文档等
2026-01-17T23:27:29.413+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#diagnostics - reason=ElasticsearchClient bean found
2026-01-17T23:27:29.413+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#diagnostics - reason=EmbeddingModel bean found
2026-01-17T23:27:29.416+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#diagnostics - Planning module status:
2026-01-17T23:27:29.416+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration :   - ActionRepository: MybatisPlusActionRepository
2026-01-17T23:27:29.416+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration :   - ActionProvider: SemanticActionProvider
2026-01-17T23:27:29.416+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration :   - PlanGenerator: DefaultPlanGenerator
2026-01-17T23:27:29.416+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration :   - PlanExecutor: DefaultPlanExecutor
2026-01-17T23:27:29.420+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#planningCodeactTools - reason=creating planning tools list
2026-01-17T23:27:29.420+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#planningCodeactTools - reason=created planning tools, count=4
2026-01-17T23:27:29.687+08:00  INFO --- [           main] c.a.a.a.c.c.CodeactCoreAutoConfiguration : CodeactCoreAutoConfiguration#returnSchemaRegistry - reason=创建ReturnSchemaRegistry单例Bean
2026-01-17T23:27:29.687+08:00  INFO --- [           main] .a.a.a.c.t.s.DefaultReturnSchemaRegistry : DefaultReturnSchemaRegistry#<init> - reason=创建新实例, hashCode=1894492702
2026-01-17T23:27:30.064+08:00  WARN --- [           main] o.s.m.p.s.SyncMcpSamplingProvider        : No sampling methods found
2026-01-17T23:27:30.066+08:00  WARN --- [           main] o.s.m.p.e.SyncMcpElicitationProvider     : No elicitation methods found
2026-01-17T23:27:30.094+08:00  INFO --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2026-01-17T23:27:30.108+08:00  INFO --- [           main] c.a.a.a.start.AssistantAgentApplication  : Started AssistantAgentApplication in 6.699 seconds (process running for 7.295)
2026-01-17T23:27:30.111+08:00  INFO --- [           main] c.a.a.a.s.config.DemoExperienceConfig    : DemoExperienceConfig#run - reason=Initializing Demo Experiences
2026-01-17T23:27:30.111+08:00  INFO --- [           main] c.a.a.a.s.config.DemoExperienceConfig    : DemoExperienceConfig#run - reason=Demo Experiences initialization completed
2026-01-17T23:27:30.111+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#run - reason=Starting experience module validation
2026-01-17T23:27:30.171+08:00 DEBUG --- [           main] .p.e.r.ElasticsearchExperienceRepository : ElasticsearchExperienceRepository#count - reason=count completed, count=0
2026-01-17T23:27:30.198+08:00 DEBUG --- [           main] .p.e.r.ElasticsearchExperienceRepository : ElasticsearchExperienceRepository#countByTypeAndScope - reason=count completed, type=CODE, scope=null, count=0
2026-01-17T23:27:30.210+08:00 DEBUG --- [           main] .p.e.r.ElasticsearchExperienceRepository : ElasticsearchExperienceRepository#countByTypeAndScope - reason=count completed, type=REACT, scope=null, count=0
2026-01-17T23:27:30.220+08:00 DEBUG --- [           main] .p.e.r.ElasticsearchExperienceRepository : ElasticsearchExperienceRepository#countByTypeAndScope - reason=count completed, type=COMMON, scope=null, count=0
2026-01-17T23:27:30.220+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testExperienceCount - reason=Experience stats: total=0, code=0, react=0, common=0
2026-01-17T23:27:30.220+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCommonExperienceQuery - reason=Testing common experience query
2026-01-17T23:27:30.362+08:00 DEBUG --- [           main] .s.p.e.p.ElasticsearchExperienceProvider : ElasticsearchExperienceProvider#query - reason=query completed, type=COMMON, text=null, count=0
2026-01-17T23:27:30.362+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCommonExperienceQuery - reason=Found 0 common experiences
2026-01-17T23:27:30.362+08:00  WARN --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCommonExperienceQuery - reason=❌ MoLiHong identity experience not found
2026-01-17T23:27:30.362+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCodeExperienceQuery - reason=Testing code experience query (demo keyword)
2026-01-17T23:27:30.372+08:00 DEBUG --- [           main] .s.p.e.p.ElasticsearchExperienceProvider : ElasticsearchExperienceProvider#query - reason=query completed, type=CODE, text=null, count=0
2026-01-17T23:27:30.372+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCodeExperienceQuery - reason=Found 0 demo code experiences
2026-01-17T23:27:30.372+08:00  WARN --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCodeExperienceQuery - reason=❌ Demo code experience not found
2026-01-17T23:27:30.372+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testReactExperienceQuery - reason=Testing react experience query
2026-01-17T23:27:30.386+08:00 DEBUG --- [           main] .s.p.e.p.ElasticsearchExperienceProvider : ElasticsearchExperienceProvider#query - reason=query completed, type=REACT, text=null, count=0
2026-01-17T23:27:30.386+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testReactExperienceQuery - reason=Found 0 react experiences
2026-01-17T23:27:30.386+08:00  WARN --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testReactExperienceQuery - reason=❌ Ambiguous intent strategy not found
2026-01-17T23:27:30.386+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#run - reason=Experience module validation completed
2026-01-17T23:28:33.190+08:00  INFO --- [nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-01-17T23:28:33.191+08:00  INFO --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2026-01-17T23:28:33.193+08:00  INFO --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 2 ms
2026-01-17T23:35:19.045+08:00  INFO --- [nio-8080-exec-2] o.apache.tomcat.util.http.parser.Cookie  : A cookie header was received [Hm_lvt_b79d8f49e2d38b26503b92810b740f45=1767609436,1767669208,1767767035] that contained an invalid cookie. That cookie will be ignored.
 Note: further occurrences of this error will be logged at DEBUG level.
2026-01-17T23:35:19.073+08:00  INFO --- [nio-8080-exec-2] c.a.c.a.a.s.controller.ThreadController  : Request received for POST /apps/research_agent/users/user-001/threads (service generates ID) with state: {}
2026-01-17T23:35:19.075+08:00  INFO --- [nio-8080-exec-2] c.a.c.a.a.s.service.ThreadServiceImpl    : Created thread: ff3f0d7e-bdcc-4cf4-af7d-cbfd9f969f87 for app=research_agent, user=user-001
2026-01-17T23:35:19.075+08:00  INFO --- [nio-8080-exec-2] c.a.c.a.a.s.controller.ThreadController  : Thread created successfully with generated id: ff3f0d7e-bdcc-4cf4-af7d-cbfd9f969f87
2026-01-17T23:35:19.114+08:00  INFO --- [nio-8080-exec-3] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#loadAgent 加载 agent: research_agent
2026-01-17T23:35:19.115+08:00  INFO --- [nio-8080-exec-3] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#loadAgent 成功加载 agent: research_agent
2026-01-17T23:35:19.122+08:00  INFO --- [nio-8080-exec-6] c.a.c.a.a.s.controller.ThreadController  : Request received for GET /apps/research_agent/users/user-001/threads/ff3f0d7e-bdcc-4cf4-af7d-cbfd9f969f87
2026-01-17T23:35:19.173+08:00  INFO --- [nio-8080-exec-3] c.a.a.a.e.e.hook.FastIntentReactHook     : FastIntentReactHook#beforeAgent - reason=try react fast-intent match
2026-01-17T23:35:19.173+08:00 DEBUG --- [nio-8080-exec-3] c.a.a.a.e.e.hook.FastIntentReactHook     : FastIntentReactHook#beforeAgent - reason=fast-intent disabled
2026-01-17T23:35:19.179+08:00 DEBUG --- [nio-8080-exec-3] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#beforeAgent - reason=checking unified intent
2026-01-17T23:35:19.179+08:00 DEBUG --- [nio-8080-exec-3] c.a.a.a.p.i.SemanticActionProvider       : SemanticActionProvider#matchActions - reason=matching actions, userInput=添加单位
2026-01-17T23:35:24.330+08:00 DEBUG --- [nio-8080-exec-3] c.a.a.a.p.v.ActionVectorizationService   : ActionVectorizationService#hybridSearch - actionId=erp:product-unit:create, rawScore=3.4759183, maxScore=3.4759183, normalizedScore=0.95
2026-01-17T23:35:24.354+08:00  INFO --- [nio-8080-exec-3] c.a.a.a.p.i.SemanticActionProvider       : SemanticActionProvider#matchActions - reason=matching completed, userInput=添加单位, matchCount=1
2026-01-17T23:35:24.354+08:00  INFO --- [nio-8080-exec-3] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#beforeAgent - reason=match found, actionId=erp:product-unit:create, confidence=0.95, matchType=KEYWORD_EXACT
2026-01-17T23:35:24.364+08:00 DEBUG --- [nio-8080-exec-3] .s.p.e.p.ElasticsearchExperienceProvider : ElasticsearchExperienceProvider#query - reason=query completed, type=REACT, text=null, count=0
2026-01-17T23:35:24.364+08:00  INFO --- [nio-8080-exec-3] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handleHighConfidence - reason=no experience, using Planning direct execution, actionId=erp:product-unit:create
2026-01-17T23:35:24.364+08:00  INFO --- [nio-8080-exec-3] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handlePlanningDirectExecution - reason=direct execution, actionId=erp:product-unit:create
2026-01-17T23:35:24.368+08:00 DEBUG --- [nio-8080-exec-3] c.a.a.a.p.internal.DefaultPlanGenerator  : DefaultPlanGenerator#generate - reason=generating plan, actionId=erp:product-unit:create, actionName=添加产品单位
2026-01-17T23:35:24.368+08:00  INFO --- [nio-8080-exec-3] c.a.a.a.p.internal.DefaultPlanGenerator  : DefaultPlanGenerator#generate - reason=plan generated, planId=7a8b4b5f-a378-454e-a336-af9e84f637b5, stepCount=1
2026-01-17T23:35:24.368+08:00  INFO --- [nio-8080-exec-3] c.a.a.a.p.internal.DefaultPlanExecutor   : DefaultPlanExecutor#execute - reason=starting plan execution, planId=7a8b4b5f-a378-454e-a336-af9e84f637b5, actionId=erp:product-unit:create
2026-01-17T23:35:24.368+08:00 DEBUG --- [nio-8080-exec-3] c.a.a.a.p.internal.DefaultPlanExecutor   : DefaultPlanExecutor#executeSteps - reason=executing step, planId=7a8b4b5f-a378-454e-a336-af9e84f637b5, stepId=execute, stepIndex=0
2026-01-17T23:35:24.368+08:00 DEBUG --- [nio-8080-exec-3] c.a.a.a.p.i.e.ApiCallStepExecutor        : AbstractStepExecutor#execute - reason=executing step, stepId=execute, type=API_CALL
2026-01-17T23:35:24.368+08:00 DEBUG --- [nio-8080-exec-3] c.a.a.a.p.i.e.ApiCallStepExecutor        : ApiCallStepExecutor#doExecute - reason=executing API call step, stepId=execute
2026-01-17T23:35:24.368+08:00  INFO --- [nio-8080-exec-3] c.a.a.a.p.i.e.ApiCallStepExecutor        : ApiCallStepExecutor#doExecute - reason=calling API, url=https://api.simplify.devefive.com/admin-api/erp/product-unit/create, method=POST
2026-01-17T23:35:26.504+08:00  INFO --- [nio-8080-exec-3] c.a.a.a.p.internal.DefaultPlanExecutor   : DefaultPlanExecutor#execute - reason=plan completed, planId=7a8b4b5f-a378-454e-a336-af9e84f637b5, stepCount=1
2026-01-17T23:35:26.505+08:00  INFO --- [nio-8080-exec-3] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handlePlanningDirectExecution - reason=execution completed, planId=7a8b4b5f-a378-454e-a336-af9e84f637b5, success=true
2026-01-17T23:35:26.524+08:00  INFO --- [nio-8080-exec-3] c.a.a.a.e.l.hook.AfterAgentLearningHook  : AfterAgentLearningHook#afterAgent - reason=agent execution completed, starting learning process
2026-01-17T23:35:26.525+08:00  INFO --- [nio-8080-exec-3] c.a.a.a.e.l.hook.AfterAgentLearningHook  : AfterAgentLearningHook#afterAgent - reason=executing learning asynchronously, taskId=3a1747b3-e3b6-44b6-9cab-d65d125f4b2a
2026-01-17T23:35:26.525+08:00  INFO --- [nio-8080-exec-3] c.a.a.a.e.l.i.DefaultLearningExecutor    : DefaultLearningExecutor#executeAsync - reason=start async execute learning task, taskId=3a1747b3-e3b6-44b6-9cab-d65d125f4b2a, learningType=experience
2026-01-17T23:35:26.525+08:00  INFO --- [earning-async-0] c.a.a.a.e.l.i.DefaultLearningExecutor    : DefaultLearningExecutor#execute - reason=start execute learning task, taskId=3a1747b3-e3b6-44b6-9cab-d65d125f4b2a, learningType=experience
2026-01-17T23:35:26.525+08:00 DEBUG --- [earning-async-0] c.a.a.a.e.l.i.DefaultLearningStrategy    : DefaultLearningStrategy#selectExtractor - reason=extractor found, learningType=experience, extractorClass=ExperienceLearningExtractor
2026-01-17T23:35:28.156+08:00  INFO --- [earning-async-0] .a.a.a.e.l.e.ExperienceLearningExtractor : ExperienceLearningExtractor#llmJudgeWorthLearning - reason=llm answered, answer=NO
2026-01-17T23:35:28.156+08:00  INFO --- [earning-async-0] .a.a.a.e.l.e.ExperienceLearningExtractor : ExperienceLearningExtractor#shouldLearn - reason=llm judgment completed, worthLearning=false, result=false
2026-01-17T23:35:28.156+08:00  INFO --- [earning-async-0] c.a.a.a.e.l.i.DefaultLearningExecutor    : DefaultLearningExecutor#execute - reason=extractor decided not to learn, taskId=3a1747b3-e3b6-44b6-9cab-d65d125f4b2a, learningType=experience
2026-01-17T23:38:01.675+08:00  INFO --- [           main] c.a.a.a.start.AssistantAgentApplication  : Starting AssistantAgentApplication using Java 21.0.9 with PID 19636 (D:\devfive\AssistantAgent\assistant-agent-start\target\classes started by zhou_ in D:\devfive\AssistantAgent\assistant-agent-start)
2026-01-17T23:38:01.676+08:00 DEBUG --- [           main] c.a.a.a.start.AssistantAgentApplication  : Running with Spring Boot v3.4.8, Spring v6.2.9
2026-01-17T23:38:01.677+08:00  INFO --- [           main] c.a.a.a.start.AssistantAgentApplication  : No active profile set, falling back to 1 default profile: "default"
2026-01-17T23:38:02.918+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Elasticsearch repositories in DEFAULT mode.
2026-01-17T23:38:02.949+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 23 ms. Found 0 Elasticsearch repository interfaces.
2026-01-17T23:38:02.954+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Reactive Elasticsearch repositories in DEFAULT mode.
2026-01-17T23:38:02.966+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 6 ms. Found 0 Reactive Elasticsearch repository interfaces.
2026-01-17T23:38:04.143+08:00  INFO --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2026-01-17T23:38:04.164+08:00  INFO --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2026-01-17T23:38:04.164+08:00  INFO --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.43]
2026-01-17T23:38:04.260+08:00  INFO --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2026-01-17T23:38:04.260+08:00  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2525 ms
2026-01-17T23:38:04.322+08:00  INFO --- [           main] e.l.c.LearningExtensionAutoConfiguration : LearningExtensionAutoConfiguration#constructor - reason=learning extension auto-configuration initialized
2026-01-17T23:38:04.342+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#init - reason=search extension framework is enabled
2026-01-17T23:38:04.343+08:00  INFO --- [           main] c.a.a.a.s.s.MockBaiduWebSearchProvider   : MockBaiduWebSearchProvider#init - reason=使用简单模式初始化
2026-01-17T23:38:04.345+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#unifiedSearchCodeactTool - reason=创建统一搜索工具, providerCount=3
2026-01-17T23:38:04.399+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#init - reason=planning extension is enabled
2026-01-17T23:38:04.402+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#init - reason=ES configuration class loaded (elasticsearch.enabled=true)
2026-01-17T23:38:04.402+08:00  INFO --- [           main] toConfiguration$MybatisPlusConfiguration : MybatisPlusConfiguration#init - reason=MySQL configuration class loaded (mysql.enabled=true, MyBatisPlus present)
2026-01-17T23:38:04.698+08:00  INFO --- [           main] toConfiguration$MybatisPlusConfiguration : MybatisPlusConfiguration#actionEntityConverter - reason=creating entity converter
2026-01-17T23:38:04.700+08:00  INFO --- [           main] toConfiguration$MybatisPlusConfiguration : MybatisPlusConfiguration#mybatisPlusActionRepository - reason=ActionRegistryMapper found, creating MySQL repository
2026-01-17T23:38:05.151+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#actionVectorizationService - reason=creating ES vectorization service
2026-01-17T23:38:05.216+08:00  INFO --- [           main] c.a.a.a.p.v.ActionVectorizationService   : ActionVectorizationService#init - reason=ES index initialized on startup
2026-01-17T23:38:05.231+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#semanticActionProvider - reason=creating semantic action provider, semanticWeight=0.6, keywordWeight=0.4, matchThreshold=0.5
2026-01-17T23:38:05.239+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#defaultPlanGenerator - reason=creating default plan generator
2026-01-17T23:38:05.242+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#planActionCodeactTool - reason=creating plan_action tool
2026-01-17T23:38:05.242+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#queryStepExecutor - reason=creating query step executor
2026-01-17T23:38:05.242+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#inputStepExecutor - reason=creating input step executor
2026-01-17T23:38:05.247+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#executeStepExecutor - reason=creating execute step executor
2026-01-17T23:38:05.247+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#apiCallStepExecutor - reason=creating api call step executor
2026-01-17T23:38:05.253+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#validationStepExecutor - reason=creating validation step executor
2026-01-17T23:38:05.253+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#stepExecutorRegistry - reason=creating executor registry, executorCount=5
2026-01-17T23:38:05.257+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=QUERY, executorClass=QueryStepExecutor
2026-01-17T23:38:05.257+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=INPUT, executorClass=InputStepExecutor
2026-01-17T23:38:05.257+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=EXECUTE, executorClass=ExecuteStepExecutor
2026-01-17T23:38:05.257+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=API_CALL, executorClass=ApiCallStepExecutor
2026-01-17T23:38:05.257+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=VALIDATION, executorClass=ValidationStepExecutor
2026-01-17T23:38:05.257+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#defaultPlanExecutor - reason=creating default plan executor
2026-01-17T23:38:05.257+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#executeActionCodeactTool - reason=creating execute_action tool
2026-01-17T23:38:05.257+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#listActionsCodeactTool - reason=creating list_actions tool
2026-01-17T23:38:05.257+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#getActionDetailsCodeactTool - reason=creating get_action_details tool
2026-01-17T23:38:05.332+08:00  INFO --- [           main] e.l.c.LearningExtensionAutoConfiguration : LearningExtensionAutoConfiguration#experienceLearningExtractor - reason=creating LLM-based experience learning extractor
2026-01-17T23:38:05.332+08:00  INFO --- [           main] .a.a.a.e.l.e.ExperienceLearningExtractor : ExperienceLearningExtractor#constructor - reason=LLM-based extractor initialized
2026-01-17T23:38:05.335+08:00  INFO --- [           main] e.l.c.LearningExtensionAutoConfiguration : LearningExtensionAutoConfiguration#inMemoryLearningRepository - reason=creating in-memory learning repository
2026-01-17T23:38:05.335+08:00  INFO --- [           main] c.a.a.a.start.config.PersistenceConfig   : PersistenceConfig#init - reason=persistence configuration loaded
2026-01-17T23:38:05.340+08:00  INFO --- [           main] c.a.a.a.start.config.PersistenceConfig   : PersistenceConfig#elasticsearchExperienceRepository - reason=creating Elasticsearch experience repository (PRIMARY), indexName=experiences
2026-01-17T23:38:05.347+08:00  INFO --- [           main] e.l.c.LearningExtensionAutoConfiguration : LearningExtensionAutoConfiguration#experienceLearningRepository - reason=creating experience learning repository
2026-01-17T23:38:05.356+08:00  INFO --- [           main] e.l.c.LearningExtensionAutoConfiguration : LearningExtensionAutoConfiguration#learningStrategy - reason=creating learning strategy, asyncEnabled=true
2026-01-17T23:38:05.356+08:00  INFO --- [           main] e.l.c.LearningExtensionAutoConfiguration : LearningExtensionAutoConfiguration#asyncLearningHandler - reason=creating async learning handler, threadPoolSize=2, queueCapacity=100
2026-01-17T23:38:05.356+08:00  INFO --- [           main] c.a.a.a.e.l.i.AsyncLearningHandler       : AsyncLearningHandler#constructor - reason=async learning handler initialized, threadPoolSize=2, queueCapacity=100
2026-01-17T23:38:05.356+08:00  INFO --- [           main] e.l.c.LearningExtensionAutoConfiguration : LearningExtensionAutoConfiguration#learningExecutor - reason=creating learning executor, extractorCount=1, repositoryCount=2
2026-01-17T23:38:05.361+08:00  INFO --- [           main] e.l.c.LearningExtensionAutoConfiguration : LearningExtensionAutoConfiguration#afterAgentLearningHook - reason=creating after agent learning hook, learningType=experience
2026-01-17T23:38:05.361+08:00  INFO --- [           main] c.a.a.a.start.config.PersistenceConfig   : PersistenceConfig#elasticsearchExperienceProvider - reason=creating Elasticsearch experience provider (PRIMARY), indexName=experiences
2026-01-17T23:38:05.377+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#<init> - reason=初始化默认评估套件配置, experienceProviderAvailable=true
2026-01-17T23:38:05.381+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#evaluatorRegistry - reason=创建 EvaluatorRegistry Bean
2026-01-17T23:38:05.381+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'llm-based' of type LLMBasedEvaluator
2026-01-17T23:38:05.382+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'passthrough' of type RuleBasedEvaluator
2026-01-17T23:38:05.384+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'react_experience_evaluator' of type RuleBasedEvaluator
2026-01-17T23:38:05.384+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createDefaultEvaluatorRegistry - reason=注册 React 阶段经验检索评估器
2026-01-17T23:38:05.384+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'codeact_experience_evaluator' of type RuleBasedEvaluator
2026-01-17T23:38:05.384+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createDefaultEvaluatorRegistry - reason=注册 CodeAct 阶段经验检索评估器
2026-01-17T23:38:05.384+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#evaluationService - reason=创建默认 EvaluationService, sharedRegistryEvaluators=[llm-based, passthrough, codeact_experience_evaluator, react_experience_evaluator]
2026-01-17T23:38:05.387+08:00 DEBUG --- [           main] c.a.a.a.e.e.GraphBasedEvaluationExecutor : Created default ExecutorService for batch processing
2026-01-17T23:38:05.387+08:00  INFO --- [           main] .c.ExperienceEvaluationCriterionProvider : ExperienceEvaluationCriterionProvider#<init> - reason=初始化经验评估 Criterion 提供者
2026-01-17T23:38:05.389+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#structuredParamExtractor - reason=creating structured param extractor
2026-01-17T23:38:05.398+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#parameterValidator - reason=creating parameter validator
2026-01-17T23:38:05.400+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#restTemplate - reason=creating RestTemplate bean
2026-01-17T23:38:05.403+08:00  INFO --- [           main] c.a.a.a.planning.executor.HttpExecutor   : HttpExecutor#init - initialized
2026-01-17T23:38:05.403+08:00  INFO --- [           main] c.a.a.a.p.executor.InternalExecutor      : InternalExecutor#init - initialized
2026-01-17T23:38:05.403+08:00  INFO --- [           main] c.a.a.a.p.e.ActionExecutorFactory        : ActionExecutorFactory#init - initialized executors: INTERNAL(InternalExecutor), HTTP(HttpExecutor), DATA_AGENT(DataAgentExecutor), MCP(McpExecutor)
2026-01-17T23:38:05.403+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#sessionProvider - reason=creating in-memory session provider
2026-01-17T23:38:05.408+08:00  INFO --- [           main] c.a.a.a.p.s.InMemorySessionProvider      : InMemorySessionProvider#init - initialized
2026-01-17T23:38:05.408+08:00  INFO --- [           main] c.a.a.a.p.s.ParamCollectionService       : ParamCollectionService#init - sessionProvider=InMemory
2026-01-17T23:38:05.408+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'action_intent_evaluator' of type ActionIntentEvaluator
2026-01-17T23:38:05.408+08:00  INFO --- [           main] p.i.PlanningIntegrationAutoConfiguration : PlanningIntegrationAutoConfiguration#actionIntentEvaluator - initialized and registered, paramCollection=true, llmVerification=true, maxCandidates=5
2026-01-17T23:38:05.408+08:00  INFO --- [           main] .p.i.PlanningEvaluationCriterionProvider : PlanningEvaluationCriterionProvider#init - initialized, llmVerificationEnabled=true
2026-01-17T23:38:05.408+08:00  INFO --- [           main] p.i.PlanningIntegrationAutoConfiguration : PlanningIntegrationAutoConfiguration#planningEvaluationCriterionProvider - registered planning evaluation criterion provider
2026-01-17T23:38:05.408+08:00  INFO --- [           main] .c.ExperienceEvaluationCriterionProvider : ExperienceEvaluationCriterionProvider#getReactPhaseCriteria - reason=提供 React 阶段评估 Criteria
2026-01-17T23:38:05.413+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createReactPhaseSuite - reason=添加自定义 Criterion, provider=ExperienceEvaluationCriterionProvider, count=3
2026-01-17T23:38:05.413+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createReactPhaseSuite - reason=添加自定义 Criterion, provider=PlanningEvaluationCriterionProvider, count=2
2026-01-17T23:38:05.418+08:00  INFO --- [           main] a.a.e.a.BatchAggregationStrategyRegistry : Registered batch aggregation strategy: ANY_TRUE
2026-01-17T23:38:05.418+08:00  INFO --- [           main] a.a.e.a.BatchAggregationStrategyRegistry : Registered batch aggregation strategy: ALL_TRUE
2026-01-17T23:38:05.451+08:00  INFO --- [           main] c.a.c.a.g.internal.node.ParallelNode     : Calculated core pool size: 32 (CPU cores: 16)
2026-01-17T23:38:05.451+08:00  INFO --- [           main] c.a.c.a.g.internal.node.ParallelNode     : Calculated maximum pool size: 64 (CPU cores: 16)
2026-01-17T23:38:05.451+08:00  INFO --- [           main] c.a.c.a.g.internal.node.ParallelNode     : Calculated queue capacity: 1000
2026-01-17T23:38:05.451+08:00  INFO --- [           main] c.a.a.a.e.DefaultEvaluationService       : Registered evaluation suite: react-phase-suite
2026-01-17T23:38:05.453+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#evaluationService - reason=注册 React Phase Suite, suiteId=react-phase-suite
2026-01-17T23:38:05.455+08:00  INFO --- [           main] .c.ExperienceEvaluationCriterionProvider : ExperienceEvaluationCriterionProvider#getCodeActPhaseCriteria - reason=提供 CodeAct 阶段评估 Criteria
2026-01-17T23:38:05.455+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createCodeActPhaseSuite - reason=添加自定义 Criterion, provider=ExperienceEvaluationCriterionProvider, count=3
2026-01-17T23:38:05.455+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createCodeActPhaseSuite - reason=添加自定义 Criterion, provider=PlanningEvaluationCriterionProvider, count=2
2026-01-17T23:38:05.455+08:00  INFO --- [           main] a.a.e.a.BatchAggregationStrategyRegistry : Registered batch aggregation strategy: ANY_TRUE
2026-01-17T23:38:05.455+08:00  INFO --- [           main] a.a.e.a.BatchAggregationStrategyRegistry : Registered batch aggregation strategy: ALL_TRUE
2026-01-17T23:38:05.455+08:00  INFO --- [           main] c.a.a.a.e.DefaultEvaluationService       : Registered evaluation suite: codeact-phase-suite
2026-01-17T23:38:05.455+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#evaluationService - reason=注册 CodeAct Phase Suite, suiteId=codeact-phase-suite
2026-01-17T23:38:05.455+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#codeactEvaluationContextFactory - reason=创建 EvaluationContextFactory
2026-01-17T23:38:05.455+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#codeactEvaluationResultAttacher - reason=创建 EvaluationResultAttacher
2026-01-17T23:38:05.460+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#reactPhaseEvaluationHooks - reason=创建 React Phase ModelInputEvaluationHook
2026-01-17T23:38:05.460+08:00  INFO --- [           main] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#<init> - reason=初始化, phase=REACT, providerCount=1
2026-01-17T23:38:05.460+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#reactPhaseEvaluationHooks - reason=创建 React Phase EvaluationPromptInjectionHook, providersCount=2
2026-01-17T23:38:05.465+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#codeactPhaseEvaluationHooks - reason=创建 CodeAct Phase ModelInputEvaluationHook
2026-01-17T23:38:05.465+08:00  INFO --- [           main] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#<init> - reason=初始化, phase=CODEACT, providerCount=1
2026-01-17T23:38:05.465+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#codeactPhaseEvaluationHooks - reason=创建 CodeAct Phase EvaluationPromptInjectionHook, providersCount=2
2026-01-17T23:38:05.469+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#keywordMatcher - reason=creating keyword matcher
2026-01-17T23:38:05.472+08:00  INFO --- [           main] iguration$UnifiedIntentHookConfiguration : UnifiedIntentHookConfiguration#unifiedIntentRecognitionHook - reason=creating unified intent hook, experienceProviderPresent=true, directExecuteThreshold=0.95, hintThreshold=0.5
2026-01-17T23:38:05.580+08:00  INFO --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2026-01-17T23:38:05.785+08:00  INFO --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@52a2e2fb
2026-01-17T23:38:05.785+08:00  INFO --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2026-01-17T23:38:05.935+08:00 DEBUG --- [           main] c.a.a.a.planning.intent.KeywordMatcher   : KeywordMatcher#registerAction - actionId=erp:product-unit:create, keywords=18
2026-01-17T23:38:05.935+08:00  INFO --- [           main] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#initKeywordMatcher - reason=initialized, actionCount=1, keywordIndexSize=18
2026-01-17T23:38:05.935+08:00  INFO --- [           main] p.i.PlanningIntegrationAutoConfiguration : PlanningIntegrationAutoConfiguration#paramCollectionResponseHook - initialized, enabled=true
2026-01-17T23:38:05.940+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#init - reason=reply module enabled
2026-01-17T23:38:05.940+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactToolFactory - reason=创建CodeactTool工厂, channels=1
2026-01-17T23:38:05.940+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#init - reason=工厂初始化完成, channels=1
2026-01-17T23:38:05.950+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=开始创建Reply工具
2026-01-17T23:38:05.956+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#createTools - reason=创建工具成功, toolName=send_success_message, channelCode=IDE_TEXT
2026-01-17T23:38:05.956+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#createTools - reason=创建工具成功, toolName=send_error_message, channelCode=IDE_TEXT
2026-01-17T23:38:05.956+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#createTools - reason=创建工具成功, toolName=send_notification, channelCode=IDE_TEXT
2026-01-17T23:38:05.956+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#createTools - reason=工具创建完成, totalCount=3
2026-01-17T23:38:05.956+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=Reply工具创建完成, count=3
2026-01-17T23:38:05.956+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=创建Reply工具, index=1, name=send_success_message, description=Send a success message to the IDE console
2026-01-17T23:38:05.956+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=创建Reply工具, index=2, name=send_error_message, description=Send an error message to the IDE console
2026-01-17T23:38:05.956+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=创建Reply工具, index=3, name=send_notification, description=Send a notification message
2026-01-17T23:38:05.956+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactToolFactory - reason=创建SearchCodeactTool工厂, providerCount=3
2026-01-17T23:38:05.971+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactToolFactory - reason=创建TriggerCodeactTool工厂
2026-01-17T23:38:05.971+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=开始创建Trigger工具
2026-01-17T23:38:05.971+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=创建SubscribeTriggerCodeactTool成功
2026-01-17T23:38:05.976+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=创建UnsubscribeTriggerCodeactTool成功
2026-01-17T23:38:05.976+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=创建ListTriggersCodeactTool成功
2026-01-17T23:38:05.981+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=创建GetTriggerDetailCodeactTool成功
2026-01-17T23:38:05.981+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=触发器工具创建完成, count=4
2026-01-17T23:38:05.981+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=Trigger工具创建完成, count=4
2026-01-17T23:38:05.981+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=创建Trigger工具, index=1, name=subscribe_trigger, description=创建并订阅一个新的触发器
2026-01-17T23:38:05.981+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=创建Trigger工具, index=2, name=unsubscribe_trigger, description=取消订阅并删除一个触发器
2026-01-17T23:38:05.981+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=创建Trigger工具, index=3, name=list_triggers, description=列出所有触发器
2026-01-17T23:38:05.981+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=创建Trigger工具, index=4, name=get_trigger_detail, description=获取指定触发器的详细信息
2026-01-17T23:38:05.992+08:00  INFO --- [           main] e.c.ExperienceExtensionAutoConfiguration : ExperienceExtensionAutoConfiguration#fastIntentService - reason=creating FastIntentService, extraMatchers=0
2026-01-17T23:38:05.997+08:00  INFO --- [           main] e.c.ExperienceExtensionAutoConfiguration : ExperienceExtensionAutoConfiguration#fastIntentReactHook - reason=creating fast intent react hook bean
2026-01-17T23:38:06.004+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=创建 CodeactAgent
2026-01-17T23:38:06.005+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=配置 MemorySaver 以支持多轮对话上下文保持
2026-01-17T23:38:06.005+08:00  WARN --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=临时禁用 streaming 模式以排查循环问题
2026-01-17T23:38:06.005+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加UnifiedSearchCodeactTool
2026-01-17T23:38:06.008+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockBaiduWebSearchProvider, toolName=search_web
2026-01-17T23:38:06.009+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockKnowledgeStoreSearchProvider, toolName=search_knowledge
2026-01-17T23:38:06.010+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockProjectContextSearchProvider, toolName=search_project
2026-01-17T23:38:06.011+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=搜索工具创建完成, totalCount=3
2026-01-17T23:38:06.011+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加SearchCodeactTools, count=3
2026-01-17T23:38:06.011+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加ReplyCodeactTools, count=3
2026-01-17T23:38:06.011+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加TriggerCodeactTools, count=4
2026-01-17T23:38:06.011+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#createMcpDynamicTools - reason=Creating MCP dynamic tools
2026-01-17T23:38:06.013+08:00  INFO --- [           main] c.a.a.a.e.d.mcp.McpDynamicToolFactory    : McpDynamicToolFactory#createTools - reason=开始创建MCP动态工具
2026-01-17T23:38:06.015+08:00  INFO --- [           main] c.a.a.a.e.d.mcp.McpDynamicToolFactory    : McpDynamicToolFactory#createTools - reason=无可用的MCP工具
2026-01-17T23:38:06.015+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#createMcpDynamicTools - reason=MCP dynamic tools created, count=0
2026-01-17T23:38:06.015+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=Added MCP dynamic tools, count=0
2026-01-17T23:38:06.015+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#createHttpDynamicTools - reason=HTTP dynamic tools disabled by default
2026-01-17T23:38:06.015+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=合并后CodeactTool总数, count=11
2026-01-17T23:38:06.015+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=React阶段使用内置工具(write_code, execute_code, write_condition_code)
2026-01-17T23:38:06.015+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=注入 React Phase 评估 Hooks, count=2
2026-01-17T23:38:06.015+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=注入 CodeAct Phase 评估 Hooks, count=2
2026-01-17T23:38:06.015+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=已准备注入AfterAgentLearningHook
2026-01-17T23:38:06.015+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=已准备注入FastIntentReactHook
2026-01-17T23:38:06.015+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=已准备注入UnifiedIntentRecognitionHook
2026-01-17T23:38:06.015+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=已准备注入ParamCollectionResponseHook
2026-01-17T23:38:06.017+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 开始构建CodeactAgent
2026-01-17T23:38:06.018+08:00  INFO --- [           main] .a.a.a.c.t.s.DefaultReturnSchemaRegistry : DefaultReturnSchemaRegistry#<init> - reason=创建新实例, hashCode=437475
2026-01-17T23:38:06.018+08:00 DEBUG --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#<init> - reason=创建注册表, returnSchemaRegistry=DefaultReturnSchemaRegistry
2026-01-17T23:38:06.018+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=创建默认CodeactToolRegistry
2026-01-17T23:38:06.018+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=开始注册CodeactTool, count=11
2026-01-17T23:38:06.018+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=unified_search
2026-01-17T23:38:06.018+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=unified_search
2026-01-17T23:38:06.018+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=search_web
2026-01-17T23:38:06.018+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=search_web
2026-01-17T23:38:06.018+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=search_knowledge
2026-01-17T23:38:06.018+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=search_knowledge
2026-01-17T23:38:06.018+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=search_project
2026-01-17T23:38:06.018+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=search_project
2026-01-17T23:38:06.018+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=send_success_message
2026-01-17T23:38:06.018+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=send_success_message
2026-01-17T23:38:06.018+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=send_error_message
2026-01-17T23:38:06.018+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=send_error_message
2026-01-17T23:38:06.018+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=send_notification
2026-01-17T23:38:06.018+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=send_notification
2026-01-17T23:38:06.018+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=subscribe_trigger
2026-01-17T23:38:06.018+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=subscribe_trigger
2026-01-17T23:38:06.018+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=unsubscribe_trigger
2026-01-17T23:38:06.018+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=unsubscribe_trigger
2026-01-17T23:38:06.018+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=list_triggers
2026-01-17T23:38:06.018+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=list_triggers
2026-01-17T23:38:06.018+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=get_trigger_detail
2026-01-17T23:38:06.018+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=get_trigger_detail
2026-01-17T23:38:06.018+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册完成, count=11
2026-01-17T23:38:06.018+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 创建默认CodeContext: language=PYTHON
2026-01-17T23:38:06.022+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 创建默认RuntimeEnvironmentManager: language=PYTHON
2026-01-17T23:38:06.022+08:00 DEBUG --- [           main] c.a.a.a.c.e.bridge.AgentToolBridge       : AgentToolBridge#<init> 初始化: 注册了0个工具
2026-01-17T23:38:06.022+08:00 DEBUG --- [           main] c.a.a.a.c.executor.bridge.StateBridge    : StateBridge#<init> 初始化完成
2026-01-17T23:38:06.022+08:00  INFO --- [           main] c.a.a.a.core.executor.GraalCodeExecutor  : GraalCodeExecutor#<init> 初始化完成: language=PYTHON, allowIO=false, timeout=30000ms, executableTools=true, customBridgeFactory=false
2026-01-17T23:38:06.022+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#createCodeactSubAgentInterceptor 创建子Agent拦截器
2026-01-17T23:38:06.027+08:00  INFO --- [           main] c.a.a.a.a.subagent.CodeactSubAgent       : CodeactSubAgent#<init> 初始化: name=code-generator
2026-01-17T23:38:06.027+08:00  INFO --- [           main] c.a.a.a.a.subagent.CodeactSubAgent       : CodeactSubAgent#<init> 初始化: name=condition-code-generator
2026-01-17T23:38:06.027+08:00  INFO --- [           main] c.a.a.a.a.s.CodeactSubAgentInterceptor   : CodeactSubAgentInterceptor#<init> 创建默认代码生成子Agent
2026-01-17T23:38:06.158+08:00  INFO --- [           main] c.a.a.a.a.s.CodeactSubAgentInterceptor   : CodeactSubAgentInterceptor#<init> 初始化完成: subAgentCount=2
2026-01-17T23:38:06.158+08:00  INFO --- [           main] c.a.a.a.a.tools.ExecuteCodeTool          : ExecuteCodeTool#<init> 初始化完成
2026-01-17T23:38:06.162+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 拦截器分类完成: modelInterceptors=1, toolInterceptors=0
2026-01-17T23:38:06.162+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 从拦截器提取工具: interceptor=CodeactSubAgent, toolCount=2
2026-01-17T23:38:06.174+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 工具收集完成: interceptorTools=2, regularTools=3, total=6
2026-01-17T23:38:06.174+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 设置ModelInterceptors到LlmNode: count=1
2026-01-17T23:38:06.177+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build CodeactAgent构建完成
2026-01-17T23:38:06.178+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=开始罗列已注册的工具
2026-01-17T23:38:06.178+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct阶段工具数量, count=11
2026-01-17T23:38:06.178+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=1, name=unified_search, description=统一搜索工具，可同时搜索项目、知识库、Web等多个数据源
2026-01-17T23:38:06.178+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=2, name=search_knowledge, description=搜索团队知识库，包括FAQ、规范、最佳实践等
2026-01-17T23:38:06.178+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=3, name=send_success_message, description=Send a success message to the IDE console
2026-01-17T23:38:06.178+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=4, name=search_web, description=执行Web搜索，获取公开互联网信息
2026-01-17T23:38:06.178+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=5, name=unsubscribe_trigger, description=取消订阅并删除一个触发器
2026-01-17T23:38:06.178+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=6, name=get_trigger_detail, description=获取指定触发器的详细信息
2026-01-17T23:38:06.178+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=7, name=send_error_message, description=Send an error message to the IDE console
2026-01-17T23:38:06.178+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=8, name=search_project, description=搜索项目上下文信息，包括代码、配置、文档等
2026-01-17T23:38:06.178+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=9, name=send_notification, description=Send a notification message
2026-01-17T23:38:06.178+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=10, name=subscribe_trigger, description=创建并订阅一个新的触发器
2026-01-17T23:38:06.178+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=11, name=list_triggers, description=列出所有触发器
2026-01-17T23:38:06.178+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React阶段工具数量, count=6
2026-01-17T23:38:06.178+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=1, name=write_code, description=Generate and register a new function with specified name and parameters. IMPORTANT: You MUST provide both 'functionName' and 'parameters' fields. Example: write_code(requirement='calculate sum', functionName='calculate_sum', parameters=['a', 'b'])
2026-01-17T23:38:06.178+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=2, name=write_condition_code, description=Generate and register a condition check function for triggers. This function MUST return a boolean value (True/False). Example: write_condition_code(requirement='check if it is a working day', functionName='check_is_working_day', parameters=['date'])
2026-01-17T23:38:06.178+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=3, name=send_success_message, description=Send a success message to the IDE console
2026-01-17T23:38:06.178+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=4, name=send_error_message, description=Send an error message to the IDE console
2026-01-17T23:38:06.178+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=5, name=send_notification, description=Send a notification message
2026-01-17T23:38:06.178+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=6, name=execute_code, description=Execute a previously generated function by its exact name with matching parameters. CRITICAL: The functionName MUST exactly match the name used in write_code. The 'args' parameter names MUST exactly match the 'parameters' specified in write_code. Example: If you called write_code with functionName='calculate_sum' and parameters=['a', 'b'], then you must call execute_code with functionName='calculate_sum' and args={'a': 10, 'b': 20}. Parameter value types supported: String, Number, Boolean, List, Map/Object.
2026-01-17T23:38:06.178+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=工具罗列完成
2026-01-17T23:38:06.179+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgent#<init> 初始化完成: language=PYTHON
2026-01-17T23:38:06.182+08:00  INFO --- [           main] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#<init> 初始化 Agent 加载器
2026-01-17T23:38:06.194+08:00 DEBUG --- [           main] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#<init> Agent 图结构:
@startuml CodeactAgent
skinparam usecaseFontSize 14
skinparam usecaseStereotypeFontSize 12
skinparam hexagonFontSize 14
skinparam hexagonStereotypeFontSize 12
title "CodeactAgent"
footer

powered by spring-ai-alibaba
end footer
circle start<<input>> as __START__
circle stop as __END__
usecase "_AGENT_MODEL_"<<Node>>
usecase "_AGENT_TOOL_"<<Node>>
usecase "_AGENT_HOOK_FastIntentReactHook.before"<<Node>>
usecase "_AGENT_HOOK_UnifiedIntentRecognitionHook.before"<<Node>>
usecase "_AGENT_HOOK_ParamCollectionResponseHook.before"<<Node>>
usecase "_AGENT_HOOK_AfterAgentLearningHook.after"<<Node>>
usecase "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"<<Node>>
usecase "_AGENT_HOOK_EvaluationPromptInjectionHook-REACT.beforeModel"<<Node>>
hexagon "check state" as condition1<<Condition>>
hexagon "check state" as condition2<<Condition>>
hexagon "check state" as condition3<<Condition>>
hexagon "check state" as condition4<<Condition>>
hexagon "check state" as condition5<<Condition>>
"__START__" -down-> "_AGENT_HOOK_FastIntentReactHook.before"
"_AGENT_HOOK_FastIntentReactHook.before" .down.> "condition1"
"condition1" .down.> "_AGENT_TOOL_"
'"_AGENT_HOOK_FastIntentReactHook.before" .down.> "_AGENT_TOOL_"
"condition1" .down.> "_AGENT_HOOK_UnifiedIntentRecognitionHook.before"
'"_AGENT_HOOK_FastIntentReactHook.before" .down.> "_AGENT_HOOK_UnifiedIntentRecognitionHook.before"
"_AGENT_HOOK_UnifiedIntentRecognitionHook.before" .down.> "condition2"
"condition2" .down.> "_AGENT_HOOK_AfterAgentLearningHook.after"
'"_AGENT_HOOK_UnifiedIntentRecognitionHook.before" .down.> "_AGENT_HOOK_AfterAgentLearningHook.after"
"condition2" .down.> "_AGENT_TOOL_"
'"_AGENT_HOOK_UnifiedIntentRecognitionHook.before" .down.> "_AGENT_TOOL_"
"condition2" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
'"_AGENT_HOOK_UnifiedIntentRecognitionHook.before" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
"condition2" .down.> "_AGENT_HOOK_ParamCollectionResponseHook.before"
'"_AGENT_HOOK_UnifiedIntentRecognitionHook.before" .down.> "_AGENT_HOOK_ParamCollectionResponseHook.before"
"_AGENT_HOOK_ParamCollectionResponseHook.before" .down.> "condition3"
"condition3" .down.> "_AGENT_HOOK_AfterAgentLearningHook.after"
'"_AGENT_HOOK_ParamCollectionResponseHook.before" .down.> "_AGENT_HOOK_AfterAgentLearningHook.after"
"condition3" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
'"_AGENT_HOOK_ParamCollectionResponseHook.before" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
"_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel" -down-> "_AGENT_HOOK_EvaluationPromptInjectionHook-REACT.beforeModel"
"_AGENT_HOOK_EvaluationPromptInjectionHook-REACT.beforeModel" -down-> "_AGENT_MODEL_"
"_AGENT_HOOK_AfterAgentLearningHook.after" -down-> "__END__"
"_AGENT_MODEL_" .down.> "condition4"
"condition4" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
'"_AGENT_MODEL_" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
"condition4" .down.> "_AGENT_HOOK_AfterAgentLearningHook.after"
'"_AGENT_MODEL_" .down.> "_AGENT_HOOK_AfterAgentLearningHook.after"
"condition4" .down.> "_AGENT_TOOL_"
'"_AGENT_MODEL_" .down.> "_AGENT_TOOL_"
"_AGENT_TOOL_" .down.> "condition5"
"condition5" .down.> "_AGENT_HOOK_AfterAgentLearningHook.after"
'"_AGENT_TOOL_" .down.> "_AGENT_HOOK_AfterAgentLearningHook.after"
"condition5" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
'"_AGENT_TOOL_" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
@enduml

2026-01-17T23:38:06.194+08:00  INFO --- [           main] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#<init> 已注册 agent: grayscale_agent
2026-01-17T23:38:06.204+08:00 DEBUG --- [           main] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#listAgents 列出所有 agent
2026-01-17T23:38:06.204+08:00  INFO --- [           main] c.a.c.a.a.s.controller.AgentController   : AgentController initialized with 1 dynamic agents: [grayscale_agent]
2026-01-17T23:38:06.219+08:00  INFO --- [           main] e.e.c.CodeactEvaluationAutoConfiguration : CodeactEvaluationAutoConfiguration#inputRoutingEvaluationHook - reason=创建输入路由评估 Hook
2026-01-17T23:38:06.220+08:00  INFO --- [           main] e.c.ExperienceExtensionAutoConfiguration : ExperienceExtensionAutoConfiguration#codeExperienceModelHook - reason=creating code experience model hook bean
2026-01-17T23:38:06.220+08:00  INFO --- [           main] e.c.ExperienceExtensionAutoConfiguration : ExperienceExtensionAutoConfiguration#reactExperienceAgentHook - reason=creating react experience agent hook bean
2026-01-17T23:38:06.220+08:00  INFO --- [           main] e.c.ExperienceExtensionAutoConfiguration : ExperienceExtensionAutoConfiguration#commonSenseExperienceModelHook - reason=creating common sense prompt model hook bean
2026-01-17T23:38:06.225+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchFacade - reason=creating search facade with 3 providers
2026-01-17T23:38:06.225+08:00  INFO --- [           main] c.a.a.a.e.s.i.DefaultSearchFacade        : DefaultSearchFacade#init - reason=initialized with 3 providers
2026-01-17T23:38:06.225+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=开始创建Search工具
2026-01-17T23:38:06.230+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockBaiduWebSearchProvider, toolName=search_web
2026-01-17T23:38:06.232+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockKnowledgeStoreSearchProvider, toolName=search_knowledge
2026-01-17T23:38:06.235+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockProjectContextSearchProvider, toolName=search_project
2026-01-17T23:38:06.235+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=搜索工具创建完成, totalCount=3
2026-01-17T23:38:06.235+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=Search工具创建完成, count=3
2026-01-17T23:38:06.235+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=创建Search工具, index=1, name=search_web, description=执行Web搜索，获取公开互联网信息
2026-01-17T23:38:06.235+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=创建Search工具, index=2, name=search_knowledge, description=搜索团队知识库，包括FAQ、规范、最佳实践等
2026-01-17T23:38:06.235+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=创建Search工具, index=3, name=search_project, description=搜索项目上下文信息，包括代码、配置、文档等
2026-01-17T23:38:06.235+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#diagnostics - reason=ElasticsearchClient bean found
2026-01-17T23:38:06.235+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#diagnostics - reason=EmbeddingModel bean found
2026-01-17T23:38:06.240+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#diagnostics - Planning module status:
2026-01-17T23:38:06.240+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration :   - ActionRepository: MybatisPlusActionRepository
2026-01-17T23:38:06.240+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration :   - ActionProvider: SemanticActionProvider
2026-01-17T23:38:06.240+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration :   - PlanGenerator: DefaultPlanGenerator
2026-01-17T23:38:06.240+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration :   - PlanExecutor: DefaultPlanExecutor
2026-01-17T23:38:06.240+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#planningCodeactTools - reason=creating planning tools list
2026-01-17T23:38:06.240+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#planningCodeactTools - reason=created planning tools, count=4
2026-01-17T23:38:06.465+08:00  INFO --- [           main] c.a.a.a.c.c.CodeactCoreAutoConfiguration : CodeactCoreAutoConfiguration#returnSchemaRegistry - reason=创建ReturnSchemaRegistry单例Bean
2026-01-17T23:38:06.465+08:00  INFO --- [           main] .a.a.a.c.t.s.DefaultReturnSchemaRegistry : DefaultReturnSchemaRegistry#<init> - reason=创建新实例, hashCode=921270604
2026-01-17T23:38:06.794+08:00  WARN --- [           main] o.s.m.p.s.SyncMcpSamplingProvider        : No sampling methods found
2026-01-17T23:38:06.794+08:00  WARN --- [           main] o.s.m.p.e.SyncMcpElicitationProvider     : No elicitation methods found
2026-01-17T23:38:06.815+08:00  INFO --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2026-01-17T23:38:06.827+08:00  INFO --- [           main] c.a.a.a.start.AssistantAgentApplication  : Started AssistantAgentApplication in 6.017 seconds (process running for 6.602)
2026-01-17T23:38:06.831+08:00  INFO --- [           main] c.a.a.a.s.config.DemoExperienceConfig    : DemoExperienceConfig#run - reason=Initializing Demo Experiences
2026-01-17T23:38:06.831+08:00  INFO --- [           main] c.a.a.a.s.config.DemoExperienceConfig    : DemoExperienceConfig#run - reason=Demo Experiences initialization completed
2026-01-17T23:38:06.831+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#run - reason=Starting experience module validation
2026-01-17T23:38:06.883+08:00 DEBUG --- [           main] .p.e.r.ElasticsearchExperienceRepository : ElasticsearchExperienceRepository#count - reason=count completed, count=0
2026-01-17T23:38:06.901+08:00 DEBUG --- [           main] .p.e.r.ElasticsearchExperienceRepository : ElasticsearchExperienceRepository#countByTypeAndScope - reason=count completed, type=CODE, scope=null, count=0
2026-01-17T23:38:06.906+08:00 DEBUG --- [           main] .p.e.r.ElasticsearchExperienceRepository : ElasticsearchExperienceRepository#countByTypeAndScope - reason=count completed, type=REACT, scope=null, count=0
2026-01-17T23:38:06.916+08:00 DEBUG --- [           main] .p.e.r.ElasticsearchExperienceRepository : ElasticsearchExperienceRepository#countByTypeAndScope - reason=count completed, type=COMMON, scope=null, count=0
2026-01-17T23:38:06.916+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testExperienceCount - reason=Experience stats: total=0, code=0, react=0, common=0
2026-01-17T23:38:06.916+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCommonExperienceQuery - reason=Testing common experience query
2026-01-17T23:38:07.037+08:00 DEBUG --- [           main] .s.p.e.p.ElasticsearchExperienceProvider : ElasticsearchExperienceProvider#query - reason=query completed, type=COMMON, text=null, count=0
2026-01-17T23:38:07.037+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCommonExperienceQuery - reason=Found 0 common experiences
2026-01-17T23:38:07.037+08:00  WARN --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCommonExperienceQuery - reason=❌ MoLiHong identity experience not found
2026-01-17T23:38:07.037+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCodeExperienceQuery - reason=Testing code experience query (demo keyword)
2026-01-17T23:38:07.052+08:00 DEBUG --- [           main] .s.p.e.p.ElasticsearchExperienceProvider : ElasticsearchExperienceProvider#query - reason=query completed, type=CODE, text=null, count=0
2026-01-17T23:38:07.052+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCodeExperienceQuery - reason=Found 0 demo code experiences
2026-01-17T23:38:07.053+08:00  WARN --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCodeExperienceQuery - reason=❌ Demo code experience not found
2026-01-17T23:38:07.053+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testReactExperienceQuery - reason=Testing react experience query
2026-01-17T23:38:07.062+08:00 DEBUG --- [           main] .s.p.e.p.ElasticsearchExperienceProvider : ElasticsearchExperienceProvider#query - reason=query completed, type=REACT, text=null, count=0
2026-01-17T23:38:07.062+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testReactExperienceQuery - reason=Found 0 react experiences
2026-01-17T23:38:07.062+08:00  WARN --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testReactExperienceQuery - reason=❌ Ambiguous intent strategy not found
2026-01-17T23:38:07.062+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#run - reason=Experience module validation completed
2026-01-17T23:43:58.548+08:00  INFO --- [           main] c.a.a.a.start.AssistantAgentApplication  : Starting AssistantAgentApplication using Java 21.0.9 with PID 21600 (D:\devfive\AssistantAgent\assistant-agent-start\target\classes started by zhou_ in D:\devfive\AssistantAgent\assistant-agent-start)
2026-01-17T23:43:58.550+08:00 DEBUG --- [           main] c.a.a.a.start.AssistantAgentApplication  : Running with Spring Boot v3.4.8, Spring v6.2.9
2026-01-17T23:43:58.551+08:00  INFO --- [           main] c.a.a.a.start.AssistantAgentApplication  : No active profile set, falling back to 1 default profile: "default"
2026-01-17T23:44:00.073+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Elasticsearch repositories in DEFAULT mode.
2026-01-17T23:44:00.114+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 30 ms. Found 0 Elasticsearch repository interfaces.
2026-01-17T23:44:00.123+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Reactive Elasticsearch repositories in DEFAULT mode.
2026-01-17T23:44:00.134+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 7 ms. Found 0 Reactive Elasticsearch repository interfaces.
2026-01-17T23:44:01.631+08:00  INFO --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2026-01-17T23:44:01.659+08:00  INFO --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2026-01-17T23:44:01.659+08:00  INFO --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.43]
2026-01-17T23:44:01.786+08:00  INFO --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2026-01-17T23:44:01.786+08:00  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 3178 ms
2026-01-17T23:44:01.867+08:00  INFO --- [           main] e.l.c.LearningExtensionAutoConfiguration : LearningExtensionAutoConfiguration#constructor - reason=learning extension auto-configuration initialized
2026-01-17T23:44:01.884+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#init - reason=search extension framework is enabled
2026-01-17T23:44:01.884+08:00  INFO --- [           main] c.a.a.a.s.s.MockBaiduWebSearchProvider   : MockBaiduWebSearchProvider#init - reason=使用简单模式初始化
2026-01-17T23:44:01.889+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#unifiedSearchCodeactTool - reason=创建统一搜索工具, providerCount=3
2026-01-17T23:44:01.946+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#init - reason=planning extension is enabled
2026-01-17T23:44:01.947+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#init - reason=ES configuration class loaded (elasticsearch.enabled=true)
2026-01-17T23:44:01.947+08:00  INFO --- [           main] toConfiguration$MybatisPlusConfiguration : MybatisPlusConfiguration#init - reason=MySQL configuration class loaded (mysql.enabled=true, MyBatisPlus present)
2026-01-17T23:44:02.334+08:00  INFO --- [           main] toConfiguration$MybatisPlusConfiguration : MybatisPlusConfiguration#actionEntityConverter - reason=creating entity converter
2026-01-17T23:44:02.335+08:00  INFO --- [           main] toConfiguration$MybatisPlusConfiguration : MybatisPlusConfiguration#mybatisPlusActionRepository - reason=ActionRegistryMapper found, creating MySQL repository
2026-01-17T23:44:03.014+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#actionVectorizationService - reason=creating ES vectorization service
2026-01-17T23:44:03.134+08:00  INFO --- [           main] c.a.a.a.p.v.ActionVectorizationService   : ActionVectorizationService#init - reason=ES index initialized on startup
2026-01-17T23:44:03.155+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#semanticActionProvider - reason=creating semantic action provider, semanticWeight=0.6, keywordWeight=0.4, matchThreshold=0.5
2026-01-17T23:44:03.155+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#defaultPlanGenerator - reason=creating default plan generator
2026-01-17T23:44:03.160+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#planActionCodeactTool - reason=creating plan_action tool
2026-01-17T23:44:03.160+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#queryStepExecutor - reason=creating query step executor
2026-01-17T23:44:03.166+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#inputStepExecutor - reason=creating input step executor
2026-01-17T23:44:03.166+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#executeStepExecutor - reason=creating execute step executor
2026-01-17T23:44:03.166+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#apiCallStepExecutor - reason=creating api call step executor
2026-01-17T23:44:03.171+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#validationStepExecutor - reason=creating validation step executor
2026-01-17T23:44:03.177+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#stepExecutorRegistry - reason=creating executor registry, executorCount=5
2026-01-17T23:44:03.179+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=QUERY, executorClass=QueryStepExecutor
2026-01-17T23:44:03.179+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=INPUT, executorClass=InputStepExecutor
2026-01-17T23:44:03.179+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=EXECUTE, executorClass=ExecuteStepExecutor
2026-01-17T23:44:03.179+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=API_CALL, executorClass=ApiCallStepExecutor
2026-01-17T23:44:03.179+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=VALIDATION, executorClass=ValidationStepExecutor
2026-01-17T23:44:03.180+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#defaultPlanExecutor - reason=creating default plan executor
2026-01-17T23:44:03.182+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#executeActionCodeactTool - reason=creating execute_action tool
2026-01-17T23:44:03.183+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#listActionsCodeactTool - reason=creating list_actions tool
2026-01-17T23:44:03.184+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#getActionDetailsCodeactTool - reason=creating get_action_details tool
2026-01-17T23:44:03.257+08:00  INFO --- [           main] e.l.c.LearningExtensionAutoConfiguration : LearningExtensionAutoConfiguration#experienceLearningExtractor - reason=creating LLM-based experience learning extractor
2026-01-17T23:44:03.259+08:00  INFO --- [           main] .a.a.a.e.l.e.ExperienceLearningExtractor : ExperienceLearningExtractor#constructor - reason=LLM-based extractor initialized
2026-01-17T23:44:03.261+08:00  INFO --- [           main] e.l.c.LearningExtensionAutoConfiguration : LearningExtensionAutoConfiguration#inMemoryLearningRepository - reason=creating in-memory learning repository
2026-01-17T23:44:03.262+08:00  INFO --- [           main] c.a.a.a.start.config.PersistenceConfig   : PersistenceConfig#init - reason=persistence configuration loaded
2026-01-17T23:44:03.268+08:00  INFO --- [           main] c.a.a.a.start.config.PersistenceConfig   : PersistenceConfig#elasticsearchExperienceRepository - reason=creating Elasticsearch experience repository (PRIMARY), indexName=experiences
2026-01-17T23:44:03.273+08:00  INFO --- [           main] e.l.c.LearningExtensionAutoConfiguration : LearningExtensionAutoConfiguration#experienceLearningRepository - reason=creating experience learning repository
2026-01-17T23:44:03.284+08:00  INFO --- [           main] e.l.c.LearningExtensionAutoConfiguration : LearningExtensionAutoConfiguration#learningStrategy - reason=creating learning strategy, asyncEnabled=true
2026-01-17T23:44:03.286+08:00  INFO --- [           main] e.l.c.LearningExtensionAutoConfiguration : LearningExtensionAutoConfiguration#asyncLearningHandler - reason=creating async learning handler, threadPoolSize=2, queueCapacity=100
2026-01-17T23:44:03.287+08:00  INFO --- [           main] c.a.a.a.e.l.i.AsyncLearningHandler       : AsyncLearningHandler#constructor - reason=async learning handler initialized, threadPoolSize=2, queueCapacity=100
2026-01-17T23:44:03.288+08:00  INFO --- [           main] e.l.c.LearningExtensionAutoConfiguration : LearningExtensionAutoConfiguration#learningExecutor - reason=creating learning executor, extractorCount=1, repositoryCount=2
2026-01-17T23:44:03.290+08:00  INFO --- [           main] e.l.c.LearningExtensionAutoConfiguration : LearningExtensionAutoConfiguration#afterAgentLearningHook - reason=creating after agent learning hook, learningType=experience
2026-01-17T23:44:03.297+08:00  INFO --- [           main] c.a.a.a.start.config.PersistenceConfig   : PersistenceConfig#elasticsearchExperienceProvider - reason=creating Elasticsearch experience provider (PRIMARY), indexName=experiences
2026-01-17T23:44:03.305+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#<init> - reason=初始化默认评估套件配置, experienceProviderAvailable=true
2026-01-17T23:44:03.306+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#evaluatorRegistry - reason=创建 EvaluatorRegistry Bean
2026-01-17T23:44:03.306+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'llm-based' of type LLMBasedEvaluator
2026-01-17T23:44:03.311+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'passthrough' of type RuleBasedEvaluator
2026-01-17T23:44:03.315+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'react_experience_evaluator' of type RuleBasedEvaluator
2026-01-17T23:44:03.316+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createDefaultEvaluatorRegistry - reason=注册 React 阶段经验检索评估器
2026-01-17T23:44:03.316+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'codeact_experience_evaluator' of type RuleBasedEvaluator
2026-01-17T23:44:03.316+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createDefaultEvaluatorRegistry - reason=注册 CodeAct 阶段经验检索评估器
2026-01-17T23:44:03.317+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#evaluationService - reason=创建默认 EvaluationService, sharedRegistryEvaluators=[llm-based, passthrough, codeact_experience_evaluator, react_experience_evaluator]
2026-01-17T23:44:03.319+08:00 DEBUG --- [           main] c.a.a.a.e.e.GraphBasedEvaluationExecutor : Created default ExecutorService for batch processing
2026-01-17T23:44:03.321+08:00  INFO --- [           main] .c.ExperienceEvaluationCriterionProvider : ExperienceEvaluationCriterionProvider#<init> - reason=初始化经验评估 Criterion 提供者
2026-01-17T23:44:03.324+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#structuredParamExtractor - reason=creating structured param extractor
2026-01-17T23:44:03.336+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#parameterValidator - reason=creating parameter validator
2026-01-17T23:44:03.341+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#restTemplate - reason=creating RestTemplate bean
2026-01-17T23:44:03.348+08:00  INFO --- [           main] c.a.a.a.planning.executor.HttpExecutor   : HttpExecutor#init - initialized
2026-01-17T23:44:03.350+08:00  INFO --- [           main] c.a.a.a.p.executor.InternalExecutor      : InternalExecutor#init - initialized
2026-01-17T23:44:03.353+08:00  INFO --- [           main] c.a.a.a.p.e.ActionExecutorFactory        : ActionExecutorFactory#init - initialized executors: INTERNAL(InternalExecutor), HTTP(HttpExecutor), DATA_AGENT(DataAgentExecutor), MCP(McpExecutor)
2026-01-17T23:44:03.355+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#sessionProvider - reason=creating in-memory session provider
2026-01-17T23:44:03.356+08:00  INFO --- [           main] c.a.a.a.p.s.InMemorySessionProvider      : InMemorySessionProvider#init - initialized
2026-01-17T23:44:03.357+08:00  INFO --- [           main] c.a.a.a.p.s.ParamCollectionService       : ParamCollectionService#init - sessionProvider=InMemory
2026-01-17T23:44:03.360+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'action_intent_evaluator' of type ActionIntentEvaluator
2026-01-17T23:44:03.360+08:00  INFO --- [           main] p.i.PlanningIntegrationAutoConfiguration : PlanningIntegrationAutoConfiguration#actionIntentEvaluator - initialized and registered, paramCollection=true, llmVerification=true, maxCandidates=5
2026-01-17T23:44:03.361+08:00  INFO --- [           main] .p.i.PlanningEvaluationCriterionProvider : PlanningEvaluationCriterionProvider#init - initialized, llmVerificationEnabled=true
2026-01-17T23:44:03.361+08:00  INFO --- [           main] p.i.PlanningIntegrationAutoConfiguration : PlanningIntegrationAutoConfiguration#planningEvaluationCriterionProvider - registered planning evaluation criterion provider
2026-01-17T23:44:03.362+08:00  INFO --- [           main] .c.ExperienceEvaluationCriterionProvider : ExperienceEvaluationCriterionProvider#getReactPhaseCriteria - reason=提供 React 阶段评估 Criteria
2026-01-17T23:44:03.366+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createReactPhaseSuite - reason=添加自定义 Criterion, provider=ExperienceEvaluationCriterionProvider, count=3
2026-01-17T23:44:03.368+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createReactPhaseSuite - reason=添加自定义 Criterion, provider=PlanningEvaluationCriterionProvider, count=2
2026-01-17T23:44:03.371+08:00  INFO --- [           main] a.a.e.a.BatchAggregationStrategyRegistry : Registered batch aggregation strategy: ANY_TRUE
2026-01-17T23:44:03.373+08:00  INFO --- [           main] a.a.e.a.BatchAggregationStrategyRegistry : Registered batch aggregation strategy: ALL_TRUE
2026-01-17T23:44:03.433+08:00  INFO --- [           main] c.a.c.a.g.internal.node.ParallelNode     : Calculated core pool size: 32 (CPU cores: 16)
2026-01-17T23:44:03.433+08:00  INFO --- [           main] c.a.c.a.g.internal.node.ParallelNode     : Calculated maximum pool size: 64 (CPU cores: 16)
2026-01-17T23:44:03.433+08:00  INFO --- [           main] c.a.c.a.g.internal.node.ParallelNode     : Calculated queue capacity: 1000
2026-01-17T23:44:03.433+08:00  INFO --- [           main] c.a.a.a.e.DefaultEvaluationService       : Registered evaluation suite: react-phase-suite
2026-01-17T23:44:03.433+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#evaluationService - reason=注册 React Phase Suite, suiteId=react-phase-suite
2026-01-17T23:44:03.436+08:00  INFO --- [           main] .c.ExperienceEvaluationCriterionProvider : ExperienceEvaluationCriterionProvider#getCodeActPhaseCriteria - reason=提供 CodeAct 阶段评估 Criteria
2026-01-17T23:44:03.436+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createCodeActPhaseSuite - reason=添加自定义 Criterion, provider=ExperienceEvaluationCriterionProvider, count=3
2026-01-17T23:44:03.436+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createCodeActPhaseSuite - reason=添加自定义 Criterion, provider=PlanningEvaluationCriterionProvider, count=2
2026-01-17T23:44:03.436+08:00  INFO --- [           main] a.a.e.a.BatchAggregationStrategyRegistry : Registered batch aggregation strategy: ANY_TRUE
2026-01-17T23:44:03.436+08:00  INFO --- [           main] a.a.e.a.BatchAggregationStrategyRegistry : Registered batch aggregation strategy: ALL_TRUE
2026-01-17T23:44:03.436+08:00  INFO --- [           main] c.a.a.a.e.DefaultEvaluationService       : Registered evaluation suite: codeact-phase-suite
2026-01-17T23:44:03.436+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#evaluationService - reason=注册 CodeAct Phase Suite, suiteId=codeact-phase-suite
2026-01-17T23:44:03.436+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#codeactEvaluationContextFactory - reason=创建 EvaluationContextFactory
2026-01-17T23:44:03.442+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#codeactEvaluationResultAttacher - reason=创建 EvaluationResultAttacher
2026-01-17T23:44:03.447+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#reactPhaseEvaluationHooks - reason=创建 React Phase ModelInputEvaluationHook
2026-01-17T23:44:03.447+08:00  INFO --- [           main] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#<init> - reason=初始化, phase=REACT, providerCount=1
2026-01-17T23:44:03.447+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#reactPhaseEvaluationHooks - reason=创建 React Phase EvaluationPromptInjectionHook, providersCount=2
2026-01-17T23:44:03.452+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#codeactPhaseEvaluationHooks - reason=创建 CodeAct Phase ModelInputEvaluationHook
2026-01-17T23:44:03.452+08:00  INFO --- [           main] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#<init> - reason=初始化, phase=CODEACT, providerCount=1
2026-01-17T23:44:03.452+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#codeactPhaseEvaluationHooks - reason=创建 CodeAct Phase EvaluationPromptInjectionHook, providersCount=2
2026-01-17T23:44:03.452+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#keywordMatcher - reason=creating keyword matcher
2026-01-17T23:44:03.457+08:00  INFO --- [           main] iguration$UnifiedIntentHookConfiguration : UnifiedIntentHookConfiguration#unifiedIntentRecognitionHook - reason=creating unified intent hook, experienceProviderPresent=true, directExecuteThreshold=0.95, hintThreshold=0.5
2026-01-17T23:44:03.607+08:00  INFO --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2026-01-17T23:44:03.892+08:00  INFO --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@52a2e2fb
2026-01-17T23:44:03.895+08:00  INFO --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2026-01-17T23:44:04.093+08:00 DEBUG --- [           main] c.a.a.a.planning.intent.KeywordMatcher   : KeywordMatcher#registerAction - actionId=erp:product-unit:create, keywords=18
2026-01-17T23:44:04.093+08:00  INFO --- [           main] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#initKeywordMatcher - reason=initialized, actionCount=1, keywordIndexSize=18
2026-01-17T23:44:04.095+08:00  INFO --- [           main] p.i.PlanningIntegrationAutoConfiguration : PlanningIntegrationAutoConfiguration#paramCollectionResponseHook - initialized, enabled=true
2026-01-17T23:44:04.100+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#init - reason=reply module enabled
2026-01-17T23:44:04.100+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactToolFactory - reason=创建CodeactTool工厂, channels=1
2026-01-17T23:44:04.100+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#init - reason=工厂初始化完成, channels=1
2026-01-17T23:44:04.113+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=开始创建Reply工具
2026-01-17T23:44:04.119+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#createTools - reason=创建工具成功, toolName=send_success_message, channelCode=IDE_TEXT
2026-01-17T23:44:04.119+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#createTools - reason=创建工具成功, toolName=send_error_message, channelCode=IDE_TEXT
2026-01-17T23:44:04.121+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#createTools - reason=创建工具成功, toolName=send_notification, channelCode=IDE_TEXT
2026-01-17T23:44:04.121+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#createTools - reason=工具创建完成, totalCount=3
2026-01-17T23:44:04.121+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=Reply工具创建完成, count=3
2026-01-17T23:44:04.121+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=创建Reply工具, index=1, name=send_success_message, description=Send a success message to the IDE console
2026-01-17T23:44:04.121+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=创建Reply工具, index=2, name=send_error_message, description=Send an error message to the IDE console
2026-01-17T23:44:04.121+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=创建Reply工具, index=3, name=send_notification, description=Send a notification message
2026-01-17T23:44:04.123+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactToolFactory - reason=创建SearchCodeactTool工厂, providerCount=3
2026-01-17T23:44:04.146+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactToolFactory - reason=创建TriggerCodeactTool工厂
2026-01-17T23:44:04.146+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=开始创建Trigger工具
2026-01-17T23:44:04.148+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=创建SubscribeTriggerCodeactTool成功
2026-01-17T23:44:04.150+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=创建UnsubscribeTriggerCodeactTool成功
2026-01-17T23:44:04.151+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=创建ListTriggersCodeactTool成功
2026-01-17T23:44:04.154+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=创建GetTriggerDetailCodeactTool成功
2026-01-17T23:44:04.155+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=触发器工具创建完成, count=4
2026-01-17T23:44:04.155+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=Trigger工具创建完成, count=4
2026-01-17T23:44:04.155+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=创建Trigger工具, index=1, name=subscribe_trigger, description=创建并订阅一个新的触发器
2026-01-17T23:44:04.155+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=创建Trigger工具, index=2, name=unsubscribe_trigger, description=取消订阅并删除一个触发器
2026-01-17T23:44:04.155+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=创建Trigger工具, index=3, name=list_triggers, description=列出所有触发器
2026-01-17T23:44:04.155+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=创建Trigger工具, index=4, name=get_trigger_detail, description=获取指定触发器的详细信息
2026-01-17T23:44:04.170+08:00  INFO --- [           main] e.c.ExperienceExtensionAutoConfiguration : ExperienceExtensionAutoConfiguration#fastIntentService - reason=creating FastIntentService, extraMatchers=0
2026-01-17T23:44:04.175+08:00  INFO --- [           main] e.c.ExperienceExtensionAutoConfiguration : ExperienceExtensionAutoConfiguration#fastIntentReactHook - reason=creating fast intent react hook bean
2026-01-17T23:44:04.181+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=创建 CodeactAgent
2026-01-17T23:44:04.181+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=配置 MemorySaver 以支持多轮对话上下文保持
2026-01-17T23:44:04.182+08:00  WARN --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=临时禁用 streaming 模式以排查循环问题
2026-01-17T23:44:04.182+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加UnifiedSearchCodeactTool
2026-01-17T23:44:04.186+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockBaiduWebSearchProvider, toolName=search_web
2026-01-17T23:44:04.188+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockKnowledgeStoreSearchProvider, toolName=search_knowledge
2026-01-17T23:44:04.190+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockProjectContextSearchProvider, toolName=search_project
2026-01-17T23:44:04.190+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=搜索工具创建完成, totalCount=3
2026-01-17T23:44:04.190+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加SearchCodeactTools, count=3
2026-01-17T23:44:04.190+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加ReplyCodeactTools, count=3
2026-01-17T23:44:04.190+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加TriggerCodeactTools, count=4
2026-01-17T23:44:04.190+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#createMcpDynamicTools - reason=Creating MCP dynamic tools
2026-01-17T23:44:04.193+08:00  INFO --- [           main] c.a.a.a.e.d.mcp.McpDynamicToolFactory    : McpDynamicToolFactory#createTools - reason=开始创建MCP动态工具
2026-01-17T23:44:04.195+08:00  INFO --- [           main] c.a.a.a.e.d.mcp.McpDynamicToolFactory    : McpDynamicToolFactory#createTools - reason=无可用的MCP工具
2026-01-17T23:44:04.195+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#createMcpDynamicTools - reason=MCP dynamic tools created, count=0
2026-01-17T23:44:04.195+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=Added MCP dynamic tools, count=0
2026-01-17T23:44:04.195+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#createHttpDynamicTools - reason=HTTP dynamic tools disabled by default
2026-01-17T23:44:04.195+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=合并后CodeactTool总数, count=11
2026-01-17T23:44:04.195+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=React阶段使用内置工具(write_code, execute_code, write_condition_code)
2026-01-17T23:44:04.195+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=注入 React Phase 评估 Hooks, count=2
2026-01-17T23:44:04.195+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=注入 CodeAct Phase 评估 Hooks, count=2
2026-01-17T23:44:04.196+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=已准备注入AfterAgentLearningHook
2026-01-17T23:44:04.196+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=已准备注入FastIntentReactHook
2026-01-17T23:44:04.196+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=已准备注入UnifiedIntentRecognitionHook
2026-01-17T23:44:04.196+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=已准备注入ParamCollectionResponseHook
2026-01-17T23:44:04.198+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 开始构建CodeactAgent
2026-01-17T23:44:04.202+08:00  INFO --- [           main] .a.a.a.c.t.s.DefaultReturnSchemaRegistry : DefaultReturnSchemaRegistry#<init> - reason=创建新实例, hashCode=437475
2026-01-17T23:44:04.203+08:00 DEBUG --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#<init> - reason=创建注册表, returnSchemaRegistry=DefaultReturnSchemaRegistry
2026-01-17T23:44:04.203+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=创建默认CodeactToolRegistry
2026-01-17T23:44:04.203+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=开始注册CodeactTool, count=11
2026-01-17T23:44:04.203+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=unified_search
2026-01-17T23:44:04.203+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=unified_search
2026-01-17T23:44:04.204+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=search_web
2026-01-17T23:44:04.204+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=search_web
2026-01-17T23:44:04.204+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=search_knowledge
2026-01-17T23:44:04.204+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=search_knowledge
2026-01-17T23:44:04.204+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=search_project
2026-01-17T23:44:04.204+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=search_project
2026-01-17T23:44:04.204+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=send_success_message
2026-01-17T23:44:04.204+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=send_success_message
2026-01-17T23:44:04.204+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=send_error_message
2026-01-17T23:44:04.204+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=send_error_message
2026-01-17T23:44:04.204+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=send_notification
2026-01-17T23:44:04.204+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=send_notification
2026-01-17T23:44:04.204+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=subscribe_trigger
2026-01-17T23:44:04.204+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=subscribe_trigger
2026-01-17T23:44:04.204+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=unsubscribe_trigger
2026-01-17T23:44:04.204+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=unsubscribe_trigger
2026-01-17T23:44:04.204+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=list_triggers
2026-01-17T23:44:04.204+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=list_triggers
2026-01-17T23:44:04.204+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=get_trigger_detail
2026-01-17T23:44:04.204+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=get_trigger_detail
2026-01-17T23:44:04.204+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册完成, count=11
2026-01-17T23:44:04.204+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 创建默认CodeContext: language=PYTHON
2026-01-17T23:44:04.206+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 创建默认RuntimeEnvironmentManager: language=PYTHON
2026-01-17T23:44:04.208+08:00 DEBUG --- [           main] c.a.a.a.c.e.bridge.AgentToolBridge       : AgentToolBridge#<init> 初始化: 注册了0个工具
2026-01-17T23:44:04.208+08:00 DEBUG --- [           main] c.a.a.a.c.executor.bridge.StateBridge    : StateBridge#<init> 初始化完成
2026-01-17T23:44:04.210+08:00  INFO --- [           main] c.a.a.a.core.executor.GraalCodeExecutor  : GraalCodeExecutor#<init> 初始化完成: language=PYTHON, allowIO=false, timeout=30000ms, executableTools=true, customBridgeFactory=false
2026-01-17T23:44:04.210+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#createCodeactSubAgentInterceptor 创建子Agent拦截器
2026-01-17T23:44:04.213+08:00  INFO --- [           main] c.a.a.a.a.subagent.CodeactSubAgent       : CodeactSubAgent#<init> 初始化: name=code-generator
2026-01-17T23:44:04.214+08:00  INFO --- [           main] c.a.a.a.a.subagent.CodeactSubAgent       : CodeactSubAgent#<init> 初始化: name=condition-code-generator
2026-01-17T23:44:04.214+08:00  INFO --- [           main] c.a.a.a.a.s.CodeactSubAgentInterceptor   : CodeactSubAgentInterceptor#<init> 创建默认代码生成子Agent
2026-01-17T23:44:04.395+08:00  INFO --- [           main] c.a.a.a.a.s.CodeactSubAgentInterceptor   : CodeactSubAgentInterceptor#<init> 初始化完成: subAgentCount=2
2026-01-17T23:44:04.396+08:00  INFO --- [           main] c.a.a.a.a.tools.ExecuteCodeTool          : ExecuteCodeTool#<init> 初始化完成
2026-01-17T23:44:04.401+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 拦截器分类完成: modelInterceptors=1, toolInterceptors=0
2026-01-17T23:44:04.401+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 从拦截器提取工具: interceptor=CodeactSubAgent, toolCount=2
2026-01-17T23:44:04.423+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 工具收集完成: interceptorTools=2, regularTools=3, total=6
2026-01-17T23:44:04.424+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 设置ModelInterceptors到LlmNode: count=1
2026-01-17T23:44:04.426+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build CodeactAgent构建完成
2026-01-17T23:44:04.426+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=开始罗列已注册的工具
2026-01-17T23:44:04.426+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct阶段工具数量, count=11
2026-01-17T23:44:04.426+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=1, name=unified_search, description=统一搜索工具，可同时搜索项目、知识库、Web等多个数据源
2026-01-17T23:44:04.426+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=2, name=search_knowledge, description=搜索团队知识库，包括FAQ、规范、最佳实践等
2026-01-17T23:44:04.426+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=3, name=send_success_message, description=Send a success message to the IDE console
2026-01-17T23:44:04.426+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=4, name=search_web, description=执行Web搜索，获取公开互联网信息
2026-01-17T23:44:04.426+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=5, name=unsubscribe_trigger, description=取消订阅并删除一个触发器
2026-01-17T23:44:04.426+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=6, name=get_trigger_detail, description=获取指定触发器的详细信息
2026-01-17T23:44:04.426+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=7, name=send_error_message, description=Send an error message to the IDE console
2026-01-17T23:44:04.426+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=8, name=search_project, description=搜索项目上下文信息，包括代码、配置、文档等
2026-01-17T23:44:04.426+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=9, name=send_notification, description=Send a notification message
2026-01-17T23:44:04.426+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=10, name=subscribe_trigger, description=创建并订阅一个新的触发器
2026-01-17T23:44:04.426+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=11, name=list_triggers, description=列出所有触发器
2026-01-17T23:44:04.426+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React阶段工具数量, count=6
2026-01-17T23:44:04.426+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=1, name=write_code, description=Generate and register a new function with specified name and parameters. IMPORTANT: You MUST provide both 'functionName' and 'parameters' fields. Example: write_code(requirement='calculate sum', functionName='calculate_sum', parameters=['a', 'b'])
2026-01-17T23:44:04.426+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=2, name=write_condition_code, description=Generate and register a condition check function for triggers. This function MUST return a boolean value (True/False). Example: write_condition_code(requirement='check if it is a working day', functionName='check_is_working_day', parameters=['date'])
2026-01-17T23:44:04.426+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=3, name=send_success_message, description=Send a success message to the IDE console
2026-01-17T23:44:04.433+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=4, name=send_error_message, description=Send an error message to the IDE console
2026-01-17T23:44:04.433+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=5, name=send_notification, description=Send a notification message
2026-01-17T23:44:04.433+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=6, name=execute_code, description=Execute a previously generated function by its exact name with matching parameters. CRITICAL: The functionName MUST exactly match the name used in write_code. The 'args' parameter names MUST exactly match the 'parameters' specified in write_code. Example: If you called write_code with functionName='calculate_sum' and parameters=['a', 'b'], then you must call execute_code with functionName='calculate_sum' and args={'a': 10, 'b': 20}. Parameter value types supported: String, Number, Boolean, List, Map/Object.
2026-01-17T23:44:04.433+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=工具罗列完成
2026-01-17T23:44:04.435+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgent#<init> 初始化完成: language=PYTHON
2026-01-17T23:44:04.439+08:00  INFO --- [           main] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#<init> 初始化 Agent 加载器
2026-01-17T23:44:04.459+08:00 DEBUG --- [           main] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#<init> Agent 图结构:
@startuml CodeactAgent
skinparam usecaseFontSize 14
skinparam usecaseStereotypeFontSize 12
skinparam hexagonFontSize 14
skinparam hexagonStereotypeFontSize 12
title "CodeactAgent"
footer

powered by spring-ai-alibaba
end footer
circle start<<input>> as __START__
circle stop as __END__
usecase "_AGENT_MODEL_"<<Node>>
usecase "_AGENT_TOOL_"<<Node>>
usecase "_AGENT_HOOK_FastIntentReactHook.before"<<Node>>
usecase "_AGENT_HOOK_UnifiedIntentRecognitionHook.before"<<Node>>
usecase "_AGENT_HOOK_ParamCollectionResponseHook.before"<<Node>>
usecase "_AGENT_HOOK_AfterAgentLearningHook.after"<<Node>>
usecase "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"<<Node>>
usecase "_AGENT_HOOK_EvaluationPromptInjectionHook-REACT.beforeModel"<<Node>>
hexagon "check state" as condition1<<Condition>>
hexagon "check state" as condition2<<Condition>>
hexagon "check state" as condition3<<Condition>>
hexagon "check state" as condition4<<Condition>>
hexagon "check state" as condition5<<Condition>>
"__START__" -down-> "_AGENT_HOOK_FastIntentReactHook.before"
"_AGENT_HOOK_FastIntentReactHook.before" .down.> "condition1"
"condition1" .down.> "_AGENT_TOOL_"
'"_AGENT_HOOK_FastIntentReactHook.before" .down.> "_AGENT_TOOL_"
"condition1" .down.> "_AGENT_HOOK_UnifiedIntentRecognitionHook.before"
'"_AGENT_HOOK_FastIntentReactHook.before" .down.> "_AGENT_HOOK_UnifiedIntentRecognitionHook.before"
"_AGENT_HOOK_UnifiedIntentRecognitionHook.before" .down.> "condition2"
"condition2" .down.> "_AGENT_HOOK_AfterAgentLearningHook.after"
'"_AGENT_HOOK_UnifiedIntentRecognitionHook.before" .down.> "_AGENT_HOOK_AfterAgentLearningHook.after"
"condition2" .down.> "_AGENT_TOOL_"
'"_AGENT_HOOK_UnifiedIntentRecognitionHook.before" .down.> "_AGENT_TOOL_"
"condition2" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
'"_AGENT_HOOK_UnifiedIntentRecognitionHook.before" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
"condition2" .down.> "_AGENT_HOOK_ParamCollectionResponseHook.before"
'"_AGENT_HOOK_UnifiedIntentRecognitionHook.before" .down.> "_AGENT_HOOK_ParamCollectionResponseHook.before"
"_AGENT_HOOK_ParamCollectionResponseHook.before" .down.> "condition3"
"condition3" .down.> "_AGENT_HOOK_AfterAgentLearningHook.after"
'"_AGENT_HOOK_ParamCollectionResponseHook.before" .down.> "_AGENT_HOOK_AfterAgentLearningHook.after"
"condition3" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
'"_AGENT_HOOK_ParamCollectionResponseHook.before" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
"_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel" -down-> "_AGENT_HOOK_EvaluationPromptInjectionHook-REACT.beforeModel"
"_AGENT_HOOK_EvaluationPromptInjectionHook-REACT.beforeModel" -down-> "_AGENT_MODEL_"
"_AGENT_HOOK_AfterAgentLearningHook.after" -down-> "__END__"
"_AGENT_MODEL_" .down.> "condition4"
"condition4" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
'"_AGENT_MODEL_" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
"condition4" .down.> "_AGENT_TOOL_"
'"_AGENT_MODEL_" .down.> "_AGENT_TOOL_"
"condition4" .down.> "_AGENT_HOOK_AfterAgentLearningHook.after"
'"_AGENT_MODEL_" .down.> "_AGENT_HOOK_AfterAgentLearningHook.after"
"_AGENT_TOOL_" .down.> "condition5"
"condition5" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
'"_AGENT_TOOL_" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
"condition5" .down.> "_AGENT_HOOK_AfterAgentLearningHook.after"
'"_AGENT_TOOL_" .down.> "_AGENT_HOOK_AfterAgentLearningHook.after"
@enduml

2026-01-17T23:44:04.459+08:00  INFO --- [           main] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#<init> 已注册 agent: grayscale_agent
2026-01-17T23:44:04.474+08:00 DEBUG --- [           main] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#listAgents 列出所有 agent
2026-01-17T23:44:04.474+08:00  INFO --- [           main] c.a.c.a.a.s.controller.AgentController   : AgentController initialized with 1 dynamic agents: [grayscale_agent]
2026-01-17T23:44:04.507+08:00  INFO --- [           main] e.e.c.CodeactEvaluationAutoConfiguration : CodeactEvaluationAutoConfiguration#inputRoutingEvaluationHook - reason=创建输入路由评估 Hook
2026-01-17T23:44:04.508+08:00  INFO --- [           main] e.c.ExperienceExtensionAutoConfiguration : ExperienceExtensionAutoConfiguration#codeExperienceModelHook - reason=creating code experience model hook bean
2026-01-17T23:44:04.510+08:00  INFO --- [           main] e.c.ExperienceExtensionAutoConfiguration : ExperienceExtensionAutoConfiguration#reactExperienceAgentHook - reason=creating react experience agent hook bean
2026-01-17T23:44:04.510+08:00  INFO --- [           main] e.c.ExperienceExtensionAutoConfiguration : ExperienceExtensionAutoConfiguration#commonSenseExperienceModelHook - reason=creating common sense prompt model hook bean
2026-01-17T23:44:04.510+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchFacade - reason=creating search facade with 3 providers
2026-01-17T23:44:04.515+08:00  INFO --- [           main] c.a.a.a.e.s.i.DefaultSearchFacade        : DefaultSearchFacade#init - reason=initialized with 3 providers
2026-01-17T23:44:04.519+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=开始创建Search工具
2026-01-17T23:44:04.521+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockBaiduWebSearchProvider, toolName=search_web
2026-01-17T23:44:04.523+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockKnowledgeStoreSearchProvider, toolName=search_knowledge
2026-01-17T23:44:04.526+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockProjectContextSearchProvider, toolName=search_project
2026-01-17T23:44:04.526+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=搜索工具创建完成, totalCount=3
2026-01-17T23:44:04.526+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=Search工具创建完成, count=3
2026-01-17T23:44:04.526+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=创建Search工具, index=1, name=search_web, description=执行Web搜索，获取公开互联网信息
2026-01-17T23:44:04.526+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=创建Search工具, index=2, name=search_knowledge, description=搜索团队知识库，包括FAQ、规范、最佳实践等
2026-01-17T23:44:04.526+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=创建Search工具, index=3, name=search_project, description=搜索项目上下文信息，包括代码、配置、文档等
2026-01-17T23:44:04.534+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#diagnostics - reason=ElasticsearchClient bean found
2026-01-17T23:44:04.534+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#diagnostics - reason=EmbeddingModel bean found
2026-01-17T23:44:04.540+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#diagnostics - Planning module status:
2026-01-17T23:44:04.541+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration :   - ActionRepository: MybatisPlusActionRepository
2026-01-17T23:44:04.541+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration :   - ActionProvider: SemanticActionProvider
2026-01-17T23:44:04.541+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration :   - PlanGenerator: DefaultPlanGenerator
2026-01-17T23:44:04.541+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration :   - PlanExecutor: DefaultPlanExecutor
2026-01-17T23:44:04.545+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#planningCodeactTools - reason=creating planning tools list
2026-01-17T23:44:04.546+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#planningCodeactTools - reason=created planning tools, count=4
2026-01-17T23:44:04.991+08:00  INFO --- [           main] c.a.a.a.c.c.CodeactCoreAutoConfiguration : CodeactCoreAutoConfiguration#returnSchemaRegistry - reason=创建ReturnSchemaRegistry单例Bean
2026-01-17T23:44:04.991+08:00  INFO --- [           main] .a.a.a.c.t.s.DefaultReturnSchemaRegistry : DefaultReturnSchemaRegistry#<init> - reason=创建新实例, hashCode=921270604
2026-01-17T23:44:05.474+08:00  WARN --- [           main] o.s.m.p.s.SyncMcpSamplingProvider        : No sampling methods found
2026-01-17T23:44:05.476+08:00  WARN --- [           main] o.s.m.p.e.SyncMcpElicitationProvider     : No elicitation methods found
2026-01-17T23:44:05.522+08:00  INFO --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2026-01-17T23:44:05.534+08:00  INFO --- [           main] c.a.a.a.start.AssistantAgentApplication  : Started AssistantAgentApplication in 7.847 seconds (process running for 8.488)
2026-01-17T23:44:05.541+08:00  INFO --- [           main] c.a.a.a.s.config.DemoExperienceConfig    : DemoExperienceConfig#run - reason=Initializing Demo Experiences
2026-01-17T23:44:05.541+08:00  INFO --- [           main] c.a.a.a.s.config.DemoExperienceConfig    : DemoExperienceConfig#run - reason=Demo Experiences initialization completed
2026-01-17T23:44:05.541+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#run - reason=Starting experience module validation
2026-01-17T23:44:05.669+08:00 DEBUG --- [           main] .p.e.r.ElasticsearchExperienceRepository : ElasticsearchExperienceRepository#count - reason=count completed, count=0
2026-01-17T23:44:05.707+08:00 DEBUG --- [           main] .p.e.r.ElasticsearchExperienceRepository : ElasticsearchExperienceRepository#countByTypeAndScope - reason=count completed, type=CODE, scope=null, count=0
2026-01-17T23:44:05.720+08:00 DEBUG --- [           main] .p.e.r.ElasticsearchExperienceRepository : ElasticsearchExperienceRepository#countByTypeAndScope - reason=count completed, type=REACT, scope=null, count=0
2026-01-17T23:44:05.733+08:00 DEBUG --- [           main] .p.e.r.ElasticsearchExperienceRepository : ElasticsearchExperienceRepository#countByTypeAndScope - reason=count completed, type=COMMON, scope=null, count=0
2026-01-17T23:44:05.733+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testExperienceCount - reason=Experience stats: total=0, code=0, react=0, common=0
2026-01-17T23:44:05.733+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCommonExperienceQuery - reason=Testing common experience query
2026-01-17T23:44:05.962+08:00 DEBUG --- [           main] .s.p.e.p.ElasticsearchExperienceProvider : ElasticsearchExperienceProvider#query - reason=query completed, type=COMMON, text=null, count=0
2026-01-17T23:44:05.962+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCommonExperienceQuery - reason=Found 0 common experiences
2026-01-17T23:44:05.962+08:00  WARN --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCommonExperienceQuery - reason=❌ MoLiHong identity experience not found
2026-01-17T23:44:05.962+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCodeExperienceQuery - reason=Testing code experience query (demo keyword)
2026-01-17T23:44:05.973+08:00 DEBUG --- [           main] .s.p.e.p.ElasticsearchExperienceProvider : ElasticsearchExperienceProvider#query - reason=query completed, type=CODE, text=null, count=0
2026-01-17T23:44:05.973+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCodeExperienceQuery - reason=Found 0 demo code experiences
2026-01-17T23:44:05.973+08:00  WARN --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCodeExperienceQuery - reason=❌ Demo code experience not found
2026-01-17T23:44:05.973+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testReactExperienceQuery - reason=Testing react experience query
2026-01-17T23:44:05.988+08:00 DEBUG --- [           main] .s.p.e.p.ElasticsearchExperienceProvider : ElasticsearchExperienceProvider#query - reason=query completed, type=REACT, text=null, count=0
2026-01-17T23:44:05.988+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testReactExperienceQuery - reason=Found 0 react experiences
2026-01-17T23:44:05.988+08:00  WARN --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testReactExperienceQuery - reason=❌ Ambiguous intent strategy not found
2026-01-17T23:44:05.988+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#run - reason=Experience module validation completed
2026-01-17T23:48:01.472+08:00  INFO --- [nio-8080-exec-2] o.apache.tomcat.util.http.parser.Cookie  : A cookie header was received [Hm_lvt_b79d8f49e2d38b26503b92810b740f45=1767609436,1767669208,1767767035] that contained an invalid cookie. That cookie will be ignored.
 Note: further occurrences of this error will be logged at DEBUG level.
2026-01-17T23:48:01.481+08:00  INFO --- [nio-8080-exec-2] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-01-17T23:48:01.481+08:00  INFO --- [nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2026-01-17T23:48:01.481+08:00  INFO --- [nio-8080-exec-2] o.s.web.servlet.DispatcherServlet        : Completed initialization in 0 ms
2026-01-17T23:48:03.824+08:00  INFO --- [nio-8080-exec-6] c.a.c.a.a.s.controller.ThreadController  : Request received for POST /apps/research_agent/users/user-001/threads (service generates ID) with state: {}
2026-01-17T23:48:03.824+08:00  INFO --- [nio-8080-exec-6] c.a.c.a.a.s.service.ThreadServiceImpl    : Created thread: 559d4bac-48b9-4b32-bd8e-6c6e1da7559e for app=research_agent, user=user-001
2026-01-17T23:48:03.824+08:00  INFO --- [nio-8080-exec-6] c.a.c.a.a.s.controller.ThreadController  : Thread created successfully with generated id: 559d4bac-48b9-4b32-bd8e-6c6e1da7559e
2026-01-17T23:48:03.894+08:00  INFO --- [nio-8080-exec-5] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#loadAgent 加载 agent: research_agent
2026-01-17T23:48:03.894+08:00  INFO --- [nio-8080-exec-5] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#loadAgent 成功加载 agent: research_agent
2026-01-17T23:48:03.896+08:00  INFO --- [nio-8080-exec-1] c.a.c.a.a.s.controller.ThreadController  : Request received for GET /apps/research_agent/users/user-001/threads/559d4bac-48b9-4b32-bd8e-6c6e1da7559e
2026-01-17T23:48:03.959+08:00  INFO --- [nio-8080-exec-5] c.a.a.a.e.e.hook.FastIntentReactHook     : FastIntentReactHook#beforeAgent - reason=try react fast-intent match
2026-01-17T23:48:03.959+08:00 DEBUG --- [nio-8080-exec-5] c.a.a.a.e.e.hook.FastIntentReactHook     : FastIntentReactHook#beforeAgent - reason=fast-intent disabled
2026-01-17T23:48:03.971+08:00 DEBUG --- [nio-8080-exec-5] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#beforeAgent - reason=checking unified intent
2026-01-17T23:48:03.972+08:00 DEBUG --- [nio-8080-exec-5] c.a.a.a.p.i.SemanticActionProvider       : SemanticActionProvider#matchActions - reason=matching actions, userInput=添加单位
2026-01-17T23:48:04.728+08:00 DEBUG --- [nio-8080-exec-5] c.a.a.a.p.v.ActionVectorizationService   : ActionVectorizationService#hybridSearch - actionId=erp:product-unit:create, rawScore=3.4759183, maxScore=3.4759183, normalizedScore=0.95
2026-01-17T23:48:04.749+08:00  INFO --- [nio-8080-exec-5] c.a.a.a.p.i.SemanticActionProvider       : SemanticActionProvider#matchActions - reason=matching completed, userInput=添加单位, matchCount=1
2026-01-17T23:48:04.749+08:00  INFO --- [nio-8080-exec-5] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#beforeAgent - reason=match found, actionId=erp:product-unit:create, confidence=0.95, matchType=KEYWORD_EXACT
2026-01-17T23:48:04.761+08:00 DEBUG --- [nio-8080-exec-5] .s.p.e.p.ElasticsearchExperienceProvider : ElasticsearchExperienceProvider#query - reason=query completed, type=REACT, text=null, count=0
2026-01-17T23:48:04.761+08:00  INFO --- [nio-8080-exec-5] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#beforeAgent - reason=high confidence but no experience, defer to evaluation for param extraction, actionId=erp:product-unit:create, confidence=0.95
2026-01-17T23:48:04.764+08:00 DEBUG --- [nio-8080-exec-5] c.a.a.a.p.i.ParamCollectionResponseHook  : ParamCollectionResponseHook#beforeAgent - reason=checking for nextQuestion
2026-01-17T23:48:04.764+08:00 DEBUG --- [nio-8080-exec-5] c.a.a.a.p.i.ParamCollectionResponseHook  : ParamCollectionResponseHook#beforeAgent - reason=no evaluation results found
2026-01-17T23:48:04.766+08:00  INFO --- [nio-8080-exec-5] c.a.a.a.e.e.h.ModelInputEvaluationHook   : ModelInputEvaluationHook#beforeModel - reason=开始模型输入评估, phase=REACT
2026-01-17T23:48:04.766+08:00 DEBUG --- [nio-8080-exec-5] .a.e.e.c.CodeactEvaluationContextFactory : CodeactEvaluationContextFactory#createInputRoutingContext - reason=开始构造输入路由评估上下文
2026-01-17T23:48:04.768+08:00  INFO --- [pool-3-thread-1] c.a.a.a.e.DefaultEvaluationService       : Starting evaluation for suite: React Phase Evaluation Suite
2026-01-17T23:48:04.843+08:00  INFO --- [pool-2-thread-3] c.a.a.a.e.e.CriterionEvaluationAction    : Executing criterion: action_intent_match
2026-01-17T23:48:04.843+08:00  INFO --- [pool-2-thread-2] c.a.a.a.e.e.CriterionEvaluationAction    : Executing criterion: is_fuzzy
2026-01-17T23:48:04.843+08:00  INFO --- [pool-2-thread-1] c.a.a.a.e.e.CriterionEvaluationAction    : Executing criterion: enhanced_user_input
2026-01-17T23:48:04.843+08:00 DEBUG --- [pool-2-thread-2] c.a.a.a.e.e.CriterionEvaluationAction    : Batching not enabled for criterion: is_fuzzy
2026-01-17T23:48:04.843+08:00 DEBUG --- [pool-2-thread-1] c.a.a.a.e.e.CriterionEvaluationAction    : Batching not enabled for criterion: enhanced_user_input
2026-01-17T23:48:04.843+08:00 DEBUG --- [pool-2-thread-3] c.a.a.a.e.e.CriterionEvaluationAction    : Batching not enabled for criterion: action_intent_match
2026-01-17T23:48:04.847+08:00 DEBUG --- [pool-2-thread-3] c.a.a.a.p.i.SemanticActionProvider       : SemanticActionProvider#matchActions - reason=matching actions, userInput=添加单位
2026-01-17T23:48:04.849+08:00 DEBUG --- [pool-2-thread-1] c.a.a.a.e.evaluator.LLMBasedEvaluator    : Evaluating criterion enhanced_user_input with LLM, prompt: You are an evaluator performing the following evaluation task:

Evaluation Criterion Description: 改写用户输入，使其更加清晰、完整

Working Mechanism:
你是一个用户输入优化专家。请根据用户输入，改写并完善需求。改写要求：1. 补全隐含的约束条件2. 明确输入输出格式3. 保持原始意图不变4. 直接输出改写后的内容，不要添加任何解释

Output your response in the following format:

RESULT: (your evaluation result)
(No reasoning required for this evaluation)

Context:
- userInput: null

Your evaluation result:

2026-01-17T23:48:04.849+08:00 DEBUG --- [pool-2-thread-2] c.a.a.a.e.evaluator.LLMBasedEvaluator    : Evaluating criterion is_fuzzy with LLM, prompt: You are an evaluator performing the following evaluation task:

Evaluation Criterion Description: 判断用户输入是否模糊，是否需要向用户澄清

Working Mechanism:
你是一个用户意图清晰度判断专家。请判断用户输入是否明确。

【模糊】的特征：
- 没有具体指明要做什么操作
- 使用模糊词汇如'帮我看看'、'处理一下'
- 请求可能有多种理解方式
- 缺少必要的参数或信息

【清晰】的特征：
- 明确提到要查询、搜索、获取某个具体信息
- 提供了具体的查询关键词或目标
- 意图明确，执行路径清晰

请直接输出'模糊'或'清晰'，不要添加任何解释。

Output your response in the following format:

RESULT: (one of: 模糊, 清晰)
(No reasoning required for this evaluation)

Context:
- userInput: null

Your evaluation result:

2026-01-17T23:48:05.167+08:00 DEBUG --- [pool-2-thread-3] c.a.a.a.p.v.ActionVectorizationService   : ActionVectorizationService#hybridSearch - actionId=erp:product-unit:create, rawScore=3.4759183, maxScore=3.4759183, normalizedScore=0.95
2026-01-17T23:48:05.177+08:00  INFO --- [pool-2-thread-3] c.a.a.a.p.i.SemanticActionProvider       : SemanticActionProvider#matchActions - reason=matching completed, userInput=添加单位, matchCount=1
2026-01-17T23:48:05.177+08:00  INFO --- [pool-2-thread-3] c.a.a.a.p.i.ActionIntentEvaluator        : ActionIntentEvaluator#buildCandidatesResult - reason=candidates built for LLM verification, userInput=添加单位, candidateCount=1
2026-01-17T23:48:05.177+08:00  INFO --- [pool-2-thread-3] c.a.a.a.e.e.CriterionEvaluationAction    : Criterion action_intent_match completed with result: {"candidates":[{"matchType":"KEYWORD_EXACT","confidence":0.95,"actionId":"erp:product-unit:create","description":"在ERP系统中创建新的产品计量单位，如：个、台、箱、件等","parameters":[{"name":"name","description":"计量单位名称","label":"单位名称","type":"STRING","required":true},{"defaultValue":"0","name":"status","description":"单位状态","label":"单位状态","type":"ENUM","required":false}],"actionName":"添加产品单位"}],"userInput":"添加单位","candidateCount":1,"status":"CANDIDATES"}
2026-01-17T23:48:05.514+08:00  INFO --- [pool-2-thread-2] c.a.a.a.e.e.CriterionEvaluationAction    : Criterion is_fuzzy completed with result: 模糊
2026-01-17T23:48:07.917+08:00  INFO --- [pool-2-thread-1] c.a.a.a.e.e.CriterionEvaluationAction    : Criterion enhanced_user_input completed with result: 请提供具体的用户输入内容以便进行优化处理。
2026-01-17T23:48:07.980+08:00  INFO --- [action-thread-1] c.a.a.a.e.e.CriterionEvaluationAction    : Executing criterion: react_experience_retrieval
2026-01-17T23:48:07.980+08:00  INFO --- [action-thread-2] c.a.a.a.e.e.CriterionEvaluationAction    : Executing criterion: action_intent_llm_verify
2026-01-17T23:48:07.980+08:00 DEBUG --- [action-thread-1] c.a.a.a.e.e.CriterionEvaluationAction    : Batching not enabled for criterion: react_experience_retrieval
2026-01-17T23:48:07.980+08:00 DEBUG --- [action-thread-2] c.a.a.a.e.e.CriterionEvaluationAction    : Batching not enabled for criterion: action_intent_llm_verify
2026-01-17T23:48:07.980+08:00 DEBUG --- [action-thread-2] c.a.a.a.e.evaluator.LLMBasedEvaluator    : Evaluating criterion action_intent_llm_verify with LLM, prompt: 你是一个意图识别和参数提取专家。请根据用户输入和候选动作列表：
1. 判断用户最可能想要执行的动作
2. 从用户输入中提取动作所需的参数
3. 检查是否有缺失的必填参数

## 用户输入
添加单位

## 候选动作列表（包含参数定义）
{"candidates":[{"matchType":"KEYWORD_EXACT","confidence":0.95,"actionId":"erp:product-unit:create","description":"在ERP系统中创建新的产品计量单位，如：个、台、箱、件等","parameters":[{"name":"name","description":"计量单位名称","label":"单位名称","type":"STRING","required":true},{"defaultValue":"0","name":"status","description":"单位状态","label":"单位状态","type":"ENUM","required":false}],"actionName":"添加产品单位"}],"userInput":"添加单位","candidateCount":1,"status":"CANDIDATES"}

## 处理要求
1. 仔细分析用户输入的语义和意图
2. 选择最匹配的动作，如果没有合适的动作则返回 NO_MATCH
3. 如果选中了动作，从用户输入中提取该动作需要的参数值
4. 检查必填参数（required=true）是否都已提取到，如果有缺失则生成追问问题

## 返回格式（严格 JSON）
如果匹配到动作：
RESULT: {
    "actionId": "选中的动作ID",
    "actionName": "动作名称",
    "confidence": 0.95,
    "reason": "判断理由",
    "extractedParams": {"参数名": "提取到的值", ...},
    "missingParams": ["缺失的必填参数名", ...],
    "nextQuestion": "如果有缺失参数，生成追问问题，否则为null"
}

如果未匹配到动作：
RESULT: {"actionId": "NO_MATCH", "confidence": 0.95, "reason": "判断理由"}

2026-01-17T23:48:07.992+08:00 DEBUG --- [action-thread-1] .s.p.e.p.ElasticsearchExperienceProvider : ElasticsearchExperienceProvider#query - reason=query completed, type=COMMON, text=null, count=0
2026-01-17T23:48:08.003+08:00 DEBUG --- [action-thread-1] .s.p.e.p.ElasticsearchExperienceProvider : ElasticsearchExperienceProvider#query - reason=query completed, type=REACT, text=null, count=0
2026-01-17T23:48:08.003+08:00  INFO --- [action-thread-1] .e.e.ExperienceRetrievalEvaluatorFactory : ExperienceRetrievalEvaluatorFactory#react_experience_evaluator - reason=未检索到经验
2026-01-17T23:48:08.003+08:00  INFO --- [action-thread-1] c.a.a.a.e.e.CriterionEvaluationAction    : Criterion react_experience_retrieval completed with result: 
2026-01-17T23:48:10.999+08:00  WARN --- [action-thread-2] c.a.a.a.e.evaluator.LLMBasedEvaluator    : Failed to parse JSON from response: ```json
{
    "actionId": "erp:product-unit:create",
    "actionName": "添加产品单位",
    "confidence": 0.95,
    "reason": "用户输入'添加单位'与候选动作列表中的'添加产品单位'高度匹配，意图明确。",
    "extractedParams": {},
    "missingParams": ["name"],
    "nextQuestion": "请提供要添加的计量单位名称。"
}
```
2026-01-17T23:48:10.999+08:00  INFO --- [action-thread-2] c.a.a.a.e.e.CriterionEvaluationAction    : Criterion action_intent_llm_verify completed with result: ```json
{
    "actionId": "erp:product-unit:create",
    "actionName": "添加产品单位",
    "confidence": 0.95,
    "reason": "用户输入'添加单位'与候选动作列表中的'添加产品单位'高度匹配，意图明确。",
    "extractedParams": {},
    "missingParams": ["name"],
    "nextQuestion": "请提供要添加的计量单位名称。"
}
```
2026-01-17T23:48:11.051+08:00 DEBUG --- [pool-3-thread-1] c.a.a.a.e.e.GraphBasedEvaluationExecutor : Collected result for criterion 'enhanced_user_input': status=SUCCESS, value=请提供具体的用户输入内容以便进行优化处理。
2026-01-17T23:48:11.051+08:00 DEBUG --- [pool-3-thread-1] c.a.a.a.e.e.GraphBasedEvaluationExecutor : Collected result for criterion 'is_fuzzy': status=SUCCESS, value=模糊
2026-01-17T23:48:11.051+08:00 DEBUG --- [pool-3-thread-1] c.a.a.a.e.e.GraphBasedEvaluationExecutor : Collected result for criterion 'react_experience_retrieval': status=SUCCESS, value=
2026-01-17T23:48:11.051+08:00 DEBUG --- [pool-3-thread-1] c.a.a.a.e.e.GraphBasedEvaluationExecutor : Collected result for criterion 'action_intent_match': status=SUCCESS, value={"candidates":[{"matchType":"KEYWORD_EXACT","confidence":0.95,"actionId":"erp:product-unit:create","description":"在ERP系统中创建新的产品计量单位，如：个、台、箱、件等","parameters":[{"name":"name","description":"计量单位名称","label":"单位名称","type":"STRING","required":true},{"defaultValue":"0","name":"status","description":"单位状态","label":"单位状态","type":"ENUM","required":false}],"actionName":"添加产品单位"}],"userInput":"添加单位","candidateCount":1,"status":"CANDIDATES"}
2026-01-17T23:48:11.051+08:00 DEBUG --- [pool-3-thread-1] c.a.a.a.e.e.GraphBasedEvaluationExecutor : Collected result for criterion 'action_intent_llm_verify': status=SUCCESS, value=```json
{
    "actionId": "erp:product-unit:create",
    "actionName": "添加产品单位",
    "confidence": 0.95,
    "reason": "用户输入'添加单位'与候选动作列表中的'添加产品单位'高度匹配，意图明确。",
    "extractedParams": {},
    "missingParams": ["name"],
    "nextQuestion": "请提供要添加的计量单位名称。"
}
```
2026-01-17T23:48:11.052+08:00  INFO --- [pool-3-thread-1] c.a.a.a.e.e.GraphBasedEvaluationExecutor : Collected 5 criterion results from final state
2026-01-17T23:48:11.052+08:00  INFO --- [pool-3-thread-1] c.a.a.a.e.DefaultEvaluationService       : Evaluation completed for suite: React Phase Evaluation Suite
2026-01-17T23:48:11.052+08:00  INFO --- [pool-3-thread-1] c.a.a.a.e.e.h.ModelInputEvaluationHook   : ModelInputEvaluationHook#beforeModel - reason=评估完成, phase=REACT
2026-01-17T23:48:11.052+08:00 DEBUG --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#attachInputRoutingResult - reason=写入输入路由评估结果
2026-01-17T23:48:11.052+08:00  INFO --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#appendEvaluationResultToMessages - reason=开始处理评估结果注入
2026-01-17T23:48:11.052+08:00  INFO --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#appendEvaluationResultToMessages - reason=已解析历史评估结果, 历史条目数=0
2026-01-17T23:48:11.052+08:00 DEBUG --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#appendEvaluationResultToMessages - reason=检查criterion metadata, criterion=action_intent_match, metadata=[topActionId, topConfidence, needsLLMVerification, candidateCount]
2026-01-17T23:48:11.053+08:00 DEBUG --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#appendEvaluationResultToMessages - reason=添加无ref-id的criterion, criterion=action_intent_match
2026-01-17T23:48:11.053+08:00 DEBUG --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#appendEvaluationResultToMessages - reason=检查criterion metadata, criterion=react_experience_retrieval, metadata=[is_empty]
2026-01-17T23:48:11.053+08:00 DEBUG --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#appendEvaluationResultToMessages - reason=跳过空结果的criterion, criterion=react_experience_retrieval
2026-01-17T23:48:11.053+08:00 DEBUG --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#appendEvaluationResultToMessages - reason=检查criterion metadata, criterion=enhanced_user_input, metadata=[]
2026-01-17T23:48:11.053+08:00 DEBUG --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#appendEvaluationResultToMessages - reason=添加无ref-id的criterion, criterion=enhanced_user_input
2026-01-17T23:48:11.053+08:00 DEBUG --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#appendEvaluationResultToMessages - reason=检查criterion metadata, criterion=is_fuzzy, metadata=[]
2026-01-17T23:48:11.053+08:00 DEBUG --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#appendEvaluationResultToMessages - reason=添加无ref-id的criterion, criterion=is_fuzzy
2026-01-17T23:48:11.053+08:00 DEBUG --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#appendEvaluationResultToMessages - reason=检查criterion metadata, criterion=action_intent_llm_verify, metadata=[]
2026-01-17T23:48:11.053+08:00 DEBUG --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#appendEvaluationResultToMessages - reason=添加无ref-id的criterion, criterion=action_intent_llm_verify
2026-01-17T23:48:11.053+08:00  INFO --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#appendEvaluationResultToMessages - reason=筛选出新评估条目, 新条目数=4
2026-01-17T23:48:11.054+08:00  INFO --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#appendEvaluationResultToMessages - reason=已创建增量评估消息对, 新消息数=2
2026-01-17T23:48:11.054+08:00  INFO --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#attachResult - reason=评估结果已写入, path=evaluation.inputRouting, suiteId=react-phase-suite
2026-01-17T23:48:11.072+08:00  INFO --- [pool-3-thread-1] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#beforeModel - reason=开始处理评估结果prompt注入, phase=REACT
2026-01-17T23:48:11.072+08:00 DEBUG --- [pool-3-thread-1] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#findLatestEvaluationResult - reason=找到评估结果, index=2
2026-01-17T23:48:11.072+08:00 DEBUG --- [pool-3-thread-1] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#beforeModel - reason=找到评估结果XML, phase=REACT, xmlLength=1064
2026-01-17T23:48:11.072+08:00 DEBUG --- [pool-3-thread-1] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#parseEvaluationXml - reason=解析到criterion, name=enhanced_user_input, valueLength=21
2026-01-17T23:48:11.072+08:00 DEBUG --- [pool-3-thread-1] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#parseEvaluationXml - reason=解析到criterion, name=action_intent_match, valueLength=433
2026-01-17T23:48:11.072+08:00 DEBUG --- [pool-3-thread-1] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#parseEvaluationXml - reason=解析到criterion, name=is_fuzzy, valueLength=2
2026-01-17T23:48:11.072+08:00 DEBUG --- [pool-3-thread-1] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#parseEvaluationXml - reason=解析到criterion, name=action_intent_llm_verify, valueLength=260
2026-01-17T23:48:11.072+08:00 DEBUG --- [pool-3-thread-1] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#beforeModel - reason=解析评估结果, phase=REACT, results={action_intent_match={"candidates":[{"matchType":"KEYWORD_EXACT","confidence":0.95,"actionId":"erp:product-unit:create","description":"在ERP系统中创建新的产品计量单位，如：个、台、箱、件等","parameters":[{"name":"name","description":"计量单位名称","label":"单位名称","type":"STRING","required":true},{"defaultValue":"0","name":"status","description":"单位状态","label":"单位状态","type":"ENUM","required":false}],"actionName":"添加产品单位"}],"userInput":"添加单位","candidateCount":1,"status":"CANDIDATES"}, enhanced_user_input=请提供具体的用户输入内容以便进行优化处理。, is_fuzzy=模糊, action_intent_llm_verify=```json
{
    "actionId": "erp:product-unit:create",
    "actionName": "添加产品单位",
    "confidence": 0.95,
    "reason": "用户输入'添加单位'与候选动作列表中的'添加产品单位'高度匹配，意图明确。",
    "extractedParams": {},
    "missingParams": ["name"],
    "nextQuestion": "请提供要添加的计量单位名称。"
}
```}
2026-01-17T23:48:11.072+08:00  INFO --- [pool-3-thread-1] a.a.s.c.ReactPhasePromptGuidanceProvider : ReactPhasePromptGuidanceProvider#generateGuidance - reason=生成React阶段指导, is_fuzzy=模糊
2026-01-17T23:48:11.072+08:00 DEBUG --- [pool-3-thread-1] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#generatePromptGuidance - reason=Provider生成了指导, provider=ReactPhasePromptGuidanceProvider, guidanceLength=189
2026-01-17T23:48:11.072+08:00 DEBUG --- [pool-3-thread-1] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#injectPromptGuidanceToMessages - reason=已创建prompt指导消息对
2026-01-17T23:48:11.072+08:00  INFO --- [pool-3-thread-1] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#beforeModel - reason=已注入评估结果prompt指导, phase=REACT, guidanceLength=189
2026-01-17T23:48:11.092+08:00  INFO --- [pool-3-thread-1] c.a.a.a.a.s.CodeactSubAgentInterceptor   : CodeactSubAgentInterceptor#interceptModel 拦截器被调用
2026-01-17T23:48:11.092+08:00  INFO --- [pool-3-thread-1] c.a.a.a.a.s.CodeactSubAgentInterceptor   : CodeactSubAgentInterceptor#interceptModel 追加拦截器提示词到原有系统提示词
2026-01-17T23:48:11.092+08:00  INFO --- [pool-3-thread-1] c.a.a.a.a.s.CodeactSubAgentInterceptor   : CodeactSubAgentInterceptor#interceptModel 系统提示词已增强，继续调用链
2026-01-17T23:48:13.438+08:00  INFO --- [oundedElastic-1] c.a.a.a.a.tools.WriteCodeTool            : WriteCodeTool#apply 调用代码生成子Agent: functionName=create_product_unit
2026-01-17T23:48:13.438+08:00 DEBUG --- [oundedElastic-1] c.a.a.a.a.tools.WriteCodeTool            : WriteCodeTool#apply 构建结构化输入: requirement=根据用户提供的单位名称，调用ERP系统API创建新的产品计量单位, function_name=create_product_unit, parameters=[unit_name], historyCodeCount=0
2026-01-17T23:48:13.438+08:00  INFO --- [oundedElastic-1] c.a.a.a.a.subagent.BaseAgentTaskTool     : BaseAgentTaskTool#apply 调用子Agent: subagentType=code-generator
2026-01-17T23:48:13.438+08:00  INFO --- [oundedElastic-1] c.a.a.a.a.subagent.BaseAgentTaskTool     : BaseAgentTaskTool#apply 使用结构化输入: [function_name, requirement, parameters, history_code]
2026-01-17T23:48:13.438+08:00  INFO --- [oundedElastic-1] c.a.a.a.a.subagent.CodeactSubAgent       : CodeGeneratorSubAgent#initGraph 图结构初始化完成
2026-01-17T23:48:13.443+08:00  INFO --- [oundedElastic-1] c.a.a.a.a.s.node.CodeGeneratorNode       : CodeGeneratorNode#apply 开始生成代码
2026-01-17T23:48:13.443+08:00 DEBUG --- [oundedElastic-1] c.a.a.a.a.s.node.CodeGeneratorNode       : CodeGeneratorNode#apply 提取输入: functionName=create_product_unit, requirement=根据用户提供的单位名称，调用ERP系统API创建新的产品计量单位, parameters=[unit_name], historyCodeCount=0
2026-01-17T23:48:13.443+08:00  INFO --- [oundedElastic-1] c.a.a.a.a.s.node.CodeGeneratorNode       : CodeGeneratorNode#getReturnSchema - reason=开始查询schema, registryHashCode=437475, toolName=unified_search, allToolsWithSchema=[]
2026-01-17T23:48:13.443+08:00  INFO --- [oundedElastic-1] .a.a.a.c.t.s.DefaultReturnSchemaRegistry : DefaultReturnSchemaRegistry#getSchema - reason=查询schema, hashCode=437475, toolName=unified_search, found=false, allTools=[]
2026-01-17T23:48:13.443+08:00  INFO --- [oundedElastic-1] c.a.a.a.a.s.node.CodeGeneratorNode       : CodeGeneratorNode#getReturnSchema - reason=registry中未找到schema, toolName=unified_search
2026-01-17T23:48:13.443+08:00 DEBUG --- [oundedElastic-1] c.a.a.a.a.s.node.CodeGeneratorNode       : CodeGeneratorNode#getReturnSchema - reason=使用声明的schema, toolName=unified_search, hasDeclared=false
2026-01-17T23:48:13.443+08:00 DEBUG --- [oundedElastic-1] c.a.a.a.a.s.node.CodeGeneratorNode       : CodeGeneratorNode#appendMethodDefinition - reason=生成方法定义, methodName=unified_search, hasReturnSchema=false, hasSuccessShape=false
2026-01-17T23:48:13.443+08:00  INFO --- [oundedElastic-1] c.a.a.a.a.s.node.CodeGeneratorNode       : CodeGeneratorNode#getReturnSchema - reason=开始查询schema, registryHashCode=437475, toolName=search_web, allToolsWithSchema=[]
2026-01-17T23:48:13.443+08:00  INFO --- [oundedElastic-1] .a.a.a.c.t.s.DefaultReturnSchemaRegistry : DefaultReturnSchemaRegistry#getSchema - reason=查询schema, hashCode=437475, toolName=search_web, found=false, allTools=[]
2026-01-17T23:48:13.443+08:00  INFO --- [oundedElastic-1] c.a.a.a.a.s.node.CodeGeneratorNode       : CodeGeneratorNode#getReturnSchema - reason=registry中未找到schema, toolName=search_web
2026-01-17T23:48:13.443+08:00 DEBUG --- [oundedElastic-1] c.a.a.a.a.s.node.CodeGeneratorNode       : CodeGeneratorNode#getReturnSchema - reason=使用声明的schema, toolName=search_web, hasDeclared=false
2026-01-17T23:48:13.443+08:00 DEBUG --- [oundedElastic-1] c.a.a.a.a.s.node.CodeGeneratorNode       : CodeGeneratorNode#appendMethodDefinition - reason=生成方法定义, methodName=search_web, hasReturnSchema=false, hasSuccessShape=false
2026-01-17T23:48:13.443+08:00  INFO --- [oundedElastic-1] c.a.a.a.a.s.node.CodeGeneratorNode       : CodeGeneratorNode#getReturnSchema - reason=开始查询schema, registryHashCode=437475, toolName=search_knowledge, allToolsWithSchema=[]
2026-01-17T23:48:13.443+08:00  INFO --- [oundedElastic-1] .a.a.a.c.t.s.DefaultReturnSchemaRegistry : DefaultReturnSchemaRegistry#getSchema - reason=查询schema, hashCode=437475, toolName=search_knowledge, found=false, allTools=[]
2026-01-17T23:48:13.443+08:00  INFO --- [oundedElastic-1] c.a.a.a.a.s.node.CodeGeneratorNode       : CodeGeneratorNode#getReturnSchema - reason=registry中未找到schema, toolName=search_knowledge
2026-01-17T23:48:13.443+08:00 DEBUG --- [oundedElastic-1] c.a.a.a.a.s.node.CodeGeneratorNode       : CodeGeneratorNode#getReturnSchema - reason=使用声明的schema, toolName=search_knowledge, hasDeclared=false
2026-01-17T23:48:13.443+08:00 DEBUG --- [oundedElastic-1] c.a.a.a.a.s.node.CodeGeneratorNode       : CodeGeneratorNode#appendMethodDefinition - reason=生成方法定义, methodName=search_knowledge, hasReturnSchema=false, hasSuccessShape=false
2026-01-17T23:48:13.443+08:00  INFO --- [oundedElastic-1] c.a.a.a.a.s.node.CodeGeneratorNode       : CodeGeneratorNode#getReturnSchema - reason=开始查询schema, registryHashCode=437475, toolName=search_project, allToolsWithSchema=[]
2026-01-17T23:48:13.443+08:00  INFO --- [oundedElastic-1] .a.a.a.c.t.s.DefaultReturnSchemaRegistry : DefaultReturnSchemaRegistry#getSchema - reason=查询schema, hashCode=437475, toolName=search_project, found=false, allTools=[]
2026-01-17T23:48:13.443+08:00  INFO --- [oundedElastic-1] c.a.a.a.a.s.node.CodeGeneratorNode       : CodeGeneratorNode#getReturnSchema - reason=registry中未找到schema, toolName=search_project
2026-01-17T23:48:13.443+08:00 DEBUG --- [oundedElastic-1] c.a.a.a.a.s.node.CodeGeneratorNode       : CodeGeneratorNode#getReturnSchema - reason=使用声明的schema, toolName=search_project, hasDeclared=false
2026-01-17T23:48:13.448+08:00 DEBUG --- [oundedElastic-1] c.a.a.a.a.s.node.CodeGeneratorNode       : CodeGeneratorNode#appendMethodDefinition - reason=生成方法定义, methodName=search_project, hasReturnSchema=false, hasSuccessShape=false
2026-01-17T23:48:13.448+08:00  INFO --- [oundedElastic-1] c.a.a.a.a.s.node.CodeGeneratorNode       : CodeGeneratorNode#getReturnSchema - reason=开始查询schema, registryHashCode=437475, toolName=send_success_message, allToolsWithSchema=[]
2026-01-17T23:48:13.448+08:00  INFO --- [oundedElastic-1] .a.a.a.c.t.s.DefaultReturnSchemaRegistry : DefaultReturnSchemaRegistry#getSchema - reason=查询schema, hashCode=437475, toolName=send_success_message, found=false, allTools=[]
2026-01-17T23:48:13.448+08:00  INFO --- [oundedElastic-1] c.a.a.a.a.s.node.CodeGeneratorNode       : CodeGeneratorNode#getReturnSchema - reason=registry中未找到schema, toolName=send_success_message
2026-01-17T23:48:13.448+08:00 DEBUG --- [oundedElastic-1] c.a.a.a.a.s.node.CodeGeneratorNode       : CodeGeneratorNode#getReturnSchema - reason=使用声明的schema, toolName=send_success_message, hasDeclared=false
2026-01-17T23:48:13.448+08:00 DEBUG --- [oundedElastic-1] c.a.a.a.a.s.node.CodeGeneratorNode       : CodeGeneratorNode#appendMethodDefinition - reason=生成方法定义, methodName=send_success_message, hasReturnSchema=false, hasSuccessShape=false
2026-01-17T23:48:13.448+08:00  INFO --- [oundedElastic-1] c.a.a.a.a.s.node.CodeGeneratorNode       : CodeGeneratorNode#getReturnSchema - reason=开始查询schema, registryHashCode=437475, toolName=send_error_message, allToolsWithSchema=[]
2026-01-17T23:48:13.448+08:00  INFO --- [oundedElastic-1] .a.a.a.c.t.s.DefaultReturnSchemaRegistry : DefaultReturnSchemaRegistry#getSchema - reason=查询schema, hashCode=437475, toolName=send_error_message, found=false, allTools=[]
2026-01-17T23:48:13.448+08:00  INFO --- [oundedElastic-1] c.a.a.a.a.s.node.CodeGeneratorNode       : CodeGeneratorNode#getReturnSchema - reason=registry中未找到schema, toolName=send_error_message
2026-01-17T23:48:13.448+08:00 DEBUG --- [oundedElastic-1] c.a.a.a.a.s.node.CodeGeneratorNode       : CodeGeneratorNode#getReturnSchema - reason=使用声明的schema, toolName=send_error_message, hasDeclared=false
2026-01-17T23:48:13.448+08:00 DEBUG --- [oundedElastic-1] c.a.a.a.a.s.node.CodeGeneratorNode       : CodeGeneratorNode#appendMethodDefinition - reason=生成方法定义, methodName=send_error_message, hasReturnSchema=false, hasSuccessShape=false
2026-01-17T23:48:13.448+08:00  INFO --- [oundedElastic-1] c.a.a.a.a.s.node.CodeGeneratorNode       : CodeGeneratorNode#getReturnSchema - reason=开始查询schema, registryHashCode=437475, toolName=send_notification, allToolsWithSchema=[]
2026-01-17T23:48:13.448+08:00  INFO --- [oundedElastic-1] .a.a.a.c.t.s.DefaultReturnSchemaRegistry : DefaultReturnSchemaRegistry#getSchema - reason=查询schema, hashCode=437475, toolName=send_notification, found=false, allTools=[]
2026-01-17T23:48:13.448+08:00  INFO --- [oundedElastic-1] c.a.a.a.a.s.node.CodeGeneratorNode       : CodeGeneratorNode#getReturnSchema - reason=registry中未找到schema, toolName=send_notification
2026-01-17T23:48:13.448+08:00 DEBUG --- [oundedElastic-1] c.a.a.a.a.s.node.CodeGeneratorNode       : CodeGeneratorNode#getReturnSchema - reason=使用声明的schema, toolName=send_notification, hasDeclared=false
2026-01-17T23:48:13.448+08:00 DEBUG --- [oundedElastic-1] c.a.a.a.a.s.node.CodeGeneratorNode       : CodeGeneratorNode#appendMethodDefinition - reason=生成方法定义, methodName=send_notification, hasReturnSchema=false, hasSuccessShape=false
2026-01-17T23:48:13.448+08:00  INFO --- [oundedElastic-1] c.a.a.a.a.s.node.CodeGeneratorNode       : CodeGeneratorNode#getReturnSchema - reason=开始查询schema, registryHashCode=437475, toolName=subscribe_trigger, allToolsWithSchema=[]
2026-01-17T23:48:13.448+08:00  INFO --- [oundedElastic-1] .a.a.a.c.t.s.DefaultReturnSchemaRegistry : DefaultReturnSchemaRegistry#getSchema - reason=查询schema, hashCode=437475, toolName=subscribe_trigger, found=false, allTools=[]
2026-01-17T23:48:13.448+08:00  INFO --- [oundedElastic-1] c.a.a.a.a.s.node.CodeGeneratorNode       : CodeGeneratorNode#getReturnSchema - reason=registry中未找到schema, toolName=subscribe_trigger
2026-01-17T23:48:13.448+08:00 DEBUG --- [oundedElastic-1] c.a.a.a.a.s.node.CodeGeneratorNode       : CodeGeneratorNode#getReturnSchema - reason=使用声明的schema, toolName=subscribe_trigger, hasDeclared=false
2026-01-17T23:48:13.448+08:00 DEBUG --- [oundedElastic-1] c.a.a.a.a.s.node.CodeGeneratorNode       : CodeGeneratorNode#appendMethodDefinition - reason=生成方法定义, methodName=subscribe_trigger, hasReturnSchema=false, hasSuccessShape=false
2026-01-17T23:48:13.449+08:00  INFO --- [oundedElastic-1] c.a.a.a.a.s.node.CodeGeneratorNode       : CodeGeneratorNode#getReturnSchema - reason=开始查询schema, registryHashCode=437475, toolName=unsubscribe_trigger, allToolsWithSchema=[]
2026-01-17T23:48:13.449+08:00  INFO --- [oundedElastic-1] .a.a.a.c.t.s.DefaultReturnSchemaRegistry : DefaultReturnSchemaRegistry#getSchema - reason=查询schema, hashCode=437475, toolName=unsubscribe_trigger, found=false, allTools=[]
2026-01-17T23:48:13.449+08:00  INFO --- [oundedElastic-1] c.a.a.a.a.s.node.CodeGeneratorNode       : CodeGeneratorNode#getReturnSchema - reason=registry中未找到schema, toolName=unsubscribe_trigger
2026-01-17T23:48:13.449+08:00 DEBUG --- [oundedElastic-1] c.a.a.a.a.s.node.CodeGeneratorNode       : CodeGeneratorNode#getReturnSchema - reason=使用声明的schema, toolName=unsubscribe_trigger, hasDeclared=false
2026-01-17T23:48:13.449+08:00 DEBUG --- [oundedElastic-1] c.a.a.a.a.s.node.CodeGeneratorNode       : CodeGeneratorNode#appendMethodDefinition - reason=生成方法定义, methodName=unsubscribe_trigger, hasReturnSchema=false, hasSuccessShape=false
2026-01-17T23:48:13.449+08:00  INFO --- [oundedElastic-1] c.a.a.a.a.s.node.CodeGeneratorNode       : CodeGeneratorNode#getReturnSchema - reason=开始查询schema, registryHashCode=437475, toolName=list_triggers, allToolsWithSchema=[]
2026-01-17T23:48:13.449+08:00  INFO --- [oundedElastic-1] .a.a.a.c.t.s.DefaultReturnSchemaRegistry : DefaultReturnSchemaRegistry#getSchema - reason=查询schema, hashCode=437475, toolName=list_triggers, found=false, allTools=[]
2026-01-17T23:48:13.449+08:00  INFO --- [oundedElastic-1] c.a.a.a.a.s.node.CodeGeneratorNode       : CodeGeneratorNode#getReturnSchema - reason=registry中未找到schema, toolName=list_triggers
2026-01-17T23:48:13.449+08:00 DEBUG --- [oundedElastic-1] c.a.a.a.a.s.node.CodeGeneratorNode       : CodeGeneratorNode#getReturnSchema - reason=使用声明的schema, toolName=list_triggers, hasDeclared=false
2026-01-17T23:48:13.449+08:00 DEBUG --- [oundedElastic-1] c.a.a.a.a.s.node.CodeGeneratorNode       : CodeGeneratorNode#appendMethodDefinition - reason=生成方法定义, methodName=list_triggers, hasReturnSchema=false, hasSuccessShape=false
2026-01-17T23:48:13.449+08:00  INFO --- [oundedElastic-1] c.a.a.a.a.s.node.CodeGeneratorNode       : CodeGeneratorNode#getReturnSchema - reason=开始查询schema, registryHashCode=437475, toolName=get_trigger_detail, allToolsWithSchema=[]
2026-01-17T23:48:13.449+08:00  INFO --- [oundedElastic-1] .a.a.a.c.t.s.DefaultReturnSchemaRegistry : DefaultReturnSchemaRegistry#getSchema - reason=查询schema, hashCode=437475, toolName=get_trigger_detail, found=false, allTools=[]
2026-01-17T23:48:13.449+08:00  INFO --- [oundedElastic-1] c.a.a.a.a.s.node.CodeGeneratorNode       : CodeGeneratorNode#getReturnSchema - reason=registry中未找到schema, toolName=get_trigger_detail
2026-01-17T23:48:13.449+08:00 DEBUG --- [oundedElastic-1] c.a.a.a.a.s.node.CodeGeneratorNode       : CodeGeneratorNode#getReturnSchema - reason=使用声明的schema, toolName=get_trigger_detail, hasDeclared=false
2026-01-17T23:48:13.449+08:00 DEBUG --- [oundedElastic-1] c.a.a.a.a.s.node.CodeGeneratorNode       : CodeGeneratorNode#appendMethodDefinition - reason=生成方法定义, methodName=get_trigger_detail, hasReturnSchema=false, hasSuccessShape=false
2026-01-17T23:48:13.449+08:00  INFO --- [oundedElastic-1] c.a.a.a.a.s.node.CodeGeneratorNode       : CodeGeneratorNode#apply 构建消息: systemPrompt=你是一个专业的 Python 代码生成助手。你的任务是在已有的 Python 文件中补充新的函数。

```python
# -*- coding: utf-8 -*-
"""
CodeAct 工具集成模块

【代码生成规则】
1. 只生成函数定义，不要重复 import 和 class
2. 函数名和参数必须与要求完全一致
3. 调用工具使用 实例名.方法名() 格式
4. 只返回纯代码，不要 ```python 标记
5. 【重要】每个函数必须有 return 语句返回结果
   - 查询/搜索类：return 搜索结果
   - 处理/计算类：return 处理结果
   - 通知/回复类：先执行操作，再 return 操作结果或状态
"""

# === Import ===
from typing import Any, List, Dict, Optional
import json
import re

# === 工具类定义 ===

class SearchTools:
    """搜索相关工具集合"""

    def unified_search(self, query: str, sources: Literal["project", "knowledge", "web", "experience", "custom", "MockBaiduWebSearchProvider", "MockKnowledgeStoreSearchProvider", "MockProjectContextSearchProvider"] = None, limit: int = 10) -> Any:
        """统一搜索工具，可同时搜索项目、知识库、Web等多个数据源

        Args:
            query (str): 搜索查询关键词
            sources (Literal["project", "knowledge", "web", "experience", "custom", "MockBaiduWebSearchProvider", "MockKnowledgeStoreSearchProvider", "MockProjectContextSearchProvider"], optional): 要搜索的数据源列表，支持标准类型(project, knowledge, web等)或指定Provider名称
            limit (int, optional): 返回结果数量限制 默认值: 10

        Returns:
            Any: 操作结果
        """
        ...

    def search_web(self, query: str, limit: int = 10) -> Any:
        """执行Web搜索，获取公开互联网信息

        Args:
            query (str): 搜索查询关键词
            limit (int, optional): 返回结果数量限制 默认值: 10

        Returns:
            Any: 操作结果
        """
        ...

    def search_knowledge(self, query: str, limit: int = 10) -> Any:
        """搜索团队知识库，包括FAQ、规范、最佳实践等

        Args:
            query (str): 搜索查询关键词
            limit (int, optional): 返回结果数量限制 默认值: 10

        Returns:
            Any: 操作结果
        """
        ...

    def search_project(self, query: str, limit: int = 10) -> Any:
        """搜索项目上下文信息，包括代码、配置、文档等

        Args:
            query (str): 搜索查询关键词
            limit (int, optional): 返回结果数量限制 默认值: 10

        Returns:
            Any: 操作结果
        """
        ...


class ReplyTools:
    """用户回复相关工具集合"""

    def send_success_message(self, message: str) -> Any:
        """Send a success message to the IDE console

        Args:
            message (str): 要发送的消息内容

        Returns:
            Any: 操作结果
        """
        ...

    def send_error_message(self, message: str) -> Any:
        """Send an error message to the IDE console

        Args:
            message (str): 要发送的消息内容

        Returns:
            Any: 操作结果
        """
        ...

    def send_notification(self, message: str) -> Any:
        """Send a notification message

        Args:
            message (str): 要发送的消息内容

        Returns:
            Any: 操作结果
        """
        ...


class TriggerTools:
    """触发器管理工具集合"""

    def subscribe_trigger(self, name: str, schedule_mode: Literal["CRON", "FIXED_DELAY", "FIXED_RATE", "ONE_TIME", "TRIGGER"], schedule_value: str, description: str = None, condition_function: str = None, execute_function: str = None) -> Any:
        """创建并订阅一个新的触发器

        Args:
            name (str): 触发器名称
            description (str, optional): 触发器描述
            schedule_mode (Literal["CRON", "FIXED_DELAY", "FIXED_RATE", "ONE_TIME", "TRIGGER"]): 调度模式: CRON, FIXED_DELAY, FIXED_RATE, ONE_TIME, TRIGGER
            schedule_value (str): 调度值：CRON模式为cron表达式；FIXED_DELAY/FIXED_RATE模式为毫秒数(如3分钟=180000)；ONE_TIME模式为ISO时间戳
            condition_function (str, optional): 条件判断函数代码
            execute_function (str, optional): 执行函数代码

        Returns:
            Any: 操作结果
        """
        ...

    def unsubscribe_trigger(self, trigger_id: str) -> Any:
        """取消订阅并删除一个触发器

        Args:
            trigger_id (str): 要删除的触发器 ID

        Returns:
            Any: 操作结果
        """
        ...

    def list_triggers(self) -> Any:
        """列出所有触发器

        Returns:
            Any: 操作结果
        """
        ...

    def get_trigger_detail(self, trigger_id: str) -> Any:
        """获取指定触发器的详细信息

        Args:
            trigger_id (str): 触发器 ID

        Returns:
            Any: 操作结果
        """
        ...


# === 工具实例（可直接使用）===
search_tools = SearchTools()
reply_tools = ReplyTools()
trigger_tools = TriggerTools()

# === 历史代码 ===
# （暂无历史函数）

# === 待生成函数 ===
# 在此处补充新函数（见下方要求）

```
, userMessage=请在上面的 Python 文件中补充以下函数：

```python
def create_product_unit(unit_name):
    """
    根据用户提供的单位名称，调用ERP系统API创建新的产品计量单位
    """
    # TODO: 在此实现函数逻辑
    ...
```

请根据需求描述，实现上述函数的完整代码。
直接输出函数代码，不要包含 ```python 标记。
2026-01-17T23:48:18.123+08:00  INFO --- [oundedElastic-1] c.a.a.a.a.s.node.CodeGeneratorNode       : CodeGeneratorNode#apply 代码生成成功: functionName=create_product_unit, codeLength=380
2026-01-17T23:48:18.124+08:00  INFO --- [oundedElastic-1] c.a.a.a.a.subagent.BaseAgentTaskTool     : BaseAgentTaskTool#apply 子Agent调用成功: subagentType=code-generator
2026-01-17T23:48:18.124+08:00  INFO --- [oundedElastic-1] c.a.a.a.c.e.p.PythonEnvironmentManager   : PythonEnvironmentManager#extractFunctionName 开始提取函数名
2026-01-17T23:48:18.124+08:00 DEBUG --- [oundedElastic-1] c.a.a.a.c.e.p.PythonEnvironmentManager   : PythonEnvironmentManager#extractFunctionName 代码内容:
def create_product_unit(unit_name):
    """
    根据用户提供的单位名称，调用ERP系统API创建新的产品计量单位
    """
    # 假设这里有一个 ERP 系统的 API 客户端实例 erp_client
    # 你需要根据实际的 API 文档来实现具体的调用逻辑

    # 示例代码
    response = erp_client.create_product_unit(unit_name=unit_name)
    
    # 检查响应状态
    if response.status_code == 201:
        return "产品计量单位创建成功"
    else:
        return f"产品计量单位创建失败: {response.text}"
2026-01-17T23:48:18.124+08:00  INFO --- [oundedElastic-1] c.a.a.a.c.e.p.PythonEnvironmentManager   : PythonEnvironmentManager#extractFunctionName 提取到函数名: create_product_unit
2026-01-17T23:48:18.125+08:00  WARN --- [oundedElastic-1] c.a.a.a.a.tools.WriteCodeTool            : WriteCodeTool#saveToStore Store未初始化
2026-01-17T23:48:18.125+08:00  INFO --- [oundedElastic-1] c.a.a.a.a.tools.WriteCodeTool            : WriteCodeTool#apply 代码生成成功: functionName=create_product_unit
2026-01-17T23:48:18.151+08:00  INFO --- [oundedElastic-1] c.a.a.a.e.e.h.ModelInputEvaluationHook   : ModelInputEvaluationHook#beforeModel - reason=开始模型输入评估, phase=REACT
2026-01-17T23:48:18.151+08:00 DEBUG --- [oundedElastic-1] .a.e.e.c.CodeactEvaluationContextFactory : CodeactEvaluationContextFactory#createInputRoutingContext - reason=开始构造输入路由评估上下文
2026-01-17T23:48:18.151+08:00  INFO --- [pool-3-thread-1] c.a.a.a.e.DefaultEvaluationService       : Starting evaluation for suite: React Phase Evaluation Suite
2026-01-17T23:48:18.194+08:00  INFO --- [pool-2-thread-1] c.a.a.a.e.e.CriterionEvaluationAction    : Executing criterion: enhanced_user_input
2026-01-17T23:48:18.194+08:00  INFO --- [pool-2-thread-3] c.a.a.a.e.e.CriterionEvaluationAction    : Executing criterion: action_intent_match
2026-01-17T23:48:18.194+08:00 DEBUG --- [pool-2-thread-1] c.a.a.a.e.e.CriterionEvaluationAction    : Batching not enabled for criterion: enhanced_user_input
2026-01-17T23:48:18.194+08:00  INFO --- [pool-2-thread-2] c.a.a.a.e.e.CriterionEvaluationAction    : Executing criterion: is_fuzzy
2026-01-17T23:48:18.194+08:00 DEBUG --- [pool-2-thread-3] c.a.a.a.e.e.CriterionEvaluationAction    : Batching not enabled for criterion: action_intent_match
2026-01-17T23:48:18.194+08:00 DEBUG --- [pool-2-thread-2] c.a.a.a.e.e.CriterionEvaluationAction    : Batching not enabled for criterion: is_fuzzy
2026-01-17T23:48:18.194+08:00  INFO --- [pool-2-thread-3] c.a.a.a.e.e.CriterionEvaluationAction    : Criterion action_intent_match completed with result: NO_MATCH
2026-01-17T23:48:18.194+08:00 DEBUG --- [pool-2-thread-1] c.a.a.a.e.evaluator.LLMBasedEvaluator    : Evaluating criterion enhanced_user_input with LLM, prompt: You are an evaluator performing the following evaluation task:

Evaluation Criterion Description: 改写用户输入，使其更加清晰、完整

Working Mechanism:
你是一个用户输入优化专家。请根据用户输入，改写并完善需求。改写要求：1. 补全隐含的约束条件2. 明确输入输出格式3. 保持原始意图不变4. 直接输出改写后的内容，不要添加任何解释

Output your response in the following format:

RESULT: (your evaluation result)
(No reasoning required for this evaluation)

Context:
- userInput: null

Your evaluation result:

2026-01-17T23:48:18.194+08:00 DEBUG --- [pool-2-thread-2] c.a.a.a.e.evaluator.LLMBasedEvaluator    : Evaluating criterion is_fuzzy with LLM, prompt: You are an evaluator performing the following evaluation task:

Evaluation Criterion Description: 判断用户输入是否模糊，是否需要向用户澄清

Working Mechanism:
你是一个用户意图清晰度判断专家。请判断用户输入是否明确。

【模糊】的特征：
- 没有具体指明要做什么操作
- 使用模糊词汇如'帮我看看'、'处理一下'
- 请求可能有多种理解方式
- 缺少必要的参数或信息

【清晰】的特征：
- 明确提到要查询、搜索、获取某个具体信息
- 提供了具体的查询关键词或目标
- 意图明确，执行路径清晰

请直接输出'模糊'或'清晰'，不要添加任何解释。

Output your response in the following format:

RESULT: (one of: 模糊, 清晰)
(No reasoning required for this evaluation)

Context:
- userInput: null

Your evaluation result:

2026-01-17T23:48:18.702+08:00  INFO --- [pool-2-thread-2] c.a.a.a.e.e.CriterionEvaluationAction    : Criterion is_fuzzy completed with result: 模糊
2026-01-17T23:48:19.550+08:00  INFO --- [pool-2-thread-1] c.a.a.a.e.e.CriterionEvaluationAction    : Criterion enhanced_user_input completed with result: 请提供具体的用户输入内容，以便进行优化改写。
2026-01-17T23:48:19.572+08:00  INFO --- [action-thread-3] c.a.a.a.e.e.CriterionEvaluationAction    : Executing criterion: react_experience_retrieval
2026-01-17T23:48:19.572+08:00  INFO --- [action-thread-4] c.a.a.a.e.e.CriterionEvaluationAction    : Executing criterion: action_intent_llm_verify
2026-01-17T23:48:19.572+08:00 DEBUG --- [action-thread-3] c.a.a.a.e.e.CriterionEvaluationAction    : Batching not enabled for criterion: react_experience_retrieval
2026-01-17T23:48:19.572+08:00 DEBUG --- [action-thread-4] c.a.a.a.e.e.CriterionEvaluationAction    : Batching not enabled for criterion: action_intent_llm_verify
2026-01-17T23:48:19.572+08:00 DEBUG --- [action-thread-4] c.a.a.a.e.evaluator.LLMBasedEvaluator    : Evaluating criterion action_intent_llm_verify with LLM, prompt: 你是一个意图识别和参数提取专家。请根据用户输入和候选动作列表：
1. 判断用户最可能想要执行的动作
2. 从用户输入中提取动作所需的参数
3. 检查是否有缺失的必填参数

## 用户输入


## 候选动作列表（包含参数定义）
NO_MATCH

## 处理要求
1. 仔细分析用户输入的语义和意图
2. 选择最匹配的动作，如果没有合适的动作则返回 NO_MATCH
3. 如果选中了动作，从用户输入中提取该动作需要的参数值
4. 检查必填参数（required=true）是否都已提取到，如果有缺失则生成追问问题

## 返回格式（严格 JSON）
如果匹配到动作：
RESULT: {
    "actionId": "选中的动作ID",
    "actionName": "动作名称",
    "confidence": 0.95,
    "reason": "判断理由",
    "extractedParams": {"参数名": "提取到的值", ...},
    "missingParams": ["缺失的必填参数名", ...],
    "nextQuestion": "如果有缺失参数，生成追问问题，否则为null"
}

如果未匹配到动作：
RESULT: {"actionId": "NO_MATCH", "confidence": 0.95, "reason": "判断理由"}

2026-01-17T23:48:19.588+08:00 DEBUG --- [action-thread-3] .s.p.e.p.ElasticsearchExperienceProvider : ElasticsearchExperienceProvider#query - reason=query completed, type=COMMON, text=null, count=0
2026-01-17T23:48:19.599+08:00 DEBUG --- [action-thread-3] .s.p.e.p.ElasticsearchExperienceProvider : ElasticsearchExperienceProvider#query - reason=query completed, type=REACT, text=null, count=0
2026-01-17T23:48:19.599+08:00  INFO --- [action-thread-3] .e.e.ExperienceRetrievalEvaluatorFactory : ExperienceRetrievalEvaluatorFactory#react_experience_evaluator - reason=未检索到经验
2026-01-17T23:48:19.599+08:00  INFO --- [action-thread-3] c.a.a.a.e.e.CriterionEvaluationAction    : Criterion react_experience_retrieval completed with result: 
2026-01-17T23:48:20.884+08:00  WARN --- [action-thread-4] c.a.a.a.e.evaluator.LLMBasedEvaluator    : Failed to parse JSON from response: 看起来您的请求中缺少了具体的用户输入内容。请提供用户的实际输入文本，以便我能帮助您完成意图识别和参数提取的任务。
2026-01-17T23:48:20.884+08:00  INFO --- [action-thread-4] c.a.a.a.e.e.CriterionEvaluationAction    : Criterion action_intent_llm_verify completed with result: 看起来您的请求中缺少了具体的用户输入内容。请提供用户的实际输入文本，以便我能帮助您完成意图识别和参数提取的任务。
2026-01-17T23:48:20.911+08:00 DEBUG --- [pool-3-thread-1] c.a.a.a.e.e.GraphBasedEvaluationExecutor : Collected result for criterion 'enhanced_user_input': status=SUCCESS, value=请提供具体的用户输入内容，以便进行优化改写。
2026-01-17T23:48:20.916+08:00 DEBUG --- [pool-3-thread-1] c.a.a.a.e.e.GraphBasedEvaluationExecutor : Collected result for criterion 'is_fuzzy': status=SUCCESS, value=模糊
2026-01-17T23:48:20.916+08:00 DEBUG --- [pool-3-thread-1] c.a.a.a.e.e.GraphBasedEvaluationExecutor : Collected result for criterion 'react_experience_retrieval': status=SUCCESS, value=
2026-01-17T23:48:20.916+08:00 DEBUG --- [pool-3-thread-1] c.a.a.a.e.e.GraphBasedEvaluationExecutor : Collected result for criterion 'action_intent_match': status=SUCCESS, value=NO_MATCH
2026-01-17T23:48:20.916+08:00 DEBUG --- [pool-3-thread-1] c.a.a.a.e.e.GraphBasedEvaluationExecutor : Collected result for criterion 'action_intent_llm_verify': status=SUCCESS, value=看起来您的请求中缺少了具体的用户输入内容。请提供用户的实际输入文本，以便我能帮助您完成意图识别和参数提取的任务。
2026-01-17T23:48:20.916+08:00  INFO --- [pool-3-thread-1] c.a.a.a.e.e.GraphBasedEvaluationExecutor : Collected 5 criterion results from final state
2026-01-17T23:48:20.916+08:00  INFO --- [pool-3-thread-1] c.a.a.a.e.DefaultEvaluationService       : Evaluation completed for suite: React Phase Evaluation Suite
2026-01-17T23:48:20.916+08:00  INFO --- [pool-3-thread-1] c.a.a.a.e.e.h.ModelInputEvaluationHook   : ModelInputEvaluationHook#beforeModel - reason=评估完成, phase=REACT
2026-01-17T23:48:20.916+08:00 DEBUG --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#attachInputRoutingResult - reason=写入输入路由评估结果
2026-01-17T23:48:20.916+08:00  INFO --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#appendEvaluationResultToMessages - reason=开始处理评估结果注入
2026-01-17T23:48:20.917+08:00  INFO --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#appendEvaluationResultToMessages - reason=已解析历史评估结果, 历史条目数=4
2026-01-17T23:48:20.917+08:00 DEBUG --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#appendEvaluationResultToMessages - reason=检查criterion metadata, criterion=action_intent_match, metadata=[]
2026-01-17T23:48:20.917+08:00 DEBUG --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#appendEvaluationResultToMessages - reason=跳过已存在的无ref-id criterion, criterion=action_intent_match
2026-01-17T23:48:20.917+08:00 DEBUG --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#appendEvaluationResultToMessages - reason=检查criterion metadata, criterion=react_experience_retrieval, metadata=[is_empty]
2026-01-17T23:48:20.917+08:00 DEBUG --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#appendEvaluationResultToMessages - reason=跳过空结果的criterion, criterion=react_experience_retrieval
2026-01-17T23:48:20.917+08:00 DEBUG --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#appendEvaluationResultToMessages - reason=检查criterion metadata, criterion=enhanced_user_input, metadata=[]
2026-01-17T23:48:20.917+08:00 DEBUG --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#appendEvaluationResultToMessages - reason=跳过已存在的无ref-id criterion, criterion=enhanced_user_input
2026-01-17T23:48:20.917+08:00 DEBUG --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#appendEvaluationResultToMessages - reason=检查criterion metadata, criterion=is_fuzzy, metadata=[]
2026-01-17T23:48:20.917+08:00 DEBUG --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#appendEvaluationResultToMessages - reason=跳过已存在的无ref-id criterion, criterion=is_fuzzy
2026-01-17T23:48:20.917+08:00 DEBUG --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#appendEvaluationResultToMessages - reason=检查criterion metadata, criterion=action_intent_llm_verify, metadata=[]
2026-01-17T23:48:20.917+08:00 DEBUG --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#appendEvaluationResultToMessages - reason=跳过已存在的无ref-id criterion, criterion=action_intent_llm_verify
2026-01-17T23:48:20.917+08:00  INFO --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#appendEvaluationResultToMessages - reason=没有新的评估内容需要注入
2026-01-17T23:48:20.917+08:00  INFO --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#attachResult - reason=评估结果已写入, path=evaluation.inputRouting, suiteId=react-phase-suite
2026-01-17T23:48:20.922+08:00  INFO --- [pool-3-thread-1] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#beforeModel - reason=开始处理评估结果prompt注入, phase=REACT
2026-01-17T23:48:20.922+08:00 DEBUG --- [pool-3-thread-1] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#findLatestEvaluationResult - reason=找到评估结果, index=2
2026-01-17T23:48:20.922+08:00 DEBUG --- [pool-3-thread-1] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#beforeModel - reason=找到评估结果XML, phase=REACT, xmlLength=1064
2026-01-17T23:48:20.922+08:00 DEBUG --- [pool-3-thread-1] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#parseEvaluationXml - reason=解析到criterion, name=enhanced_user_input, valueLength=21
2026-01-17T23:48:20.922+08:00 DEBUG --- [pool-3-thread-1] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#parseEvaluationXml - reason=解析到criterion, name=action_intent_match, valueLength=433
2026-01-17T23:48:20.922+08:00 DEBUG --- [pool-3-thread-1] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#parseEvaluationXml - reason=解析到criterion, name=is_fuzzy, valueLength=2
2026-01-17T23:48:20.922+08:00 DEBUG --- [pool-3-thread-1] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#parseEvaluationXml - reason=解析到criterion, name=action_intent_llm_verify, valueLength=260
2026-01-17T23:48:20.922+08:00 DEBUG --- [pool-3-thread-1] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#beforeModel - reason=解析评估结果, phase=REACT, results={action_intent_match={"candidates":[{"matchType":"KEYWORD_EXACT","confidence":0.95,"actionId":"erp:product-unit:create","description":"在ERP系统中创建新的产品计量单位，如：个、台、箱、件等","parameters":[{"name":"name","description":"计量单位名称","label":"单位名称","type":"STRING","required":true},{"defaultValue":"0","name":"status","description":"单位状态","label":"单位状态","type":"ENUM","required":false}],"actionName":"添加产品单位"}],"userInput":"添加单位","candidateCount":1,"status":"CANDIDATES"}, enhanced_user_input=请提供具体的用户输入内容以便进行优化处理。, is_fuzzy=模糊, action_intent_llm_verify=```json
{
    "actionId": "erp:product-unit:create",
    "actionName": "添加产品单位",
    "confidence": 0.95,
    "reason": "用户输入'添加单位'与候选动作列表中的'添加产品单位'高度匹配，意图明确。",
    "extractedParams": {},
    "missingParams": ["name"],
    "nextQuestion": "请提供要添加的计量单位名称。"
}
```}
2026-01-17T23:48:20.922+08:00  INFO --- [pool-3-thread-1] a.a.s.c.ReactPhasePromptGuidanceProvider : ReactPhasePromptGuidanceProvider#generateGuidance - reason=生成React阶段指导, is_fuzzy=模糊
2026-01-17T23:48:20.922+08:00 DEBUG --- [pool-3-thread-1] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#generatePromptGuidance - reason=Provider生成了指导, provider=ReactPhasePromptGuidanceProvider, guidanceLength=189
2026-01-17T23:48:20.922+08:00 DEBUG --- [pool-3-thread-1] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#injectPromptGuidanceToMessages - reason=已创建prompt指导消息对
2026-01-17T23:48:20.922+08:00  INFO --- [pool-3-thread-1] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#beforeModel - reason=已注入评估结果prompt指导, phase=REACT, guidanceLength=189
2026-01-17T23:48:20.934+08:00  INFO --- [pool-3-thread-1] c.a.a.a.a.s.CodeactSubAgentInterceptor   : CodeactSubAgentInterceptor#interceptModel 拦截器被调用
2026-01-17T23:48:20.934+08:00  INFO --- [pool-3-thread-1] c.a.a.a.a.s.CodeactSubAgentInterceptor   : CodeactSubAgentInterceptor#interceptModel 追加拦截器提示词到原有系统提示词
2026-01-17T23:48:20.934+08:00  INFO --- [pool-3-thread-1] c.a.a.a.a.s.CodeactSubAgentInterceptor   : CodeactSubAgentInterceptor#interceptModel 系统提示词已增强，继续调用链
2026-01-17T23:48:24.633+08:00 DEBUG --- [oundedElastic-1] c.a.a.a.e.r.tools.BaseReplyCodeactTool   : BaseReplyCodeactTool#call - reason=开始执行回复工具, toolName=send_notification, toolInput={"message": "请提供您想要添加的计量单位名称，以便我为您执行操作。"}
2026-01-17T23:48:24.634+08:00  WARN --- [oundedElastic-1] c.a.a.a.s.r.MockIdeTextChannelDefinition : MockIdeTextChannelDefinition#execute - reason=text is empty, toolName=null
2026-01-17T23:48:24.634+08:00  INFO --- [oundedElastic-1] c.a.a.a.e.r.tools.BaseReplyCodeactTool   : BaseReplyCodeactTool#execute - reason=渠道执行成功, toolName=send_notification, channelCode=IDE_TEXT
2026-01-17T23:48:24.636+08:00  INFO --- [oundedElastic-1] c.a.a.a.e.r.tools.BaseReplyCodeactTool   : BaseReplyCodeactTool#call - reason=回复工具执行成功, toolName=send_notification, success=false
2026-01-17T23:48:24.647+08:00  INFO --- [oundedElastic-1] c.a.a.a.e.e.h.ModelInputEvaluationHook   : ModelInputEvaluationHook#beforeModel - reason=开始模型输入评估, phase=REACT
2026-01-17T23:48:24.647+08:00 DEBUG --- [oundedElastic-1] .a.e.e.c.CodeactEvaluationContextFactory : CodeactEvaluationContextFactory#createInputRoutingContext - reason=开始构造输入路由评估上下文
2026-01-17T23:48:24.647+08:00  INFO --- [pool-3-thread-1] c.a.a.a.e.DefaultEvaluationService       : Starting evaluation for suite: React Phase Evaluation Suite
2026-01-17T23:48:24.659+08:00  INFO --- [pool-2-thread-1] c.a.a.a.e.e.CriterionEvaluationAction    : Executing criterion: enhanced_user_input
2026-01-17T23:48:24.659+08:00  INFO --- [pool-2-thread-2] c.a.a.a.e.e.CriterionEvaluationAction    : Executing criterion: is_fuzzy
2026-01-17T23:48:24.659+08:00  INFO --- [pool-2-thread-3] c.a.a.a.e.e.CriterionEvaluationAction    : Executing criterion: action_intent_match
2026-01-17T23:48:24.659+08:00 DEBUG --- [pool-2-thread-2] c.a.a.a.e.e.CriterionEvaluationAction    : Batching not enabled for criterion: is_fuzzy
2026-01-17T23:48:24.659+08:00 DEBUG --- [pool-2-thread-1] c.a.a.a.e.e.CriterionEvaluationAction    : Batching not enabled for criterion: enhanced_user_input
2026-01-17T23:48:24.659+08:00 DEBUG --- [pool-2-thread-3] c.a.a.a.e.e.CriterionEvaluationAction    : Batching not enabled for criterion: action_intent_match
2026-01-17T23:48:24.659+08:00 DEBUG --- [pool-2-thread-1] c.a.a.a.e.evaluator.LLMBasedEvaluator    : Evaluating criterion enhanced_user_input with LLM, prompt: You are an evaluator performing the following evaluation task:

Evaluation Criterion Description: 改写用户输入，使其更加清晰、完整

Working Mechanism:
你是一个用户输入优化专家。请根据用户输入，改写并完善需求。改写要求：1. 补全隐含的约束条件2. 明确输入输出格式3. 保持原始意图不变4. 直接输出改写后的内容，不要添加任何解释

Output your response in the following format:

RESULT: (your evaluation result)
(No reasoning required for this evaluation)

Context:
- userInput: null

Your evaluation result:

2026-01-17T23:48:24.659+08:00  INFO --- [pool-2-thread-3] c.a.a.a.e.e.CriterionEvaluationAction    : Criterion action_intent_match completed with result: NO_MATCH
2026-01-17T23:48:24.659+08:00 DEBUG --- [pool-2-thread-2] c.a.a.a.e.evaluator.LLMBasedEvaluator    : Evaluating criterion is_fuzzy with LLM, prompt: You are an evaluator performing the following evaluation task:

Evaluation Criterion Description: 判断用户输入是否模糊，是否需要向用户澄清

Working Mechanism:
你是一个用户意图清晰度判断专家。请判断用户输入是否明确。

【模糊】的特征：
- 没有具体指明要做什么操作
- 使用模糊词汇如'帮我看看'、'处理一下'
- 请求可能有多种理解方式
- 缺少必要的参数或信息

【清晰】的特征：
- 明确提到要查询、搜索、获取某个具体信息
- 提供了具体的查询关键词或目标
- 意图明确，执行路径清晰

请直接输出'模糊'或'清晰'，不要添加任何解释。

Output your response in the following format:

RESULT: (one of: 模糊, 清晰)
(No reasoning required for this evaluation)

Context:
- userInput: null

Your evaluation result:

2026-01-17T23:48:25.166+08:00  INFO --- [pool-2-thread-2] c.a.a.a.e.e.CriterionEvaluationAction    : Criterion is_fuzzy completed with result: 模糊
2026-01-17T23:48:25.248+08:00  INFO --- [pool-2-thread-1] c.a.a.a.e.e.CriterionEvaluationAction    : Criterion enhanced_user_input completed with result: 请提供具体的用户输入内容以便进行优化处理。
2026-01-17T23:48:25.271+08:00  INFO --- [action-thread-6] c.a.a.a.e.e.CriterionEvaluationAction    : Executing criterion: action_intent_llm_verify
2026-01-17T23:48:25.271+08:00  INFO --- [action-thread-5] c.a.a.a.e.e.CriterionEvaluationAction    : Executing criterion: react_experience_retrieval
2026-01-17T23:48:25.271+08:00 DEBUG --- [action-thread-6] c.a.a.a.e.e.CriterionEvaluationAction    : Batching not enabled for criterion: action_intent_llm_verify
2026-01-17T23:48:25.271+08:00 DEBUG --- [action-thread-5] c.a.a.a.e.e.CriterionEvaluationAction    : Batching not enabled for criterion: react_experience_retrieval
2026-01-17T23:48:25.271+08:00 DEBUG --- [action-thread-6] c.a.a.a.e.evaluator.LLMBasedEvaluator    : Evaluating criterion action_intent_llm_verify with LLM, prompt: 你是一个意图识别和参数提取专家。请根据用户输入和候选动作列表：
1. 判断用户最可能想要执行的动作
2. 从用户输入中提取动作所需的参数
3. 检查是否有缺失的必填参数

## 用户输入


## 候选动作列表（包含参数定义）
NO_MATCH

## 处理要求
1. 仔细分析用户输入的语义和意图
2. 选择最匹配的动作，如果没有合适的动作则返回 NO_MATCH
3. 如果选中了动作，从用户输入中提取该动作需要的参数值
4. 检查必填参数（required=true）是否都已提取到，如果有缺失则生成追问问题

## 返回格式（严格 JSON）
如果匹配到动作：
RESULT: {
    "actionId": "选中的动作ID",
    "actionName": "动作名称",
    "confidence": 0.95,
    "reason": "判断理由",
    "extractedParams": {"参数名": "提取到的值", ...},
    "missingParams": ["缺失的必填参数名", ...],
    "nextQuestion": "如果有缺失参数，生成追问问题，否则为null"
}

如果未匹配到动作：
RESULT: {"actionId": "NO_MATCH", "confidence": 0.95, "reason": "判断理由"}

2026-01-17T23:48:25.282+08:00 DEBUG --- [action-thread-5] .s.p.e.p.ElasticsearchExperienceProvider : ElasticsearchExperienceProvider#query - reason=query completed, type=COMMON, text=null, count=0
2026-01-17T23:48:25.292+08:00 DEBUG --- [action-thread-5] .s.p.e.p.ElasticsearchExperienceProvider : ElasticsearchExperienceProvider#query - reason=query completed, type=REACT, text=null, count=0
2026-01-17T23:48:25.292+08:00  INFO --- [action-thread-5] .e.e.ExperienceRetrievalEvaluatorFactory : ExperienceRetrievalEvaluatorFactory#react_experience_evaluator - reason=未检索到经验
2026-01-17T23:48:25.292+08:00  INFO --- [action-thread-5] c.a.a.a.e.e.CriterionEvaluationAction    : Criterion react_experience_retrieval completed with result: 
2026-01-17T23:48:27.776+08:00  WARN --- [action-thread-6] c.a.a.a.e.evaluator.LLMBasedEvaluator    : Failed to parse JSON from response: 看起来您的请求中缺少了具体的用户输入文本以及候选动作列表的具体内容（比如每个动作的ID、名称及其参数定义等）。为了能够准确地分析用户的意图、选择最合适的行为，并从中提取必要的参数，我需要这些详细信息。请提供完整的用户输入及候选动作列表详情，包括但不限于每个动作所需的参数及其是否为必填项。这样我才能够按照您的要求进行处理并给出反馈。
2026-01-17T23:48:27.776+08:00  INFO --- [action-thread-6] c.a.a.a.e.e.CriterionEvaluationAction    : Criterion action_intent_llm_verify completed with result: 看起来您的请求中缺少了具体的用户输入文本以及候选动作列表的具体内容（比如每个动作的ID、名称及其参数定义等）。为了能够准确地分析用户的意图、选择最合适的行为，并从中提取必要的参数，我需要这些详细信息。请提供完整的用户输入及候选动作列表详情，包括但不限于每个动作所需的参数及其是否为必填项。这样我才能够按照您的要求进行处理并给出反馈。
2026-01-17T23:48:27.800+08:00 DEBUG --- [pool-3-thread-1] c.a.a.a.e.e.GraphBasedEvaluationExecutor : Collected result for criterion 'enhanced_user_input': status=SUCCESS, value=请提供具体的用户输入内容以便进行优化处理。
2026-01-17T23:48:27.800+08:00 DEBUG --- [pool-3-thread-1] c.a.a.a.e.e.GraphBasedEvaluationExecutor : Collected result for criterion 'is_fuzzy': status=SUCCESS, value=模糊
2026-01-17T23:48:27.800+08:00 DEBUG --- [pool-3-thread-1] c.a.a.a.e.e.GraphBasedEvaluationExecutor : Collected result for criterion 'react_experience_retrieval': status=SUCCESS, value=
2026-01-17T23:48:27.800+08:00 DEBUG --- [pool-3-thread-1] c.a.a.a.e.e.GraphBasedEvaluationExecutor : Collected result for criterion 'action_intent_match': status=SUCCESS, value=NO_MATCH
2026-01-17T23:48:27.800+08:00 DEBUG --- [pool-3-thread-1] c.a.a.a.e.e.GraphBasedEvaluationExecutor : Collected result for criterion 'action_intent_llm_verify': status=SUCCESS, value=看起来您的请求中缺少了具体的用户输入文本以及候选动作列表的具体内容（比如每个动作的ID、名称及其参数定义等）。为了能够准确地分析用户的意图、选择最合适的行为，并从中提取必要的参数，我需要这些详细信息。请提供完整的用户输入及候选动作列表详情，包括但不限于每个动作所需的参数及其是否为必填项。这样我才能够按照您的要求进行处理并给出反馈。
2026-01-17T23:48:27.800+08:00  INFO --- [pool-3-thread-1] c.a.a.a.e.e.GraphBasedEvaluationExecutor : Collected 5 criterion results from final state
2026-01-17T23:48:27.800+08:00  INFO --- [pool-3-thread-1] c.a.a.a.e.DefaultEvaluationService       : Evaluation completed for suite: React Phase Evaluation Suite
2026-01-17T23:48:27.800+08:00  INFO --- [pool-3-thread-1] c.a.a.a.e.e.h.ModelInputEvaluationHook   : ModelInputEvaluationHook#beforeModel - reason=评估完成, phase=REACT
2026-01-17T23:48:27.800+08:00 DEBUG --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#attachInputRoutingResult - reason=写入输入路由评估结果
2026-01-17T23:48:27.800+08:00  INFO --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#appendEvaluationResultToMessages - reason=开始处理评估结果注入
2026-01-17T23:48:27.800+08:00  INFO --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#appendEvaluationResultToMessages - reason=已解析历史评估结果, 历史条目数=4
2026-01-17T23:48:27.800+08:00 DEBUG --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#appendEvaluationResultToMessages - reason=检查criterion metadata, criterion=action_intent_match, metadata=[]
2026-01-17T23:48:27.800+08:00 DEBUG --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#appendEvaluationResultToMessages - reason=跳过已存在的无ref-id criterion, criterion=action_intent_match
2026-01-17T23:48:27.800+08:00 DEBUG --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#appendEvaluationResultToMessages - reason=检查criterion metadata, criterion=react_experience_retrieval, metadata=[is_empty]
2026-01-17T23:48:27.800+08:00 DEBUG --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#appendEvaluationResultToMessages - reason=跳过空结果的criterion, criterion=react_experience_retrieval
2026-01-17T23:48:27.800+08:00 DEBUG --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#appendEvaluationResultToMessages - reason=检查criterion metadata, criterion=enhanced_user_input, metadata=[]
2026-01-17T23:48:27.800+08:00 DEBUG --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#appendEvaluationResultToMessages - reason=跳过已存在的无ref-id criterion, criterion=enhanced_user_input
2026-01-17T23:48:27.800+08:00 DEBUG --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#appendEvaluationResultToMessages - reason=检查criterion metadata, criterion=is_fuzzy, metadata=[]
2026-01-17T23:48:27.800+08:00 DEBUG --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#appendEvaluationResultToMessages - reason=跳过已存在的无ref-id criterion, criterion=is_fuzzy
2026-01-17T23:48:27.800+08:00 DEBUG --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#appendEvaluationResultToMessages - reason=检查criterion metadata, criterion=action_intent_llm_verify, metadata=[]
2026-01-17T23:48:27.800+08:00 DEBUG --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#appendEvaluationResultToMessages - reason=跳过已存在的无ref-id criterion, criterion=action_intent_llm_verify
2026-01-17T23:48:27.800+08:00  INFO --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#appendEvaluationResultToMessages - reason=没有新的评估内容需要注入
2026-01-17T23:48:27.800+08:00  INFO --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#attachResult - reason=评估结果已写入, path=evaluation.inputRouting, suiteId=react-phase-suite
2026-01-17T23:48:27.811+08:00  INFO --- [pool-3-thread-1] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#beforeModel - reason=开始处理评估结果prompt注入, phase=REACT
2026-01-17T23:48:27.811+08:00 DEBUG --- [pool-3-thread-1] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#findLatestEvaluationResult - reason=找到评估结果, index=2
2026-01-17T23:48:27.811+08:00 DEBUG --- [pool-3-thread-1] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#beforeModel - reason=找到评估结果XML, phase=REACT, xmlLength=1064
2026-01-17T23:48:27.811+08:00 DEBUG --- [pool-3-thread-1] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#parseEvaluationXml - reason=解析到criterion, name=enhanced_user_input, valueLength=21
2026-01-17T23:48:27.811+08:00 DEBUG --- [pool-3-thread-1] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#parseEvaluationXml - reason=解析到criterion, name=action_intent_match, valueLength=433
2026-01-17T23:48:27.811+08:00 DEBUG --- [pool-3-thread-1] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#parseEvaluationXml - reason=解析到criterion, name=is_fuzzy, valueLength=2
2026-01-17T23:48:27.811+08:00 DEBUG --- [pool-3-thread-1] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#parseEvaluationXml - reason=解析到criterion, name=action_intent_llm_verify, valueLength=260
2026-01-17T23:48:27.811+08:00 DEBUG --- [pool-3-thread-1] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#beforeModel - reason=解析评估结果, phase=REACT, results={action_intent_match={"candidates":[{"matchType":"KEYWORD_EXACT","confidence":0.95,"actionId":"erp:product-unit:create","description":"在ERP系统中创建新的产品计量单位，如：个、台、箱、件等","parameters":[{"name":"name","description":"计量单位名称","label":"单位名称","type":"STRING","required":true},{"defaultValue":"0","name":"status","description":"单位状态","label":"单位状态","type":"ENUM","required":false}],"actionName":"添加产品单位"}],"userInput":"添加单位","candidateCount":1,"status":"CANDIDATES"}, enhanced_user_input=请提供具体的用户输入内容以便进行优化处理。, is_fuzzy=模糊, action_intent_llm_verify=```json
{
    "actionId": "erp:product-unit:create",
    "actionName": "添加产品单位",
    "confidence": 0.95,
    "reason": "用户输入'添加单位'与候选动作列表中的'添加产品单位'高度匹配，意图明确。",
    "extractedParams": {},
    "missingParams": ["name"],
    "nextQuestion": "请提供要添加的计量单位名称。"
}
```}
2026-01-17T23:48:27.811+08:00  INFO --- [pool-3-thread-1] a.a.s.c.ReactPhasePromptGuidanceProvider : ReactPhasePromptGuidanceProvider#generateGuidance - reason=生成React阶段指导, is_fuzzy=模糊
2026-01-17T23:48:27.811+08:00 DEBUG --- [pool-3-thread-1] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#generatePromptGuidance - reason=Provider生成了指导, provider=ReactPhasePromptGuidanceProvider, guidanceLength=189
2026-01-17T23:48:27.811+08:00 DEBUG --- [pool-3-thread-1] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#injectPromptGuidanceToMessages - reason=已创建prompt指导消息对
2026-01-17T23:48:27.811+08:00  INFO --- [pool-3-thread-1] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#beforeModel - reason=已注入评估结果prompt指导, phase=REACT, guidanceLength=189
2026-01-17T23:48:27.821+08:00  INFO --- [pool-3-thread-1] c.a.a.a.a.s.CodeactSubAgentInterceptor   : CodeactSubAgentInterceptor#interceptModel 拦截器被调用
2026-01-17T23:48:27.821+08:00  INFO --- [pool-3-thread-1] c.a.a.a.a.s.CodeactSubAgentInterceptor   : CodeactSubAgentInterceptor#interceptModel 追加拦截器提示词到原有系统提示词
2026-01-17T23:48:27.821+08:00  INFO --- [pool-3-thread-1] c.a.a.a.a.s.CodeactSubAgentInterceptor   : CodeactSubAgentInterceptor#interceptModel 系统提示词已增强，继续调用链
2026-01-17T23:48:29.544+08:00  INFO --- [oundedElastic-1] c.a.a.a.e.l.hook.AfterAgentLearningHook  : AfterAgentLearningHook#afterAgent - reason=agent execution completed, starting learning process
2026-01-17T23:48:29.549+08:00  INFO --- [oundedElastic-1] c.a.a.a.e.l.hook.AfterAgentLearningHook  : AfterAgentLearningHook#afterAgent - reason=executing learning asynchronously, taskId=771f0974-90f6-4ddb-87e0-ff82b188c9c1
2026-01-17T23:48:29.549+08:00  INFO --- [oundedElastic-1] c.a.a.a.e.l.i.DefaultLearningExecutor    : DefaultLearningExecutor#executeAsync - reason=start async execute learning task, taskId=771f0974-90f6-4ddb-87e0-ff82b188c9c1, learningType=experience
2026-01-17T23:48:29.550+08:00  INFO --- [earning-async-0] c.a.a.a.e.l.i.DefaultLearningExecutor    : DefaultLearningExecutor#execute - reason=start execute learning task, taskId=771f0974-90f6-4ddb-87e0-ff82b188c9c1, learningType=experience
2026-01-17T23:48:29.551+08:00 DEBUG --- [earning-async-0] c.a.a.a.e.l.i.DefaultLearningStrategy    : DefaultLearningStrategy#selectExtractor - reason=extractor found, learningType=experience, extractorClass=ExperienceLearningExtractor
2026-01-17T23:48:29.929+08:00  INFO --- [earning-async-0] .a.a.a.e.l.e.ExperienceLearningExtractor : ExperienceLearningExtractor#llmJudgeWorthLearning - reason=llm answered, answer=NO
2026-01-17T23:48:29.929+08:00  INFO --- [earning-async-0] .a.a.a.e.l.e.ExperienceLearningExtractor : ExperienceLearningExtractor#shouldLearn - reason=llm judgment completed, worthLearning=false, result=false
2026-01-17T23:48:29.929+08:00  INFO --- [earning-async-0] c.a.a.a.e.l.i.DefaultLearningExecutor    : DefaultLearningExecutor#execute - reason=extractor decided not to learn, taskId=771f0974-90f6-4ddb-87e0-ff82b188c9c1, learningType=experience
2026-01-17T23:48:54.962+08:00  INFO --- [nio-8080-exec-4] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#loadAgent 加载 agent: research_agent
2026-01-17T23:48:54.962+08:00  INFO --- [nio-8080-exec-4] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#loadAgent 成功加载 agent: research_agent
2026-01-17T23:48:54.979+08:00  INFO --- [nio-8080-exec-4] c.a.a.a.e.e.hook.FastIntentReactHook     : FastIntentReactHook#beforeAgent - reason=try react fast-intent match
2026-01-17T23:48:54.979+08:00 DEBUG --- [nio-8080-exec-4] c.a.a.a.e.e.hook.FastIntentReactHook     : FastIntentReactHook#beforeAgent - reason=fast-intent disabled
2026-01-17T23:48:54.989+08:00 DEBUG --- [nio-8080-exec-4] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#beforeAgent - reason=checking unified intent
2026-01-17T23:48:54.989+08:00 DEBUG --- [nio-8080-exec-4] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#beforeAgent - reason=keyword filter: no match
2026-01-17T23:48:54.999+08:00 DEBUG --- [nio-8080-exec-4] c.a.a.a.p.i.ParamCollectionResponseHook  : ParamCollectionResponseHook#beforeAgent - reason=checking for nextQuestion
2026-01-17T23:48:54.999+08:00 DEBUG --- [nio-8080-exec-4] c.a.a.a.p.i.ParamCollectionResponseHook  : ParamCollectionResponseHook#beforeAgent - reason=no input_routing results
2026-01-17T23:48:55.005+08:00  INFO --- [nio-8080-exec-4] c.a.a.a.e.e.h.ModelInputEvaluationHook   : ModelInputEvaluationHook#beforeModel - reason=开始模型输入评估, phase=REACT
2026-01-17T23:48:55.005+08:00 DEBUG --- [nio-8080-exec-4] .a.e.e.c.CodeactEvaluationContextFactory : CodeactEvaluationContextFactory#createInputRoutingContext - reason=开始构造输入路由评估上下文
2026-01-17T23:48:55.005+08:00  INFO --- [pool-3-thread-1] c.a.a.a.e.DefaultEvaluationService       : Starting evaluation for suite: React Phase Evaluation Suite
2026-01-17T23:48:55.022+08:00  INFO --- [pool-2-thread-1] c.a.a.a.e.e.CriterionEvaluationAction    : Executing criterion: enhanced_user_input
2026-01-17T23:48:55.022+08:00  INFO --- [pool-2-thread-2] c.a.a.a.e.e.CriterionEvaluationAction    : Executing criterion: is_fuzzy
2026-01-17T23:48:55.022+08:00 DEBUG --- [pool-2-thread-1] c.a.a.a.e.e.CriterionEvaluationAction    : Batching not enabled for criterion: enhanced_user_input
2026-01-17T23:48:55.022+08:00 DEBUG --- [pool-2-thread-2] c.a.a.a.e.e.CriterionEvaluationAction    : Batching not enabled for criterion: is_fuzzy
2026-01-17T23:48:55.022+08:00  INFO --- [pool-2-thread-3] c.a.a.a.e.e.CriterionEvaluationAction    : Executing criterion: action_intent_match
2026-01-17T23:48:55.022+08:00 DEBUG --- [pool-2-thread-1] c.a.a.a.e.evaluator.LLMBasedEvaluator    : Evaluating criterion enhanced_user_input with LLM, prompt: You are an evaluator performing the following evaluation task:

Evaluation Criterion Description: 改写用户输入，使其更加清晰、完整

Working Mechanism:
你是一个用户输入优化专家。请根据用户输入，改写并完善需求。改写要求：1. 补全隐含的约束条件2. 明确输入输出格式3. 保持原始意图不变4. 直接输出改写后的内容，不要添加任何解释

Output your response in the following format:

RESULT: (your evaluation result)
(No reasoning required for this evaluation)

Context:
- userInput: null

Your evaluation result:

2026-01-17T23:48:55.022+08:00 DEBUG --- [pool-2-thread-2] c.a.a.a.e.evaluator.LLMBasedEvaluator    : Evaluating criterion is_fuzzy with LLM, prompt: You are an evaluator performing the following evaluation task:

Evaluation Criterion Description: 判断用户输入是否模糊，是否需要向用户澄清

Working Mechanism:
你是一个用户意图清晰度判断专家。请判断用户输入是否明确。

【模糊】的特征：
- 没有具体指明要做什么操作
- 使用模糊词汇如'帮我看看'、'处理一下'
- 请求可能有多种理解方式
- 缺少必要的参数或信息

【清晰】的特征：
- 明确提到要查询、搜索、获取某个具体信息
- 提供了具体的查询关键词或目标
- 意图明确，执行路径清晰

请直接输出'模糊'或'清晰'，不要添加任何解释。

Output your response in the following format:

RESULT: (one of: 模糊, 清晰)
(No reasoning required for this evaluation)

Context:
- userInput: null

Your evaluation result:

2026-01-17T23:48:55.022+08:00 DEBUG --- [pool-2-thread-3] c.a.a.a.e.e.CriterionEvaluationAction    : Batching not enabled for criterion: action_intent_match
2026-01-17T23:48:55.022+08:00 DEBUG --- [pool-2-thread-3] c.a.a.a.p.i.SemanticActionProvider       : SemanticActionProvider#matchActions - reason=matching actions, userInput=个
2026-01-17T23:48:55.455+08:00 DEBUG --- [pool-2-thread-3] c.a.a.a.p.v.ActionVectorizationService   : ActionVectorizationService#hybridSearch - actionId=erp:product-unit:create, rawScore=2.068037, maxScore=2.068037, normalizedScore=0.95
2026-01-17T23:48:55.466+08:00  INFO --- [pool-2-thread-3] c.a.a.a.p.i.SemanticActionProvider       : SemanticActionProvider#matchActions - reason=matching completed, userInput=个, matchCount=1
2026-01-17T23:48:55.466+08:00  INFO --- [pool-2-thread-3] c.a.a.a.p.i.ActionIntentEvaluator        : ActionIntentEvaluator#buildCandidatesResult - reason=candidates built for LLM verification, userInput=个, candidateCount=1
2026-01-17T23:48:55.467+08:00  INFO --- [pool-2-thread-3] c.a.a.a.e.e.CriterionEvaluationAction    : Criterion action_intent_match completed with result: {"candidates":[{"matchType":"SEMANTIC","confidence":0.57,"actionId":"erp:product-unit:create","description":"在ERP系统中创建新的产品计量单位，如：个、台、箱、件等","parameters":[{"name":"name","description":"计量单位名称","label":"单位名称","type":"STRING","required":true},{"defaultValue":"0","name":"status","description":"单位状态","label":"单位状态","type":"ENUM","required":false}],"actionName":"添加产品单位"}],"userInput":"个","candidateCount":1,"status":"CANDIDATES"}
2026-01-17T23:48:55.648+08:00  INFO --- [pool-2-thread-1] c.a.a.a.e.e.CriterionEvaluationAction    : Criterion enhanced_user_input completed with result: 请提供具体的用户输入内容，以便进行优化改写。
2026-01-17T23:48:55.937+08:00  INFO --- [pool-2-thread-2] c.a.a.a.e.e.CriterionEvaluationAction    : Criterion is_fuzzy completed with result: 模糊
2026-01-17T23:48:55.962+08:00  INFO --- [action-thread-7] c.a.a.a.e.e.CriterionEvaluationAction    : Executing criterion: react_experience_retrieval
2026-01-17T23:48:55.962+08:00 DEBUG --- [action-thread-7] c.a.a.a.e.e.CriterionEvaluationAction    : Batching not enabled for criterion: react_experience_retrieval
2026-01-17T23:48:55.962+08:00  INFO --- [action-thread-8] c.a.a.a.e.e.CriterionEvaluationAction    : Executing criterion: action_intent_llm_verify
2026-01-17T23:48:55.962+08:00 DEBUG --- [action-thread-8] c.a.a.a.e.e.CriterionEvaluationAction    : Batching not enabled for criterion: action_intent_llm_verify
2026-01-17T23:48:55.963+08:00 DEBUG --- [action-thread-8] c.a.a.a.e.evaluator.LLMBasedEvaluator    : Evaluating criterion action_intent_llm_verify with LLM, prompt: 你是一个意图识别和参数提取专家。请根据用户输入和候选动作列表：
1. 判断用户最可能想要执行的动作
2. 从用户输入中提取动作所需的参数
3. 检查是否有缺失的必填参数

## 用户输入
个

## 候选动作列表（包含参数定义）
{"candidates":[{"matchType":"SEMANTIC","confidence":0.57,"actionId":"erp:product-unit:create","description":"在ERP系统中创建新的产品计量单位，如：个、台、箱、件等","parameters":[{"name":"name","description":"计量单位名称","label":"单位名称","type":"STRING","required":true},{"defaultValue":"0","name":"status","description":"单位状态","label":"单位状态","type":"ENUM","required":false}],"actionName":"添加产品单位"}],"userInput":"个","candidateCount":1,"status":"CANDIDATES"}

## 处理要求
1. 仔细分析用户输入的语义和意图
2. 选择最匹配的动作，如果没有合适的动作则返回 NO_MATCH
3. 如果选中了动作，从用户输入中提取该动作需要的参数值
4. 检查必填参数（required=true）是否都已提取到，如果有缺失则生成追问问题

## 返回格式（严格 JSON）
如果匹配到动作：
RESULT: {
    "actionId": "选中的动作ID",
    "actionName": "动作名称",
    "confidence": 0.95,
    "reason": "判断理由",
    "extractedParams": {"参数名": "提取到的值", ...},
    "missingParams": ["缺失的必填参数名", ...],
    "nextQuestion": "如果有缺失参数，生成追问问题，否则为null"
}

如果未匹配到动作：
RESULT: {"actionId": "NO_MATCH", "confidence": 0.95, "reason": "判断理由"}

2026-01-17T23:48:55.976+08:00 DEBUG --- [action-thread-7] .s.p.e.p.ElasticsearchExperienceProvider : ElasticsearchExperienceProvider#query - reason=query completed, type=COMMON, text=null, count=0
2026-01-17T23:48:55.984+08:00 DEBUG --- [action-thread-7] .s.p.e.p.ElasticsearchExperienceProvider : ElasticsearchExperienceProvider#query - reason=query completed, type=REACT, text=null, count=0
2026-01-17T23:48:55.984+08:00  INFO --- [action-thread-7] .e.e.ExperienceRetrievalEvaluatorFactory : ExperienceRetrievalEvaluatorFactory#react_experience_evaluator - reason=未检索到经验
2026-01-17T23:48:55.984+08:00  INFO --- [action-thread-7] c.a.a.a.e.e.CriterionEvaluationAction    : Criterion react_experience_retrieval completed with result: 
2026-01-17T23:48:57.722+08:00  WARN --- [action-thread-8] c.a.a.a.e.evaluator.LLMBasedEvaluator    : Failed to parse JSON from response: ```json
{
    "actionId": "erp:product-unit:create",
    "actionName": "添加产品单位",
    "confidence": 0.95,
    "reason": "用户输入的'个'符合创建新的产品计量单位的需求，其中'个'可以作为计量单位名称。",
    "extractedParams": {"name": "个"},
    "missingParams": [],
    "nextQuestion": null
}
```
2026-01-17T23:48:57.722+08:00  INFO --- [action-thread-8] c.a.a.a.e.e.CriterionEvaluationAction    : Criterion action_intent_llm_verify completed with result: ```json
{
    "actionId": "erp:product-unit:create",
    "actionName": "添加产品单位",
    "confidence": 0.95,
    "reason": "用户输入的'个'符合创建新的产品计量单位的需求，其中'个'可以作为计量单位名称。",
    "extractedParams": {"name": "个"},
    "missingParams": [],
    "nextQuestion": null
}
```
2026-01-17T23:48:57.744+08:00 DEBUG --- [pool-3-thread-1] c.a.a.a.e.e.GraphBasedEvaluationExecutor : Collected result for criterion 'enhanced_user_input': status=SUCCESS, value=请提供具体的用户输入内容，以便进行优化改写。
2026-01-17T23:48:57.744+08:00 DEBUG --- [pool-3-thread-1] c.a.a.a.e.e.GraphBasedEvaluationExecutor : Collected result for criterion 'is_fuzzy': status=SUCCESS, value=模糊
2026-01-17T23:48:57.744+08:00 DEBUG --- [pool-3-thread-1] c.a.a.a.e.e.GraphBasedEvaluationExecutor : Collected result for criterion 'react_experience_retrieval': status=SUCCESS, value=
2026-01-17T23:48:57.744+08:00 DEBUG --- [pool-3-thread-1] c.a.a.a.e.e.GraphBasedEvaluationExecutor : Collected result for criterion 'action_intent_match': status=SUCCESS, value={"candidates":[{"matchType":"SEMANTIC","confidence":0.57,"actionId":"erp:product-unit:create","description":"在ERP系统中创建新的产品计量单位，如：个、台、箱、件等","parameters":[{"name":"name","description":"计量单位名称","label":"单位名称","type":"STRING","required":true},{"defaultValue":"0","name":"status","description":"单位状态","label":"单位状态","type":"ENUM","required":false}],"actionName":"添加产品单位"}],"userInput":"个","candidateCount":1,"status":"CANDIDATES"}
2026-01-17T23:48:57.744+08:00 DEBUG --- [pool-3-thread-1] c.a.a.a.e.e.GraphBasedEvaluationExecutor : Collected result for criterion 'action_intent_llm_verify': status=SUCCESS, value=```json
{
    "actionId": "erp:product-unit:create",
    "actionName": "添加产品单位",
    "confidence": 0.95,
    "reason": "用户输入的'个'符合创建新的产品计量单位的需求，其中'个'可以作为计量单位名称。",
    "extractedParams": {"name": "个"},
    "missingParams": [],
    "nextQuestion": null
}
```
2026-01-17T23:48:57.744+08:00  INFO --- [pool-3-thread-1] c.a.a.a.e.e.GraphBasedEvaluationExecutor : Collected 5 criterion results from final state
2026-01-17T23:48:57.744+08:00  INFO --- [pool-3-thread-1] c.a.a.a.e.DefaultEvaluationService       : Evaluation completed for suite: React Phase Evaluation Suite
2026-01-17T23:48:57.744+08:00  INFO --- [pool-3-thread-1] c.a.a.a.e.e.h.ModelInputEvaluationHook   : ModelInputEvaluationHook#beforeModel - reason=评估完成, phase=REACT
2026-01-17T23:48:57.744+08:00 DEBUG --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#attachInputRoutingResult - reason=写入输入路由评估结果
2026-01-17T23:48:57.744+08:00  INFO --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#appendEvaluationResultToMessages - reason=开始处理评估结果注入
2026-01-17T23:48:57.744+08:00  INFO --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#appendEvaluationResultToMessages - reason=已解析历史评估结果, 历史条目数=4
2026-01-17T23:48:57.744+08:00 DEBUG --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#appendEvaluationResultToMessages - reason=检查criterion metadata, criterion=action_intent_match, metadata=[topActionId, topConfidence, needsLLMVerification, candidateCount]
2026-01-17T23:48:57.744+08:00 DEBUG --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#appendEvaluationResultToMessages - reason=跳过已存在的无ref-id criterion, criterion=action_intent_match
2026-01-17T23:48:57.744+08:00 DEBUG --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#appendEvaluationResultToMessages - reason=检查criterion metadata, criterion=react_experience_retrieval, metadata=[is_empty]
2026-01-17T23:48:57.744+08:00 DEBUG --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#appendEvaluationResultToMessages - reason=跳过空结果的criterion, criterion=react_experience_retrieval
2026-01-17T23:48:57.744+08:00 DEBUG --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#appendEvaluationResultToMessages - reason=检查criterion metadata, criterion=enhanced_user_input, metadata=[]
2026-01-17T23:48:57.744+08:00 DEBUG --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#appendEvaluationResultToMessages - reason=跳过已存在的无ref-id criterion, criterion=enhanced_user_input
2026-01-17T23:48:57.744+08:00 DEBUG --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#appendEvaluationResultToMessages - reason=检查criterion metadata, criterion=is_fuzzy, metadata=[]
2026-01-17T23:48:57.744+08:00 DEBUG --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#appendEvaluationResultToMessages - reason=跳过已存在的无ref-id criterion, criterion=is_fuzzy
2026-01-17T23:48:57.744+08:00 DEBUG --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#appendEvaluationResultToMessages - reason=检查criterion metadata, criterion=action_intent_llm_verify, metadata=[]
2026-01-17T23:48:57.749+08:00 DEBUG --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#appendEvaluationResultToMessages - reason=跳过已存在的无ref-id criterion, criterion=action_intent_llm_verify
2026-01-17T23:48:57.749+08:00  INFO --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#appendEvaluationResultToMessages - reason=没有新的评估内容需要注入
2026-01-17T23:48:57.749+08:00  INFO --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#attachResult - reason=评估结果已写入, path=evaluation.inputRouting, suiteId=react-phase-suite
2026-01-17T23:48:57.758+08:00  INFO --- [pool-3-thread-1] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#beforeModel - reason=开始处理评估结果prompt注入, phase=REACT
2026-01-17T23:48:57.758+08:00 DEBUG --- [pool-3-thread-1] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#findLatestEvaluationResult - reason=找到评估结果, index=2
2026-01-17T23:48:57.758+08:00 DEBUG --- [pool-3-thread-1] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#beforeModel - reason=找到评估结果XML, phase=REACT, xmlLength=1064
2026-01-17T23:48:57.759+08:00 DEBUG --- [pool-3-thread-1] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#parseEvaluationXml - reason=解析到criterion, name=enhanced_user_input, valueLength=21
2026-01-17T23:48:57.759+08:00 DEBUG --- [pool-3-thread-1] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#parseEvaluationXml - reason=解析到criterion, name=action_intent_match, valueLength=433
2026-01-17T23:48:57.759+08:00 DEBUG --- [pool-3-thread-1] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#parseEvaluationXml - reason=解析到criterion, name=is_fuzzy, valueLength=2
2026-01-17T23:48:57.759+08:00 DEBUG --- [pool-3-thread-1] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#parseEvaluationXml - reason=解析到criterion, name=action_intent_llm_verify, valueLength=260
2026-01-17T23:48:57.759+08:00 DEBUG --- [pool-3-thread-1] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#beforeModel - reason=解析评估结果, phase=REACT, results={action_intent_match={"candidates":[{"matchType":"KEYWORD_EXACT","confidence":0.95,"actionId":"erp:product-unit:create","description":"在ERP系统中创建新的产品计量单位，如：个、台、箱、件等","parameters":[{"name":"name","description":"计量单位名称","label":"单位名称","type":"STRING","required":true},{"defaultValue":"0","name":"status","description":"单位状态","label":"单位状态","type":"ENUM","required":false}],"actionName":"添加产品单位"}],"userInput":"添加单位","candidateCount":1,"status":"CANDIDATES"}, enhanced_user_input=请提供具体的用户输入内容以便进行优化处理。, is_fuzzy=模糊, action_intent_llm_verify=```json
{
    "actionId": "erp:product-unit:create",
    "actionName": "添加产品单位",
    "confidence": 0.95,
    "reason": "用户输入'添加单位'与候选动作列表中的'添加产品单位'高度匹配，意图明确。",
    "extractedParams": {},
    "missingParams": ["name"],
    "nextQuestion": "请提供要添加的计量单位名称。"
}
```}
2026-01-17T23:48:57.759+08:00  INFO --- [pool-3-thread-1] a.a.s.c.ReactPhasePromptGuidanceProvider : ReactPhasePromptGuidanceProvider#generateGuidance - reason=生成React阶段指导, is_fuzzy=模糊
2026-01-17T23:48:57.759+08:00 DEBUG --- [pool-3-thread-1] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#generatePromptGuidance - reason=Provider生成了指导, provider=ReactPhasePromptGuidanceProvider, guidanceLength=189
2026-01-17T23:48:57.759+08:00 DEBUG --- [pool-3-thread-1] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#injectPromptGuidanceToMessages - reason=已创建prompt指导消息对
2026-01-17T23:48:57.759+08:00  INFO --- [pool-3-thread-1] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#beforeModel - reason=已注入评估结果prompt指导, phase=REACT, guidanceLength=189
2026-01-17T23:48:57.769+08:00  INFO --- [pool-3-thread-1] c.a.a.a.a.s.CodeactSubAgentInterceptor   : CodeactSubAgentInterceptor#interceptModel 拦截器被调用
2026-01-17T23:48:57.769+08:00  INFO --- [pool-3-thread-1] c.a.a.a.a.s.CodeactSubAgentInterceptor   : CodeactSubAgentInterceptor#interceptModel 追加拦截器提示词到原有系统提示词
2026-01-17T23:48:57.769+08:00  INFO --- [pool-3-thread-1] c.a.a.a.a.s.CodeactSubAgentInterceptor   : CodeactSubAgentInterceptor#interceptModel 系统提示词已增强，继续调用链
2026-01-17T23:48:59.906+08:00  INFO --- [oundedElastic-1] c.a.a.a.a.tools.ExecuteCodeTool          : ExecuteCodeTool#apply 执行代码请求: functionName=create_product_unit, args={unit_name=个}
2026-01-17T23:48:59.906+08:00  INFO --- [oundedElastic-1] c.a.a.a.a.tools.ExecuteCodeTool          : ExecuteCodeTool#apply 找到函数定义: functionName=create_product_unit, signature=null, parameters=[unit_name]
2026-01-17T23:48:59.906+08:00  INFO --- [oundedElastic-1] c.a.a.a.core.executor.GraalCodeExecutor  : GraalCodeExecutor#execute 执行函数: functionName=create_product_unit, args={unit_name=个}
2026-01-17T23:48:59.906+08:00  INFO --- [oundedElastic-1] c.a.a.a.c.e.p.PythonEnvironmentManager   : PythonEnvironmentManager#extractFunctionName 开始提取函数名
2026-01-17T23:48:59.906+08:00 DEBUG --- [oundedElastic-1] c.a.a.a.c.e.p.PythonEnvironmentManager   : PythonEnvironmentManager#extractFunctionName 代码内容:
def create_product_unit(unit_name):
    """
    根据用户提供的单位名称，调用ERP系统API创建新的产品计量单位
    """
    # 假设这里有一个 ERP 系统的 API 客户端实例 erp_client
    # 你需要根据实际的 API 文档来实现具体的调用逻辑

    # 示例代码
    response = erp_client.create_product_unit(unit_name=unit_name)
    
    # 检查响应状态
    if response.status_code == 201:
        return "产品计量单位创建成功"
    else:
        return f"产品计量单位创建失败: {response.text}"
2026-01-17T23:48:59.907+08:00  INFO --- [oundedElastic-1] c.a.a.a.c.e.p.PythonEnvironmentManager   : PythonEnvironmentManager#extractFunctionName 提取到函数名: create_product_unit
2026-01-17T23:48:59.907+08:00  INFO --- [oundedElastic-1] c.a.a.a.core.executor.GraalCodeExecutor  : GraalCodeExecutor#execute 注册的函数名=create_product_unit, 实际函数名=create_product_unit
2026-01-17T23:48:59.907+08:00 DEBUG --- [oundedElastic-1] c.a.a.a.c.e.p.PythonEnvironmentManager   : PythonEnvironmentManager#generateImports 生成Python导入语句
2026-01-17T23:48:59.907+08:00  INFO --- [oundedElastic-1] c.a.a.a.c.e.p.PythonEnvironmentManager   : PythonEnvironmentManager#generateFunctionCall 生成函数调用: functionName=create_product_unit, args={unit_name=个}
2026-01-17T23:48:59.908+08:00  INFO --- [oundedElastic-1] c.a.a.a.c.e.p.PythonEnvironmentManager   : PythonEnvironmentManager#generateFunctionCall 生成的函数调用: create_product_unit(unit_name='个')
2026-01-17T23:48:59.908+08:00 DEBUG --- [oundedElastic-1] c.a.a.a.core.executor.GraalCodeExecutor  : GraalCodeExecutor#execute 函数接受参数，生成带参数的调用: create_product_unit(unit_name='个')
2026-01-17T23:48:59.908+08:00  INFO --- [oundedElastic-1] c.a.a.a.core.executor.GraalCodeExecutor  : GraalCodeExecutor#execute 准备执行的完整代码:
import json
import sys
import math
from typing import Any, List, Dict, Optional
import os
import re


def create_product_unit(unit_name):
    """
    根据用户提供的单位名称，调用ERP系统API创建新的产品计量单位
    """
    # 假设这里有一个 ERP 系统的 API 客户端实例 erp_client
    # 你需要根据实际的 API 文档来实现具体的调用逻辑

    # 示例代码
    response = erp_client.create_product_unit(unit_name=unit_name)
    
    # 检查响应状态
    if response.status_code == 201:
        return "产品计量单位创建成功"
    else:
        return f"产品计量单位创建失败: {response.text}"

# Execute function
_result = create_product_unit(unit_name='个')
_result  # Return the result

2026-01-17T23:48:59.908+08:00 DEBUG --- [oundedElastic-1] c.a.a.a.core.executor.GraalCodeExecutor  : GraalCodeExecutor#execute 代码长度: 577 字符
2026-01-17T23:48:59.908+08:00 DEBUG --- [oundedElastic-1] c.a.a.a.core.executor.GraalCodeExecutor  : GraalCodeExecutor#executeWithGraal 创建GraalVM Context
2026-01-17T23:49:06.269+08:00 DEBUG --- [oundedElastic-1] c.a.a.a.core.executor.GraalCodeExecutor  : GraalCodeExecutor#executeWithGraal - reason=Bridge对象注入完成
2026-01-17T23:49:06.269+08:00  INFO --- [oundedElastic-1] c.a.a.a.core.executor.GraalCodeExecutor  : GraalCodeExecutor#injectCodeactTools - reason=开始注入CodeactTool到Python环境
2026-01-17T23:49:06.273+08:00 DEBUG --- [oundedElastic-1] c.a.a.a.core.tool.ToolRegistryBridge     : ToolRegistryBridge#<init> - reason=Bridge对象创建完成
2026-01-17T23:49:06.274+08:00 DEBUG --- [oundedElastic-1] c.a.a.a.core.executor.GraalCodeExecutor  : GraalCodeExecutor#injectCodeactTools - reason=ToolRegistryBridge注入完成, bridgeClass=ToolRegistryBridge
2026-01-17T23:49:06.274+08:00 DEBUG --- [oundedElastic-1] c.a.a.a.core.executor.GraalCodeExecutor  : GraalCodeExecutor#injectCodeactTools - reason=生成Python工具代码, length=7044
2026-01-17T23:49:07.753+08:00  INFO --- [oundedElastic-1] c.a.a.a.core.executor.GraalCodeExecutor  : GraalCodeExecutor#injectCodeactTools - reason=CodeactTool注入完成, classCount=3, globalToolCount=0
2026-01-17T23:49:07.811+08:00 ERROR --- [oundedElastic-1] c.a.a.a.core.executor.GraalCodeExecutor  : GraalCodeExecutor#execute 执行失败: functionName=create_product_unit

java.lang.RuntimeException: GraalVM execution error: [To redirect Truffle log output to a file use one of the following options:
* '--log.file=<path>' if the option is passed using a guest language launcher.
* '-Dpolyglot.log.file=<path>' if the option is passed using the host Java launcher.
* Configure logging using the polyglot embedding API.]
[engine] WARNING: The polyglot engine uses a fallback runtime that does not support runtime compilation to native code.
Execution without runtime compilation will negatively impact the guest application performance.
The following cause was found: JVMCI is not enabled for this JVM. Enable JVMCI using -XX:+EnableJVMCI.
For more information see: https://www.graalvm.org/latest/reference-manual/embed-languages/#runtime-optimization-support.
To disable this warning use the '--engine.WarnInterpreterOnly=false' option or the '-Dpolyglot.engine.WarnInterpreterOnly=false' system property.

	at com.alibaba.assistant.agent.core.executor.GraalCodeExecutor.executeWithGraal(GraalCodeExecutor.java:447)
	at com.alibaba.assistant.agent.core.executor.GraalCodeExecutor.execute(GraalCodeExecutor.java:226)
	at com.alibaba.assistant.agent.autoconfigure.tools.ExecuteCodeTool.apply(ExecuteCodeTool.java:115)
	at com.alibaba.assistant.agent.autoconfigure.tools.ExecuteCodeTool.apply(ExecuteCodeTool.java:43)
	at org.springframework.ai.tool.function.FunctionToolCallback.callMethod(FunctionToolCallback.java:113)
	at org.springframework.ai.tool.function.FunctionToolCallback.call(FunctionToolCallback.java:104)
	at com.alibaba.cloud.ai.graph.agent.node.AgentToolNode.lambda$executeToolCallWithInterceptors$0(AgentToolNode.java:218)
	at com.alibaba.cloud.ai.graph.agent.node.AgentToolNode.executeToolCallWithInterceptors(AgentToolNode.java:245)
	at com.alibaba.cloud.ai.graph.agent.node.AgentToolNode.apply(AgentToolNode.java:116)
	at com.alibaba.cloud.ai.graph.action.AsyncNodeActionWithConfig.lambda$node_async$0(AsyncNodeActionWithConfig.java:41)
	at com.alibaba.cloud.ai.graph.executor.NodeExecutor.executeNode(NodeExecutor.java:122)
	at com.alibaba.cloud.ai.graph.executor.NodeExecutor.execute(NodeExecutor.java:84)
	at com.alibaba.cloud.ai.graph.executor.MainGraphExecutor.execute(MainGraphExecutor.java:108)
	at com.alibaba.cloud.ai.graph.executor.NodeExecutor.lambda$processGraphResponseFlux$15(NodeExecutor.java:442)
	at reactor.core.publisher.FluxDefer.subscribe(FluxDefer.java:46)
	at reactor.core.publisher.Flux.subscribe(Flux.java:8891)
	at reactor.core.publisher.FluxConcatArray$ConcatArraySubscriber.onComplete(FluxConcatArray.java:238)
	at reactor.core.publisher.FluxConcatArray.subscribe(FluxConcatArray.java:79)
	at reactor.core.publisher.Flux.subscribe(Flux.java:8891)
	at reactor.core.publisher.FluxConcatArray$ConcatArraySubscriber.onComplete(FluxConcatArray.java:238)
	at reactor.core.publisher.FluxFilter$FilterSubscriber.onComplete(FluxFilter.java:166)
	at reactor.core.publisher.FluxMap$MapConditionalSubscriber.onComplete(FluxMap.java:275)
	at reactor.core.publisher.FluxConcatArray$ConcatArraySubscriber.onComplete(FluxConcatArray.java:209)
	at reactor.core.publisher.Operators$MultiSubscriptionSubscriber.onComplete(Operators.java:2230)
	at reactor.core.publisher.FluxMap$MapSubscriber.onComplete(FluxMap.java:144)
	at reactor.core.publisher.FluxSwitchIfEmpty$SwitchIfEmptySubscriber.onComplete(FluxSwitchIfEmpty.java:85)
	at reactor.core.publisher.FluxFilter$FilterSubscriber.onComplete(FluxFilter.java:166)
	at reactor.core.publisher.FluxHandle$HandleConditionalSubscriber.onComplete(FluxHandle.java:440)
	at reactor.core.publisher.FluxMapFuseable$MapFuseableConditionalSubscriber.onComplete(FluxMapFuseable.java:350)
	at reactor.core.publisher.FluxPeekFuseable$PeekFuseableConditionalSubscriber.onComplete(FluxPeekFuseable.java:595)
	at reactor.core.publisher.FluxPeekFuseable$PeekFuseableConditionalSubscriber.onComplete(FluxPeekFuseable.java:595)
	at reactor.core.publisher.FluxPeekFuseable$PeekFuseableConditionalSubscriber.onComplete(FluxPeekFuseable.java:595)
	at reactor.core.publisher.FluxPeekFuseable$PeekFuseableConditionalSubscriber.onComplete(FluxPeekFuseable.java:595)
	at reactor.core.publisher.FluxHandleFuseable$HandleFuseableConditionalSubscriber.onComplete(FluxHandleFuseable.java:605)
	at reactor.core.publisher.FluxContextWrite$ContextWriteSubscriber.onComplete(FluxContextWrite.java:126)
	at reactor.core.publisher.FluxDoFinally$DoFinallySubscriber.onComplete(FluxDoFinally.java:128)
	at reactor.core.publisher.FluxPeekFuseable$PeekConditionalSubscriber.onComplete(FluxPeekFuseable.java:940)
	at reactor.core.publisher.FluxMap$MapConditionalSubscriber.onComplete(FluxMap.java:275)
	at reactor.core.publisher.FluxPeekFuseable$PeekConditionalSubscriber.onComplete(FluxPeekFuseable.java:940)
	at reactor.core.publisher.FluxPeekFuseable$PeekConditionalSubscriber.onComplete(FluxPeekFuseable.java:940)
	at reactor.core.publisher.FluxPeekFuseable$PeekConditionalSubscriber.onComplete(FluxPeekFuseable.java:940)
	at reactor.core.publisher.FluxPeekFuseable$PeekConditionalSubscriber.onComplete(FluxPeekFuseable.java:940)
	at reactor.core.publisher.FluxHandle$HandleConditionalSubscriber.onComplete(FluxHandle.java:440)
	at reactor.core.publisher.FluxContextWrite$ContextWriteSubscriber.onComplete(FluxContextWrite.java:126)
	at reactor.core.publisher.FluxDoFinally$DoFinallySubscriber.onComplete(FluxDoFinally.java:128)
	at reactor.core.publisher.FluxPeekFuseable$PeekFuseableConditionalSubscriber.onComplete(FluxPeekFuseable.java:595)
	at reactor.core.publisher.FluxPublishOn$PublishOnConditionalSubscriber.doComplete(FluxPublishOn.java:1106)
	at reactor.core.publisher.FluxPublishOn$PublishOnConditionalSubscriber.checkTerminated(FluxPublishOn.java:1140)
	at reactor.core.publisher.FluxPublishOn$PublishOnConditionalSubscriber.runAsync(FluxPublishOn.java:996)
	at reactor.core.publisher.FluxPublishOn$PublishOnConditionalSubscriber.run(FluxPublishOn.java:1079)
	at reactor.core.scheduler.WorkerTask.call(WorkerTask.java:84)
	at reactor.core.scheduler.WorkerTask.call(WorkerTask.java:37)
	at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:317)
	at java.base/java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(ScheduledThreadPoolExecutor.java:304)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.graalvm.polyglot.PolyglotException: NameError: name 'erp_client' is not defined
	at <python>.create_product_unit(Unknown)
	at <python>.<module>(Unknown)
	at org.graalvm.polyglot.Context.eval(Context.java:446)
	at com.alibaba.assistant.agent.core.executor.GraalCodeExecutor.executeWithGraal(GraalCodeExecutor.java:313)
	... 56 common frames omitted

2026-01-17T23:49:07.815+08:00 DEBUG --- [oundedElastic-1] c.a.a.a.a.tools.ExecuteCodeTool          : ExecuteCodeTool#updateState 执行历史已更新: count=1
2026-01-17T23:49:07.815+08:00 ERROR --- [oundedElastic-1] c.a.a.a.a.tools.ExecuteCodeTool          : ExecuteCodeTool#apply 代码执行失败: functionName=create_product_unit, error=GraalVM execution error: [To redirect Truffle log output to a file use one of the following options:
* '--log.file=<path>' if the option is passed using a guest language launcher.
* '-Dpolyglot.log.file=<path>' if the option is passed using the host Java launcher.
* Configure logging using the polyglot embedding API.]
[engine] WARNING: The polyglot engine uses a fallback runtime that does not support runtime compilation to native code.
Execution without runtime compilation will negatively impact the guest application performance.
The following cause was found: JVMCI is not enabled for this JVM. Enable JVMCI using -XX:+EnableJVMCI.
For more information see: https://www.graalvm.org/latest/reference-manual/embed-languages/#runtime-optimization-support.
To disable this warning use the '--engine.WarnInterpreterOnly=false' option or the '-Dpolyglot.engine.WarnInterpreterOnly=false' system property.

2026-01-17T23:49:07.839+08:00  INFO --- [oundedElastic-1] c.a.a.a.e.e.h.ModelInputEvaluationHook   : ModelInputEvaluationHook#beforeModel - reason=开始模型输入评估, phase=REACT
2026-01-17T23:49:07.839+08:00 DEBUG --- [oundedElastic-1] .a.e.e.c.CodeactEvaluationContextFactory : CodeactEvaluationContextFactory#createInputRoutingContext - reason=开始构造输入路由评估上下文
2026-01-17T23:49:07.839+08:00  INFO --- [pool-3-thread-1] c.a.a.a.e.DefaultEvaluationService       : Starting evaluation for suite: React Phase Evaluation Suite
2026-01-17T23:49:07.866+08:00  INFO --- [pool-2-thread-2] c.a.a.a.e.e.CriterionEvaluationAction    : Executing criterion: enhanced_user_input
2026-01-17T23:49:07.866+08:00 DEBUG --- [pool-2-thread-2] c.a.a.a.e.e.CriterionEvaluationAction    : Batching not enabled for criterion: enhanced_user_input
2026-01-17T23:49:07.866+08:00  INFO --- [pool-2-thread-1] c.a.a.a.e.e.CriterionEvaluationAction    : Executing criterion: is_fuzzy
2026-01-17T23:49:07.866+08:00  INFO --- [pool-2-thread-3] c.a.a.a.e.e.CriterionEvaluationAction    : Executing criterion: action_intent_match
2026-01-17T23:49:07.866+08:00 DEBUG --- [pool-2-thread-1] c.a.a.a.e.e.CriterionEvaluationAction    : Batching not enabled for criterion: is_fuzzy
2026-01-17T23:49:07.866+08:00 DEBUG --- [pool-2-thread-3] c.a.a.a.e.e.CriterionEvaluationAction    : Batching not enabled for criterion: action_intent_match
2026-01-17T23:49:07.866+08:00  INFO --- [pool-2-thread-3] c.a.a.a.e.e.CriterionEvaluationAction    : Criterion action_intent_match completed with result: NO_MATCH
2026-01-17T23:49:07.866+08:00 DEBUG --- [pool-2-thread-1] c.a.a.a.e.evaluator.LLMBasedEvaluator    : Evaluating criterion is_fuzzy with LLM, prompt: You are an evaluator performing the following evaluation task:

Evaluation Criterion Description: 判断用户输入是否模糊，是否需要向用户澄清

Working Mechanism:
你是一个用户意图清晰度判断专家。请判断用户输入是否明确。

【模糊】的特征：
- 没有具体指明要做什么操作
- 使用模糊词汇如'帮我看看'、'处理一下'
- 请求可能有多种理解方式
- 缺少必要的参数或信息

【清晰】的特征：
- 明确提到要查询、搜索、获取某个具体信息
- 提供了具体的查询关键词或目标
- 意图明确，执行路径清晰

请直接输出'模糊'或'清晰'，不要添加任何解释。

Output your response in the following format:

RESULT: (one of: 模糊, 清晰)
(No reasoning required for this evaluation)

Context:
- userInput: null

Your evaluation result:

2026-01-17T23:49:07.866+08:00 DEBUG --- [pool-2-thread-2] c.a.a.a.e.evaluator.LLMBasedEvaluator    : Evaluating criterion enhanced_user_input with LLM, prompt: You are an evaluator performing the following evaluation task:

Evaluation Criterion Description: 改写用户输入，使其更加清晰、完整

Working Mechanism:
你是一个用户输入优化专家。请根据用户输入，改写并完善需求。改写要求：1. 补全隐含的约束条件2. 明确输入输出格式3. 保持原始意图不变4. 直接输出改写后的内容，不要添加任何解释

Output your response in the following format:

RESULT: (your evaluation result)
(No reasoning required for this evaluation)

Context:
- userInput: null

Your evaluation result:

2026-01-17T23:49:08.402+08:00  INFO --- [pool-2-thread-1] c.a.a.a.e.e.CriterionEvaluationAction    : Criterion is_fuzzy completed with result: 模糊
2026-01-17T23:49:08.681+08:00  INFO --- [pool-2-thread-2] c.a.a.a.e.e.CriterionEvaluationAction    : Criterion enhanced_user_input completed with result: 请提供具体的用户输入内容以便进行优化。
2026-01-17T23:49:08.706+08:00  INFO --- [ction-thread-10] c.a.a.a.e.e.CriterionEvaluationAction    : Executing criterion: action_intent_llm_verify
2026-01-17T23:49:08.706+08:00  INFO --- [action-thread-9] c.a.a.a.e.e.CriterionEvaluationAction    : Executing criterion: react_experience_retrieval
2026-01-17T23:49:08.706+08:00 DEBUG --- [action-thread-9] c.a.a.a.e.e.CriterionEvaluationAction    : Batching not enabled for criterion: react_experience_retrieval
2026-01-17T23:49:08.706+08:00 DEBUG --- [ction-thread-10] c.a.a.a.e.e.CriterionEvaluationAction    : Batching not enabled for criterion: action_intent_llm_verify
2026-01-17T23:49:08.706+08:00 DEBUG --- [ction-thread-10] c.a.a.a.e.evaluator.LLMBasedEvaluator    : Evaluating criterion action_intent_llm_verify with LLM, prompt: 你是一个意图识别和参数提取专家。请根据用户输入和候选动作列表：
1. 判断用户最可能想要执行的动作
2. 从用户输入中提取动作所需的参数
3. 检查是否有缺失的必填参数

## 用户输入


## 候选动作列表（包含参数定义）
NO_MATCH

## 处理要求
1. 仔细分析用户输入的语义和意图
2. 选择最匹配的动作，如果没有合适的动作则返回 NO_MATCH
3. 如果选中了动作，从用户输入中提取该动作需要的参数值
4. 检查必填参数（required=true）是否都已提取到，如果有缺失则生成追问问题

## 返回格式（严格 JSON）
如果匹配到动作：
RESULT: {
    "actionId": "选中的动作ID",
    "actionName": "动作名称",
    "confidence": 0.95,
    "reason": "判断理由",
    "extractedParams": {"参数名": "提取到的值", ...},
    "missingParams": ["缺失的必填参数名", ...],
    "nextQuestion": "如果有缺失参数，生成追问问题，否则为null"
}

如果未匹配到动作：
RESULT: {"actionId": "NO_MATCH", "confidence": 0.95, "reason": "判断理由"}

2026-01-17T23:49:08.719+08:00 DEBUG --- [action-thread-9] .s.p.e.p.ElasticsearchExperienceProvider : ElasticsearchExperienceProvider#query - reason=query completed, type=COMMON, text=null, count=0
2026-01-17T23:49:08.728+08:00 DEBUG --- [action-thread-9] .s.p.e.p.ElasticsearchExperienceProvider : ElasticsearchExperienceProvider#query - reason=query completed, type=REACT, text=null, count=0
2026-01-17T23:49:08.728+08:00  INFO --- [action-thread-9] .e.e.ExperienceRetrievalEvaluatorFactory : ExperienceRetrievalEvaluatorFactory#react_experience_evaluator - reason=未检索到经验
2026-01-17T23:49:08.728+08:00  INFO --- [action-thread-9] c.a.a.a.e.e.CriterionEvaluationAction    : Criterion react_experience_retrieval completed with result: 
2026-01-17T23:49:14.392+08:00  WARN --- [ction-thread-10] c.a.a.a.e.evaluator.LLMBasedEvaluator    : Failed to parse JSON from response: 看起来您提供的用户输入部分是空的，同时候选动作列表里也只包含了`NO_MATCH`这一个选项。基于这些信息，我将无法进行具体的意图识别和参数提取工作，因为没有足够的上下文来确定用户的意图或需要执行的动作。

为了更好地帮助您，请提供具体的用户输入文本以及更详细的候选动作列表（包括每个动作所需的参数及其是否必填等信息）。这样，我才能根据您的要求完成任务。如果您有其他具体示例或者想要模拟的情景，请随时告诉我！
2026-01-17T23:49:14.392+08:00  INFO --- [ction-thread-10] c.a.a.a.e.e.CriterionEvaluationAction    : Criterion action_intent_llm_verify completed with result: 看起来您提供的用户输入部分是空的，同时候选动作列表里也只包含了`NO_MATCH`这一个选项。基于这些信息，我将无法进行具体的意图识别和参数提取工作，因为没有足够的上下文来确定用户的意图或需要执行的动作。

为了更好地帮助您，请提供具体的用户输入文本以及更详细的候选动作列表（包括每个动作所需的参数及其是否必填等信息）。这样，我才能根据您的要求完成任务。如果您有其他具体示例或者想要模拟的情景，请随时告诉我！
2026-01-17T23:49:14.421+08:00 DEBUG --- [pool-3-thread-1] c.a.a.a.e.e.GraphBasedEvaluationExecutor : Collected result for criterion 'enhanced_user_input': status=SUCCESS, value=请提供具体的用户输入内容以便进行优化。
2026-01-17T23:49:14.421+08:00 DEBUG --- [pool-3-thread-1] c.a.a.a.e.e.GraphBasedEvaluationExecutor : Collected result for criterion 'is_fuzzy': status=SUCCESS, value=模糊
2026-01-17T23:49:14.421+08:00 DEBUG --- [pool-3-thread-1] c.a.a.a.e.e.GraphBasedEvaluationExecutor : Collected result for criterion 'react_experience_retrieval': status=SUCCESS, value=
2026-01-17T23:49:14.421+08:00 DEBUG --- [pool-3-thread-1] c.a.a.a.e.e.GraphBasedEvaluationExecutor : Collected result for criterion 'action_intent_match': status=SUCCESS, value=NO_MATCH
2026-01-17T23:49:14.421+08:00 DEBUG --- [pool-3-thread-1] c.a.a.a.e.e.GraphBasedEvaluationExecutor : Collected result for criterion 'action_intent_llm_verify': status=SUCCESS, value=看起来您提供的用户输入部分是空的，同时候选动作列表里也只包含了`NO_MATCH`这一个选项。基于这些信息，我将无法进行具体的意图识别和参数提取工作，因为没有足够的上下文来确定用户的意图或需要执行的动作。

为了更好地帮助您，请提供具体的用户输入文本以及更详细的候选动作列表（包括每个动作所需的参数及其是否必填等信息）。这样，我才能根据您的要求完成任务。如果您有其他具体示例或者想要模拟的情景，请随时告诉我！
2026-01-17T23:49:14.421+08:00  INFO --- [pool-3-thread-1] c.a.a.a.e.e.GraphBasedEvaluationExecutor : Collected 5 criterion results from final state
2026-01-17T23:49:14.421+08:00  INFO --- [pool-3-thread-1] c.a.a.a.e.DefaultEvaluationService       : Evaluation completed for suite: React Phase Evaluation Suite
2026-01-17T23:49:14.421+08:00  INFO --- [pool-3-thread-1] c.a.a.a.e.e.h.ModelInputEvaluationHook   : ModelInputEvaluationHook#beforeModel - reason=评估完成, phase=REACT
2026-01-17T23:49:14.421+08:00 DEBUG --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#attachInputRoutingResult - reason=写入输入路由评估结果
2026-01-17T23:49:14.421+08:00  INFO --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#appendEvaluationResultToMessages - reason=开始处理评估结果注入
2026-01-17T23:49:14.423+08:00  INFO --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#appendEvaluationResultToMessages - reason=已解析历史评估结果, 历史条目数=4
2026-01-17T23:49:14.423+08:00 DEBUG --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#appendEvaluationResultToMessages - reason=检查criterion metadata, criterion=action_intent_match, metadata=[]
2026-01-17T23:49:14.423+08:00 DEBUG --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#appendEvaluationResultToMessages - reason=跳过已存在的无ref-id criterion, criterion=action_intent_match
2026-01-17T23:49:14.424+08:00 DEBUG --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#appendEvaluationResultToMessages - reason=检查criterion metadata, criterion=react_experience_retrieval, metadata=[is_empty]
2026-01-17T23:49:14.424+08:00 DEBUG --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#appendEvaluationResultToMessages - reason=跳过空结果的criterion, criterion=react_experience_retrieval
2026-01-17T23:49:14.424+08:00 DEBUG --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#appendEvaluationResultToMessages - reason=检查criterion metadata, criterion=enhanced_user_input, metadata=[]
2026-01-17T23:49:14.424+08:00 DEBUG --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#appendEvaluationResultToMessages - reason=跳过已存在的无ref-id criterion, criterion=enhanced_user_input
2026-01-17T23:49:14.424+08:00 DEBUG --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#appendEvaluationResultToMessages - reason=检查criterion metadata, criterion=is_fuzzy, metadata=[]
2026-01-17T23:49:14.424+08:00 DEBUG --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#appendEvaluationResultToMessages - reason=跳过已存在的无ref-id criterion, criterion=is_fuzzy
2026-01-17T23:49:14.424+08:00 DEBUG --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#appendEvaluationResultToMessages - reason=检查criterion metadata, criterion=action_intent_llm_verify, metadata=[]
2026-01-17T23:49:14.424+08:00 DEBUG --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#appendEvaluationResultToMessages - reason=跳过已存在的无ref-id criterion, criterion=action_intent_llm_verify
2026-01-17T23:49:14.424+08:00  INFO --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#appendEvaluationResultToMessages - reason=没有新的评估内容需要注入
2026-01-17T23:49:14.424+08:00  INFO --- [pool-3-thread-1] .a.e.e.c.CodeactEvaluationResultAttacher : CodeactEvaluationResultAttacher#attachResult - reason=评估结果已写入, path=evaluation.inputRouting, suiteId=react-phase-suite
2026-01-17T23:49:14.434+08:00  INFO --- [pool-3-thread-1] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#beforeModel - reason=开始处理评估结果prompt注入, phase=REACT
2026-01-17T23:49:14.434+08:00 DEBUG --- [pool-3-thread-1] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#findLatestEvaluationResult - reason=找到评估结果, index=2
2026-01-17T23:49:14.434+08:00 DEBUG --- [pool-3-thread-1] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#beforeModel - reason=找到评估结果XML, phase=REACT, xmlLength=1064
2026-01-17T23:49:14.434+08:00 DEBUG --- [pool-3-thread-1] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#parseEvaluationXml - reason=解析到criterion, name=enhanced_user_input, valueLength=21
2026-01-17T23:49:14.434+08:00 DEBUG --- [pool-3-thread-1] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#parseEvaluationXml - reason=解析到criterion, name=action_intent_match, valueLength=433
2026-01-17T23:49:14.434+08:00 DEBUG --- [pool-3-thread-1] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#parseEvaluationXml - reason=解析到criterion, name=is_fuzzy, valueLength=2
2026-01-17T23:49:14.434+08:00 DEBUG --- [pool-3-thread-1] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#parseEvaluationXml - reason=解析到criterion, name=action_intent_llm_verify, valueLength=260
2026-01-17T23:49:14.434+08:00 DEBUG --- [pool-3-thread-1] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#beforeModel - reason=解析评估结果, phase=REACT, results={action_intent_match={"candidates":[{"matchType":"KEYWORD_EXACT","confidence":0.95,"actionId":"erp:product-unit:create","description":"在ERP系统中创建新的产品计量单位，如：个、台、箱、件等","parameters":[{"name":"name","description":"计量单位名称","label":"单位名称","type":"STRING","required":true},{"defaultValue":"0","name":"status","description":"单位状态","label":"单位状态","type":"ENUM","required":false}],"actionName":"添加产品单位"}],"userInput":"添加单位","candidateCount":1,"status":"CANDIDATES"}, enhanced_user_input=请提供具体的用户输入内容以便进行优化处理。, is_fuzzy=模糊, action_intent_llm_verify=```json
{
    "actionId": "erp:product-unit:create",
    "actionName": "添加产品单位",
    "confidence": 0.95,
    "reason": "用户输入'添加单位'与候选动作列表中的'添加产品单位'高度匹配，意图明确。",
    "extractedParams": {},
    "missingParams": ["name"],
    "nextQuestion": "请提供要添加的计量单位名称。"
}
```}
2026-01-17T23:49:14.434+08:00  INFO --- [pool-3-thread-1] a.a.s.c.ReactPhasePromptGuidanceProvider : ReactPhasePromptGuidanceProvider#generateGuidance - reason=生成React阶段指导, is_fuzzy=模糊
2026-01-17T23:49:14.434+08:00 DEBUG --- [pool-3-thread-1] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#generatePromptGuidance - reason=Provider生成了指导, provider=ReactPhasePromptGuidanceProvider, guidanceLength=189
2026-01-17T23:49:14.434+08:00 DEBUG --- [pool-3-thread-1] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#injectPromptGuidanceToMessages - reason=已创建prompt指导消息对
2026-01-17T23:49:14.434+08:00  INFO --- [pool-3-thread-1] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#beforeModel - reason=已注入评估结果prompt指导, phase=REACT, guidanceLength=189
2026-01-17T23:49:14.451+08:00  INFO --- [pool-3-thread-1] c.a.a.a.a.s.CodeactSubAgentInterceptor   : CodeactSubAgentInterceptor#interceptModel 拦截器被调用
2026-01-17T23:49:14.451+08:00  INFO --- [pool-3-thread-1] c.a.a.a.a.s.CodeactSubAgentInterceptor   : CodeactSubAgentInterceptor#interceptModel 追加拦截器提示词到原有系统提示词
2026-01-17T23:49:14.451+08:00  INFO --- [pool-3-thread-1] c.a.a.a.a.s.CodeactSubAgentInterceptor   : CodeactSubAgentInterceptor#interceptModel 系统提示词已增强，继续调用链
2026-01-17T23:49:18.490+08:00  INFO --- [oundedElastic-1] c.a.a.a.e.l.hook.AfterAgentLearningHook  : AfterAgentLearningHook#afterAgent - reason=agent execution completed, starting learning process
2026-01-17T23:49:18.490+08:00  INFO --- [oundedElastic-1] c.a.a.a.e.l.hook.AfterAgentLearningHook  : AfterAgentLearningHook#afterAgent - reason=executing learning asynchronously, taskId=b6ac4de3-efbf-49bb-94ea-b083dc6ba55b
2026-01-17T23:49:18.490+08:00  INFO --- [oundedElastic-1] c.a.a.a.e.l.i.DefaultLearningExecutor    : DefaultLearningExecutor#executeAsync - reason=start async execute learning task, taskId=b6ac4de3-efbf-49bb-94ea-b083dc6ba55b, learningType=experience
2026-01-17T23:49:18.490+08:00  INFO --- [earning-async-1] c.a.a.a.e.l.i.DefaultLearningExecutor    : DefaultLearningExecutor#execute - reason=start execute learning task, taskId=b6ac4de3-efbf-49bb-94ea-b083dc6ba55b, learningType=experience
2026-01-17T23:49:18.490+08:00 DEBUG --- [earning-async-1] c.a.a.a.e.l.i.DefaultLearningStrategy    : DefaultLearningStrategy#selectExtractor - reason=extractor found, learningType=experience, extractorClass=ExperienceLearningExtractor
2026-01-17T23:49:18.849+08:00  INFO --- [earning-async-1] .a.a.a.e.l.e.ExperienceLearningExtractor : ExperienceLearningExtractor#llmJudgeWorthLearning - reason=llm answered, answer=NO
2026-01-17T23:49:18.849+08:00  INFO --- [earning-async-1] .a.a.a.e.l.e.ExperienceLearningExtractor : ExperienceLearningExtractor#shouldLearn - reason=llm judgment completed, worthLearning=false, result=false
2026-01-17T23:49:18.849+08:00  INFO --- [earning-async-1] c.a.a.a.e.l.i.DefaultLearningExecutor    : DefaultLearningExecutor#execute - reason=extractor decided not to learn, taskId=b6ac4de3-efbf-49bb-94ea-b083dc6ba55b, learningType=experience
