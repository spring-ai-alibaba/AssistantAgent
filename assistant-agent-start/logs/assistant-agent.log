2026-01-22T00:24:00.325+08:00  INFO --- [           main] c.a.a.a.start.AssistantAgentApplication  : Starting AssistantAgentApplication using Java 21.0.9 with PID 30124 (D:\devfive\AssistantAgent\assistant-agent-start\target\classes started by zhou_ in D:\devfive\AssistantAgent\assistant-agent-start)
2026-01-22T00:24:00.341+08:00 DEBUG --- [           main] c.a.a.a.start.AssistantAgentApplication  : Running with Spring Boot v3.4.8, Spring v6.2.9
2026-01-22T00:24:00.342+08:00  INFO --- [           main] c.a.a.a.start.AssistantAgentApplication  : No active profile set, falling back to 1 default profile: "default"
2026-01-22T00:24:01.879+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Elasticsearch repositories in DEFAULT mode.
2026-01-22T00:24:01.923+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 33 ms. Found 0 Elasticsearch repository interfaces.
2026-01-22T00:24:01.930+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Reactive Elasticsearch repositories in DEFAULT mode.
2026-01-22T00:24:01.941+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 10 ms. Found 0 Reactive Elasticsearch repository interfaces.
2026-01-22T00:24:02.070+08:00  WARN --- [           main] o.m.s.mapper.ClassPathMapperScanner      : Skipping MapperFactoryBean with name 'learningRecordMapper' and 'com.alibaba.assistant.agent.start.persistence.learning.mapper.LearningRecordMapper' mapperInterface. Bean already defined with the same name!
2026-01-22T00:24:02.071+08:00  WARN --- [           main] o.m.s.mapper.ClassPathMapperScanner      : Skipping MapperFactoryBean with name 'triggerDefinitionMapper' and 'com.alibaba.assistant.agent.start.persistence.trigger.mapper.TriggerDefinitionMapper' mapperInterface. Bean already defined with the same name!
2026-01-22T00:24:02.071+08:00  WARN --- [           main] o.m.s.mapper.ClassPathMapperScanner      : Skipping MapperFactoryBean with name 'triggerExecutionRecordMapper' and 'com.alibaba.assistant.agent.start.persistence.trigger.mapper.TriggerExecutionRecordMapper' mapperInterface. Bean already defined with the same name!
2026-01-22T00:24:02.071+08:00  WARN --- [           main] o.m.s.mapper.ClassPathMapperScanner      : Skipping MapperFactoryBean with name 'actionRegistryMapper' and 'com.alibaba.assistant.agent.planning.persistence.mapper.ActionRegistryMapper' mapperInterface. Bean already defined with the same name!
2026-01-22T00:24:03.350+08:00  INFO --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2026-01-22T00:24:03.382+08:00  INFO --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2026-01-22T00:24:03.382+08:00  INFO --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.43]
2026-01-22T00:24:03.478+08:00  INFO --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2026-01-22T00:24:03.478+08:00  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 3071 ms
2026-01-22T00:24:03.494+08:00  INFO --- [           main] c.a.a.a.s.a.security.JwtTokenProvider    : JwtTokenProvider#init - JWT 密钥已初始化
2026-01-22T00:24:03.542+08:00 DEBUG --- [           main] c.a.a.a.s.a.s.JwtAuthenticationFilter    : Filter 'jwtAuthenticationFilter' configured for use
2026-01-22T00:24:03.884+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#init - reason=search extension framework is enabled
2026-01-22T00:24:03.887+08:00  INFO --- [           main] c.a.a.a.s.s.MockBaiduWebSearchProvider   : MockBaiduWebSearchProvider#init - reason=使用简单模式初始化
2026-01-22T00:24:03.887+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#unifiedSearchCodeactTool - reason=创建统一搜索工具, providerCount=3
2026-01-22T00:24:03.935+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#init - reason=planning extension is enabled
2026-01-22T00:24:03.937+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#init - reason=ES configuration class loaded (elasticsearch.enabled=true)
2026-01-22T00:24:03.939+08:00  INFO --- [           main] toConfiguration$MybatisPlusConfiguration : MybatisPlusConfiguration#init - reason=MySQL configuration class loaded (mysql.enabled=true, MyBatisPlus present)
2026-01-22T00:24:03.976+08:00  INFO --- [           main] toConfiguration$MybatisPlusConfiguration : MybatisPlusConfiguration#actionEntityConverter - reason=creating entity converter
2026-01-22T00:24:03.976+08:00  INFO --- [           main] toConfiguration$MybatisPlusConfiguration : MybatisPlusConfiguration#mybatisPlusActionRepository - reason=ActionRegistryMapper found, creating MySQL repository
2026-01-22T00:24:04.499+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#actionVectorizationService - reason=creating ES vectorization service
2026-01-22T00:24:04.535+08:00 ERROR --- [           main] c.a.a.a.p.v.ActionVectorizationService   : ActionVectorizationService#init - reason=failed to init ES index on startup, error=Connection refused: getsockopt

java.net.ConnectException: Connection refused: getsockopt
	at org.elasticsearch.client.RestClient.extractAndWrapCause(RestClient.java:934)
	at org.elasticsearch.client.RestClient.performRequest(RestClient.java:304)
	at org.elasticsearch.client.RestClient.performRequest(RestClient.java:292)
	at co.elastic.clients.transport.rest_client.RestClientHttpClient.performRequest(RestClientHttpClient.java:91)
	at co.elastic.clients.transport.ElasticsearchTransportBase.performRequest(ElasticsearchTransportBase.java:144)
	at co.elastic.clients.elasticsearch.indices.ElasticsearchIndicesClient.exists(ElasticsearchIndicesClient.java:682)
	at co.elastic.clients.elasticsearch.indices.ElasticsearchIndicesClient.exists(ElasticsearchIndicesClient.java:698)
	at com.alibaba.assistant.agent.planning.vector.ActionVectorizationService.initIndex(ActionVectorizationService.java:74)
	at com.alibaba.assistant.agent.planning.vector.ActionVectorizationService.init(ActionVectorizationService.java:62)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleMethod.invoke(InitDestroyAnnotationBeanPostProcessor.java:457)
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleMetadata.invokeInitMethods(InitDestroyAnnotationBeanPostProcessor.java:401)
	at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor.postProcessBeforeInitialization(InitDestroyAnnotationBeanPostProcessor.java:219)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsBeforeInitialization(AbstractAutowireCapableBeanFactory.java:429)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1818)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:607)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1745)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1628)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:913)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:546)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1375)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1205)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:569)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1745)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1628)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:913)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:546)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1375)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1205)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:569)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.addCandidateEntry(DefaultListableBeanFactory.java:1996)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:1960)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveMultipleBeanCollection(DefaultListableBeanFactory.java:1850)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveMultipleBeans(DefaultListableBeanFactory.java:1818)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1694)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1628)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:913)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:546)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1375)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1205)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:569)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1683)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1628)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:913)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:546)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1375)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1205)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:569)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1683)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1628)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:913)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:546)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1375)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1205)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:569)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1745)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1628)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:913)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:240)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1395)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1232)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:569)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:413)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1375)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1205)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:569)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1683)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1628)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:785)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:768)
	at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:146)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:509)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1459)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:606)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.instantiateSingleton(DefaultListableBeanFactory.java:1222)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingleton(DefaultListableBeanFactory.java:1188)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:1123)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:987)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.alibaba.assistant.agent.start.AssistantAgentApplication.main(AssistantAgentApplication.java:68)
Caused by: java.net.ConnectException: Connection refused: getsockopt
	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:690)
	at java.base/sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:973)
	at org.apache.http.impl.nio.reactor.DefaultConnectingIOReactor.processEvent(DefaultConnectingIOReactor.java:174)
	at org.apache.http.impl.nio.reactor.DefaultConnectingIOReactor.processEvents(DefaultConnectingIOReactor.java:148)
	at org.apache.http.impl.nio.reactor.AbstractMultiworkerIOReactor.execute(AbstractMultiworkerIOReactor.java:351)
	at org.apache.http.impl.nio.conn.PoolingNHttpClientConnectionManager.execute(PoolingNHttpClientConnectionManager.java:221)
	at org.apache.http.impl.nio.client.CloseableHttpAsyncClientBase$1.run(CloseableHttpAsyncClientBase.java:64)
	at java.base/java.lang.Thread.run(Thread.java:1583)

2026-01-22T00:24:04.560+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#semanticActionProvider - reason=creating semantic action provider, semanticWeight=0.6, keywordWeight=0.4, matchThreshold=0.5
2026-01-22T00:24:04.560+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#defaultPlanGenerator - reason=creating default plan generator
2026-01-22T00:24:04.560+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#planActionCodeactTool - reason=creating plan_action tool
2026-01-22T00:24:04.560+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#queryStepExecutor - reason=creating query step executor
2026-01-22T00:24:04.560+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#inputStepExecutor - reason=creating input step executor
2026-01-22T00:24:04.560+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#executeStepExecutor - reason=creating execute step executor
2026-01-22T00:24:04.560+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#apiCallStepExecutor - reason=creating api call step executor
2026-01-22T00:24:04.579+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#validationStepExecutor - reason=creating validation step executor
2026-01-22T00:24:04.581+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#stepExecutorRegistry - reason=creating executor registry, executorCount=5
2026-01-22T00:24:04.581+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=QUERY, executorClass=QueryStepExecutor
2026-01-22T00:24:04.581+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=INPUT, executorClass=InputStepExecutor
2026-01-22T00:24:04.581+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=EXECUTE, executorClass=ExecuteStepExecutor
2026-01-22T00:24:04.581+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=API_CALL, executorClass=ApiCallStepExecutor
2026-01-22T00:24:04.581+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=VALIDATION, executorClass=ValidationStepExecutor
2026-01-22T00:24:04.581+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#defaultPlanExecutor - reason=creating default plan executor
2026-01-22T00:24:04.587+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#executeActionCodeactTool - reason=creating execute_action tool
2026-01-22T00:24:04.589+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#listActionsCodeactTool - reason=creating list_actions tool
2026-01-22T00:24:04.589+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#getActionDetailsCodeactTool - reason=creating get_action_details tool
2026-01-22T00:24:04.680+08:00  INFO --- [           main] c.a.a.a.start.config.PersistenceConfig   : PersistenceConfig#init - reason=persistence configuration loaded
2026-01-22T00:24:04.682+08:00  INFO --- [           main] c.a.a.a.start.config.PersistenceConfig   : PersistenceConfig#elasticsearchExperienceProvider - reason=creating Elasticsearch experience provider (PRIMARY), indexName=experiences
2026-01-22T00:24:04.686+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#<init> - reason=初始化默认评估套件配置, experienceProviderAvailable=true
2026-01-22T00:24:04.688+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#evaluatorRegistry - reason=创建 EvaluatorRegistry Bean
2026-01-22T00:24:04.688+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'llm-based' of type LLMBasedEvaluator
2026-01-22T00:24:04.688+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'passthrough' of type RuleBasedEvaluator
2026-01-22T00:24:04.688+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'react_experience_evaluator' of type RuleBasedEvaluator
2026-01-22T00:24:04.688+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createDefaultEvaluatorRegistry - reason=注册 React 阶段经验检索评估器
2026-01-22T00:24:04.688+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'codeact_experience_evaluator' of type RuleBasedEvaluator
2026-01-22T00:24:04.688+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createDefaultEvaluatorRegistry - reason=注册 CodeAct 阶段经验检索评估器
2026-01-22T00:24:04.688+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#evaluationService - reason=创建默认 EvaluationService, sharedRegistryEvaluators=[llm-based, passthrough, codeact_experience_evaluator, react_experience_evaluator]
2026-01-22T00:24:04.688+08:00 DEBUG --- [           main] c.a.a.a.e.e.GraphBasedEvaluationExecutor : Created default ExecutorService for batch processing
2026-01-22T00:24:04.688+08:00  INFO --- [           main] .c.ExperienceEvaluationCriterionProvider : ExperienceEvaluationCriterionProvider#<init> - reason=初始化经验评估 Criterion 提供者
2026-01-22T00:24:04.688+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#structuredParamExtractor - reason=creating structured param extractor
2026-01-22T00:24:04.706+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#parameterValidator - reason=creating parameter validator
2026-01-22T00:24:04.706+08:00  INFO --- [           main] .a.a.a.p.c.ParamOptionsAutoConfiguration : ParamOptionsAutoConfiguration - Parameter options module initialized
2026-01-22T00:24:04.706+08:00  INFO --- [           main] .a.a.a.p.c.ParamOptionsAutoConfiguration : ParamOptionsAutoConfiguration - Creating RestTemplate for HTTP handlers
2026-01-22T00:24:04.706+08:00  INFO --- [           main] c.a.a.a.planning.executor.HttpExecutor   : HttpExecutor#init - initialized
2026-01-22T00:24:04.721+08:00  INFO --- [           main] c.a.a.a.p.executor.InternalExecutor      : InternalExecutor#init - initialized
2026-01-22T00:24:04.721+08:00  INFO --- [           main] c.a.a.a.p.e.ActionExecutorFactory        : ActionExecutorFactory#init - initialized executors: INTERNAL(InternalExecutor), HTTP(HttpExecutor), DATA_AGENT(DataAgentExecutor), MCP(McpExecutor)
2026-01-22T00:24:04.721+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#sessionProvider - reason=creating in-memory session provider
2026-01-22T00:24:04.721+08:00  INFO --- [           main] c.a.a.a.p.s.InMemorySessionProvider      : InMemorySessionProvider#init - initialized
2026-01-22T00:24:04.721+08:00  INFO --- [           main] c.a.a.a.p.s.ParamCollectionService       : ParamCollectionService#init - sessionProvider=InMemory
2026-01-22T00:24:04.721+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'action_intent_evaluator' of type ActionIntentEvaluator
2026-01-22T00:24:04.721+08:00  INFO --- [           main] p.i.PlanningIntegrationAutoConfiguration : PlanningIntegrationAutoConfiguration#actionIntentEvaluator - initialized and registered, paramCollection=true, llmVerification=true, maxCandidates=5
2026-01-22T00:24:04.721+08:00  INFO --- [           main] .p.i.PlanningEvaluationCriterionProvider : PlanningEvaluationCriterionProvider#init - initialized, llmVerificationEnabled=true
2026-01-22T00:24:04.721+08:00  INFO --- [           main] p.i.PlanningIntegrationAutoConfiguration : PlanningIntegrationAutoConfiguration#planningEvaluationCriterionProvider - registered planning evaluation criterion provider
2026-01-22T00:24:04.721+08:00  INFO --- [           main] .c.ExperienceEvaluationCriterionProvider : ExperienceEvaluationCriterionProvider#getReactPhaseCriteria - reason=提供 React 阶段评估 Criteria
2026-01-22T00:24:04.721+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createReactPhaseSuite - reason=添加自定义 Criterion, provider=ExperienceEvaluationCriterionProvider, count=3
2026-01-22T00:24:04.721+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createReactPhaseSuite - reason=添加自定义 Criterion, provider=PlanningEvaluationCriterionProvider, count=2
2026-01-22T00:24:04.721+08:00  INFO --- [           main] a.a.e.a.BatchAggregationStrategyRegistry : Registered batch aggregation strategy: ANY_TRUE
2026-01-22T00:24:04.737+08:00  INFO --- [           main] a.a.e.a.BatchAggregationStrategyRegistry : Registered batch aggregation strategy: ALL_TRUE
2026-01-22T00:24:04.784+08:00  INFO --- [           main] c.a.c.a.g.internal.node.ParallelNode     : Calculated core pool size: 32 (CPU cores: 16)
2026-01-22T00:24:04.784+08:00  INFO --- [           main] c.a.c.a.g.internal.node.ParallelNode     : Calculated maximum pool size: 64 (CPU cores: 16)
2026-01-22T00:24:04.785+08:00  INFO --- [           main] c.a.c.a.g.internal.node.ParallelNode     : Calculated queue capacity: 1000
2026-01-22T00:24:04.786+08:00  INFO --- [           main] c.a.a.a.e.DefaultEvaluationService       : Registered evaluation suite: react-phase-suite
2026-01-22T00:24:04.786+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#evaluationService - reason=注册 React Phase Suite, suiteId=react-phase-suite
2026-01-22T00:24:04.786+08:00  INFO --- [           main] .c.ExperienceEvaluationCriterionProvider : ExperienceEvaluationCriterionProvider#getCodeActPhaseCriteria - reason=提供 CodeAct 阶段评估 Criteria
2026-01-22T00:24:04.786+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createCodeActPhaseSuite - reason=添加自定义 Criterion, provider=ExperienceEvaluationCriterionProvider, count=3
2026-01-22T00:24:04.786+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createCodeActPhaseSuite - reason=添加自定义 Criterion, provider=PlanningEvaluationCriterionProvider, count=2
2026-01-22T00:24:04.787+08:00  INFO --- [           main] a.a.e.a.BatchAggregationStrategyRegistry : Registered batch aggregation strategy: ANY_TRUE
2026-01-22T00:24:04.787+08:00  INFO --- [           main] a.a.e.a.BatchAggregationStrategyRegistry : Registered batch aggregation strategy: ALL_TRUE
2026-01-22T00:24:04.787+08:00  INFO --- [           main] c.a.a.a.e.DefaultEvaluationService       : Registered evaluation suite: codeact-phase-suite
2026-01-22T00:24:04.787+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#evaluationService - reason=注册 CodeAct Phase Suite, suiteId=codeact-phase-suite
2026-01-22T00:24:04.790+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#codeactEvaluationContextFactory - reason=创建 EvaluationContextFactory
2026-01-22T00:24:04.792+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#codeactEvaluationResultAttacher - reason=创建 EvaluationResultAttacher
2026-01-22T00:24:04.792+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#reactPhaseEvaluationHooks - reason=创建 React Phase ModelInputEvaluationHook
2026-01-22T00:24:04.792+08:00  INFO --- [           main] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#<init> - reason=初始化, phase=REACT, providerCount=1
2026-01-22T00:24:04.798+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#reactPhaseEvaluationHooks - reason=创建 React Phase EvaluationPromptInjectionHook, providersCount=2
2026-01-22T00:24:04.798+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#codeactPhaseEvaluationHooks - reason=创建 CodeAct Phase ModelInputEvaluationHook
2026-01-22T00:24:04.798+08:00  INFO --- [           main] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#<init> - reason=初始化, phase=CODEACT, providerCount=1
2026-01-22T00:24:04.798+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#codeactPhaseEvaluationHooks - reason=创建 CodeAct Phase EvaluationPromptInjectionHook, providersCount=2
2026-01-22T00:24:04.800+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#keywordMatcher - reason=creating keyword matcher
2026-01-22T00:24:04.802+08:00  INFO --- [           main] .ParamCollectionSessionAutoConfiguration : ParamCollectionSessionAutoConfiguration#inMemoryParamCollectionSessionStore - reason=creating in-memory session store (Redis not available), ttl=PT30M
2026-01-22T00:24:04.802+08:00  WARN --- [           main] .ParamCollectionSessionAutoConfiguration : ParamCollectionSessionAutoConfiguration#inMemoryParamCollectionSessionStore - reason=WARNING: In-memory session store is not suitable for distributed environment!
2026-01-22T00:24:04.804+08:00  INFO --- [           main] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#<init> - reason=initialized, defaultTtl=PT30M
2026-01-22T00:24:04.804+08:00  WARN --- [           main] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#<init> - reason=WARNING: Using in-memory session store, not suitable for distributed environment!
2026-01-22T00:24:04.806+08:00  INFO --- [           main] iguration$UnifiedIntentHookConfiguration : UnifiedIntentHookConfiguration#unifiedIntentRecognitionHook - reason=creating unified intent hook, experienceProviderPresent=true, chatModelPresent=true, sessionStorePresent=true, directExecuteThreshold=0.95, hintThreshold=0.5
2026-01-22T00:24:04.905+08:00  INFO --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2026-01-22T00:24:05.117+08:00  INFO --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@2dc319cf
2026-01-22T00:24:05.120+08:00  INFO --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2026-01-22T00:24:05.242+08:00  WARN --- [           main] c.a.a.a.p.p.c.ActionEntityConverter      : ActionEntityConverter#parseActionType - reason=unknown action type, type=INTERNAL
2026-01-22T00:24:05.263+08:00 DEBUG --- [           main] c.a.a.a.planning.intent.KeywordMatcher   : KeywordMatcher#registerAction - actionId=oa:leave:request, keywords=57
2026-01-22T00:24:05.263+08:00  INFO --- [           main] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#initKeywordMatcher - reason=initialized, actionCount=1, keywordIndexSize=57
2026-01-22T00:24:05.267+08:00  INFO --- [           main] c.a.a.a.start.config.PersistenceConfig   : PersistenceConfig#elasticsearchExperienceRepository - reason=creating Elasticsearch experience repository (PRIMARY), indexName=experiences
2026-01-22T00:24:05.273+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#init - reason=reply module enabled
2026-01-22T00:24:05.277+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactToolFactory - reason=创建CodeactTool工厂, channels=1
2026-01-22T00:24:05.279+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#init - reason=工厂初始化完成, channels=1
2026-01-22T00:24:05.284+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=开始创建Reply工具
2026-01-22T00:24:05.284+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#createTools - reason=创建工具成功, toolName=send_success_message, channelCode=IDE_TEXT
2026-01-22T00:24:05.296+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#createTools - reason=创建工具成功, toolName=send_error_message, channelCode=IDE_TEXT
2026-01-22T00:24:05.296+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#createTools - reason=创建工具成功, toolName=send_notification, channelCode=IDE_TEXT
2026-01-22T00:24:05.296+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#createTools - reason=工具创建完成, totalCount=3
2026-01-22T00:24:05.296+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=Reply工具创建完成, count=3
2026-01-22T00:24:05.296+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=创建Reply工具, index=1, name=send_success_message, description=Send a success message to the IDE console
2026-01-22T00:24:05.296+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=创建Reply工具, index=2, name=send_error_message, description=Send an error message to the IDE console
2026-01-22T00:24:05.296+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=创建Reply工具, index=3, name=send_notification, description=Send a notification message
2026-01-22T00:24:05.298+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactToolFactory - reason=创建SearchCodeactTool工厂, providerCount=3
2026-01-22T00:24:05.321+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactToolFactory - reason=创建TriggerCodeactTool工厂
2026-01-22T00:24:05.322+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=开始创建Trigger工具
2026-01-22T00:24:05.323+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=创建SubscribeTriggerCodeactTool成功
2026-01-22T00:24:05.325+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=创建UnsubscribeTriggerCodeactTool成功
2026-01-22T00:24:05.325+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=创建ListTriggersCodeactTool成功
2026-01-22T00:24:05.325+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=创建GetTriggerDetailCodeactTool成功
2026-01-22T00:24:05.325+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=触发器工具创建完成, count=4
2026-01-22T00:24:05.325+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=Trigger工具创建完成, count=4
2026-01-22T00:24:05.325+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=创建Trigger工具, index=1, name=subscribe_trigger, description=创建并订阅一个新的触发器
2026-01-22T00:24:05.325+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=创建Trigger工具, index=2, name=unsubscribe_trigger, description=取消订阅并删除一个触发器
2026-01-22T00:24:05.325+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=创建Trigger工具, index=3, name=list_triggers, description=列出所有触发器
2026-01-22T00:24:05.325+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=创建Trigger工具, index=4, name=get_trigger_detail, description=获取指定触发器的详细信息
2026-01-22T00:24:05.325+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=创建 CodeactAgent
2026-01-22T00:24:05.325+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=配置 MemorySaver 以支持多轮对话上下文保持
2026-01-22T00:24:05.325+08:00  WARN --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=临时禁用 streaming 模式以排查循环问题
2026-01-22T00:24:05.325+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加UnifiedSearchCodeactTool
2026-01-22T00:24:05.340+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockBaiduWebSearchProvider, toolName=search_web
2026-01-22T00:24:05.340+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockKnowledgeStoreSearchProvider, toolName=search_knowledge
2026-01-22T00:24:05.340+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockProjectContextSearchProvider, toolName=search_project
2026-01-22T00:24:05.345+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=搜索工具创建完成, totalCount=3
2026-01-22T00:24:05.345+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加SearchCodeactTools, count=3
2026-01-22T00:24:05.345+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加ReplyCodeactTools, count=3
2026-01-22T00:24:05.345+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加TriggerCodeactTools, count=4
2026-01-22T00:24:05.345+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#createMcpDynamicTools - reason=Creating MCP dynamic tools
2026-01-22T00:24:05.347+08:00  INFO --- [           main] c.a.a.a.e.d.mcp.McpDynamicToolFactory    : McpDynamicToolFactory#createTools - reason=开始创建MCP动态工具
2026-01-22T00:24:05.347+08:00  INFO --- [           main] c.a.a.a.e.d.mcp.McpDynamicToolFactory    : McpDynamicToolFactory#createTools - reason=无可用的MCP工具
2026-01-22T00:24:05.347+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#createMcpDynamicTools - reason=MCP dynamic tools created, count=0
2026-01-22T00:24:05.347+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=Added MCP dynamic tools, count=0
2026-01-22T00:24:05.347+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#createHttpDynamicTools - reason=HTTP dynamic tools disabled by default
2026-01-22T00:24:05.347+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=合并后CodeactTool总数, count=11
2026-01-22T00:24:05.347+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=React阶段使用内置工具(write_code, execute_code, write_condition_code)
2026-01-22T00:24:05.347+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=注入 React Phase 评估 Hooks, count=2
2026-01-22T00:24:05.347+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=注入 CodeAct Phase 评估 Hooks, count=2
2026-01-22T00:24:05.347+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=已准备注入UnifiedIntentRecognitionHook
2026-01-22T00:24:05.347+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 开始构建CodeactAgent
2026-01-22T00:24:05.347+08:00  INFO --- [           main] .a.a.a.c.t.s.DefaultReturnSchemaRegistry : DefaultReturnSchemaRegistry#<init> - reason=创建新实例, hashCode=1080187590
2026-01-22T00:24:05.347+08:00 DEBUG --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#<init> - reason=创建注册表, returnSchemaRegistry=DefaultReturnSchemaRegistry
2026-01-22T00:24:05.347+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=创建默认CodeactToolRegistry
2026-01-22T00:24:05.347+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=开始注册CodeactTool, count=11
2026-01-22T00:24:05.347+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=unified_search
2026-01-22T00:24:05.347+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=unified_search
2026-01-22T00:24:05.347+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=search_web
2026-01-22T00:24:05.347+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=search_web
2026-01-22T00:24:05.347+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=search_knowledge
2026-01-22T00:24:05.347+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=search_knowledge
2026-01-22T00:24:05.347+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=search_project
2026-01-22T00:24:05.347+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=search_project
2026-01-22T00:24:05.347+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=send_success_message
2026-01-22T00:24:05.347+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=send_success_message
2026-01-22T00:24:05.347+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=send_error_message
2026-01-22T00:24:05.347+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=send_error_message
2026-01-22T00:24:05.347+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=send_notification
2026-01-22T00:24:05.347+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=send_notification
2026-01-22T00:24:05.347+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=subscribe_trigger
2026-01-22T00:24:05.347+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=subscribe_trigger
2026-01-22T00:24:05.347+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=unsubscribe_trigger
2026-01-22T00:24:05.347+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=unsubscribe_trigger
2026-01-22T00:24:05.347+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=list_triggers
2026-01-22T00:24:05.347+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=list_triggers
2026-01-22T00:24:05.347+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=get_trigger_detail
2026-01-22T00:24:05.347+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=get_trigger_detail
2026-01-22T00:24:05.347+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册完成, count=11
2026-01-22T00:24:05.347+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 创建默认CodeContext: language=PYTHON
2026-01-22T00:24:05.347+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 创建默认RuntimeEnvironmentManager: language=PYTHON
2026-01-22T00:24:05.358+08:00 DEBUG --- [           main] c.a.a.a.c.e.bridge.AgentToolBridge       : AgentToolBridge#<init> 初始化: 注册了0个工具
2026-01-22T00:24:05.359+08:00 DEBUG --- [           main] c.a.a.a.c.executor.bridge.StateBridge    : StateBridge#<init> 初始化完成
2026-01-22T00:24:05.359+08:00  INFO --- [           main] c.a.a.a.core.executor.GraalCodeExecutor  : GraalCodeExecutor#<init> 初始化完成: language=PYTHON, allowIO=false, timeout=30000ms, executableTools=true, customBridgeFactory=false
2026-01-22T00:24:05.359+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#createCodeactSubAgentInterceptor 创建子Agent拦截器
2026-01-22T00:24:05.364+08:00  INFO --- [           main] c.a.a.a.a.subagent.CodeactSubAgent       : CodeactSubAgent#<init> 初始化: name=code-generator
2026-01-22T00:24:05.364+08:00  INFO --- [           main] c.a.a.a.a.subagent.CodeactSubAgent       : CodeactSubAgent#<init> 初始化: name=condition-code-generator
2026-01-22T00:24:05.364+08:00  INFO --- [           main] c.a.a.a.a.s.CodeactSubAgentInterceptor   : CodeactSubAgentInterceptor#<init> 创建默认代码生成子Agent
2026-01-22T00:24:05.500+08:00  INFO --- [           main] c.a.a.a.a.s.CodeactSubAgentInterceptor   : CodeactSubAgentInterceptor#<init> 初始化完成: subAgentCount=2
2026-01-22T00:24:05.502+08:00  INFO --- [           main] c.a.a.a.a.tools.ExecuteCodeTool          : ExecuteCodeTool#<init> 初始化完成
2026-01-22T00:24:05.502+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 拦截器分类完成: modelInterceptors=1, toolInterceptors=0
2026-01-22T00:24:05.502+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 从拦截器提取工具: interceptor=CodeactSubAgent, toolCount=2
2026-01-22T00:24:05.507+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 工具收集完成: interceptorTools=2, regularTools=3, total=6
2026-01-22T00:24:05.507+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 设置ModelInterceptors到LlmNode: count=1
2026-01-22T00:24:05.507+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build CodeactAgent构建完成
2026-01-22T00:24:05.507+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=开始罗列已注册的工具
2026-01-22T00:24:05.507+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct阶段工具数量, count=11
2026-01-22T00:24:05.507+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=1, name=unified_search, description=统一搜索工具，可同时搜索项目、知识库、Web等多个数据源
2026-01-22T00:24:05.507+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=2, name=search_knowledge, description=搜索团队知识库，包括FAQ、规范、最佳实践等
2026-01-22T00:24:05.507+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=3, name=send_success_message, description=Send a success message to the IDE console
2026-01-22T00:24:05.507+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=4, name=search_web, description=执行Web搜索，获取公开互联网信息
2026-01-22T00:24:05.507+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=5, name=unsubscribe_trigger, description=取消订阅并删除一个触发器
2026-01-22T00:24:05.507+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=6, name=get_trigger_detail, description=获取指定触发器的详细信息
2026-01-22T00:24:05.507+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=7, name=send_error_message, description=Send an error message to the IDE console
2026-01-22T00:24:05.507+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=8, name=search_project, description=搜索项目上下文信息，包括代码、配置、文档等
2026-01-22T00:24:05.507+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=9, name=send_notification, description=Send a notification message
2026-01-22T00:24:05.507+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=10, name=subscribe_trigger, description=创建并订阅一个新的触发器
2026-01-22T00:24:05.507+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=11, name=list_triggers, description=列出所有触发器
2026-01-22T00:24:05.507+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React阶段工具数量, count=6
2026-01-22T00:24:05.507+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=1, name=write_code, description=Generate and register a new function with specified name and parameters. IMPORTANT: You MUST provide both 'functionName' and 'parameters' fields. Example: write_code(requirement='calculate sum', functionName='calculate_sum', parameters=['a', 'b'])
2026-01-22T00:24:05.507+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=2, name=write_condition_code, description=Generate and register a condition check function for triggers. This function MUST return a boolean value (True/False). Example: write_condition_code(requirement='check if it is a working day', functionName='check_is_working_day', parameters=['date'])
2026-01-22T00:24:05.507+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=3, name=send_success_message, description=Send a success message to the IDE console
2026-01-22T00:24:05.507+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=4, name=send_error_message, description=Send an error message to the IDE console
2026-01-22T00:24:05.507+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=5, name=send_notification, description=Send a notification message
2026-01-22T00:24:05.507+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=6, name=execute_code, description=Execute a previously generated function by its exact name with matching parameters. CRITICAL: The functionName MUST exactly match the name used in write_code. The 'args' parameter names MUST exactly match the 'parameters' specified in write_code. Example: If you called write_code with functionName='calculate_sum' and parameters=['a', 'b'], then you must call execute_code with functionName='calculate_sum' and args={'a': 10, 'b': 20}. Parameter value types supported: String, Number, Boolean, List, Map/Object.
2026-01-22T00:24:05.507+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=工具罗列完成
2026-01-22T00:24:05.507+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgent#<init> 初始化完成: language=PYTHON
2026-01-22T00:24:05.522+08:00  INFO --- [           main] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#<init> 初始化 Agent 加载器
2026-01-22T00:24:05.522+08:00 DEBUG --- [           main] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#<init> Agent 图结构:
@startuml CodeactAgent
skinparam usecaseFontSize 14
skinparam usecaseStereotypeFontSize 12
skinparam hexagonFontSize 14
skinparam hexagonStereotypeFontSize 12
title "CodeactAgent"
footer

powered by spring-ai-alibaba
end footer
circle start<<input>> as __START__
circle stop as __END__
usecase "_AGENT_MODEL_"<<Node>>
usecase "_AGENT_TOOL_"<<Node>>
usecase "_AGENT_HOOK_UnifiedIntentRecognitionHook.before"<<Node>>
usecase "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"<<Node>>
usecase "_AGENT_HOOK_EvaluationPromptInjectionHook-REACT.beforeModel"<<Node>>
hexagon "check state" as condition1<<Condition>>
hexagon "check state" as condition2<<Condition>>
hexagon "check state" as condition3<<Condition>>
"__START__" -down-> "_AGENT_HOOK_UnifiedIntentRecognitionHook.before"
"_AGENT_HOOK_UnifiedIntentRecognitionHook.before" .down.> "condition1"
"condition1" .down.> "__END__"
'"_AGENT_HOOK_UnifiedIntentRecognitionHook.before" .down.> "__END__"
"condition1" .down.> "_AGENT_TOOL_"
'"_AGENT_HOOK_UnifiedIntentRecognitionHook.before" .down.> "_AGENT_TOOL_"
"condition1" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
'"_AGENT_HOOK_UnifiedIntentRecognitionHook.before" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
"_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel" -down-> "_AGENT_HOOK_EvaluationPromptInjectionHook-REACT.beforeModel"
"_AGENT_HOOK_EvaluationPromptInjectionHook-REACT.beforeModel" -down-> "_AGENT_MODEL_"
"_AGENT_MODEL_" .down.> "condition2"
"condition2" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
'"_AGENT_MODEL_" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
"condition2" .down.> "__END__"
'"_AGENT_MODEL_" .down.> "__END__"
"condition2" .down.> "_AGENT_TOOL_"
'"_AGENT_MODEL_" .down.> "_AGENT_TOOL_"
"_AGENT_TOOL_" .down.> "condition3"
"condition3" .down.> "__END__"
'"_AGENT_TOOL_" .down.> "__END__"
"condition3" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
'"_AGENT_TOOL_" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
@enduml

2026-01-22T00:24:05.522+08:00  INFO --- [           main] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#<init> 已注册 agent: grayscale_agent
2026-01-22T00:24:05.542+08:00  INFO --- [           main] c.a.a.a.p.p.a.PermissionAdapterRegistry  : PermissionAdapterRegistry#registerAdapter - registered adapter: system=gov-platform, name=政务服务平台权限适配器
2026-01-22T00:24:05.542+08:00  INFO --- [           main] c.a.a.a.p.p.a.PermissionAdapterRegistry  : PermissionAdapterRegistry#registerAdapter - registered adapter: system=oa-system, name=OA办公系统权限适配器
2026-01-22T00:24:05.542+08:00  INFO --- [           main] c.a.a.a.p.p.a.PermissionAdapterRegistry  : PermissionAdapterRegistry initialized with 2 adapters: [gov-platform, oa-system]
2026-01-22T00:24:05.542+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U001, system=oa-system, externalUser=zhang.san@company.com
2026-01-22T00:24:05.542+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U001, system=gov-platform, externalUser=320102199001011234
2026-01-22T00:24:05.542+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U002, system=oa-system, externalUser=li.si@company.com
2026-01-22T00:24:05.542+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U003, system=oa-system, externalUser=wang.wu@company.com
2026-01-22T00:24:05.542+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U003, system=gov-platform, externalUser=leader_001
2026-01-22T00:24:05.542+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U004, system=gov-platform, externalUser=staff_001
2026-01-22T00:24:05.542+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U005, system=oa-system, externalUser=sun.qi@company.com
2026-01-22T00:24:05.542+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService initialized with demo data
2026-01-22T00:24:05.542+08:00  INFO --- [           main] .a.a.a.p.c.ParamOptionsAutoConfiguration : ParamOptionsAutoConfiguration - Creating OptionsCache with TTL: 300000ms
2026-01-22T00:24:05.542+08:00  INFO --- [           main] a.a.a.p.s.DefaultParameterOptionsService : DefaultParameterOptionsService initialized with 3 handlers
2026-01-22T00:24:05.554+08:00 DEBUG --- [           main] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#listAgents 列出所有 agent
2026-01-22T00:24:05.554+08:00  INFO --- [           main] c.a.c.a.a.s.controller.AgentController   : AgentController initialized with 1 dynamic agents: [grayscale_agent]
2026-01-22T00:24:05.622+08:00  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: c756229a-d2ac-4053-8a6a-a5d8f853d445

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2026-01-22T00:24:05.641+08:00  INFO --- [           main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2026-01-22T00:24:05.961+08:00  INFO --- [           main] e.e.c.CodeactEvaluationAutoConfiguration : CodeactEvaluationAutoConfiguration#inputRoutingEvaluationHook - reason=创建输入路由评估 Hook
2026-01-22T00:24:05.961+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchFacade - reason=creating search facade with 3 providers
2026-01-22T00:24:05.961+08:00  INFO --- [           main] c.a.a.a.e.s.i.DefaultSearchFacade        : DefaultSearchFacade#init - reason=initialized with 3 providers
2026-01-22T00:24:05.961+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=开始创建Search工具
2026-01-22T00:24:05.961+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockBaiduWebSearchProvider, toolName=search_web
2026-01-22T00:24:05.961+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockKnowledgeStoreSearchProvider, toolName=search_knowledge
2026-01-22T00:24:05.961+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockProjectContextSearchProvider, toolName=search_project
2026-01-22T00:24:05.961+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=搜索工具创建完成, totalCount=3
2026-01-22T00:24:05.961+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=Search工具创建完成, count=3
2026-01-22T00:24:05.961+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=创建Search工具, index=1, name=search_web, description=执行Web搜索，获取公开互联网信息
2026-01-22T00:24:05.961+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=创建Search工具, index=2, name=search_knowledge, description=搜索团队知识库，包括FAQ、规范、最佳实践等
2026-01-22T00:24:05.961+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=创建Search工具, index=3, name=search_project, description=搜索项目上下文信息，包括代码、配置、文档等
2026-01-22T00:24:05.976+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#diagnostics - reason=ElasticsearchClient bean found
2026-01-22T00:24:05.976+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#diagnostics - reason=EmbeddingModel bean found
2026-01-22T00:24:05.979+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#diagnostics - Planning module status:
2026-01-22T00:24:05.979+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration :   - ActionRepository: MybatisPlusActionRepository
2026-01-22T00:24:05.979+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration :   - ActionProvider: SemanticActionProvider
2026-01-22T00:24:05.979+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration :   - PlanGenerator: DefaultPlanGenerator
2026-01-22T00:24:05.979+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration :   - PlanExecutor: DefaultPlanExecutor
2026-01-22T00:24:05.979+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#planningCodeactTools - reason=creating planning tools list
2026-01-22T00:24:05.981+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#planningCodeactTools - reason=created planning tools, count=4
2026-01-22T00:24:06.105+08:00  INFO --- [           main] c.a.a.a.c.c.CodeactCoreAutoConfiguration : CodeactCoreAutoConfiguration#returnSchemaRegistry - reason=创建ReturnSchemaRegistry单例Bean
2026-01-22T00:24:06.105+08:00  INFO --- [           main] .a.a.a.c.t.s.DefaultReturnSchemaRegistry : DefaultReturnSchemaRegistry#<init> - reason=创建新实例, hashCode=57010927
2026-01-22T00:24:06.488+08:00  WARN --- [           main] o.s.m.p.s.SyncMcpSamplingProvider        : No sampling methods found
2026-01-22T00:24:06.488+08:00  WARN --- [           main] o.s.m.p.e.SyncMcpElicitationProvider     : No elicitation methods found
2026-01-22T00:24:06.518+08:00  INFO --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2026-01-22T00:24:06.524+08:00  INFO --- [           main] c.a.a.a.start.AssistantAgentApplication  : Started AssistantAgentApplication in 7.014 seconds (process running for 7.563)
2026-01-22T00:24:06.524+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#run - reason=Starting experience module validation
2026-01-22T00:24:06.536+08:00 ERROR --- [           main] .p.e.r.ElasticsearchExperienceRepository : ElasticsearchExperienceRepository#count - reason=count failed

java.net.ConnectException: Connection refused: getsockopt
	at org.elasticsearch.client.RestClient.extractAndWrapCause(RestClient.java:934)
	at org.elasticsearch.client.RestClient.performRequest(RestClient.java:304)
	at org.elasticsearch.client.RestClient.performRequest(RestClient.java:292)
	at co.elastic.clients.transport.rest_client.RestClientHttpClient.performRequest(RestClientHttpClient.java:91)
	at co.elastic.clients.transport.ElasticsearchTransportBase.performRequest(ElasticsearchTransportBase.java:144)
	at co.elastic.clients.elasticsearch.ElasticsearchClient.count(ElasticsearchClient.java:498)
	at co.elastic.clients.elasticsearch.ElasticsearchClient.count(ElasticsearchClient.java:514)
	at com.alibaba.assistant.agent.start.persistence.experience.repository.ElasticsearchExperienceRepository.count(ElasticsearchExperienceRepository.java:256)
	at com.alibaba.assistant.agent.start.validator.ExperienceTestValidator.testExperienceCount(ExperienceTestValidator.java:56)
	at com.alibaba.assistant.agent.start.validator.ExperienceTestValidator.run(ExperienceTestValidator.java:47)
	at org.springframework.boot.SpringApplication.lambda$callRunner$5(SpringApplication.java:788)
	at org.springframework.util.function.ThrowingConsumer$1.acceptWithException(ThrowingConsumer.java:82)
	at org.springframework.util.function.ThrowingConsumer.accept(ThrowingConsumer.java:60)
	at org.springframework.util.function.ThrowingConsumer$1.accept(ThrowingConsumer.java:86)
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:796)
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:787)
	at org.springframework.boot.SpringApplication.lambda$callRunners$3(SpringApplication.java:772)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.base/java.util.stream.SortedOps$SizedRefSortingSink.end(SortedOps.java:357)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:510)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)
	at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:772)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:325)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.alibaba.assistant.agent.start.AssistantAgentApplication.main(AssistantAgentApplication.java:68)
Caused by: java.net.ConnectException: Connection refused: getsockopt
	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:690)
	at java.base/sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:973)
	at org.apache.http.impl.nio.reactor.DefaultConnectingIOReactor.processEvent(DefaultConnectingIOReactor.java:174)
	at org.apache.http.impl.nio.reactor.DefaultConnectingIOReactor.processEvents(DefaultConnectingIOReactor.java:148)
	at org.apache.http.impl.nio.reactor.AbstractMultiworkerIOReactor.execute(AbstractMultiworkerIOReactor.java:351)
	at org.apache.http.impl.nio.conn.PoolingNHttpClientConnectionManager.execute(PoolingNHttpClientConnectionManager.java:221)
	at org.apache.http.impl.nio.client.CloseableHttpAsyncClientBase$1.run(CloseableHttpAsyncClientBase.java:64)
	at java.base/java.lang.Thread.run(Thread.java:1583)

2026-01-22T00:24:06.552+08:00 ERROR --- [           main] .p.e.r.ElasticsearchExperienceRepository : ElasticsearchExperienceRepository#countByTypeAndScope - reason=count failed

java.net.ConnectException: Connection refused: getsockopt
	at org.elasticsearch.client.RestClient.extractAndWrapCause(RestClient.java:934)
	at org.elasticsearch.client.RestClient.performRequest(RestClient.java:304)
	at org.elasticsearch.client.RestClient.performRequest(RestClient.java:292)
	at co.elastic.clients.transport.rest_client.RestClientHttpClient.performRequest(RestClientHttpClient.java:91)
	at co.elastic.clients.transport.ElasticsearchTransportBase.performRequest(ElasticsearchTransportBase.java:144)
	at co.elastic.clients.elasticsearch.ElasticsearchClient.count(ElasticsearchClient.java:498)
	at co.elastic.clients.elasticsearch.ElasticsearchClient.count(ElasticsearchClient.java:514)
	at com.alibaba.assistant.agent.start.persistence.experience.repository.ElasticsearchExperienceRepository.countByTypeAndScope(ElasticsearchExperienceRepository.java:279)
	at com.alibaba.assistant.agent.start.validator.ExperienceTestValidator.testExperienceCount(ExperienceTestValidator.java:57)
	at com.alibaba.assistant.agent.start.validator.ExperienceTestValidator.run(ExperienceTestValidator.java:47)
	at org.springframework.boot.SpringApplication.lambda$callRunner$5(SpringApplication.java:788)
	at org.springframework.util.function.ThrowingConsumer$1.acceptWithException(ThrowingConsumer.java:82)
	at org.springframework.util.function.ThrowingConsumer.accept(ThrowingConsumer.java:60)
	at org.springframework.util.function.ThrowingConsumer$1.accept(ThrowingConsumer.java:86)
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:796)
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:787)
	at org.springframework.boot.SpringApplication.lambda$callRunners$3(SpringApplication.java:772)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.base/java.util.stream.SortedOps$SizedRefSortingSink.end(SortedOps.java:357)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:510)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)
	at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:772)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:325)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.alibaba.assistant.agent.start.AssistantAgentApplication.main(AssistantAgentApplication.java:68)
Caused by: java.net.ConnectException: Connection refused: getsockopt
	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:690)
	at java.base/sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:973)
	at org.apache.http.impl.nio.reactor.DefaultConnectingIOReactor.processEvent(DefaultConnectingIOReactor.java:174)
	at org.apache.http.impl.nio.reactor.DefaultConnectingIOReactor.processEvents(DefaultConnectingIOReactor.java:148)
	at org.apache.http.impl.nio.reactor.AbstractMultiworkerIOReactor.execute(AbstractMultiworkerIOReactor.java:351)
	at org.apache.http.impl.nio.conn.PoolingNHttpClientConnectionManager.execute(PoolingNHttpClientConnectionManager.java:221)
	at org.apache.http.impl.nio.client.CloseableHttpAsyncClientBase$1.run(CloseableHttpAsyncClientBase.java:64)
	at java.base/java.lang.Thread.run(Thread.java:1583)

2026-01-22T00:24:06.552+08:00 ERROR --- [           main] .p.e.r.ElasticsearchExperienceRepository : ElasticsearchExperienceRepository#countByTypeAndScope - reason=count failed

java.net.ConnectException: Connection refused: getsockopt
	at org.elasticsearch.client.RestClient.extractAndWrapCause(RestClient.java:934)
	at org.elasticsearch.client.RestClient.performRequest(RestClient.java:304)
	at org.elasticsearch.client.RestClient.performRequest(RestClient.java:292)
	at co.elastic.clients.transport.rest_client.RestClientHttpClient.performRequest(RestClientHttpClient.java:91)
	at co.elastic.clients.transport.ElasticsearchTransportBase.performRequest(ElasticsearchTransportBase.java:144)
	at co.elastic.clients.elasticsearch.ElasticsearchClient.count(ElasticsearchClient.java:498)
	at co.elastic.clients.elasticsearch.ElasticsearchClient.count(ElasticsearchClient.java:514)
	at com.alibaba.assistant.agent.start.persistence.experience.repository.ElasticsearchExperienceRepository.countByTypeAndScope(ElasticsearchExperienceRepository.java:279)
	at com.alibaba.assistant.agent.start.validator.ExperienceTestValidator.testExperienceCount(ExperienceTestValidator.java:58)
	at com.alibaba.assistant.agent.start.validator.ExperienceTestValidator.run(ExperienceTestValidator.java:47)
	at org.springframework.boot.SpringApplication.lambda$callRunner$5(SpringApplication.java:788)
	at org.springframework.util.function.ThrowingConsumer$1.acceptWithException(ThrowingConsumer.java:82)
	at org.springframework.util.function.ThrowingConsumer.accept(ThrowingConsumer.java:60)
	at org.springframework.util.function.ThrowingConsumer$1.accept(ThrowingConsumer.java:86)
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:796)
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:787)
	at org.springframework.boot.SpringApplication.lambda$callRunners$3(SpringApplication.java:772)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.base/java.util.stream.SortedOps$SizedRefSortingSink.end(SortedOps.java:357)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:510)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)
	at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:772)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:325)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.alibaba.assistant.agent.start.AssistantAgentApplication.main(AssistantAgentApplication.java:68)
Caused by: java.net.ConnectException: Connection refused: getsockopt
	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:690)
	at java.base/sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:973)
	at org.apache.http.impl.nio.reactor.DefaultConnectingIOReactor.processEvent(DefaultConnectingIOReactor.java:174)
	at org.apache.http.impl.nio.reactor.DefaultConnectingIOReactor.processEvents(DefaultConnectingIOReactor.java:148)
	at org.apache.http.impl.nio.reactor.AbstractMultiworkerIOReactor.execute(AbstractMultiworkerIOReactor.java:351)
	at org.apache.http.impl.nio.conn.PoolingNHttpClientConnectionManager.execute(PoolingNHttpClientConnectionManager.java:221)
	at org.apache.http.impl.nio.client.CloseableHttpAsyncClientBase$1.run(CloseableHttpAsyncClientBase.java:64)
	at java.base/java.lang.Thread.run(Thread.java:1583)

2026-01-22T00:24:06.552+08:00 ERROR --- [           main] .p.e.r.ElasticsearchExperienceRepository : ElasticsearchExperienceRepository#countByTypeAndScope - reason=count failed

java.net.ConnectException: Connection refused: getsockopt
	at org.elasticsearch.client.RestClient.extractAndWrapCause(RestClient.java:934)
	at org.elasticsearch.client.RestClient.performRequest(RestClient.java:304)
	at org.elasticsearch.client.RestClient.performRequest(RestClient.java:292)
	at co.elastic.clients.transport.rest_client.RestClientHttpClient.performRequest(RestClientHttpClient.java:91)
	at co.elastic.clients.transport.ElasticsearchTransportBase.performRequest(ElasticsearchTransportBase.java:144)
	at co.elastic.clients.elasticsearch.ElasticsearchClient.count(ElasticsearchClient.java:498)
	at co.elastic.clients.elasticsearch.ElasticsearchClient.count(ElasticsearchClient.java:514)
	at com.alibaba.assistant.agent.start.persistence.experience.repository.ElasticsearchExperienceRepository.countByTypeAndScope(ElasticsearchExperienceRepository.java:279)
	at com.alibaba.assistant.agent.start.validator.ExperienceTestValidator.testExperienceCount(ExperienceTestValidator.java:59)
	at com.alibaba.assistant.agent.start.validator.ExperienceTestValidator.run(ExperienceTestValidator.java:47)
	at org.springframework.boot.SpringApplication.lambda$callRunner$5(SpringApplication.java:788)
	at org.springframework.util.function.ThrowingConsumer$1.acceptWithException(ThrowingConsumer.java:82)
	at org.springframework.util.function.ThrowingConsumer.accept(ThrowingConsumer.java:60)
	at org.springframework.util.function.ThrowingConsumer$1.accept(ThrowingConsumer.java:86)
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:796)
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:787)
	at org.springframework.boot.SpringApplication.lambda$callRunners$3(SpringApplication.java:772)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.base/java.util.stream.SortedOps$SizedRefSortingSink.end(SortedOps.java:357)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:510)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)
	at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:772)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:325)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.alibaba.assistant.agent.start.AssistantAgentApplication.main(AssistantAgentApplication.java:68)
Caused by: java.net.ConnectException: Connection refused: getsockopt
	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:690)
	at java.base/sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:973)
	at org.apache.http.impl.nio.reactor.DefaultConnectingIOReactor.processEvent(DefaultConnectingIOReactor.java:174)
	at org.apache.http.impl.nio.reactor.DefaultConnectingIOReactor.processEvents(DefaultConnectingIOReactor.java:148)
	at org.apache.http.impl.nio.reactor.AbstractMultiworkerIOReactor.execute(AbstractMultiworkerIOReactor.java:351)
	at org.apache.http.impl.nio.conn.PoolingNHttpClientConnectionManager.execute(PoolingNHttpClientConnectionManager.java:221)
	at org.apache.http.impl.nio.client.CloseableHttpAsyncClientBase$1.run(CloseableHttpAsyncClientBase.java:64)
	at java.base/java.lang.Thread.run(Thread.java:1583)

2026-01-22T00:24:06.552+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testExperienceCount - reason=Experience stats: total=0, code=0, react=0, common=0
2026-01-22T00:24:06.552+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCommonExperienceQuery - reason=Testing common experience query
2026-01-22T00:24:06.568+08:00 ERROR --- [           main] .s.p.e.p.ElasticsearchExperienceProvider : ElasticsearchExperienceProvider#query - reason=query failed

java.net.ConnectException: Connection refused: getsockopt
	at org.elasticsearch.client.RestClient.extractAndWrapCause(RestClient.java:934)
	at org.elasticsearch.client.RestClient.performRequest(RestClient.java:304)
	at org.elasticsearch.client.RestClient.performRequest(RestClient.java:292)
	at co.elastic.clients.transport.rest_client.RestClientHttpClient.performRequest(RestClientHttpClient.java:91)
	at co.elastic.clients.transport.ElasticsearchTransportBase.performRequest(ElasticsearchTransportBase.java:144)
	at co.elastic.clients.elasticsearch.ElasticsearchClient.search(ElasticsearchClient.java:1965)
	at com.alibaba.assistant.agent.start.persistence.experience.provider.ElasticsearchExperienceProvider.query(ElasticsearchExperienceProvider.java:69)
	at com.alibaba.assistant.agent.start.validator.ExperienceTestValidator.testCommonExperienceQuery(ExperienceTestValidator.java:72)
	at com.alibaba.assistant.agent.start.validator.ExperienceTestValidator.run(ExperienceTestValidator.java:48)
	at org.springframework.boot.SpringApplication.lambda$callRunner$5(SpringApplication.java:788)
	at org.springframework.util.function.ThrowingConsumer$1.acceptWithException(ThrowingConsumer.java:82)
	at org.springframework.util.function.ThrowingConsumer.accept(ThrowingConsumer.java:60)
	at org.springframework.util.function.ThrowingConsumer$1.accept(ThrowingConsumer.java:86)
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:796)
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:787)
	at org.springframework.boot.SpringApplication.lambda$callRunners$3(SpringApplication.java:772)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.base/java.util.stream.SortedOps$SizedRefSortingSink.end(SortedOps.java:357)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:510)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)
	at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:772)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:325)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.alibaba.assistant.agent.start.AssistantAgentApplication.main(AssistantAgentApplication.java:68)
Caused by: java.net.ConnectException: Connection refused: getsockopt
	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:690)
	at java.base/sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:973)
	at org.apache.http.impl.nio.reactor.DefaultConnectingIOReactor.processEvent(DefaultConnectingIOReactor.java:174)
	at org.apache.http.impl.nio.reactor.DefaultConnectingIOReactor.processEvents(DefaultConnectingIOReactor.java:148)
	at org.apache.http.impl.nio.reactor.AbstractMultiworkerIOReactor.execute(AbstractMultiworkerIOReactor.java:351)
	at org.apache.http.impl.nio.conn.PoolingNHttpClientConnectionManager.execute(PoolingNHttpClientConnectionManager.java:221)
	at org.apache.http.impl.nio.client.CloseableHttpAsyncClientBase$1.run(CloseableHttpAsyncClientBase.java:64)
	at java.base/java.lang.Thread.run(Thread.java:1583)

2026-01-22T00:24:06.568+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCommonExperienceQuery - reason=Found 0 common experiences
2026-01-22T00:24:06.568+08:00  WARN --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCommonExperienceQuery - reason=❌ MoLiHong identity experience not found
2026-01-22T00:24:06.568+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCodeExperienceQuery - reason=Testing code experience query (demo keyword)
2026-01-22T00:24:06.568+08:00 ERROR --- [           main] .s.p.e.p.ElasticsearchExperienceProvider : ElasticsearchExperienceProvider#query - reason=query failed

java.net.ConnectException: Connection refused: getsockopt
	at org.elasticsearch.client.RestClient.extractAndWrapCause(RestClient.java:934)
	at org.elasticsearch.client.RestClient.performRequest(RestClient.java:304)
	at org.elasticsearch.client.RestClient.performRequest(RestClient.java:292)
	at co.elastic.clients.transport.rest_client.RestClientHttpClient.performRequest(RestClientHttpClient.java:91)
	at co.elastic.clients.transport.ElasticsearchTransportBase.performRequest(ElasticsearchTransportBase.java:144)
	at co.elastic.clients.elasticsearch.ElasticsearchClient.search(ElasticsearchClient.java:1965)
	at com.alibaba.assistant.agent.start.persistence.experience.provider.ElasticsearchExperienceProvider.query(ElasticsearchExperienceProvider.java:69)
	at com.alibaba.assistant.agent.start.validator.ExperienceTestValidator.testCodeExperienceQuery(ExperienceTestValidator.java:102)
	at com.alibaba.assistant.agent.start.validator.ExperienceTestValidator.run(ExperienceTestValidator.java:49)
	at org.springframework.boot.SpringApplication.lambda$callRunner$5(SpringApplication.java:788)
	at org.springframework.util.function.ThrowingConsumer$1.acceptWithException(ThrowingConsumer.java:82)
	at org.springframework.util.function.ThrowingConsumer.accept(ThrowingConsumer.java:60)
	at org.springframework.util.function.ThrowingConsumer$1.accept(ThrowingConsumer.java:86)
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:796)
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:787)
	at org.springframework.boot.SpringApplication.lambda$callRunners$3(SpringApplication.java:772)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.base/java.util.stream.SortedOps$SizedRefSortingSink.end(SortedOps.java:357)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:510)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)
	at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:772)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:325)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.alibaba.assistant.agent.start.AssistantAgentApplication.main(AssistantAgentApplication.java:68)
Caused by: java.net.ConnectException: Connection refused: getsockopt
	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:690)
	at java.base/sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:973)
	at org.apache.http.impl.nio.reactor.DefaultConnectingIOReactor.processEvent(DefaultConnectingIOReactor.java:174)
	at org.apache.http.impl.nio.reactor.DefaultConnectingIOReactor.processEvents(DefaultConnectingIOReactor.java:148)
	at org.apache.http.impl.nio.reactor.AbstractMultiworkerIOReactor.execute(AbstractMultiworkerIOReactor.java:351)
	at org.apache.http.impl.nio.conn.PoolingNHttpClientConnectionManager.execute(PoolingNHttpClientConnectionManager.java:221)
	at org.apache.http.impl.nio.client.CloseableHttpAsyncClientBase$1.run(CloseableHttpAsyncClientBase.java:64)
	at java.base/java.lang.Thread.run(Thread.java:1583)

2026-01-22T00:24:06.568+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCodeExperienceQuery - reason=Found 0 demo code experiences
2026-01-22T00:24:06.568+08:00  WARN --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCodeExperienceQuery - reason=❌ Demo code experience not found
2026-01-22T00:24:06.568+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testReactExperienceQuery - reason=Testing react experience query
2026-01-22T00:24:06.568+08:00 ERROR --- [           main] .s.p.e.p.ElasticsearchExperienceProvider : ElasticsearchExperienceProvider#query - reason=query failed

java.net.ConnectException: Connection refused: getsockopt
	at org.elasticsearch.client.RestClient.extractAndWrapCause(RestClient.java:934)
	at org.elasticsearch.client.RestClient.performRequest(RestClient.java:304)
	at org.elasticsearch.client.RestClient.performRequest(RestClient.java:292)
	at co.elastic.clients.transport.rest_client.RestClientHttpClient.performRequest(RestClientHttpClient.java:91)
	at co.elastic.clients.transport.ElasticsearchTransportBase.performRequest(ElasticsearchTransportBase.java:144)
	at co.elastic.clients.elasticsearch.ElasticsearchClient.search(ElasticsearchClient.java:1965)
	at com.alibaba.assistant.agent.start.persistence.experience.provider.ElasticsearchExperienceProvider.query(ElasticsearchExperienceProvider.java:69)
	at com.alibaba.assistant.agent.start.validator.ExperienceTestValidator.testReactExperienceQuery(ExperienceTestValidator.java:124)
	at com.alibaba.assistant.agent.start.validator.ExperienceTestValidator.run(ExperienceTestValidator.java:50)
	at org.springframework.boot.SpringApplication.lambda$callRunner$5(SpringApplication.java:788)
	at org.springframework.util.function.ThrowingConsumer$1.acceptWithException(ThrowingConsumer.java:82)
	at org.springframework.util.function.ThrowingConsumer.accept(ThrowingConsumer.java:60)
	at org.springframework.util.function.ThrowingConsumer$1.accept(ThrowingConsumer.java:86)
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:796)
	at org.springframework.boot.SpringApplication.callRunner(SpringApplication.java:787)
	at org.springframework.boot.SpringApplication.lambda$callRunners$3(SpringApplication.java:772)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:184)
	at java.base/java.util.stream.SortedOps$SizedRefSortingSink.end(SortedOps.java:357)
	at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:510)
	at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
	at java.base/java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:151)
	at java.base/java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:174)
	at java.base/java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234)
	at java.base/java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596)
	at org.springframework.boot.SpringApplication.callRunners(SpringApplication.java:772)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:325)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.alibaba.assistant.agent.start.AssistantAgentApplication.main(AssistantAgentApplication.java:68)
Caused by: java.net.ConnectException: Connection refused: getsockopt
	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:690)
	at java.base/sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:973)
	at org.apache.http.impl.nio.reactor.DefaultConnectingIOReactor.processEvent(DefaultConnectingIOReactor.java:174)
	at org.apache.http.impl.nio.reactor.DefaultConnectingIOReactor.processEvents(DefaultConnectingIOReactor.java:148)
	at org.apache.http.impl.nio.reactor.AbstractMultiworkerIOReactor.execute(AbstractMultiworkerIOReactor.java:351)
	at org.apache.http.impl.nio.conn.PoolingNHttpClientConnectionManager.execute(PoolingNHttpClientConnectionManager.java:221)
	at org.apache.http.impl.nio.client.CloseableHttpAsyncClientBase$1.run(CloseableHttpAsyncClientBase.java:64)
	at java.base/java.lang.Thread.run(Thread.java:1583)

2026-01-22T00:24:06.568+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testReactExperienceQuery - reason=Found 0 react experiences
2026-01-22T00:24:06.568+08:00  WARN --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testReactExperienceQuery - reason=❌ Ambiguous intent strategy not found
2026-01-22T00:24:06.568+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#run - reason=Experience module validation completed
2026-01-22T00:24:06.568+08:00  INFO --- [           main] c.a.a.a.s.a.config.AuthInitialization    : AuthInitialization#run - 初始化认证系统
2026-01-22T00:24:06.584+08:00 DEBUG --- [           main] c.a.a.a.s.a.s.AuthenticationService      : AuthenticationService#initDefaultAdmin - 管理员账户已存在
2026-01-22T00:24:06.584+08:00  INFO --- [           main] c.a.a.a.s.a.config.AuthInitialization    : AuthInitialization#run - 认证系统初始化完成
2026-01-22T00:27:16.735+08:00  INFO --- [nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-01-22T00:27:16.735+08:00  INFO --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2026-01-22T00:27:16.735+08:00  INFO --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 0 ms
2026-01-22T00:27:16.868+08:00 DEBUG --- [nio-8080-exec-1] c.a.a.a.s.a.s.JwtAuthenticationFilter    : JwtAuthenticationFilter#doFilterInternal - 设置用户认证: username=admin, roles=[ADMIN, USER]
2026-01-22T00:27:16.901+08:00  INFO --- [nio-8080-exec-1] c.a.c.a.a.s.controller.ThreadController  : Request received for POST /apps/research_agent/users/user-001/threads (service generates ID) with state: {}
2026-01-22T00:27:16.901+08:00  INFO --- [nio-8080-exec-1] c.a.c.a.a.s.service.ThreadServiceImpl    : Created thread: eaa595a1-899b-4f46-a1db-c9b0210ba749 for app=research_agent, user=user-001
2026-01-22T00:27:16.901+08:00  INFO --- [nio-8080-exec-1] c.a.c.a.a.s.controller.ThreadController  : Thread created successfully with generated id: eaa595a1-899b-4f46-a1db-c9b0210ba749
2026-01-22T00:27:16.955+08:00 DEBUG --- [nio-8080-exec-3] c.a.a.a.s.a.s.JwtAuthenticationFilter    : JwtAuthenticationFilter#doFilterInternal - 设置用户认证: username=admin, roles=[ADMIN, USER]
2026-01-22T00:27:16.964+08:00  INFO --- [nio-8080-exec-3] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#loadAgent 加载 agent: research_agent
2026-01-22T00:27:16.965+08:00  INFO --- [nio-8080-exec-3] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#loadAgent 成功加载 agent: research_agent
2026-01-22T00:27:17.000+08:00 DEBUG --- [nio-8080-exec-4] c.a.a.a.s.a.s.JwtAuthenticationFilter    : JwtAuthenticationFilter#doFilterInternal - 设置用户认证: username=admin, roles=[ADMIN, USER]
2026-01-22T00:27:17.002+08:00  INFO --- [nio-8080-exec-4] c.a.c.a.a.s.controller.ThreadController  : Request received for GET /apps/research_agent/users/user-001/threads/eaa595a1-899b-4f46-a1db-c9b0210ba749
2026-01-22T00:27:17.044+08:00 DEBUG --- [nio-8080-exec-3] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#beforeAgent - reason=checking unified intent
2026-01-22T00:27:17.044+08:00 DEBUG --- [nio-8080-exec-3] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#get - reason=session not found, sessionId=eaa595a1-899b-4f46-a1db-c9b0210ba749
2026-01-22T00:27:17.046+08:00 DEBUG --- [nio-8080-exec-3] c.a.a.a.p.i.SemanticActionProvider       : SemanticActionProvider#matchActions - reason=matching actions, userInput=我要请假
2026-01-22T00:27:17.751+08:00 ERROR --- [nio-8080-exec-3] c.a.a.a.p.v.ActionVectorizationService   : ActionVectorizationService#hybridSearch - reason=search failed, error=Connection refused: getsockopt

java.net.ConnectException: Connection refused: getsockopt
	at org.elasticsearch.client.RestClient.extractAndWrapCause(RestClient.java:934)
	at org.elasticsearch.client.RestClient.performRequest(RestClient.java:304)
	at org.elasticsearch.client.RestClient.performRequest(RestClient.java:292)
	at co.elastic.clients.transport.rest_client.RestClientHttpClient.performRequest(RestClientHttpClient.java:91)
	at co.elastic.clients.transport.ElasticsearchTransportBase.performRequest(ElasticsearchTransportBase.java:144)
	at co.elastic.clients.elasticsearch.ElasticsearchClient.search(ElasticsearchClient.java:1965)
	at co.elastic.clients.elasticsearch.ElasticsearchClient.search(ElasticsearchClient.java:1984)
	at com.alibaba.assistant.agent.planning.vector.ActionVectorizationService.hybridSearch(ActionVectorizationService.java:243)
	at com.alibaba.assistant.agent.planning.internal.SemanticActionProvider.matchActions(SemanticActionProvider.java:105)
	at com.alibaba.assistant.agent.planning.intent.UnifiedIntentRecognitionHook.beforeAgent(UnifiedIntentRecognitionHook.java:199)
	at com.alibaba.cloud.ai.graph.executor.NodeExecutor.executeNode(NodeExecutor.java:122)
	at com.alibaba.cloud.ai.graph.executor.NodeExecutor.execute(NodeExecutor.java:84)
	at com.alibaba.cloud.ai.graph.executor.MainGraphExecutor.execute(MainGraphExecutor.java:108)
	at com.alibaba.cloud.ai.graph.executor.MainGraphExecutor.lambda$handleStartNode$0(MainGraphExecutor.java:135)
	at reactor.core.publisher.FluxDefer.subscribe(FluxDefer.java:46)
	at reactor.core.publisher.Flux.subscribe(Flux.java:8891)
	at reactor.core.publisher.FluxConcatArray$ConcatArraySubscriber.onComplete(FluxConcatArray.java:238)
	at reactor.core.publisher.FluxConcatArray.subscribe(FluxConcatArray.java:79)
	at reactor.core.publisher.FluxDefer.subscribe(FluxDefer.java:54)
	at reactor.core.publisher.Flux.subscribe(Flux.java:8891)
	at org.springframework.web.servlet.mvc.method.annotation.ReactiveTypeHandler$AbstractEmitterSubscriber.connect(ReactiveTypeHandler.java:295)
	at org.springframework.web.servlet.mvc.method.annotation.ReactiveTypeHandler.handleValue(ReactiveTypeHandler.java:168)
	at org.springframework.web.servlet.mvc.method.annotation.ResponseBodyEmitterReturnValueHandler.handleReturnValue(ResponseBodyEmitterReturnValueHandler.java:215)
	at org.springframework.web.method.support.HandlerMethodReturnValueHandlerComposite.handleReturnValue(HandlerMethodReturnValueHandlerComposite.java:78)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:136)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.alibaba.assistant.agent.start.auth.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:87)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$4(HandlerMappingIntrospector.java:267)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: Connection refused: getsockopt
	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:690)
	at java.base/sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:973)
	at org.apache.http.impl.nio.reactor.DefaultConnectingIOReactor.processEvent(DefaultConnectingIOReactor.java:174)
	at org.apache.http.impl.nio.reactor.DefaultConnectingIOReactor.processEvents(DefaultConnectingIOReactor.java:148)
	at org.apache.http.impl.nio.reactor.AbstractMultiworkerIOReactor.execute(AbstractMultiworkerIOReactor.java:351)
	at org.apache.http.impl.nio.conn.PoolingNHttpClientConnectionManager.execute(PoolingNHttpClientConnectionManager.java:221)
	at org.apache.http.impl.nio.client.CloseableHttpAsyncClientBase$1.run(CloseableHttpAsyncClientBase.java:64)
	... 1 common frames omitted

2026-01-22T00:27:17.755+08:00  WARN --- [nio-8080-exec-3] c.a.a.a.p.p.c.ActionEntityConverter      : ActionEntityConverter#parseActionType - reason=unknown action type, type=INTERNAL
2026-01-22T00:27:17.767+08:00  WARN --- [nio-8080-exec-3] c.a.a.a.p.p.c.ActionEntityConverter      : ActionEntityConverter#parseActionType - reason=unknown action type, type=INTERNAL
2026-01-22T00:27:17.767+08:00  INFO --- [nio-8080-exec-3] c.a.a.a.p.i.SemanticActionProvider       : SemanticActionProvider#matchActions - reason=matching completed, userInput=我要请假, matchCount=1
2026-01-22T00:27:17.767+08:00  INFO --- [nio-8080-exec-3] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#beforeAgent - reason=match found, actionId=oa:leave:request, confidence=0.95, matchType=KEYWORD_EXACT
2026-01-22T00:27:17.767+08:00 ERROR --- [nio-8080-exec-3] .s.p.e.p.ElasticsearchExperienceProvider : ElasticsearchExperienceProvider#query - reason=query failed

java.net.ConnectException: Connection refused: getsockopt
	at org.elasticsearch.client.RestClient.extractAndWrapCause(RestClient.java:934)
	at org.elasticsearch.client.RestClient.performRequest(RestClient.java:304)
	at org.elasticsearch.client.RestClient.performRequest(RestClient.java:292)
	at co.elastic.clients.transport.rest_client.RestClientHttpClient.performRequest(RestClientHttpClient.java:91)
	at co.elastic.clients.transport.ElasticsearchTransportBase.performRequest(ElasticsearchTransportBase.java:144)
	at co.elastic.clients.elasticsearch.ElasticsearchClient.search(ElasticsearchClient.java:1965)
	at com.alibaba.assistant.agent.start.persistence.experience.provider.ElasticsearchExperienceProvider.query(ElasticsearchExperienceProvider.java:69)
	at com.alibaba.assistant.agent.planning.intent.UnifiedIntentRecognitionHook.findMatchingExperience(UnifiedIntentRecognitionHook.java:292)
	at com.alibaba.assistant.agent.planning.intent.UnifiedIntentRecognitionHook.beforeAgent(UnifiedIntentRecognitionHook.java:216)
	at com.alibaba.cloud.ai.graph.executor.NodeExecutor.executeNode(NodeExecutor.java:122)
	at com.alibaba.cloud.ai.graph.executor.NodeExecutor.execute(NodeExecutor.java:84)
	at com.alibaba.cloud.ai.graph.executor.MainGraphExecutor.execute(MainGraphExecutor.java:108)
	at com.alibaba.cloud.ai.graph.executor.MainGraphExecutor.lambda$handleStartNode$0(MainGraphExecutor.java:135)
	at reactor.core.publisher.FluxDefer.subscribe(FluxDefer.java:46)
	at reactor.core.publisher.Flux.subscribe(Flux.java:8891)
	at reactor.core.publisher.FluxConcatArray$ConcatArraySubscriber.onComplete(FluxConcatArray.java:238)
	at reactor.core.publisher.FluxConcatArray.subscribe(FluxConcatArray.java:79)
	at reactor.core.publisher.FluxDefer.subscribe(FluxDefer.java:54)
	at reactor.core.publisher.Flux.subscribe(Flux.java:8891)
	at org.springframework.web.servlet.mvc.method.annotation.ReactiveTypeHandler$AbstractEmitterSubscriber.connect(ReactiveTypeHandler.java:295)
	at org.springframework.web.servlet.mvc.method.annotation.ReactiveTypeHandler.handleValue(ReactiveTypeHandler.java:168)
	at org.springframework.web.servlet.mvc.method.annotation.ResponseBodyEmitterReturnValueHandler.handleReturnValue(ResponseBodyEmitterReturnValueHandler.java:215)
	at org.springframework.web.method.support.HandlerMethodReturnValueHandlerComposite.handleReturnValue(HandlerMethodReturnValueHandlerComposite.java:78)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:136)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.alibaba.assistant.agent.start.auth.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:87)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$4(HandlerMappingIntrospector.java:267)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: Connection refused: getsockopt
	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:690)
	at java.base/sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:973)
	at org.apache.http.impl.nio.reactor.DefaultConnectingIOReactor.processEvent(DefaultConnectingIOReactor.java:174)
	at org.apache.http.impl.nio.reactor.DefaultConnectingIOReactor.processEvents(DefaultConnectingIOReactor.java:148)
	at org.apache.http.impl.nio.reactor.AbstractMultiworkerIOReactor.execute(AbstractMultiworkerIOReactor.java:351)
	at org.apache.http.impl.nio.conn.PoolingNHttpClientConnectionManager.execute(PoolingNHttpClientConnectionManager.java:221)
	at org.apache.http.impl.nio.client.CloseableHttpAsyncClientBase$1.run(CloseableHttpAsyncClientBase.java:64)
	... 1 common frames omitted

2026-01-22T00:27:17.767+08:00  INFO --- [nio-8080-exec-3] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#beforeAgent - reason=high confidence, using LLM for param extraction, actionId=oa:leave:request, confidence=0.95
2026-01-22T00:27:17.767+08:00 DEBUG --- [nio-8080-exec-3] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handleLlmParamExtraction - reason=calling LLM, actionId=oa:leave:request
2026-01-22T00:27:22.170+08:00  INFO --- [nio-8080-exec-3] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handleLlmParamExtraction - reason=LLM response received, actionId=oa:leave:request, response=```json
{
  "extractedParams": {},
  "missingParams": ["start_date", "end_date", "types", "reason", "check_uids"],
  "nextQuestion": "请提供您的请假开始日期、结束日期、请假类型（1=事假, 2=病假, 3=年假, 4=调休）、请假理由以及审批人的OA用户ID。"
}
```
2026-01-22T00:27:22.247+08:00  INFO --- [nio-8080-exec-3] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handleLlmParamExtraction - reason=has nextQuestion, returning to user, question=请提供您的请假开始日期、结束日期、请假类型（1=事假, 2=病假, 3=年假, 4=调休）、请假理由以及审批人的OA用户ID。
2026-01-22T00:27:22.248+08:00 DEBUG --- [nio-8080-exec-3] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#save - reason=session saved, sessionId=eaa595a1-899b-4f46-a1db-c9b0210ba749, ttl=PT30M
2026-01-22T00:27:22.248+08:00 DEBUG --- [nio-8080-exec-3] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#saveSession - reason=session saved, sessionId=eaa595a1-899b-4f46-a1db-c9b0210ba749
2026-01-22T00:27:22.248+08:00  INFO --- [nio-8080-exec-3] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handleNextQuestion - reason=session saved to store, sessionId=eaa595a1-899b-4f46-a1db-c9b0210ba749, actionId=oa:leave:request
2026-01-22T00:27:22.248+08:00  INFO --- [nio-8080-exec-3] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handleNextQuestion - reason=returning nextQuestion, actionId=oa:leave:request, question=请提供您的请假开始日期、结束日期、请假类型（1=事假, 2=病假, 3=年假, 4=调休）、请假理由以及审批人的OA用户ID。
2026-01-22T00:27:22.291+08:00 ERROR --- [nio-8080-exec-3] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] threw exception

org.springframework.security.authorization.AuthorizationDeniedException: Access Denied
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:99)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:91)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$4(HandlerMappingIntrospector.java:267)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:612)
	at org.apache.catalina.core.ApplicationDispatcher.doDispatch(ApplicationDispatcher.java:540)
	at org.apache.catalina.core.ApplicationDispatcher.dispatch(ApplicationDispatcher.java:511)
	at org.apache.catalina.core.AsyncContextImpl$AsyncRunnable.run(AsyncContextImpl.java:599)
	at org.apache.catalina.core.AsyncContextImpl.doInternalDispatch(AsyncContextImpl.java:342)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.asyncDispatch(CoyoteAdapter.java:239)
	at org.apache.coyote.AbstractProcessor.dispatch(AbstractProcessor.java:243)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:57)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)

2026-01-22T00:27:22.292+08:00 ERROR --- [nio-8080-exec-3] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Unable to handle the Spring Security Exception because the response is already committed.] with root cause

org.springframework.security.authorization.AuthorizationDeniedException: Access Denied
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:99)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:91)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$4(HandlerMappingIntrospector.java:267)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:612)
	at org.apache.catalina.core.ApplicationDispatcher.doDispatch(ApplicationDispatcher.java:540)
	at org.apache.catalina.core.ApplicationDispatcher.dispatch(ApplicationDispatcher.java:511)
	at org.apache.catalina.core.AsyncContextImpl$AsyncRunnable.run(AsyncContextImpl.java:599)
	at org.apache.catalina.core.AsyncContextImpl.doInternalDispatch(AsyncContextImpl.java:342)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.asyncDispatch(CoyoteAdapter.java:239)
	at org.apache.coyote.AbstractProcessor.dispatch(AbstractProcessor.java:243)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:57)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)

2026-01-22T00:27:22.301+08:00 ERROR --- [nio-8080-exec-3] s.e.ErrorMvcAutoConfiguration$StaticView : Cannot render error page for request [null] as the response has already been committed. As a result, the response may have the wrong status code.
2026-01-22T00:27:30.893+08:00 DEBUG --- [nio-8080-exec-5] c.a.a.a.s.a.s.JwtAuthenticationFilter    : JwtAuthenticationFilter#doFilterInternal - 设置用户认证: username=admin, roles=[ADMIN, USER]
2026-01-22T00:27:30.893+08:00  INFO --- [nio-8080-exec-5] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#loadAgent 加载 agent: research_agent
2026-01-22T00:27:30.893+08:00  INFO --- [nio-8080-exec-5] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#loadAgent 成功加载 agent: research_agent
2026-01-22T00:27:30.893+08:00 DEBUG --- [nio-8080-exec-5] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#beforeAgent - reason=checking unified intent
2026-01-22T00:27:30.893+08:00 DEBUG --- [nio-8080-exec-5] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#get - reason=session found, sessionId=eaa595a1-899b-4f46-a1db-c9b0210ba749, active=true
2026-01-22T00:27:30.893+08:00  INFO --- [nio-8080-exec-5] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#beforeAgent - reason=continuing param collection session (from store), sessionId=eaa595a1-899b-4f46-a1db-c9b0210ba749, userInput=明天 类型 事假 理由 aa 审批人 25明天 类型 事假 理由 aa 审批人 25
2026-01-22T00:27:30.893+08:00  INFO --- [nio-8080-exec-5] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handleParamCollectionContinuation - reason=processing param input, sessionId=eaa595a1-899b-4f46-a1db-c9b0210ba749, actionId=oa:leave:request, userInput=明天 类型 事假 理由 aa 审批人 25明天 类型 事假 理由 aa 审批人 25
2026-01-22T00:27:30.915+08:00  WARN --- [nio-8080-exec-5] c.a.a.a.p.p.c.ActionEntityConverter      : ActionEntityConverter#parseActionType - reason=unknown action type, type=INTERNAL
2026-01-22T00:27:33.424+08:00  INFO --- [nio-8080-exec-5] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handleParamCollectionContinuation - reason=LLM response, response=```json
{
  "extractedParams": {
    "types": "1",
    "reason": "aa",
    "check_uids": "25"
  },
  "missingParams": ["start_date", "end_date"],
  "nextQuestion": "请提供请假的开始日期和结束日期，格式为 yyyy-MM-dd HH:mm。"
}
```
2026-01-22T00:27:33.424+08:00  INFO --- [nio-8080-exec-5] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handleParamCollectionContinuation - reason=still has missing params, nextQuestion=请提供请假的开始日期和结束日期，格式为 yyyy-MM-dd HH:mm。
2026-01-22T00:27:33.424+08:00 DEBUG --- [nio-8080-exec-5] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#save - reason=session saved, sessionId=eaa595a1-899b-4f46-a1db-c9b0210ba749, ttl=PT30M
2026-01-22T00:27:33.424+08:00 DEBUG --- [nio-8080-exec-5] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#saveSession - reason=session saved, sessionId=eaa595a1-899b-4f46-a1db-c9b0210ba749
2026-01-22T00:27:33.432+08:00 ERROR --- [nio-8080-exec-9] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] threw exception

org.springframework.security.authorization.AuthorizationDeniedException: Access Denied
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:99)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:91)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$4(HandlerMappingIntrospector.java:267)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:612)
	at org.apache.catalina.core.ApplicationDispatcher.doDispatch(ApplicationDispatcher.java:540)
	at org.apache.catalina.core.ApplicationDispatcher.dispatch(ApplicationDispatcher.java:511)
	at org.apache.catalina.core.AsyncContextImpl$AsyncRunnable.run(AsyncContextImpl.java:599)
	at org.apache.catalina.core.AsyncContextImpl.doInternalDispatch(AsyncContextImpl.java:342)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.asyncDispatch(CoyoteAdapter.java:239)
	at org.apache.coyote.AbstractProcessor.dispatch(AbstractProcessor.java:243)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:57)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)

2026-01-22T00:27:33.432+08:00 ERROR --- [nio-8080-exec-9] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Unable to handle the Spring Security Exception because the response is already committed.] with root cause

org.springframework.security.authorization.AuthorizationDeniedException: Access Denied
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:99)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:91)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$4(HandlerMappingIntrospector.java:267)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:612)
	at org.apache.catalina.core.ApplicationDispatcher.doDispatch(ApplicationDispatcher.java:540)
	at org.apache.catalina.core.ApplicationDispatcher.dispatch(ApplicationDispatcher.java:511)
	at org.apache.catalina.core.AsyncContextImpl$AsyncRunnable.run(AsyncContextImpl.java:599)
	at org.apache.catalina.core.AsyncContextImpl.doInternalDispatch(AsyncContextImpl.java:342)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.asyncDispatch(CoyoteAdapter.java:239)
	at org.apache.coyote.AbstractProcessor.dispatch(AbstractProcessor.java:243)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:57)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)

2026-01-22T00:27:33.434+08:00 ERROR --- [nio-8080-exec-9] s.e.ErrorMvcAutoConfiguration$StaticView : Cannot render error page for request [null] as the response has already been committed. As a result, the response may have the wrong status code.
2026-01-22T00:27:52.314+08:00 DEBUG --- [nio-8080-exec-7] c.a.a.a.s.a.s.JwtAuthenticationFilter    : JwtAuthenticationFilter#doFilterInternal - 设置用户认证: username=admin, roles=[ADMIN, USER]
2026-01-22T00:27:52.331+08:00  INFO --- [nio-8080-exec-7] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#loadAgent 加载 agent: research_agent
2026-01-22T00:27:52.331+08:00  INFO --- [nio-8080-exec-7] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#loadAgent 成功加载 agent: research_agent
2026-01-22T00:27:52.331+08:00 DEBUG --- [nio-8080-exec-7] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#beforeAgent - reason=checking unified intent
2026-01-22T00:27:52.331+08:00 DEBUG --- [nio-8080-exec-7] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#get - reason=session found, sessionId=eaa595a1-899b-4f46-a1db-c9b0210ba749, active=true
2026-01-22T00:27:52.331+08:00  INFO --- [nio-8080-exec-7] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#beforeAgent - reason=continuing param collection session (from store), sessionId=eaa595a1-899b-4f46-a1db-c9b0210ba749, userInput=2026-1-22 2026-1-23
2026-01-22T00:27:52.331+08:00  INFO --- [nio-8080-exec-7] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handleParamCollectionContinuation - reason=processing param input, sessionId=eaa595a1-899b-4f46-a1db-c9b0210ba749, actionId=oa:leave:request, userInput=2026-1-22 2026-1-23
2026-01-22T00:27:52.331+08:00  WARN --- [nio-8080-exec-7] c.a.a.a.p.p.c.ActionEntityConverter      : ActionEntityConverter#parseActionType - reason=unknown action type, type=INTERNAL
2026-01-22T00:27:55.521+08:00  INFO --- [nio-8080-exec-7] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handleParamCollectionContinuation - reason=LLM response, response=```json
{
  "extractedParams": {"start_date": "2026-01-22 00:00", "end_date": "2026-01-23 00:00"},
  "missingParams": [],
  "nextQuestion": null
}
```
2026-01-22T00:27:55.521+08:00  INFO --- [nio-8080-exec-7] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handleParamCollectionContinuation - reason=params complete, executing action, actionId=oa:leave:request, params={end_date=2026-01-23 00:00, reason=aa, check_uids=25, types=1, start_date=2026-01-22 00:00}
2026-01-22T00:27:55.521+08:00 DEBUG --- [nio-8080-exec-7] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#close - reason=session closed, sessionId=eaa595a1-899b-4f46-a1db-c9b0210ba749
2026-01-22T00:27:55.521+08:00 DEBUG --- [nio-8080-exec-7] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#closeSession - reason=session closed, sessionId=eaa595a1-899b-4f46-a1db-c9b0210ba749
2026-01-22T00:27:55.522+08:00  INFO --- [nio-8080-exec-7] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handlePlanningDirectExecution - reason=direct execution, actionId=oa:leave:request
2026-01-22T00:27:55.522+08:00 DEBUG --- [nio-8080-exec-7] c.a.a.a.p.internal.DefaultPlanGenerator  : DefaultPlanGenerator#generate - reason=generating plan, actionId=oa:leave:request, actionName=提交OA请假申请
2026-01-22T00:27:55.526+08:00  INFO --- [nio-8080-exec-7] c.a.a.a.p.internal.DefaultPlanGenerator  : DefaultPlanGenerator#generate - reason=plan generated, planId=d37b5ed0-325b-4d55-a9f5-85995445aabf, stepCount=1
2026-01-22T00:27:55.527+08:00  INFO --- [nio-8080-exec-7] c.a.a.a.p.internal.DefaultPlanExecutor   : DefaultPlanExecutor#execute - reason=starting plan execution, planId=d37b5ed0-325b-4d55-a9f5-85995445aabf, actionId=oa:leave:request
2026-01-22T00:27:55.527+08:00 DEBUG --- [nio-8080-exec-7] c.a.a.a.p.internal.DefaultPlanExecutor   : DefaultPlanExecutor#executeSteps - reason=executing step, planId=d37b5ed0-325b-4d55-a9f5-85995445aabf, stepId=execute, stepIndex=0
2026-01-22T00:27:55.527+08:00 DEBUG --- [nio-8080-exec-7] c.a.a.a.p.i.e.ExecuteStepExecutor        : AbstractStepExecutor#execute - reason=executing step, stepId=execute, type=EXECUTE
2026-01-22T00:27:55.527+08:00 DEBUG --- [nio-8080-exec-7] c.a.a.a.p.i.e.ExecuteStepExecutor        : ExecuteStepExecutor#doExecute - reason=executing execute step, stepId=execute
2026-01-22T00:27:55.528+08:00  INFO --- [nio-8080-exec-7] c.a.a.a.p.i.e.ExecuteStepExecutor        : ExecuteStepExecutor#executeAction - reason=internal call, bean=oaSystemActionService, method=execute
2026-01-22T00:27:55.528+08:00  INFO --- [nio-8080-exec-7] c.a.a.a.p.i.e.ExecuteStepExecutor        : ExecuteStepExecutor#doExecute - reason=step executed successfully, stepId=execute
2026-01-22T00:27:55.529+08:00  INFO --- [nio-8080-exec-7] c.a.a.a.p.internal.DefaultPlanExecutor   : DefaultPlanExecutor#execute - reason=plan completed, planId=d37b5ed0-325b-4d55-a9f5-85995445aabf, stepCount=1
2026-01-22T00:27:55.531+08:00  INFO --- [nio-8080-exec-7] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handlePlanningDirectExecution - reason=execution completed, planId=d37b5ed0-325b-4d55-a9f5-85995445aabf, success=true
2026-01-22T00:27:55.546+08:00 ERROR --- [nio-8080-exec-7] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] threw exception

org.springframework.security.authorization.AuthorizationDeniedException: Access Denied
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:99)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:91)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$4(HandlerMappingIntrospector.java:267)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:612)
	at org.apache.catalina.core.ApplicationDispatcher.doDispatch(ApplicationDispatcher.java:540)
	at org.apache.catalina.core.ApplicationDispatcher.dispatch(ApplicationDispatcher.java:511)
	at org.apache.catalina.core.AsyncContextImpl$AsyncRunnable.run(AsyncContextImpl.java:599)
	at org.apache.catalina.core.AsyncContextImpl.doInternalDispatch(AsyncContextImpl.java:342)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.asyncDispatch(CoyoteAdapter.java:239)
	at org.apache.coyote.AbstractProcessor.dispatch(AbstractProcessor.java:243)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:57)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)

2026-01-22T00:27:55.547+08:00 ERROR --- [nio-8080-exec-7] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Unable to handle the Spring Security Exception because the response is already committed.] with root cause

org.springframework.security.authorization.AuthorizationDeniedException: Access Denied
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:99)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:91)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$4(HandlerMappingIntrospector.java:267)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:612)
	at org.apache.catalina.core.ApplicationDispatcher.doDispatch(ApplicationDispatcher.java:540)
	at org.apache.catalina.core.ApplicationDispatcher.dispatch(ApplicationDispatcher.java:511)
	at org.apache.catalina.core.AsyncContextImpl$AsyncRunnable.run(AsyncContextImpl.java:599)
	at org.apache.catalina.core.AsyncContextImpl.doInternalDispatch(AsyncContextImpl.java:342)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.asyncDispatch(CoyoteAdapter.java:239)
	at org.apache.coyote.AbstractProcessor.dispatch(AbstractProcessor.java:243)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:57)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)

2026-01-22T00:27:55.550+08:00 ERROR --- [nio-8080-exec-7] s.e.ErrorMvcAutoConfiguration$StaticView : Cannot render error page for request [null] as the response has already been committed. As a result, the response may have the wrong status code.
2026-01-22T00:28:25.561+08:00 DEBUG --- [nio-8080-exec-8] c.a.a.a.s.a.s.JwtAuthenticationFilter    : JwtAuthenticationFilter#doFilterInternal - 设置用户认证: username=admin, roles=[ADMIN, USER]
2026-01-22T00:28:25.564+08:00  INFO --- [nio-8080-exec-8] c.a.c.a.a.s.controller.ThreadController  : Request received for POST /apps/research_agent/users/user-001/threads (service generates ID) with state: {}
2026-01-22T00:28:25.564+08:00  INFO --- [nio-8080-exec-8] c.a.c.a.a.s.service.ThreadServiceImpl    : Created thread: 5ae07f6f-0960-4c61-9b75-38c52e366dd2 for app=research_agent, user=user-001
2026-01-22T00:28:25.564+08:00  INFO --- [nio-8080-exec-8] c.a.c.a.a.s.controller.ThreadController  : Thread created successfully with generated id: 5ae07f6f-0960-4c61-9b75-38c52e366dd2
2026-01-22T00:28:25.565+08:00 DEBUG --- [nio-8080-exec-6] c.a.a.a.s.a.s.JwtAuthenticationFilter    : JwtAuthenticationFilter#doFilterInternal - 设置用户认证: username=admin, roles=[ADMIN, USER]
2026-01-22T00:28:25.565+08:00  INFO --- [nio-8080-exec-6] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#loadAgent 加载 agent: research_agent
2026-01-22T00:28:25.565+08:00  INFO --- [nio-8080-exec-6] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#loadAgent 成功加载 agent: research_agent
2026-01-22T00:28:25.579+08:00 DEBUG --- [nio-8080-exec-6] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#beforeAgent - reason=checking unified intent
2026-01-22T00:28:25.579+08:00 DEBUG --- [nio-8080-exec-6] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#get - reason=session not found, sessionId=5ae07f6f-0960-4c61-9b75-38c52e366dd2
2026-01-22T00:28:25.580+08:00 DEBUG --- [nio-8080-exec-6] c.a.a.a.p.i.SemanticActionProvider       : SemanticActionProvider#matchActions - reason=matching actions, userInput=请假
2026-01-22T00:28:25.612+08:00 DEBUG --- [nio-8080-exec-1] c.a.a.a.s.a.s.JwtAuthenticationFilter    : JwtAuthenticationFilter#doFilterInternal - 设置用户认证: username=admin, roles=[ADMIN, USER]
2026-01-22T00:28:25.613+08:00  INFO --- [nio-8080-exec-1] c.a.c.a.a.s.controller.ThreadController  : Request received for GET /apps/research_agent/users/user-001/threads/5ae07f6f-0960-4c61-9b75-38c52e366dd2
2026-01-22T00:28:26.043+08:00 ERROR --- [nio-8080-exec-6] c.a.a.a.p.v.ActionVectorizationService   : ActionVectorizationService#hybridSearch - reason=search failed, error=Connection refused: getsockopt

java.net.ConnectException: Connection refused: getsockopt
	at org.elasticsearch.client.RestClient.extractAndWrapCause(RestClient.java:934)
	at org.elasticsearch.client.RestClient.performRequest(RestClient.java:304)
	at org.elasticsearch.client.RestClient.performRequest(RestClient.java:292)
	at co.elastic.clients.transport.rest_client.RestClientHttpClient.performRequest(RestClientHttpClient.java:91)
	at co.elastic.clients.transport.ElasticsearchTransportBase.performRequest(ElasticsearchTransportBase.java:144)
	at co.elastic.clients.elasticsearch.ElasticsearchClient.search(ElasticsearchClient.java:1965)
	at co.elastic.clients.elasticsearch.ElasticsearchClient.search(ElasticsearchClient.java:1984)
	at com.alibaba.assistant.agent.planning.vector.ActionVectorizationService.hybridSearch(ActionVectorizationService.java:243)
	at com.alibaba.assistant.agent.planning.internal.SemanticActionProvider.matchActions(SemanticActionProvider.java:105)
	at com.alibaba.assistant.agent.planning.intent.UnifiedIntentRecognitionHook.beforeAgent(UnifiedIntentRecognitionHook.java:199)
	at com.alibaba.cloud.ai.graph.executor.NodeExecutor.executeNode(NodeExecutor.java:122)
	at com.alibaba.cloud.ai.graph.executor.NodeExecutor.execute(NodeExecutor.java:84)
	at com.alibaba.cloud.ai.graph.executor.MainGraphExecutor.execute(MainGraphExecutor.java:108)
	at com.alibaba.cloud.ai.graph.executor.MainGraphExecutor.lambda$handleStartNode$0(MainGraphExecutor.java:135)
	at reactor.core.publisher.FluxDefer.subscribe(FluxDefer.java:46)
	at reactor.core.publisher.Flux.subscribe(Flux.java:8891)
	at reactor.core.publisher.FluxConcatArray$ConcatArraySubscriber.onComplete(FluxConcatArray.java:238)
	at reactor.core.publisher.FluxConcatArray.subscribe(FluxConcatArray.java:79)
	at reactor.core.publisher.FluxDefer.subscribe(FluxDefer.java:54)
	at reactor.core.publisher.Flux.subscribe(Flux.java:8891)
	at org.springframework.web.servlet.mvc.method.annotation.ReactiveTypeHandler$AbstractEmitterSubscriber.connect(ReactiveTypeHandler.java:295)
	at org.springframework.web.servlet.mvc.method.annotation.ReactiveTypeHandler.handleValue(ReactiveTypeHandler.java:168)
	at org.springframework.web.servlet.mvc.method.annotation.ResponseBodyEmitterReturnValueHandler.handleReturnValue(ResponseBodyEmitterReturnValueHandler.java:215)
	at org.springframework.web.method.support.HandlerMethodReturnValueHandlerComposite.handleReturnValue(HandlerMethodReturnValueHandlerComposite.java:78)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:136)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.alibaba.assistant.agent.start.auth.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:87)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$4(HandlerMappingIntrospector.java:267)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: Connection refused: getsockopt
	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:690)
	at java.base/sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:973)
	at org.apache.http.impl.nio.reactor.DefaultConnectingIOReactor.processEvent(DefaultConnectingIOReactor.java:174)
	at org.apache.http.impl.nio.reactor.DefaultConnectingIOReactor.processEvents(DefaultConnectingIOReactor.java:148)
	at org.apache.http.impl.nio.reactor.AbstractMultiworkerIOReactor.execute(AbstractMultiworkerIOReactor.java:351)
	at org.apache.http.impl.nio.conn.PoolingNHttpClientConnectionManager.execute(PoolingNHttpClientConnectionManager.java:221)
	at org.apache.http.impl.nio.client.CloseableHttpAsyncClientBase$1.run(CloseableHttpAsyncClientBase.java:64)
	... 1 common frames omitted

2026-01-22T00:28:26.049+08:00  WARN --- [nio-8080-exec-6] c.a.a.a.p.p.c.ActionEntityConverter      : ActionEntityConverter#parseActionType - reason=unknown action type, type=INTERNAL
2026-01-22T00:28:26.049+08:00  WARN --- [nio-8080-exec-6] c.a.a.a.p.p.c.ActionEntityConverter      : ActionEntityConverter#parseActionType - reason=unknown action type, type=INTERNAL
2026-01-22T00:28:26.049+08:00  INFO --- [nio-8080-exec-6] c.a.a.a.p.i.SemanticActionProvider       : SemanticActionProvider#matchActions - reason=matching completed, userInput=请假, matchCount=1
2026-01-22T00:28:26.049+08:00  INFO --- [nio-8080-exec-6] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#beforeAgent - reason=match found, actionId=oa:leave:request, confidence=0.95, matchType=KEYWORD_EXACT
2026-01-22T00:28:26.049+08:00 ERROR --- [nio-8080-exec-6] .s.p.e.p.ElasticsearchExperienceProvider : ElasticsearchExperienceProvider#query - reason=query failed

java.net.ConnectException: Connection refused: getsockopt
	at org.elasticsearch.client.RestClient.extractAndWrapCause(RestClient.java:934)
	at org.elasticsearch.client.RestClient.performRequest(RestClient.java:304)
	at org.elasticsearch.client.RestClient.performRequest(RestClient.java:292)
	at co.elastic.clients.transport.rest_client.RestClientHttpClient.performRequest(RestClientHttpClient.java:91)
	at co.elastic.clients.transport.ElasticsearchTransportBase.performRequest(ElasticsearchTransportBase.java:144)
	at co.elastic.clients.elasticsearch.ElasticsearchClient.search(ElasticsearchClient.java:1965)
	at com.alibaba.assistant.agent.start.persistence.experience.provider.ElasticsearchExperienceProvider.query(ElasticsearchExperienceProvider.java:69)
	at com.alibaba.assistant.agent.planning.intent.UnifiedIntentRecognitionHook.findMatchingExperience(UnifiedIntentRecognitionHook.java:292)
	at com.alibaba.assistant.agent.planning.intent.UnifiedIntentRecognitionHook.beforeAgent(UnifiedIntentRecognitionHook.java:216)
	at com.alibaba.cloud.ai.graph.executor.NodeExecutor.executeNode(NodeExecutor.java:122)
	at com.alibaba.cloud.ai.graph.executor.NodeExecutor.execute(NodeExecutor.java:84)
	at com.alibaba.cloud.ai.graph.executor.MainGraphExecutor.execute(MainGraphExecutor.java:108)
	at com.alibaba.cloud.ai.graph.executor.MainGraphExecutor.lambda$handleStartNode$0(MainGraphExecutor.java:135)
	at reactor.core.publisher.FluxDefer.subscribe(FluxDefer.java:46)
	at reactor.core.publisher.Flux.subscribe(Flux.java:8891)
	at reactor.core.publisher.FluxConcatArray$ConcatArraySubscriber.onComplete(FluxConcatArray.java:238)
	at reactor.core.publisher.FluxConcatArray.subscribe(FluxConcatArray.java:79)
	at reactor.core.publisher.FluxDefer.subscribe(FluxDefer.java:54)
	at reactor.core.publisher.Flux.subscribe(Flux.java:8891)
	at org.springframework.web.servlet.mvc.method.annotation.ReactiveTypeHandler$AbstractEmitterSubscriber.connect(ReactiveTypeHandler.java:295)
	at org.springframework.web.servlet.mvc.method.annotation.ReactiveTypeHandler.handleValue(ReactiveTypeHandler.java:168)
	at org.springframework.web.servlet.mvc.method.annotation.ResponseBodyEmitterReturnValueHandler.handleReturnValue(ResponseBodyEmitterReturnValueHandler.java:215)
	at org.springframework.web.method.support.HandlerMethodReturnValueHandlerComposite.handleReturnValue(HandlerMethodReturnValueHandlerComposite.java:78)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:136)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:991)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:896)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:590)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
	at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:658)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:195)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:110)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:108)
	at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365)
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at com.alibaba.assistant.agent.start.auth.security.JwtAuthenticationFilter.doFilterInternal(JwtAuthenticationFilter.java:87)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$4(HandlerMappingIntrospector.java:267)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: java.net.ConnectException: Connection refused: getsockopt
	at java.base/sun.nio.ch.Net.pollConnect(Native Method)
	at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:690)
	at java.base/sun.nio.ch.SocketChannelImpl.finishConnect(SocketChannelImpl.java:973)
	at org.apache.http.impl.nio.reactor.DefaultConnectingIOReactor.processEvent(DefaultConnectingIOReactor.java:174)
	at org.apache.http.impl.nio.reactor.DefaultConnectingIOReactor.processEvents(DefaultConnectingIOReactor.java:148)
	at org.apache.http.impl.nio.reactor.AbstractMultiworkerIOReactor.execute(AbstractMultiworkerIOReactor.java:351)
	at org.apache.http.impl.nio.conn.PoolingNHttpClientConnectionManager.execute(PoolingNHttpClientConnectionManager.java:221)
	at org.apache.http.impl.nio.client.CloseableHttpAsyncClientBase$1.run(CloseableHttpAsyncClientBase.java:64)
	... 1 common frames omitted

2026-01-22T00:28:26.049+08:00  INFO --- [nio-8080-exec-6] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#beforeAgent - reason=high confidence, using LLM for param extraction, actionId=oa:leave:request, confidence=0.95
2026-01-22T00:28:26.049+08:00 DEBUG --- [nio-8080-exec-6] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handleLlmParamExtraction - reason=calling LLM, actionId=oa:leave:request
2026-01-22T00:28:30.247+08:00  INFO --- [nio-8080-exec-6] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handleLlmParamExtraction - reason=LLM response received, actionId=oa:leave:request, response=```json
{
  "extractedParams": {},
  "missingParams": ["start_date", "end_date", "types", "reason", "check_uids"],
  "nextQuestion": "请提供开始日期、结束日期、请假类型（1=事假, 2=病假, 3=年假, 4=调休）、请假理由以及审批人ID。"
}
```
2026-01-22T00:28:30.247+08:00  INFO --- [nio-8080-exec-6] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handleLlmParamExtraction - reason=has nextQuestion, returning to user, question=请提供开始日期、结束日期、请假类型（1=事假, 2=病假, 3=年假, 4=调休）、请假理由以及审批人ID。
2026-01-22T00:28:30.247+08:00 DEBUG --- [nio-8080-exec-6] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#save - reason=session saved, sessionId=5ae07f6f-0960-4c61-9b75-38c52e366dd2, ttl=PT30M
2026-01-22T00:28:30.247+08:00 DEBUG --- [nio-8080-exec-6] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#saveSession - reason=session saved, sessionId=5ae07f6f-0960-4c61-9b75-38c52e366dd2
2026-01-22T00:28:30.247+08:00  INFO --- [nio-8080-exec-6] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handleNextQuestion - reason=session saved to store, sessionId=5ae07f6f-0960-4c61-9b75-38c52e366dd2, actionId=oa:leave:request
2026-01-22T00:28:30.247+08:00  INFO --- [nio-8080-exec-6] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handleNextQuestion - reason=returning nextQuestion, actionId=oa:leave:request, question=请提供开始日期、结束日期、请假类型（1=事假, 2=病假, 3=年假, 4=调休）、请假理由以及审批人ID。
2026-01-22T00:28:30.254+08:00 ERROR --- [nio-8080-exec-6] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] threw exception

org.springframework.security.authorization.AuthorizationDeniedException: Access Denied
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:99)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:91)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$4(HandlerMappingIntrospector.java:267)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:612)
	at org.apache.catalina.core.ApplicationDispatcher.doDispatch(ApplicationDispatcher.java:540)
	at org.apache.catalina.core.ApplicationDispatcher.dispatch(ApplicationDispatcher.java:511)
	at org.apache.catalina.core.AsyncContextImpl$AsyncRunnable.run(AsyncContextImpl.java:599)
	at org.apache.catalina.core.AsyncContextImpl.doInternalDispatch(AsyncContextImpl.java:342)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.asyncDispatch(CoyoteAdapter.java:239)
	at org.apache.coyote.AbstractProcessor.dispatch(AbstractProcessor.java:243)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:57)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)

2026-01-22T00:28:30.255+08:00 ERROR --- [nio-8080-exec-6] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Unable to handle the Spring Security Exception because the response is already committed.] with root cause

org.springframework.security.authorization.AuthorizationDeniedException: Access Denied
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:99)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:91)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$4(HandlerMappingIntrospector.java:267)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:612)
	at org.apache.catalina.core.ApplicationDispatcher.doDispatch(ApplicationDispatcher.java:540)
	at org.apache.catalina.core.ApplicationDispatcher.dispatch(ApplicationDispatcher.java:511)
	at org.apache.catalina.core.AsyncContextImpl$AsyncRunnable.run(AsyncContextImpl.java:599)
	at org.apache.catalina.core.AsyncContextImpl.doInternalDispatch(AsyncContextImpl.java:342)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.asyncDispatch(CoyoteAdapter.java:239)
	at org.apache.coyote.AbstractProcessor.dispatch(AbstractProcessor.java:243)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:57)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)

2026-01-22T00:28:30.257+08:00 ERROR --- [nio-8080-exec-6] s.e.ErrorMvcAutoConfiguration$StaticView : Cannot render error page for request [null] as the response has already been committed. As a result, the response may have the wrong status code.
2026-01-22T00:28:33.940+08:00 DEBUG --- [nio-8080-exec-2] c.a.a.a.s.a.s.JwtAuthenticationFilter    : JwtAuthenticationFilter#doFilterInternal - 设置用户认证: username=admin, roles=[ADMIN, USER]
2026-01-22T00:28:33.940+08:00  INFO --- [nio-8080-exec-2] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#loadAgent 加载 agent: research_agent
2026-01-22T00:28:33.940+08:00  INFO --- [nio-8080-exec-2] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#loadAgent 成功加载 agent: research_agent
2026-01-22T00:28:33.949+08:00 DEBUG --- [nio-8080-exec-2] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#beforeAgent - reason=checking unified intent
2026-01-22T00:28:33.949+08:00 DEBUG --- [nio-8080-exec-2] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#get - reason=session found, sessionId=5ae07f6f-0960-4c61-9b75-38c52e366dd2, active=true
2026-01-22T00:28:33.949+08:00  INFO --- [nio-8080-exec-2] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#beforeAgent - reason=continuing param collection session (from store), sessionId=5ae07f6f-0960-4c61-9b75-38c52e366dd2, userInput=2026-1-22 2026-1-23 类型 事假 理由 aa 审批人 25明天 类型 事假 理由 aa 审批人 25
2026-01-22T00:28:33.949+08:00  INFO --- [nio-8080-exec-2] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handleParamCollectionContinuation - reason=processing param input, sessionId=5ae07f6f-0960-4c61-9b75-38c52e366dd2, actionId=oa:leave:request, userInput=2026-1-22 2026-1-23 类型 事假 理由 aa 审批人 25明天 类型 事假 理由 aa 审批人 25
2026-01-22T00:28:33.949+08:00  WARN --- [nio-8080-exec-2] c.a.a.a.p.p.c.ActionEntityConverter      : ActionEntityConverter#parseActionType - reason=unknown action type, type=INTERNAL
2026-01-22T00:28:36.097+08:00  INFO --- [nio-8080-exec-2] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handleParamCollectionContinuation - reason=LLM response, response=```json
{
  "extractedParams": {
    "start_date": "2026-01-22 00:00",
    "end_date": "2026-01-23 00:00",
    "types": "1",
    "reason": "aa",
    "check_uids": "25"
  },
  "missingParams": [],
  "nextQuestion": null
}
```
2026-01-22T00:28:36.097+08:00  INFO --- [nio-8080-exec-2] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handleParamCollectionContinuation - reason=params complete, executing action, actionId=oa:leave:request, params={end_date=2026-01-23 00:00, reason=aa, check_uids=25, types=1, start_date=2026-01-22 00:00}
2026-01-22T00:28:36.098+08:00 DEBUG --- [nio-8080-exec-2] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#close - reason=session closed, sessionId=5ae07f6f-0960-4c61-9b75-38c52e366dd2
2026-01-22T00:28:36.098+08:00 DEBUG --- [nio-8080-exec-2] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#closeSession - reason=session closed, sessionId=5ae07f6f-0960-4c61-9b75-38c52e366dd2
2026-01-22T00:28:36.098+08:00  INFO --- [nio-8080-exec-2] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handlePlanningDirectExecution - reason=direct execution, actionId=oa:leave:request
2026-01-22T00:28:36.098+08:00 DEBUG --- [nio-8080-exec-2] c.a.a.a.p.internal.DefaultPlanGenerator  : DefaultPlanGenerator#generate - reason=generating plan, actionId=oa:leave:request, actionName=提交OA请假申请
2026-01-22T00:28:36.098+08:00  INFO --- [nio-8080-exec-2] c.a.a.a.p.internal.DefaultPlanGenerator  : DefaultPlanGenerator#generate - reason=plan generated, planId=29866f93-960e-4e2d-b46e-afa60fbf61d5, stepCount=1
2026-01-22T00:28:36.098+08:00  INFO --- [nio-8080-exec-2] c.a.a.a.p.internal.DefaultPlanExecutor   : DefaultPlanExecutor#execute - reason=starting plan execution, planId=29866f93-960e-4e2d-b46e-afa60fbf61d5, actionId=oa:leave:request
2026-01-22T00:28:36.098+08:00 DEBUG --- [nio-8080-exec-2] c.a.a.a.p.internal.DefaultPlanExecutor   : DefaultPlanExecutor#executeSteps - reason=executing step, planId=29866f93-960e-4e2d-b46e-afa60fbf61d5, stepId=execute, stepIndex=0
2026-01-22T00:28:36.098+08:00 DEBUG --- [nio-8080-exec-2] c.a.a.a.p.i.e.ExecuteStepExecutor        : AbstractStepExecutor#execute - reason=executing step, stepId=execute, type=EXECUTE
2026-01-22T00:28:36.098+08:00 DEBUG --- [nio-8080-exec-2] c.a.a.a.p.i.e.ExecuteStepExecutor        : ExecuteStepExecutor#doExecute - reason=executing execute step, stepId=execute
2026-01-22T00:28:36.099+08:00  INFO --- [nio-8080-exec-2] c.a.a.a.p.i.e.ExecuteStepExecutor        : ExecuteStepExecutor#executeAction - reason=internal call, bean=oaSystemActionService, method=execute
2026-01-22T00:28:36.099+08:00  INFO --- [nio-8080-exec-2] c.a.a.a.p.i.e.ExecuteStepExecutor        : ExecuteStepExecutor#doExecute - reason=step executed successfully, stepId=execute
2026-01-22T00:28:36.099+08:00  INFO --- [nio-8080-exec-2] c.a.a.a.p.internal.DefaultPlanExecutor   : DefaultPlanExecutor#execute - reason=plan completed, planId=29866f93-960e-4e2d-b46e-afa60fbf61d5, stepCount=1
2026-01-22T00:28:36.099+08:00  INFO --- [nio-8080-exec-2] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handlePlanningDirectExecution - reason=execution completed, planId=29866f93-960e-4e2d-b46e-afa60fbf61d5, success=true
2026-01-22T00:28:36.108+08:00 ERROR --- [nio-8080-exec-2] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] threw exception

org.springframework.security.authorization.AuthorizationDeniedException: Access Denied
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:99)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:91)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$4(HandlerMappingIntrospector.java:267)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:612)
	at org.apache.catalina.core.ApplicationDispatcher.doDispatch(ApplicationDispatcher.java:540)
	at org.apache.catalina.core.ApplicationDispatcher.dispatch(ApplicationDispatcher.java:511)
	at org.apache.catalina.core.AsyncContextImpl$AsyncRunnable.run(AsyncContextImpl.java:599)
	at org.apache.catalina.core.AsyncContextImpl.doInternalDispatch(AsyncContextImpl.java:342)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.asyncDispatch(CoyoteAdapter.java:239)
	at org.apache.coyote.AbstractProcessor.dispatch(AbstractProcessor.java:243)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:57)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)

2026-01-22T00:28:36.109+08:00 ERROR --- [nio-8080-exec-2] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Unable to handle the Spring Security Exception because the response is already committed.] with root cause

org.springframework.security.authorization.AuthorizationDeniedException: Access Denied
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:99)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:91)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$4(HandlerMappingIntrospector.java:267)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:612)
	at org.apache.catalina.core.ApplicationDispatcher.doDispatch(ApplicationDispatcher.java:540)
	at org.apache.catalina.core.ApplicationDispatcher.dispatch(ApplicationDispatcher.java:511)
	at org.apache.catalina.core.AsyncContextImpl$AsyncRunnable.run(AsyncContextImpl.java:599)
	at org.apache.catalina.core.AsyncContextImpl.doInternalDispatch(AsyncContextImpl.java:342)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.asyncDispatch(CoyoteAdapter.java:239)
	at org.apache.coyote.AbstractProcessor.dispatch(AbstractProcessor.java:243)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:57)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)

2026-01-22T00:28:36.111+08:00 ERROR --- [nio-8080-exec-2] s.e.ErrorMvcAutoConfiguration$StaticView : Cannot render error page for request [null] as the response has already been committed. As a result, the response may have the wrong status code.
2026-01-22T11:08:40.234+08:00  INFO --- [           main] c.a.a.a.start.AssistantAgentApplication  : Starting AssistantAgentApplication using Java 21.0.9 with PID 16640 (D:\devfive\AssistantAgent\assistant-agent-start\target\classes started by zhou_ in D:\devfive\AssistantAgent\assistant-agent-start)
2026-01-22T11:08:40.235+08:00 DEBUG --- [           main] c.a.a.a.start.AssistantAgentApplication  : Running with Spring Boot v3.4.8, Spring v6.2.9
2026-01-22T11:08:40.236+08:00  INFO --- [           main] c.a.a.a.start.AssistantAgentApplication  : No active profile set, falling back to 1 default profile: "default"
2026-01-22T11:08:41.793+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Elasticsearch repositories in DEFAULT mode.
2026-01-22T11:08:41.833+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 31 ms. Found 0 Elasticsearch repository interfaces.
2026-01-22T11:08:41.840+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Reactive Elasticsearch repositories in DEFAULT mode.
2026-01-22T11:08:41.850+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 8 ms. Found 0 Reactive Elasticsearch repository interfaces.
2026-01-22T11:08:41.991+08:00  WARN --- [           main] o.m.s.mapper.ClassPathMapperScanner      : Skipping MapperFactoryBean with name 'learningRecordMapper' and 'com.alibaba.assistant.agent.start.persistence.learning.mapper.LearningRecordMapper' mapperInterface. Bean already defined with the same name!
2026-01-22T11:08:41.991+08:00  WARN --- [           main] o.m.s.mapper.ClassPathMapperScanner      : Skipping MapperFactoryBean with name 'triggerDefinitionMapper' and 'com.alibaba.assistant.agent.start.persistence.trigger.mapper.TriggerDefinitionMapper' mapperInterface. Bean already defined with the same name!
2026-01-22T11:08:41.992+08:00  WARN --- [           main] o.m.s.mapper.ClassPathMapperScanner      : Skipping MapperFactoryBean with name 'triggerExecutionRecordMapper' and 'com.alibaba.assistant.agent.start.persistence.trigger.mapper.TriggerExecutionRecordMapper' mapperInterface. Bean already defined with the same name!
2026-01-22T11:08:41.992+08:00  WARN --- [           main] o.m.s.mapper.ClassPathMapperScanner      : Skipping MapperFactoryBean with name 'actionRegistryMapper' and 'com.alibaba.assistant.agent.planning.persistence.mapper.ActionRegistryMapper' mapperInterface. Bean already defined with the same name!
2026-01-22T11:08:43.453+08:00  INFO --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2026-01-22T11:08:43.473+08:00  INFO --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2026-01-22T11:08:43.474+08:00  INFO --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.43]
2026-01-22T11:08:43.598+08:00  INFO --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2026-01-22T11:08:43.599+08:00  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 3297 ms
2026-01-22T11:08:43.628+08:00  INFO --- [           main] c.a.a.a.s.a.security.JwtTokenProvider    : JwtTokenProvider#init - JWT 密钥已初始化
2026-01-22T11:08:43.690+08:00 DEBUG --- [           main] c.a.a.a.s.a.s.JwtAuthenticationFilter    : Filter 'jwtAuthenticationFilter' configured for use
2026-01-22T11:08:44.122+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#init - reason=search extension framework is enabled
2026-01-22T11:08:44.124+08:00  INFO --- [           main] c.a.a.a.s.s.MockBaiduWebSearchProvider   : MockBaiduWebSearchProvider#init - reason=使用简单模式初始化
2026-01-22T11:08:44.126+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#unifiedSearchCodeactTool - reason=创建统一搜索工具, providerCount=3
2026-01-22T11:08:44.180+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#init - reason=planning extension is enabled
2026-01-22T11:08:44.183+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#init - reason=ES configuration class loaded (elasticsearch.enabled=true)
2026-01-22T11:08:44.185+08:00  INFO --- [           main] toConfiguration$MybatisPlusConfiguration : MybatisPlusConfiguration#init - reason=MySQL configuration class loaded (mysql.enabled=true, MyBatisPlus present)
2026-01-22T11:08:44.225+08:00  INFO --- [           main] toConfiguration$MybatisPlusConfiguration : MybatisPlusConfiguration#actionEntityConverter - reason=creating entity converter
2026-01-22T11:08:44.227+08:00  INFO --- [           main] toConfiguration$MybatisPlusConfiguration : MybatisPlusConfiguration#mybatisPlusActionRepository - reason=ActionRegistryMapper found, creating MySQL repository
2026-01-22T11:08:44.827+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#actionVectorizationService - reason=creating ES vectorization service
2026-01-22T11:08:44.931+08:00  INFO --- [           main] c.a.a.a.p.v.ActionVectorizationService   : ActionVectorizationService#init - reason=ES index initialized on startup
2026-01-22T11:08:44.952+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#semanticActionProvider - reason=creating semantic action provider, semanticWeight=0.6, keywordWeight=0.4, matchThreshold=0.5
2026-01-22T11:08:44.957+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#defaultPlanGenerator - reason=creating default plan generator
2026-01-22T11:08:44.960+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#planActionCodeactTool - reason=creating plan_action tool
2026-01-22T11:08:44.965+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#queryStepExecutor - reason=creating query step executor
2026-01-22T11:08:44.967+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#inputStepExecutor - reason=creating input step executor
2026-01-22T11:08:44.969+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#executeStepExecutor - reason=creating execute step executor
2026-01-22T11:08:44.971+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#apiCallStepExecutor - reason=creating api call step executor
2026-01-22T11:08:44.980+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#validationStepExecutor - reason=creating validation step executor
2026-01-22T11:08:44.988+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#stepExecutorRegistry - reason=creating executor registry, executorCount=5
2026-01-22T11:08:44.988+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=QUERY, executorClass=QueryStepExecutor
2026-01-22T11:08:44.988+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=INPUT, executorClass=InputStepExecutor
2026-01-22T11:08:44.989+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=EXECUTE, executorClass=ExecuteStepExecutor
2026-01-22T11:08:44.989+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=API_CALL, executorClass=ApiCallStepExecutor
2026-01-22T11:08:44.989+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=VALIDATION, executorClass=ValidationStepExecutor
2026-01-22T11:08:44.989+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#defaultPlanExecutor - reason=creating default plan executor
2026-01-22T11:08:44.993+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#executeActionCodeactTool - reason=creating execute_action tool
2026-01-22T11:08:44.995+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#listActionsCodeactTool - reason=creating list_actions tool
2026-01-22T11:08:44.997+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#getActionDetailsCodeactTool - reason=creating get_action_details tool
2026-01-22T11:08:45.091+08:00  INFO --- [           main] c.a.a.a.start.config.PersistenceConfig   : PersistenceConfig#init - reason=persistence configuration loaded
2026-01-22T11:08:45.093+08:00  INFO --- [           main] c.a.a.a.start.config.PersistenceConfig   : PersistenceConfig#elasticsearchExperienceProvider - reason=creating Elasticsearch experience provider (PRIMARY), indexName=experiences
2026-01-22T11:08:45.099+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#<init> - reason=初始化默认评估套件配置, experienceProviderAvailable=true
2026-01-22T11:08:45.102+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#evaluatorRegistry - reason=创建 EvaluatorRegistry Bean
2026-01-22T11:08:45.103+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'llm-based' of type LLMBasedEvaluator
2026-01-22T11:08:45.105+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'passthrough' of type RuleBasedEvaluator
2026-01-22T11:08:45.107+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'react_experience_evaluator' of type RuleBasedEvaluator
2026-01-22T11:08:45.107+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createDefaultEvaluatorRegistry - reason=注册 React 阶段经验检索评估器
2026-01-22T11:08:45.107+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'codeact_experience_evaluator' of type RuleBasedEvaluator
2026-01-22T11:08:45.107+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createDefaultEvaluatorRegistry - reason=注册 CodeAct 阶段经验检索评估器
2026-01-22T11:08:45.108+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#evaluationService - reason=创建默认 EvaluationService, sharedRegistryEvaluators=[llm-based, passthrough, codeact_experience_evaluator, react_experience_evaluator]
2026-01-22T11:08:45.109+08:00 DEBUG --- [           main] c.a.a.a.e.e.GraphBasedEvaluationExecutor : Created default ExecutorService for batch processing
2026-01-22T11:08:45.111+08:00  INFO --- [           main] .c.ExperienceEvaluationCriterionProvider : ExperienceEvaluationCriterionProvider#<init> - reason=初始化经验评估 Criterion 提供者
2026-01-22T11:08:45.114+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#structuredParamExtractor - reason=creating structured param extractor
2026-01-22T11:08:45.125+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#parameterValidator - reason=creating parameter validator
2026-01-22T11:08:45.129+08:00  INFO --- [           main] .a.a.a.p.c.ParamOptionsAutoConfiguration : ParamOptionsAutoConfiguration - Parameter options module initialized
2026-01-22T11:08:45.130+08:00  INFO --- [           main] .a.a.a.p.c.ParamOptionsAutoConfiguration : ParamOptionsAutoConfiguration - Creating RestTemplate for HTTP handlers
2026-01-22T11:08:45.136+08:00  INFO --- [           main] c.a.a.a.planning.executor.HttpExecutor   : HttpExecutor#init - initialized
2026-01-22T11:08:45.137+08:00  INFO --- [           main] c.a.a.a.p.executor.InternalExecutor      : InternalExecutor#init - initialized
2026-01-22T11:08:45.139+08:00  INFO --- [           main] c.a.a.a.p.e.ActionExecutorFactory        : ActionExecutorFactory#init - initialized executors: INTERNAL(InternalExecutor), HTTP(HttpExecutor), DATA_AGENT(DataAgentExecutor), MCP(McpExecutor)
2026-01-22T11:08:45.141+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#sessionProvider - reason=creating in-memory session provider
2026-01-22T11:08:45.141+08:00  INFO --- [           main] c.a.a.a.p.s.InMemorySessionProvider      : InMemorySessionProvider#init - initialized
2026-01-22T11:08:45.143+08:00  INFO --- [           main] c.a.a.a.p.s.ParamCollectionService       : ParamCollectionService#init - sessionProvider=InMemory
2026-01-22T11:08:45.145+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'action_intent_evaluator' of type ActionIntentEvaluator
2026-01-22T11:08:45.145+08:00  INFO --- [           main] p.i.PlanningIntegrationAutoConfiguration : PlanningIntegrationAutoConfiguration#actionIntentEvaluator - initialized and registered, paramCollection=true, llmVerification=true, maxCandidates=5
2026-01-22T11:08:45.145+08:00  INFO --- [           main] .p.i.PlanningEvaluationCriterionProvider : PlanningEvaluationCriterionProvider#init - initialized, llmVerificationEnabled=true
2026-01-22T11:08:45.146+08:00  INFO --- [           main] p.i.PlanningIntegrationAutoConfiguration : PlanningIntegrationAutoConfiguration#planningEvaluationCriterionProvider - registered planning evaluation criterion provider
2026-01-22T11:08:45.146+08:00  INFO --- [           main] .c.ExperienceEvaluationCriterionProvider : ExperienceEvaluationCriterionProvider#getReactPhaseCriteria - reason=提供 React 阶段评估 Criteria
2026-01-22T11:08:45.148+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createReactPhaseSuite - reason=添加自定义 Criterion, provider=ExperienceEvaluationCriterionProvider, count=3
2026-01-22T11:08:45.149+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createReactPhaseSuite - reason=添加自定义 Criterion, provider=PlanningEvaluationCriterionProvider, count=2
2026-01-22T11:08:45.151+08:00  INFO --- [           main] a.a.e.a.BatchAggregationStrategyRegistry : Registered batch aggregation strategy: ANY_TRUE
2026-01-22T11:08:45.151+08:00  INFO --- [           main] a.a.e.a.BatchAggregationStrategyRegistry : Registered batch aggregation strategy: ALL_TRUE
2026-01-22T11:08:45.194+08:00  INFO --- [           main] c.a.c.a.g.internal.node.ParallelNode     : Calculated core pool size: 32 (CPU cores: 16)
2026-01-22T11:08:45.194+08:00  INFO --- [           main] c.a.c.a.g.internal.node.ParallelNode     : Calculated maximum pool size: 64 (CPU cores: 16)
2026-01-22T11:08:45.194+08:00  INFO --- [           main] c.a.c.a.g.internal.node.ParallelNode     : Calculated queue capacity: 1000
2026-01-22T11:08:45.195+08:00  INFO --- [           main] c.a.a.a.e.DefaultEvaluationService       : Registered evaluation suite: react-phase-suite
2026-01-22T11:08:45.195+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#evaluationService - reason=注册 React Phase Suite, suiteId=react-phase-suite
2026-01-22T11:08:45.196+08:00  INFO --- [           main] .c.ExperienceEvaluationCriterionProvider : ExperienceEvaluationCriterionProvider#getCodeActPhaseCriteria - reason=提供 CodeAct 阶段评估 Criteria
2026-01-22T11:08:45.196+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createCodeActPhaseSuite - reason=添加自定义 Criterion, provider=ExperienceEvaluationCriterionProvider, count=3
2026-01-22T11:08:45.196+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createCodeActPhaseSuite - reason=添加自定义 Criterion, provider=PlanningEvaluationCriterionProvider, count=2
2026-01-22T11:08:45.196+08:00  INFO --- [           main] a.a.e.a.BatchAggregationStrategyRegistry : Registered batch aggregation strategy: ANY_TRUE
2026-01-22T11:08:45.196+08:00  INFO --- [           main] a.a.e.a.BatchAggregationStrategyRegistry : Registered batch aggregation strategy: ALL_TRUE
2026-01-22T11:08:45.197+08:00  INFO --- [           main] c.a.a.a.e.DefaultEvaluationService       : Registered evaluation suite: codeact-phase-suite
2026-01-22T11:08:45.197+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#evaluationService - reason=注册 CodeAct Phase Suite, suiteId=codeact-phase-suite
2026-01-22T11:08:45.200+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#codeactEvaluationContextFactory - reason=创建 EvaluationContextFactory
2026-01-22T11:08:45.201+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#codeactEvaluationResultAttacher - reason=创建 EvaluationResultAttacher
2026-01-22T11:08:45.205+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#reactPhaseEvaluationHooks - reason=创建 React Phase ModelInputEvaluationHook
2026-01-22T11:08:45.207+08:00  INFO --- [           main] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#<init> - reason=初始化, phase=REACT, providerCount=1
2026-01-22T11:08:45.207+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#reactPhaseEvaluationHooks - reason=创建 React Phase EvaluationPromptInjectionHook, providersCount=2
2026-01-22T11:08:45.208+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#codeactPhaseEvaluationHooks - reason=创建 CodeAct Phase ModelInputEvaluationHook
2026-01-22T11:08:45.208+08:00  INFO --- [           main] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#<init> - reason=初始化, phase=CODEACT, providerCount=1
2026-01-22T11:08:45.208+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#codeactPhaseEvaluationHooks - reason=创建 CodeAct Phase EvaluationPromptInjectionHook, providersCount=2
2026-01-22T11:08:45.210+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#keywordMatcher - reason=creating keyword matcher
2026-01-22T11:08:45.212+08:00  INFO --- [           main] .ParamCollectionSessionAutoConfiguration : ParamCollectionSessionAutoConfiguration#inMemoryParamCollectionSessionStore - reason=creating in-memory session store (Redis not available), ttl=PT30M
2026-01-22T11:08:45.213+08:00  WARN --- [           main] .ParamCollectionSessionAutoConfiguration : ParamCollectionSessionAutoConfiguration#inMemoryParamCollectionSessionStore - reason=WARNING: In-memory session store is not suitable for distributed environment!
2026-01-22T11:08:45.214+08:00  INFO --- [           main] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#<init> - reason=initialized, defaultTtl=PT30M
2026-01-22T11:08:45.214+08:00  WARN --- [           main] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#<init> - reason=WARNING: Using in-memory session store, not suitable for distributed environment!
2026-01-22T11:08:45.218+08:00  INFO --- [           main] iguration$UnifiedIntentHookConfiguration : UnifiedIntentHookConfiguration#unifiedIntentRecognitionHook - reason=creating unified intent hook, experienceProviderPresent=true, chatModelPresent=true, sessionStorePresent=true, directExecuteThreshold=0.95, hintThreshold=0.5
2026-01-22T11:08:45.327+08:00  INFO --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2026-01-22T11:08:45.584+08:00  INFO --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@20276412
2026-01-22T11:08:45.587+08:00  INFO --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2026-01-22T11:08:45.743+08:00  WARN --- [           main] c.a.a.a.p.p.c.ActionEntityConverter      : ActionEntityConverter#parseActionType - reason=unknown action type, type=INTERNAL
2026-01-22T11:08:45.768+08:00 DEBUG --- [           main] c.a.a.a.planning.intent.KeywordMatcher   : KeywordMatcher#registerAction - actionId=oa:leave:request, keywords=57
2026-01-22T11:08:45.769+08:00  INFO --- [           main] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#initKeywordMatcher - reason=initialized, actionCount=1, keywordIndexSize=57
2026-01-22T11:08:45.776+08:00  INFO --- [           main] c.a.a.a.start.config.PersistenceConfig   : PersistenceConfig#elasticsearchExperienceRepository - reason=creating Elasticsearch experience repository (PRIMARY), indexName=experiences
2026-01-22T11:08:45.783+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#init - reason=reply module enabled
2026-01-22T11:08:45.786+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactToolFactory - reason=创建CodeactTool工厂, channels=1
2026-01-22T11:08:45.786+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#init - reason=工厂初始化完成, channels=1
2026-01-22T11:08:45.803+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=开始创建Reply工具
2026-01-22T11:08:45.807+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#createTools - reason=创建工具成功, toolName=send_success_message, channelCode=IDE_TEXT
2026-01-22T11:08:45.808+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#createTools - reason=创建工具成功, toolName=send_error_message, channelCode=IDE_TEXT
2026-01-22T11:08:45.808+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#createTools - reason=创建工具成功, toolName=send_notification, channelCode=IDE_TEXT
2026-01-22T11:08:45.808+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#createTools - reason=工具创建完成, totalCount=3
2026-01-22T11:08:45.809+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=Reply工具创建完成, count=3
2026-01-22T11:08:45.809+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=创建Reply工具, index=1, name=send_success_message, description=Send a success message to the IDE console
2026-01-22T11:08:45.809+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=创建Reply工具, index=2, name=send_error_message, description=Send an error message to the IDE console
2026-01-22T11:08:45.809+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=创建Reply工具, index=3, name=send_notification, description=Send a notification message
2026-01-22T11:08:45.810+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactToolFactory - reason=创建SearchCodeactTool工厂, providerCount=3
2026-01-22T11:08:45.844+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactToolFactory - reason=创建TriggerCodeactTool工厂
2026-01-22T11:08:45.844+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=开始创建Trigger工具
2026-01-22T11:08:45.846+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=创建SubscribeTriggerCodeactTool成功
2026-01-22T11:08:45.848+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=创建UnsubscribeTriggerCodeactTool成功
2026-01-22T11:08:45.851+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=创建ListTriggersCodeactTool成功
2026-01-22T11:08:45.853+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=创建GetTriggerDetailCodeactTool成功
2026-01-22T11:08:45.853+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=触发器工具创建完成, count=4
2026-01-22T11:08:45.853+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=Trigger工具创建完成, count=4
2026-01-22T11:08:45.853+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=创建Trigger工具, index=1, name=subscribe_trigger, description=创建并订阅一个新的触发器
2026-01-22T11:08:45.854+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=创建Trigger工具, index=2, name=unsubscribe_trigger, description=取消订阅并删除一个触发器
2026-01-22T11:08:45.854+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=创建Trigger工具, index=3, name=list_triggers, description=列出所有触发器
2026-01-22T11:08:45.854+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=创建Trigger工具, index=4, name=get_trigger_detail, description=获取指定触发器的详细信息
2026-01-22T11:08:45.864+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=创建 CodeactAgent
2026-01-22T11:08:45.864+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=配置 MemorySaver 以支持多轮对话上下文保持
2026-01-22T11:08:45.864+08:00  WARN --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=临时禁用 streaming 模式以排查循环问题
2026-01-22T11:08:45.864+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加UnifiedSearchCodeactTool
2026-01-22T11:08:45.869+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockBaiduWebSearchProvider, toolName=search_web
2026-01-22T11:08:45.872+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockKnowledgeStoreSearchProvider, toolName=search_knowledge
2026-01-22T11:08:45.875+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockProjectContextSearchProvider, toolName=search_project
2026-01-22T11:08:45.875+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=搜索工具创建完成, totalCount=3
2026-01-22T11:08:45.875+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加SearchCodeactTools, count=3
2026-01-22T11:08:45.875+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加ReplyCodeactTools, count=3
2026-01-22T11:08:45.875+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加TriggerCodeactTools, count=4
2026-01-22T11:08:45.875+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#createMcpDynamicTools - reason=Creating MCP dynamic tools
2026-01-22T11:08:45.879+08:00  INFO --- [           main] c.a.a.a.e.d.mcp.McpDynamicToolFactory    : McpDynamicToolFactory#createTools - reason=开始创建MCP动态工具
2026-01-22T11:08:45.885+08:00  INFO --- [           main] c.a.a.a.e.d.mcp.McpDynamicToolFactory    : McpDynamicToolFactory#createTools - reason=无可用的MCP工具
2026-01-22T11:08:45.886+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#createMcpDynamicTools - reason=MCP dynamic tools created, count=0
2026-01-22T11:08:45.886+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=Added MCP dynamic tools, count=0
2026-01-22T11:08:45.886+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#createHttpDynamicTools - reason=HTTP dynamic tools disabled by default
2026-01-22T11:08:45.886+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=合并后CodeactTool总数, count=11
2026-01-22T11:08:45.886+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=React阶段使用内置工具(write_code, execute_code, write_condition_code)
2026-01-22T11:08:45.886+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=注入 React Phase 评估 Hooks, count=2
2026-01-22T11:08:45.886+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=注入 CodeAct Phase 评估 Hooks, count=2
2026-01-22T11:08:45.887+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=已准备注入UnifiedIntentRecognitionHook
2026-01-22T11:08:45.891+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 开始构建CodeactAgent
2026-01-22T11:08:45.896+08:00  INFO --- [           main] .a.a.a.c.t.s.DefaultReturnSchemaRegistry : DefaultReturnSchemaRegistry#<init> - reason=创建新实例, hashCode=1116642274
2026-01-22T11:08:45.900+08:00 DEBUG --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#<init> - reason=创建注册表, returnSchemaRegistry=DefaultReturnSchemaRegistry
2026-01-22T11:08:45.900+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=创建默认CodeactToolRegistry
2026-01-22T11:08:45.900+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=开始注册CodeactTool, count=11
2026-01-22T11:08:45.900+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=unified_search
2026-01-22T11:08:45.900+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=unified_search
2026-01-22T11:08:45.900+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=search_web
2026-01-22T11:08:45.900+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=search_web
2026-01-22T11:08:45.900+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=search_knowledge
2026-01-22T11:08:45.900+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=search_knowledge
2026-01-22T11:08:45.900+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=search_project
2026-01-22T11:08:45.901+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=search_project
2026-01-22T11:08:45.901+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=send_success_message
2026-01-22T11:08:45.901+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=send_success_message
2026-01-22T11:08:45.901+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=send_error_message
2026-01-22T11:08:45.901+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=send_error_message
2026-01-22T11:08:45.901+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=send_notification
2026-01-22T11:08:45.901+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=send_notification
2026-01-22T11:08:45.901+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=subscribe_trigger
2026-01-22T11:08:45.901+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=subscribe_trigger
2026-01-22T11:08:45.901+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=unsubscribe_trigger
2026-01-22T11:08:45.901+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=unsubscribe_trigger
2026-01-22T11:08:45.901+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=list_triggers
2026-01-22T11:08:45.901+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=list_triggers
2026-01-22T11:08:45.901+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=get_trigger_detail
2026-01-22T11:08:45.901+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=get_trigger_detail
2026-01-22T11:08:45.901+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册完成, count=11
2026-01-22T11:08:45.901+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 创建默认CodeContext: language=PYTHON
2026-01-22T11:08:45.903+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 创建默认RuntimeEnvironmentManager: language=PYTHON
2026-01-22T11:08:45.906+08:00 DEBUG --- [           main] c.a.a.a.c.e.bridge.AgentToolBridge       : AgentToolBridge#<init> 初始化: 注册了0个工具
2026-01-22T11:08:45.909+08:00 DEBUG --- [           main] c.a.a.a.c.executor.bridge.StateBridge    : StateBridge#<init> 初始化完成
2026-01-22T11:08:45.910+08:00  INFO --- [           main] c.a.a.a.core.executor.GraalCodeExecutor  : GraalCodeExecutor#<init> 初始化完成: language=PYTHON, allowIO=false, timeout=30000ms, executableTools=true, customBridgeFactory=false
2026-01-22T11:08:45.910+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#createCodeactSubAgentInterceptor 创建子Agent拦截器
2026-01-22T11:08:45.919+08:00  INFO --- [           main] c.a.a.a.a.subagent.CodeactSubAgent       : CodeactSubAgent#<init> 初始化: name=code-generator
2026-01-22T11:08:45.920+08:00  INFO --- [           main] c.a.a.a.a.subagent.CodeactSubAgent       : CodeactSubAgent#<init> 初始化: name=condition-code-generator
2026-01-22T11:08:45.920+08:00  INFO --- [           main] c.a.a.a.a.s.CodeactSubAgentInterceptor   : CodeactSubAgentInterceptor#<init> 创建默认代码生成子Agent
2026-01-22T11:08:46.228+08:00  INFO --- [           main] c.a.a.a.a.s.CodeactSubAgentInterceptor   : CodeactSubAgentInterceptor#<init> 初始化完成: subAgentCount=2
2026-01-22T11:08:46.230+08:00  INFO --- [           main] c.a.a.a.a.tools.ExecuteCodeTool          : ExecuteCodeTool#<init> 初始化完成
2026-01-22T11:08:46.234+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 拦截器分类完成: modelInterceptors=1, toolInterceptors=0
2026-01-22T11:08:46.234+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 从拦截器提取工具: interceptor=CodeactSubAgent, toolCount=2
2026-01-22T11:08:46.257+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 工具收集完成: interceptorTools=2, regularTools=3, total=6
2026-01-22T11:08:46.260+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 设置ModelInterceptors到LlmNode: count=1
2026-01-22T11:08:46.261+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build CodeactAgent构建完成
2026-01-22T11:08:46.261+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=开始罗列已注册的工具
2026-01-22T11:08:46.262+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct阶段工具数量, count=11
2026-01-22T11:08:46.262+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=1, name=unified_search, description=统一搜索工具，可同时搜索项目、知识库、Web等多个数据源
2026-01-22T11:08:46.262+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=2, name=search_knowledge, description=搜索团队知识库，包括FAQ、规范、最佳实践等
2026-01-22T11:08:46.262+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=3, name=send_success_message, description=Send a success message to the IDE console
2026-01-22T11:08:46.262+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=4, name=search_web, description=执行Web搜索，获取公开互联网信息
2026-01-22T11:08:46.262+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=5, name=unsubscribe_trigger, description=取消订阅并删除一个触发器
2026-01-22T11:08:46.262+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=6, name=get_trigger_detail, description=获取指定触发器的详细信息
2026-01-22T11:08:46.262+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=7, name=send_error_message, description=Send an error message to the IDE console
2026-01-22T11:08:46.262+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=8, name=search_project, description=搜索项目上下文信息，包括代码、配置、文档等
2026-01-22T11:08:46.262+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=9, name=send_notification, description=Send a notification message
2026-01-22T11:08:46.262+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=10, name=subscribe_trigger, description=创建并订阅一个新的触发器
2026-01-22T11:08:46.262+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=11, name=list_triggers, description=列出所有触发器
2026-01-22T11:08:46.262+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React阶段工具数量, count=6
2026-01-22T11:08:46.262+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=1, name=write_code, description=Generate and register a new function with specified name and parameters. IMPORTANT: You MUST provide both 'functionName' and 'parameters' fields. Example: write_code(requirement='calculate sum', functionName='calculate_sum', parameters=['a', 'b'])
2026-01-22T11:08:46.262+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=2, name=write_condition_code, description=Generate and register a condition check function for triggers. This function MUST return a boolean value (True/False). Example: write_condition_code(requirement='check if it is a working day', functionName='check_is_working_day', parameters=['date'])
2026-01-22T11:08:46.262+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=3, name=send_success_message, description=Send a success message to the IDE console
2026-01-22T11:08:46.262+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=4, name=send_error_message, description=Send an error message to the IDE console
2026-01-22T11:08:46.262+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=5, name=send_notification, description=Send a notification message
2026-01-22T11:08:46.262+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=6, name=execute_code, description=Execute a previously generated function by its exact name with matching parameters. CRITICAL: The functionName MUST exactly match the name used in write_code. The 'args' parameter names MUST exactly match the 'parameters' specified in write_code. Example: If you called write_code with functionName='calculate_sum' and parameters=['a', 'b'], then you must call execute_code with functionName='calculate_sum' and args={'a': 10, 'b': 20}. Parameter value types supported: String, Number, Boolean, List, Map/Object.
2026-01-22T11:08:46.262+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=工具罗列完成
2026-01-22T11:08:46.263+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgent#<init> 初始化完成: language=PYTHON
2026-01-22T11:08:46.272+08:00  INFO --- [           main] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#<init> 初始化 Agent 加载器
2026-01-22T11:08:46.298+08:00 DEBUG --- [           main] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#<init> Agent 图结构:
@startuml CodeactAgent
skinparam usecaseFontSize 14
skinparam usecaseStereotypeFontSize 12
skinparam hexagonFontSize 14
skinparam hexagonStereotypeFontSize 12
title "CodeactAgent"
footer

powered by spring-ai-alibaba
end footer
circle start<<input>> as __START__
circle stop as __END__
usecase "_AGENT_MODEL_"<<Node>>
usecase "_AGENT_TOOL_"<<Node>>
usecase "_AGENT_HOOK_UnifiedIntentRecognitionHook.before"<<Node>>
usecase "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"<<Node>>
usecase "_AGENT_HOOK_EvaluationPromptInjectionHook-REACT.beforeModel"<<Node>>
hexagon "check state" as condition1<<Condition>>
hexagon "check state" as condition2<<Condition>>
hexagon "check state" as condition3<<Condition>>
"__START__" -down-> "_AGENT_HOOK_UnifiedIntentRecognitionHook.before"
"_AGENT_HOOK_UnifiedIntentRecognitionHook.before" .down.> "condition1"
"condition1" .down.> "__END__"
'"_AGENT_HOOK_UnifiedIntentRecognitionHook.before" .down.> "__END__"
"condition1" .down.> "_AGENT_TOOL_"
'"_AGENT_HOOK_UnifiedIntentRecognitionHook.before" .down.> "_AGENT_TOOL_"
"condition1" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
'"_AGENT_HOOK_UnifiedIntentRecognitionHook.before" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
"_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel" -down-> "_AGENT_HOOK_EvaluationPromptInjectionHook-REACT.beforeModel"
"_AGENT_HOOK_EvaluationPromptInjectionHook-REACT.beforeModel" -down-> "_AGENT_MODEL_"
"_AGENT_MODEL_" .down.> "condition2"
"condition2" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
'"_AGENT_MODEL_" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
"condition2" .down.> "__END__"
'"_AGENT_MODEL_" .down.> "__END__"
"condition2" .down.> "_AGENT_TOOL_"
'"_AGENT_MODEL_" .down.> "_AGENT_TOOL_"
"_AGENT_TOOL_" .down.> "condition3"
"condition3" .down.> "__END__"
'"_AGENT_TOOL_" .down.> "__END__"
"condition3" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
'"_AGENT_TOOL_" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
@enduml

2026-01-22T11:08:46.298+08:00  INFO --- [           main] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#<init> 已注册 agent: grayscale_agent
2026-01-22T11:08:46.314+08:00  INFO --- [           main] c.a.a.a.p.p.a.PermissionAdapterRegistry  : PermissionAdapterRegistry#registerAdapter - registered adapter: system=gov-platform, name=政务服务平台权限适配器
2026-01-22T11:08:46.314+08:00  INFO --- [           main] c.a.a.a.p.p.a.PermissionAdapterRegistry  : PermissionAdapterRegistry#registerAdapter - registered adapter: system=oa-system, name=OA办公系统权限适配器
2026-01-22T11:08:46.314+08:00  INFO --- [           main] c.a.a.a.p.p.a.PermissionAdapterRegistry  : PermissionAdapterRegistry initialized with 2 adapters: [gov-platform, oa-system]
2026-01-22T11:08:46.318+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U001, system=oa-system, externalUser=zhang.san@company.com
2026-01-22T11:08:46.319+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U001, system=gov-platform, externalUser=320102199001011234
2026-01-22T11:08:46.319+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U002, system=oa-system, externalUser=li.si@company.com
2026-01-22T11:08:46.319+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U003, system=oa-system, externalUser=wang.wu@company.com
2026-01-22T11:08:46.319+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U003, system=gov-platform, externalUser=leader_001
2026-01-22T11:08:46.319+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U004, system=gov-platform, externalUser=staff_001
2026-01-22T11:08:46.319+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U005, system=oa-system, externalUser=sun.qi@company.com
2026-01-22T11:08:46.319+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService initialized with demo data
2026-01-22T11:08:46.325+08:00  INFO --- [           main] .a.a.a.p.c.ParamOptionsAutoConfiguration : ParamOptionsAutoConfiguration - Creating OptionsCache with TTL: 300000ms
2026-01-22T11:08:46.327+08:00  INFO --- [           main] a.a.a.p.s.DefaultParameterOptionsService : DefaultParameterOptionsService initialized with 3 handlers
2026-01-22T11:08:46.339+08:00 DEBUG --- [           main] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#listAgents 列出所有 agent
2026-01-22T11:08:46.340+08:00  INFO --- [           main] c.a.c.a.a.s.controller.AgentController   : AgentController initialized with 1 dynamic agents: [grayscale_agent]
2026-01-22T11:08:46.431+08:00  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 3ed13f02-3411-4930-a60d-896ba088b667

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2026-01-22T11:08:46.462+08:00  INFO --- [           main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2026-01-22T11:08:46.841+08:00  INFO --- [           main] e.e.c.CodeactEvaluationAutoConfiguration : CodeactEvaluationAutoConfiguration#inputRoutingEvaluationHook - reason=创建输入路由评估 Hook
2026-01-22T11:08:46.843+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchFacade - reason=creating search facade with 3 providers
2026-01-22T11:08:46.844+08:00  INFO --- [           main] c.a.a.a.e.s.i.DefaultSearchFacade        : DefaultSearchFacade#init - reason=initialized with 3 providers
2026-01-22T11:08:46.845+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=开始创建Search工具
2026-01-22T11:08:46.847+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockBaiduWebSearchProvider, toolName=search_web
2026-01-22T11:08:46.848+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockKnowledgeStoreSearchProvider, toolName=search_knowledge
2026-01-22T11:08:46.849+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockProjectContextSearchProvider, toolName=search_project
2026-01-22T11:08:46.849+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=搜索工具创建完成, totalCount=3
2026-01-22T11:08:46.849+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=Search工具创建完成, count=3
2026-01-22T11:08:46.849+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=创建Search工具, index=1, name=search_web, description=执行Web搜索，获取公开互联网信息
2026-01-22T11:08:46.850+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=创建Search工具, index=2, name=search_knowledge, description=搜索团队知识库，包括FAQ、规范、最佳实践等
2026-01-22T11:08:46.850+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=创建Search工具, index=3, name=search_project, description=搜索项目上下文信息，包括代码、配置、文档等
2026-01-22T11:08:46.853+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#diagnostics - reason=ElasticsearchClient bean found
2026-01-22T11:08:46.853+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#diagnostics - reason=EmbeddingModel bean found
2026-01-22T11:08:46.855+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#diagnostics - Planning module status:
2026-01-22T11:08:46.855+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration :   - ActionRepository: MybatisPlusActionRepository
2026-01-22T11:08:46.855+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration :   - ActionProvider: SemanticActionProvider
2026-01-22T11:08:46.855+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration :   - PlanGenerator: DefaultPlanGenerator
2026-01-22T11:08:46.855+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration :   - PlanExecutor: DefaultPlanExecutor
2026-01-22T11:08:46.856+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#planningCodeactTools - reason=creating planning tools list
2026-01-22T11:08:46.856+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#planningCodeactTools - reason=created planning tools, count=4
2026-01-22T11:08:47.018+08:00  INFO --- [           main] c.a.a.a.c.c.CodeactCoreAutoConfiguration : CodeactCoreAutoConfiguration#returnSchemaRegistry - reason=创建ReturnSchemaRegistry单例Bean
2026-01-22T11:08:47.019+08:00  INFO --- [           main] .a.a.a.c.t.s.DefaultReturnSchemaRegistry : DefaultReturnSchemaRegistry#<init> - reason=创建新实例, hashCode=902315094
2026-01-22T11:08:47.461+08:00  WARN --- [           main] o.s.m.p.s.SyncMcpSamplingProvider        : No sampling methods found
2026-01-22T11:08:47.464+08:00  WARN --- [           main] o.s.m.p.e.SyncMcpElicitationProvider     : No elicitation methods found
2026-01-22T11:08:47.480+08:00  WARN --- [           main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException: Failed to start bean 'webServerStartStop'
2026-01-22T11:08:47.486+08:00  INFO --- [           main] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#shutdown - reason=shutdown completed
2026-01-22T11:08:47.486+08:00  INFO --- [           main] c.a.a.a.e.e.GraphBasedEvaluationExecutor : Shutting down ExecutorService
2026-01-22T11:08:47.489+08:00  INFO --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2026-01-22T11:08:47.498+08:00  INFO --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2026-01-22T11:08:47.514+08:00  INFO --- [           main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2026-01-22T11:08:47.539+08:00 ERROR --- [           main] o.s.b.d.LoggingFailureAnalysisReporter   : 

***************************
APPLICATION FAILED TO START
***************************

Description:

Web server failed to start. Port 8080 was already in use.

Action:

Identify and stop the process that's listening on port 8080 or configure this application to listen on another port.

2026-01-22T11:08:47.541+08:00  INFO --- [r-shutdown-hook] c.a.c.a.g.internal.node.ParallelNode     : Shutting down ParallelNode default executor
2026-01-22T11:08:47.541+08:00  INFO --- [r-shutdown-hook] c.a.c.a.g.internal.node.ParallelNode     : ParallelNode default thread pool terminated
2026-01-22T11:08:47.541+08:00  INFO --- [r-shutdown-hook] c.a.c.a.g.internal.node.ParallelNode     : ParallelNode default executor shut down successfully
2026-01-22T11:09:51.914+08:00  INFO --- [           main] c.a.a.a.start.AssistantAgentApplication  : Starting AssistantAgentApplication using Java 21.0.9 with PID 7192 (D:\devfive\AssistantAgent\assistant-agent-start\target\classes started by zhou_ in D:\devfive\AssistantAgent\assistant-agent-start)
2026-01-22T11:09:51.916+08:00 DEBUG --- [           main] c.a.a.a.start.AssistantAgentApplication  : Running with Spring Boot v3.4.8, Spring v6.2.9
2026-01-22T11:09:51.917+08:00  INFO --- [           main] c.a.a.a.start.AssistantAgentApplication  : No active profile set, falling back to 1 default profile: "default"
2026-01-22T11:09:53.431+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Elasticsearch repositories in DEFAULT mode.
2026-01-22T11:09:53.466+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 26 ms. Found 0 Elasticsearch repository interfaces.
2026-01-22T11:09:53.473+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Reactive Elasticsearch repositories in DEFAULT mode.
2026-01-22T11:09:53.483+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 8 ms. Found 0 Reactive Elasticsearch repository interfaces.
2026-01-22T11:09:53.600+08:00  WARN --- [           main] o.m.s.mapper.ClassPathMapperScanner      : Skipping MapperFactoryBean with name 'learningRecordMapper' and 'com.alibaba.assistant.agent.start.persistence.learning.mapper.LearningRecordMapper' mapperInterface. Bean already defined with the same name!
2026-01-22T11:09:53.601+08:00  WARN --- [           main] o.m.s.mapper.ClassPathMapperScanner      : Skipping MapperFactoryBean with name 'triggerDefinitionMapper' and 'com.alibaba.assistant.agent.start.persistence.trigger.mapper.TriggerDefinitionMapper' mapperInterface. Bean already defined with the same name!
2026-01-22T11:09:53.602+08:00  WARN --- [           main] o.m.s.mapper.ClassPathMapperScanner      : Skipping MapperFactoryBean with name 'triggerExecutionRecordMapper' and 'com.alibaba.assistant.agent.start.persistence.trigger.mapper.TriggerExecutionRecordMapper' mapperInterface. Bean already defined with the same name!
2026-01-22T11:09:53.603+08:00  WARN --- [           main] o.m.s.mapper.ClassPathMapperScanner      : Skipping MapperFactoryBean with name 'actionRegistryMapper' and 'com.alibaba.assistant.agent.planning.persistence.mapper.ActionRegistryMapper' mapperInterface. Bean already defined with the same name!
2026-01-22T11:09:55.040+08:00  INFO --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2026-01-22T11:09:55.072+08:00  INFO --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2026-01-22T11:09:55.072+08:00  INFO --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.43]
2026-01-22T11:09:55.218+08:00  INFO --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2026-01-22T11:09:55.218+08:00  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 3235 ms
2026-01-22T11:09:55.254+08:00  INFO --- [           main] c.a.a.a.s.a.security.JwtTokenProvider    : JwtTokenProvider#init - JWT 密钥已初始化
2026-01-22T11:09:55.318+08:00 DEBUG --- [           main] c.a.a.a.s.a.s.JwtAuthenticationFilter    : Filter 'jwtAuthenticationFilter' configured for use
2026-01-22T11:09:55.751+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#init - reason=search extension framework is enabled
2026-01-22T11:09:55.753+08:00  INFO --- [           main] c.a.a.a.s.s.MockBaiduWebSearchProvider   : MockBaiduWebSearchProvider#init - reason=使用简单模式初始化
2026-01-22T11:09:55.757+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#unifiedSearchCodeactTool - reason=创建统一搜索工具, providerCount=3
2026-01-22T11:09:55.815+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#init - reason=planning extension is enabled
2026-01-22T11:09:55.818+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#init - reason=ES configuration class loaded (elasticsearch.enabled=true)
2026-01-22T11:09:55.821+08:00  INFO --- [           main] toConfiguration$MybatisPlusConfiguration : MybatisPlusConfiguration#init - reason=MySQL configuration class loaded (mysql.enabled=true, MyBatisPlus present)
2026-01-22T11:09:55.867+08:00  INFO --- [           main] toConfiguration$MybatisPlusConfiguration : MybatisPlusConfiguration#actionEntityConverter - reason=creating entity converter
2026-01-22T11:09:55.870+08:00  INFO --- [           main] toConfiguration$MybatisPlusConfiguration : MybatisPlusConfiguration#mybatisPlusActionRepository - reason=ActionRegistryMapper found, creating MySQL repository
2026-01-22T11:09:56.420+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#actionVectorizationService - reason=creating ES vectorization service
2026-01-22T11:09:56.508+08:00  INFO --- [           main] c.a.a.a.p.v.ActionVectorizationService   : ActionVectorizationService#init - reason=ES index initialized on startup
2026-01-22T11:09:56.524+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#semanticActionProvider - reason=creating semantic action provider, semanticWeight=0.6, keywordWeight=0.4, matchThreshold=0.5
2026-01-22T11:09:56.528+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#defaultPlanGenerator - reason=creating default plan generator
2026-01-22T11:09:56.533+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#planActionCodeactTool - reason=creating plan_action tool
2026-01-22T11:09:56.538+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#queryStepExecutor - reason=creating query step executor
2026-01-22T11:09:56.541+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#inputStepExecutor - reason=creating input step executor
2026-01-22T11:09:56.543+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#executeStepExecutor - reason=creating execute step executor
2026-01-22T11:09:56.545+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#apiCallStepExecutor - reason=creating api call step executor
2026-01-22T11:09:56.554+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#validationStepExecutor - reason=creating validation step executor
2026-01-22T11:09:56.557+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#stepExecutorRegistry - reason=creating executor registry, executorCount=5
2026-01-22T11:09:56.557+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=QUERY, executorClass=QueryStepExecutor
2026-01-22T11:09:56.558+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=INPUT, executorClass=InputStepExecutor
2026-01-22T11:09:56.558+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=EXECUTE, executorClass=ExecuteStepExecutor
2026-01-22T11:09:56.558+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=API_CALL, executorClass=ApiCallStepExecutor
2026-01-22T11:09:56.558+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=VALIDATION, executorClass=ValidationStepExecutor
2026-01-22T11:09:56.559+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#defaultPlanExecutor - reason=creating default plan executor
2026-01-22T11:09:56.562+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#executeActionCodeactTool - reason=creating execute_action tool
2026-01-22T11:09:56.565+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#listActionsCodeactTool - reason=creating list_actions tool
2026-01-22T11:09:56.567+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#getActionDetailsCodeactTool - reason=creating get_action_details tool
2026-01-22T11:09:56.653+08:00  INFO --- [           main] c.a.a.a.start.config.PersistenceConfig   : PersistenceConfig#init - reason=persistence configuration loaded
2026-01-22T11:09:56.656+08:00  INFO --- [           main] c.a.a.a.start.config.PersistenceConfig   : PersistenceConfig#elasticsearchExperienceProvider - reason=creating Elasticsearch experience provider (PRIMARY), indexName=experiences
2026-01-22T11:09:56.664+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#<init> - reason=初始化默认评估套件配置, experienceProviderAvailable=true
2026-01-22T11:09:56.668+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#evaluatorRegistry - reason=创建 EvaluatorRegistry Bean
2026-01-22T11:09:56.669+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'llm-based' of type LLMBasedEvaluator
2026-01-22T11:09:56.671+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'passthrough' of type RuleBasedEvaluator
2026-01-22T11:09:56.673+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'react_experience_evaluator' of type RuleBasedEvaluator
2026-01-22T11:09:56.673+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createDefaultEvaluatorRegistry - reason=注册 React 阶段经验检索评估器
2026-01-22T11:09:56.674+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'codeact_experience_evaluator' of type RuleBasedEvaluator
2026-01-22T11:09:56.674+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createDefaultEvaluatorRegistry - reason=注册 CodeAct 阶段经验检索评估器
2026-01-22T11:09:56.674+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#evaluationService - reason=创建默认 EvaluationService, sharedRegistryEvaluators=[llm-based, passthrough, codeact_experience_evaluator, react_experience_evaluator]
2026-01-22T11:09:56.676+08:00 DEBUG --- [           main] c.a.a.a.e.e.GraphBasedEvaluationExecutor : Created default ExecutorService for batch processing
2026-01-22T11:09:56.678+08:00  INFO --- [           main] .c.ExperienceEvaluationCriterionProvider : ExperienceEvaluationCriterionProvider#<init> - reason=初始化经验评估 Criterion 提供者
2026-01-22T11:09:56.682+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#structuredParamExtractor - reason=creating structured param extractor
2026-01-22T11:09:56.695+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#parameterValidator - reason=creating parameter validator
2026-01-22T11:09:56.699+08:00  INFO --- [           main] .a.a.a.p.c.ParamOptionsAutoConfiguration : ParamOptionsAutoConfiguration - Parameter options module initialized
2026-01-22T11:09:56.701+08:00  INFO --- [           main] .a.a.a.p.c.ParamOptionsAutoConfiguration : ParamOptionsAutoConfiguration - Creating RestTemplate for HTTP handlers
2026-01-22T11:09:56.708+08:00  INFO --- [           main] c.a.a.a.planning.executor.HttpExecutor   : HttpExecutor#init - initialized
2026-01-22T11:09:56.710+08:00  INFO --- [           main] c.a.a.a.p.executor.InternalExecutor      : InternalExecutor#init - initialized
2026-01-22T11:09:56.712+08:00  INFO --- [           main] c.a.a.a.p.e.ActionExecutorFactory        : ActionExecutorFactory#init - initialized executors: INTERNAL(InternalExecutor), HTTP(HttpExecutor), DATA_AGENT(DataAgentExecutor), MCP(McpExecutor)
2026-01-22T11:09:56.713+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#sessionProvider - reason=creating in-memory session provider
2026-01-22T11:09:56.714+08:00  INFO --- [           main] c.a.a.a.p.s.InMemorySessionProvider      : InMemorySessionProvider#init - initialized
2026-01-22T11:09:56.716+08:00  INFO --- [           main] c.a.a.a.p.s.ParamCollectionService       : ParamCollectionService#init - sessionProvider=InMemory
2026-01-22T11:09:56.718+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'action_intent_evaluator' of type ActionIntentEvaluator
2026-01-22T11:09:56.719+08:00  INFO --- [           main] p.i.PlanningIntegrationAutoConfiguration : PlanningIntegrationAutoConfiguration#actionIntentEvaluator - initialized and registered, paramCollection=true, llmVerification=true, maxCandidates=5
2026-01-22T11:09:56.719+08:00  INFO --- [           main] .p.i.PlanningEvaluationCriterionProvider : PlanningEvaluationCriterionProvider#init - initialized, llmVerificationEnabled=true
2026-01-22T11:09:56.719+08:00  INFO --- [           main] p.i.PlanningIntegrationAutoConfiguration : PlanningIntegrationAutoConfiguration#planningEvaluationCriterionProvider - registered planning evaluation criterion provider
2026-01-22T11:09:56.720+08:00  INFO --- [           main] .c.ExperienceEvaluationCriterionProvider : ExperienceEvaluationCriterionProvider#getReactPhaseCriteria - reason=提供 React 阶段评估 Criteria
2026-01-22T11:09:56.721+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createReactPhaseSuite - reason=添加自定义 Criterion, provider=ExperienceEvaluationCriterionProvider, count=3
2026-01-22T11:09:56.722+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createReactPhaseSuite - reason=添加自定义 Criterion, provider=PlanningEvaluationCriterionProvider, count=2
2026-01-22T11:09:56.725+08:00  INFO --- [           main] a.a.e.a.BatchAggregationStrategyRegistry : Registered batch aggregation strategy: ANY_TRUE
2026-01-22T11:09:56.726+08:00  INFO --- [           main] a.a.e.a.BatchAggregationStrategyRegistry : Registered batch aggregation strategy: ALL_TRUE
2026-01-22T11:09:56.772+08:00  INFO --- [           main] c.a.c.a.g.internal.node.ParallelNode     : Calculated core pool size: 32 (CPU cores: 16)
2026-01-22T11:09:56.773+08:00  INFO --- [           main] c.a.c.a.g.internal.node.ParallelNode     : Calculated maximum pool size: 64 (CPU cores: 16)
2026-01-22T11:09:56.773+08:00  INFO --- [           main] c.a.c.a.g.internal.node.ParallelNode     : Calculated queue capacity: 1000
2026-01-22T11:09:56.774+08:00  INFO --- [           main] c.a.a.a.e.DefaultEvaluationService       : Registered evaluation suite: react-phase-suite
2026-01-22T11:09:56.774+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#evaluationService - reason=注册 React Phase Suite, suiteId=react-phase-suite
2026-01-22T11:09:56.775+08:00  INFO --- [           main] .c.ExperienceEvaluationCriterionProvider : ExperienceEvaluationCriterionProvider#getCodeActPhaseCriteria - reason=提供 CodeAct 阶段评估 Criteria
2026-01-22T11:09:56.775+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createCodeActPhaseSuite - reason=添加自定义 Criterion, provider=ExperienceEvaluationCriterionProvider, count=3
2026-01-22T11:09:56.775+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createCodeActPhaseSuite - reason=添加自定义 Criterion, provider=PlanningEvaluationCriterionProvider, count=2
2026-01-22T11:09:56.775+08:00  INFO --- [           main] a.a.e.a.BatchAggregationStrategyRegistry : Registered batch aggregation strategy: ANY_TRUE
2026-01-22T11:09:56.775+08:00  INFO --- [           main] a.a.e.a.BatchAggregationStrategyRegistry : Registered batch aggregation strategy: ALL_TRUE
2026-01-22T11:09:56.776+08:00  INFO --- [           main] c.a.a.a.e.DefaultEvaluationService       : Registered evaluation suite: codeact-phase-suite
2026-01-22T11:09:56.776+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#evaluationService - reason=注册 CodeAct Phase Suite, suiteId=codeact-phase-suite
2026-01-22T11:09:56.779+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#codeactEvaluationContextFactory - reason=创建 EvaluationContextFactory
2026-01-22T11:09:56.780+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#codeactEvaluationResultAttacher - reason=创建 EvaluationResultAttacher
2026-01-22T11:09:56.786+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#reactPhaseEvaluationHooks - reason=创建 React Phase ModelInputEvaluationHook
2026-01-22T11:09:56.788+08:00  INFO --- [           main] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#<init> - reason=初始化, phase=REACT, providerCount=1
2026-01-22T11:09:56.788+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#reactPhaseEvaluationHooks - reason=创建 React Phase EvaluationPromptInjectionHook, providersCount=2
2026-01-22T11:09:56.790+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#codeactPhaseEvaluationHooks - reason=创建 CodeAct Phase ModelInputEvaluationHook
2026-01-22T11:09:56.790+08:00  INFO --- [           main] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#<init> - reason=初始化, phase=CODEACT, providerCount=1
2026-01-22T11:09:56.790+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#codeactPhaseEvaluationHooks - reason=创建 CodeAct Phase EvaluationPromptInjectionHook, providersCount=2
2026-01-22T11:09:56.793+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#keywordMatcher - reason=creating keyword matcher
2026-01-22T11:09:56.796+08:00  INFO --- [           main] .ParamCollectionSessionAutoConfiguration : ParamCollectionSessionAutoConfiguration#inMemoryParamCollectionSessionStore - reason=creating in-memory session store (Redis not available), ttl=PT30M
2026-01-22T11:09:56.796+08:00  WARN --- [           main] .ParamCollectionSessionAutoConfiguration : ParamCollectionSessionAutoConfiguration#inMemoryParamCollectionSessionStore - reason=WARNING: In-memory session store is not suitable for distributed environment!
2026-01-22T11:09:56.798+08:00  INFO --- [           main] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#<init> - reason=initialized, defaultTtl=PT30M
2026-01-22T11:09:56.799+08:00  WARN --- [           main] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#<init> - reason=WARNING: Using in-memory session store, not suitable for distributed environment!
2026-01-22T11:09:56.802+08:00  INFO --- [           main] iguration$UnifiedIntentHookConfiguration : UnifiedIntentHookConfiguration#unifiedIntentRecognitionHook - reason=creating unified intent hook, experienceProviderPresent=true, chatModelPresent=true, sessionStorePresent=true, directExecuteThreshold=0.95, hintThreshold=0.5
2026-01-22T11:09:56.930+08:00  INFO --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2026-01-22T11:09:57.200+08:00  INFO --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@1690929
2026-01-22T11:09:57.204+08:00  INFO --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2026-01-22T11:09:57.353+08:00  WARN --- [           main] c.a.a.a.p.p.c.ActionEntityConverter      : ActionEntityConverter#parseActionType - reason=unknown action type, type=INTERNAL
2026-01-22T11:09:57.386+08:00 DEBUG --- [           main] c.a.a.a.planning.intent.KeywordMatcher   : KeywordMatcher#registerAction - actionId=oa:leave:request, keywords=57
2026-01-22T11:09:57.386+08:00  INFO --- [           main] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#initKeywordMatcher - reason=initialized, actionCount=1, keywordIndexSize=57
2026-01-22T11:09:57.393+08:00  INFO --- [           main] c.a.a.a.start.config.PersistenceConfig   : PersistenceConfig#elasticsearchExperienceRepository - reason=creating Elasticsearch experience repository (PRIMARY), indexName=experiences
2026-01-22T11:09:57.402+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#init - reason=reply module enabled
2026-01-22T11:09:57.405+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactToolFactory - reason=创建CodeactTool工厂, channels=1
2026-01-22T11:09:57.405+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#init - reason=工厂初始化完成, channels=1
2026-01-22T11:09:57.416+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=开始创建Reply工具
2026-01-22T11:09:57.421+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#createTools - reason=创建工具成功, toolName=send_success_message, channelCode=IDE_TEXT
2026-01-22T11:09:57.422+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#createTools - reason=创建工具成功, toolName=send_error_message, channelCode=IDE_TEXT
2026-01-22T11:09:57.423+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#createTools - reason=创建工具成功, toolName=send_notification, channelCode=IDE_TEXT
2026-01-22T11:09:57.423+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#createTools - reason=工具创建完成, totalCount=3
2026-01-22T11:09:57.423+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=Reply工具创建完成, count=3
2026-01-22T11:09:57.423+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=创建Reply工具, index=1, name=send_success_message, description=Send a success message to the IDE console
2026-01-22T11:09:57.423+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=创建Reply工具, index=2, name=send_error_message, description=Send an error message to the IDE console
2026-01-22T11:09:57.423+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=创建Reply工具, index=3, name=send_notification, description=Send a notification message
2026-01-22T11:09:57.425+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactToolFactory - reason=创建SearchCodeactTool工厂, providerCount=3
2026-01-22T11:09:57.452+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactToolFactory - reason=创建TriggerCodeactTool工厂
2026-01-22T11:09:57.453+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=开始创建Trigger工具
2026-01-22T11:09:57.455+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=创建SubscribeTriggerCodeactTool成功
2026-01-22T11:09:57.456+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=创建UnsubscribeTriggerCodeactTool成功
2026-01-22T11:09:57.461+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=创建ListTriggersCodeactTool成功
2026-01-22T11:09:57.462+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=创建GetTriggerDetailCodeactTool成功
2026-01-22T11:09:57.462+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=触发器工具创建完成, count=4
2026-01-22T11:09:57.463+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=Trigger工具创建完成, count=4
2026-01-22T11:09:57.463+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=创建Trigger工具, index=1, name=subscribe_trigger, description=创建并订阅一个新的触发器
2026-01-22T11:09:57.463+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=创建Trigger工具, index=2, name=unsubscribe_trigger, description=取消订阅并删除一个触发器
2026-01-22T11:09:57.463+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=创建Trigger工具, index=3, name=list_triggers, description=列出所有触发器
2026-01-22T11:09:57.463+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=创建Trigger工具, index=4, name=get_trigger_detail, description=获取指定触发器的详细信息
2026-01-22T11:09:57.469+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=创建 CodeactAgent
2026-01-22T11:09:57.469+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=配置 MemorySaver 以支持多轮对话上下文保持
2026-01-22T11:09:57.469+08:00  WARN --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=临时禁用 streaming 模式以排查循环问题
2026-01-22T11:09:57.469+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加UnifiedSearchCodeactTool
2026-01-22T11:09:57.473+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockBaiduWebSearchProvider, toolName=search_web
2026-01-22T11:09:57.475+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockKnowledgeStoreSearchProvider, toolName=search_knowledge
2026-01-22T11:09:57.477+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockProjectContextSearchProvider, toolName=search_project
2026-01-22T11:09:57.477+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=搜索工具创建完成, totalCount=3
2026-01-22T11:09:57.477+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加SearchCodeactTools, count=3
2026-01-22T11:09:57.477+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加ReplyCodeactTools, count=3
2026-01-22T11:09:57.477+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加TriggerCodeactTools, count=4
2026-01-22T11:09:57.477+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#createMcpDynamicTools - reason=Creating MCP dynamic tools
2026-01-22T11:09:57.482+08:00  INFO --- [           main] c.a.a.a.e.d.mcp.McpDynamicToolFactory    : McpDynamicToolFactory#createTools - reason=开始创建MCP动态工具
2026-01-22T11:09:57.484+08:00  INFO --- [           main] c.a.a.a.e.d.mcp.McpDynamicToolFactory    : McpDynamicToolFactory#createTools - reason=无可用的MCP工具
2026-01-22T11:09:57.484+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#createMcpDynamicTools - reason=MCP dynamic tools created, count=0
2026-01-22T11:09:57.484+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=Added MCP dynamic tools, count=0
2026-01-22T11:09:57.484+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#createHttpDynamicTools - reason=HTTP dynamic tools disabled by default
2026-01-22T11:09:57.484+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=合并后CodeactTool总数, count=11
2026-01-22T11:09:57.485+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=React阶段使用内置工具(write_code, execute_code, write_condition_code)
2026-01-22T11:09:57.485+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=注入 React Phase 评估 Hooks, count=2
2026-01-22T11:09:57.485+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=注入 CodeAct Phase 评估 Hooks, count=2
2026-01-22T11:09:57.485+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=已准备注入UnifiedIntentRecognitionHook
2026-01-22T11:09:57.488+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 开始构建CodeactAgent
2026-01-22T11:09:57.489+08:00  INFO --- [           main] .a.a.a.c.t.s.DefaultReturnSchemaRegistry : DefaultReturnSchemaRegistry#<init> - reason=创建新实例, hashCode=87865777
2026-01-22T11:09:57.490+08:00 DEBUG --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#<init> - reason=创建注册表, returnSchemaRegistry=DefaultReturnSchemaRegistry
2026-01-22T11:09:57.490+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=创建默认CodeactToolRegistry
2026-01-22T11:09:57.490+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=开始注册CodeactTool, count=11
2026-01-22T11:09:57.490+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=unified_search
2026-01-22T11:09:57.490+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=unified_search
2026-01-22T11:09:57.490+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=search_web
2026-01-22T11:09:57.490+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=search_web
2026-01-22T11:09:57.491+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=search_knowledge
2026-01-22T11:09:57.491+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=search_knowledge
2026-01-22T11:09:57.491+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=search_project
2026-01-22T11:09:57.491+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=search_project
2026-01-22T11:09:57.491+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=send_success_message
2026-01-22T11:09:57.491+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=send_success_message
2026-01-22T11:09:57.491+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=send_error_message
2026-01-22T11:09:57.491+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=send_error_message
2026-01-22T11:09:57.491+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=send_notification
2026-01-22T11:09:57.491+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=send_notification
2026-01-22T11:09:57.491+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=subscribe_trigger
2026-01-22T11:09:57.491+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=subscribe_trigger
2026-01-22T11:09:57.491+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=unsubscribe_trigger
2026-01-22T11:09:57.491+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=unsubscribe_trigger
2026-01-22T11:09:57.491+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=list_triggers
2026-01-22T11:09:57.491+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=list_triggers
2026-01-22T11:09:57.491+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=get_trigger_detail
2026-01-22T11:09:57.491+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=get_trigger_detail
2026-01-22T11:09:57.491+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册完成, count=11
2026-01-22T11:09:57.491+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 创建默认CodeContext: language=PYTHON
2026-01-22T11:09:57.493+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 创建默认RuntimeEnvironmentManager: language=PYTHON
2026-01-22T11:09:57.494+08:00 DEBUG --- [           main] c.a.a.a.c.e.bridge.AgentToolBridge       : AgentToolBridge#<init> 初始化: 注册了0个工具
2026-01-22T11:09:57.495+08:00 DEBUG --- [           main] c.a.a.a.c.executor.bridge.StateBridge    : StateBridge#<init> 初始化完成
2026-01-22T11:09:57.497+08:00  INFO --- [           main] c.a.a.a.core.executor.GraalCodeExecutor  : GraalCodeExecutor#<init> 初始化完成: language=PYTHON, allowIO=false, timeout=30000ms, executableTools=true, customBridgeFactory=false
2026-01-22T11:09:57.498+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#createCodeactSubAgentInterceptor 创建子Agent拦截器
2026-01-22T11:09:57.502+08:00  INFO --- [           main] c.a.a.a.a.subagent.CodeactSubAgent       : CodeactSubAgent#<init> 初始化: name=code-generator
2026-01-22T11:09:57.502+08:00  INFO --- [           main] c.a.a.a.a.subagent.CodeactSubAgent       : CodeactSubAgent#<init> 初始化: name=condition-code-generator
2026-01-22T11:09:57.502+08:00  INFO --- [           main] c.a.a.a.a.s.CodeactSubAgentInterceptor   : CodeactSubAgentInterceptor#<init> 创建默认代码生成子Agent
2026-01-22T11:09:57.663+08:00  INFO --- [           main] c.a.a.a.a.s.CodeactSubAgentInterceptor   : CodeactSubAgentInterceptor#<init> 初始化完成: subAgentCount=2
2026-01-22T11:09:57.665+08:00  INFO --- [           main] c.a.a.a.a.tools.ExecuteCodeTool          : ExecuteCodeTool#<init> 初始化完成
2026-01-22T11:09:57.668+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 拦截器分类完成: modelInterceptors=1, toolInterceptors=0
2026-01-22T11:09:57.668+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 从拦截器提取工具: interceptor=CodeactSubAgent, toolCount=2
2026-01-22T11:09:57.679+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 工具收集完成: interceptorTools=2, regularTools=3, total=6
2026-01-22T11:09:57.681+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 设置ModelInterceptors到LlmNode: count=1
2026-01-22T11:09:57.682+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build CodeactAgent构建完成
2026-01-22T11:09:57.682+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=开始罗列已注册的工具
2026-01-22T11:09:57.682+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct阶段工具数量, count=11
2026-01-22T11:09:57.682+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=1, name=unified_search, description=统一搜索工具，可同时搜索项目、知识库、Web等多个数据源
2026-01-22T11:09:57.682+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=2, name=search_knowledge, description=搜索团队知识库，包括FAQ、规范、最佳实践等
2026-01-22T11:09:57.682+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=3, name=send_success_message, description=Send a success message to the IDE console
2026-01-22T11:09:57.682+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=4, name=search_web, description=执行Web搜索，获取公开互联网信息
2026-01-22T11:09:57.682+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=5, name=unsubscribe_trigger, description=取消订阅并删除一个触发器
2026-01-22T11:09:57.682+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=6, name=get_trigger_detail, description=获取指定触发器的详细信息
2026-01-22T11:09:57.682+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=7, name=send_error_message, description=Send an error message to the IDE console
2026-01-22T11:09:57.682+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=8, name=search_project, description=搜索项目上下文信息，包括代码、配置、文档等
2026-01-22T11:09:57.682+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=9, name=send_notification, description=Send a notification message
2026-01-22T11:09:57.682+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=10, name=subscribe_trigger, description=创建并订阅一个新的触发器
2026-01-22T11:09:57.682+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=11, name=list_triggers, description=列出所有触发器
2026-01-22T11:09:57.682+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React阶段工具数量, count=6
2026-01-22T11:09:57.682+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=1, name=write_code, description=Generate and register a new function with specified name and parameters. IMPORTANT: You MUST provide both 'functionName' and 'parameters' fields. Example: write_code(requirement='calculate sum', functionName='calculate_sum', parameters=['a', 'b'])
2026-01-22T11:09:57.682+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=2, name=write_condition_code, description=Generate and register a condition check function for triggers. This function MUST return a boolean value (True/False). Example: write_condition_code(requirement='check if it is a working day', functionName='check_is_working_day', parameters=['date'])
2026-01-22T11:09:57.682+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=3, name=send_success_message, description=Send a success message to the IDE console
2026-01-22T11:09:57.682+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=4, name=send_error_message, description=Send an error message to the IDE console
2026-01-22T11:09:57.682+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=5, name=send_notification, description=Send a notification message
2026-01-22T11:09:57.682+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=6, name=execute_code, description=Execute a previously generated function by its exact name with matching parameters. CRITICAL: The functionName MUST exactly match the name used in write_code. The 'args' parameter names MUST exactly match the 'parameters' specified in write_code. Example: If you called write_code with functionName='calculate_sum' and parameters=['a', 'b'], then you must call execute_code with functionName='calculate_sum' and args={'a': 10, 'b': 20}. Parameter value types supported: String, Number, Boolean, List, Map/Object.
2026-01-22T11:09:57.682+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=工具罗列完成
2026-01-22T11:09:57.683+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgent#<init> 初始化完成: language=PYTHON
2026-01-22T11:09:57.688+08:00  INFO --- [           main] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#<init> 初始化 Agent 加载器
2026-01-22T11:09:57.706+08:00 DEBUG --- [           main] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#<init> Agent 图结构:
@startuml CodeactAgent
skinparam usecaseFontSize 14
skinparam usecaseStereotypeFontSize 12
skinparam hexagonFontSize 14
skinparam hexagonStereotypeFontSize 12
title "CodeactAgent"
footer

powered by spring-ai-alibaba
end footer
circle start<<input>> as __START__
circle stop as __END__
usecase "_AGENT_MODEL_"<<Node>>
usecase "_AGENT_TOOL_"<<Node>>
usecase "_AGENT_HOOK_UnifiedIntentRecognitionHook.before"<<Node>>
usecase "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"<<Node>>
usecase "_AGENT_HOOK_EvaluationPromptInjectionHook-REACT.beforeModel"<<Node>>
hexagon "check state" as condition1<<Condition>>
hexagon "check state" as condition2<<Condition>>
hexagon "check state" as condition3<<Condition>>
"__START__" -down-> "_AGENT_HOOK_UnifiedIntentRecognitionHook.before"
"_AGENT_HOOK_UnifiedIntentRecognitionHook.before" .down.> "condition1"
"condition1" .down.> "__END__"
'"_AGENT_HOOK_UnifiedIntentRecognitionHook.before" .down.> "__END__"
"condition1" .down.> "_AGENT_TOOL_"
'"_AGENT_HOOK_UnifiedIntentRecognitionHook.before" .down.> "_AGENT_TOOL_"
"condition1" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
'"_AGENT_HOOK_UnifiedIntentRecognitionHook.before" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
"_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel" -down-> "_AGENT_HOOK_EvaluationPromptInjectionHook-REACT.beforeModel"
"_AGENT_HOOK_EvaluationPromptInjectionHook-REACT.beforeModel" -down-> "_AGENT_MODEL_"
"_AGENT_MODEL_" .down.> "condition2"
"condition2" .down.> "_AGENT_TOOL_"
'"_AGENT_MODEL_" .down.> "_AGENT_TOOL_"
"condition2" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
'"_AGENT_MODEL_" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
"condition2" .down.> "__END__"
'"_AGENT_MODEL_" .down.> "__END__"
"_AGENT_TOOL_" .down.> "condition3"
"condition3" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
'"_AGENT_TOOL_" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
"condition3" .down.> "__END__"
'"_AGENT_TOOL_" .down.> "__END__"
@enduml

2026-01-22T11:09:57.706+08:00  INFO --- [           main] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#<init> 已注册 agent: grayscale_agent
2026-01-22T11:09:57.718+08:00  INFO --- [           main] c.a.a.a.p.p.a.PermissionAdapterRegistry  : PermissionAdapterRegistry#registerAdapter - registered adapter: system=gov-platform, name=政务服务平台权限适配器
2026-01-22T11:09:57.718+08:00  INFO --- [           main] c.a.a.a.p.p.a.PermissionAdapterRegistry  : PermissionAdapterRegistry#registerAdapter - registered adapter: system=oa-system, name=OA办公系统权限适配器
2026-01-22T11:09:57.718+08:00  INFO --- [           main] c.a.a.a.p.p.a.PermissionAdapterRegistry  : PermissionAdapterRegistry initialized with 2 adapters: [gov-platform, oa-system]
2026-01-22T11:09:57.723+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U001, system=oa-system, externalUser=zhang.san@company.com
2026-01-22T11:09:57.723+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U001, system=gov-platform, externalUser=320102199001011234
2026-01-22T11:09:57.723+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U002, system=oa-system, externalUser=li.si@company.com
2026-01-22T11:09:57.723+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U003, system=oa-system, externalUser=wang.wu@company.com
2026-01-22T11:09:57.723+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U003, system=gov-platform, externalUser=leader_001
2026-01-22T11:09:57.724+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U004, system=gov-platform, externalUser=staff_001
2026-01-22T11:09:57.724+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U005, system=oa-system, externalUser=sun.qi@company.com
2026-01-22T11:09:57.724+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService initialized with demo data
2026-01-22T11:09:57.729+08:00  INFO --- [           main] .a.a.a.p.c.ParamOptionsAutoConfiguration : ParamOptionsAutoConfiguration - Creating OptionsCache with TTL: 300000ms
2026-01-22T11:09:57.731+08:00  INFO --- [           main] a.a.a.p.s.DefaultParameterOptionsService : DefaultParameterOptionsService initialized with 3 handlers
2026-01-22T11:09:57.744+08:00 DEBUG --- [           main] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#listAgents 列出所有 agent
2026-01-22T11:09:57.744+08:00  INFO --- [           main] c.a.c.a.a.s.controller.AgentController   : AgentController initialized with 1 dynamic agents: [grayscale_agent]
2026-01-22T11:09:57.841+08:00  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 05397ed3-c9b6-4396-a340-48077841e85f

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2026-01-22T11:09:57.866+08:00  INFO --- [           main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2026-01-22T11:09:58.197+08:00  INFO --- [           main] e.e.c.CodeactEvaluationAutoConfiguration : CodeactEvaluationAutoConfiguration#inputRoutingEvaluationHook - reason=创建输入路由评估 Hook
2026-01-22T11:09:58.199+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchFacade - reason=creating search facade with 3 providers
2026-01-22T11:09:58.200+08:00  INFO --- [           main] c.a.a.a.e.s.i.DefaultSearchFacade        : DefaultSearchFacade#init - reason=initialized with 3 providers
2026-01-22T11:09:58.201+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=开始创建Search工具
2026-01-22T11:09:58.202+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockBaiduWebSearchProvider, toolName=search_web
2026-01-22T11:09:58.204+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockKnowledgeStoreSearchProvider, toolName=search_knowledge
2026-01-22T11:09:58.205+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockProjectContextSearchProvider, toolName=search_project
2026-01-22T11:09:58.205+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=搜索工具创建完成, totalCount=3
2026-01-22T11:09:58.205+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=Search工具创建完成, count=3
2026-01-22T11:09:58.205+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=创建Search工具, index=1, name=search_web, description=执行Web搜索，获取公开互联网信息
2026-01-22T11:09:58.205+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=创建Search工具, index=2, name=search_knowledge, description=搜索团队知识库，包括FAQ、规范、最佳实践等
2026-01-22T11:09:58.206+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=创建Search工具, index=3, name=search_project, description=搜索项目上下文信息，包括代码、配置、文档等
2026-01-22T11:09:58.210+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#diagnostics - reason=ElasticsearchClient bean found
2026-01-22T11:09:58.210+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#diagnostics - reason=EmbeddingModel bean found
2026-01-22T11:09:58.212+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#diagnostics - Planning module status:
2026-01-22T11:09:58.212+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration :   - ActionRepository: MybatisPlusActionRepository
2026-01-22T11:09:58.212+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration :   - ActionProvider: SemanticActionProvider
2026-01-22T11:09:58.212+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration :   - PlanGenerator: DefaultPlanGenerator
2026-01-22T11:09:58.213+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration :   - PlanExecutor: DefaultPlanExecutor
2026-01-22T11:09:58.214+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#planningCodeactTools - reason=creating planning tools list
2026-01-22T11:09:58.214+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#planningCodeactTools - reason=created planning tools, count=4
2026-01-22T11:09:58.335+08:00  INFO --- [           main] c.a.a.a.c.c.CodeactCoreAutoConfiguration : CodeactCoreAutoConfiguration#returnSchemaRegistry - reason=创建ReturnSchemaRegistry单例Bean
2026-01-22T11:09:58.335+08:00  INFO --- [           main] .a.a.a.c.t.s.DefaultReturnSchemaRegistry : DefaultReturnSchemaRegistry#<init> - reason=创建新实例, hashCode=1479867711
2026-01-22T11:09:58.776+08:00  WARN --- [           main] o.s.m.p.s.SyncMcpSamplingProvider        : No sampling methods found
2026-01-22T11:09:58.777+08:00  WARN --- [           main] o.s.m.p.e.SyncMcpElicitationProvider     : No elicitation methods found
2026-01-22T11:09:58.807+08:00  INFO --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2026-01-22T11:09:58.819+08:00  INFO --- [           main] c.a.a.a.start.AssistantAgentApplication  : Started AssistantAgentApplication in 7.643 seconds (process running for 8.228)
2026-01-22T11:09:58.823+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#run - reason=Starting experience module validation
2026-01-22T11:09:58.896+08:00 DEBUG --- [           main] .p.e.r.ElasticsearchExperienceRepository : ElasticsearchExperienceRepository#count - reason=count completed, count=0
2026-01-22T11:09:58.930+08:00 DEBUG --- [           main] .p.e.r.ElasticsearchExperienceRepository : ElasticsearchExperienceRepository#countByTypeAndScope - reason=count completed, type=CODE, scope=null, count=0
2026-01-22T11:09:58.942+08:00 DEBUG --- [           main] .p.e.r.ElasticsearchExperienceRepository : ElasticsearchExperienceRepository#countByTypeAndScope - reason=count completed, type=REACT, scope=null, count=0
2026-01-22T11:09:58.957+08:00 DEBUG --- [           main] .p.e.r.ElasticsearchExperienceRepository : ElasticsearchExperienceRepository#countByTypeAndScope - reason=count completed, type=COMMON, scope=null, count=0
2026-01-22T11:09:58.957+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testExperienceCount - reason=Experience stats: total=0, code=0, react=0, common=0
2026-01-22T11:09:58.957+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCommonExperienceQuery - reason=Testing common experience query
2026-01-22T11:09:59.182+08:00 DEBUG --- [           main] .s.p.e.p.ElasticsearchExperienceProvider : ElasticsearchExperienceProvider#query - reason=query completed, type=COMMON, text=null, count=0
2026-01-22T11:09:59.183+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCommonExperienceQuery - reason=Found 0 common experiences
2026-01-22T11:09:59.183+08:00  WARN --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCommonExperienceQuery - reason=❌ MoLiHong identity experience not found
2026-01-22T11:09:59.184+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCodeExperienceQuery - reason=Testing code experience query (demo keyword)
2026-01-22T11:09:59.196+08:00 DEBUG --- [           main] .s.p.e.p.ElasticsearchExperienceProvider : ElasticsearchExperienceProvider#query - reason=query completed, type=CODE, text=null, count=0
2026-01-22T11:09:59.196+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCodeExperienceQuery - reason=Found 0 demo code experiences
2026-01-22T11:09:59.196+08:00  WARN --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCodeExperienceQuery - reason=❌ Demo code experience not found
2026-01-22T11:09:59.196+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testReactExperienceQuery - reason=Testing react experience query
2026-01-22T11:09:59.207+08:00 DEBUG --- [           main] .s.p.e.p.ElasticsearchExperienceProvider : ElasticsearchExperienceProvider#query - reason=query completed, type=REACT, text=null, count=0
2026-01-22T11:09:59.207+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testReactExperienceQuery - reason=Found 0 react experiences
2026-01-22T11:09:59.208+08:00  WARN --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testReactExperienceQuery - reason=❌ Ambiguous intent strategy not found
2026-01-22T11:09:59.208+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#run - reason=Experience module validation completed
2026-01-22T11:09:59.208+08:00  INFO --- [           main] c.a.a.a.s.a.config.AuthInitialization    : AuthInitialization#run - 初始化认证系统
2026-01-22T11:09:59.220+08:00 DEBUG --- [           main] c.a.a.a.s.a.s.AuthenticationService      : AuthenticationService#initDefaultAdmin - 管理员账户已存在
2026-01-22T11:09:59.220+08:00  INFO --- [           main] c.a.a.a.s.a.config.AuthInitialization    : AuthInitialization#run - 认证系统初始化完成
2026-01-22T11:11:29.838+08:00  INFO --- [nio-8080-exec-1] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2026-01-22T11:11:29.839+08:00  INFO --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2026-01-22T11:11:29.840+08:00  INFO --- [nio-8080-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 1 ms
2026-01-22T11:11:30.030+08:00 DEBUG --- [nio-8080-exec-3] c.a.a.a.s.a.s.JwtAuthenticationFilter    : JwtAuthenticationFilter#doFilterInternal - 设置用户认证: username=admin, roles=[ADMIN, USER]
2026-01-22T11:11:30.055+08:00  INFO --- [nio-8080-exec-3] c.a.c.a.a.s.controller.ThreadController  : Request received for POST /apps/research_agent/users/user-001/threads (service generates ID) with state: {}
2026-01-22T11:11:30.055+08:00  INFO --- [nio-8080-exec-3] c.a.c.a.a.s.service.ThreadServiceImpl    : Created thread: b3a1c699-5bc5-42af-adb4-fdfb51a3143b for app=research_agent, user=user-001
2026-01-22T11:11:30.056+08:00  INFO --- [nio-8080-exec-3] c.a.c.a.a.s.controller.ThreadController  : Thread created successfully with generated id: b3a1c699-5bc5-42af-adb4-fdfb51a3143b
2026-01-22T11:11:30.089+08:00 DEBUG --- [nio-8080-exec-2] c.a.a.a.s.a.s.JwtAuthenticationFilter    : JwtAuthenticationFilter#doFilterInternal - 设置用户认证: username=admin, roles=[ADMIN, USER]
2026-01-22T11:11:30.098+08:00  INFO --- [nio-8080-exec-2] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#loadAgent 加载 agent: research_agent
2026-01-22T11:11:30.098+08:00  INFO --- [nio-8080-exec-2] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#loadAgent 成功加载 agent: research_agent
2026-01-22T11:11:30.121+08:00 DEBUG --- [nio-8080-exec-5] c.a.a.a.s.a.s.JwtAuthenticationFilter    : JwtAuthenticationFilter#doFilterInternal - 设置用户认证: username=admin, roles=[ADMIN, USER]
2026-01-22T11:11:30.123+08:00  INFO --- [nio-8080-exec-5] c.a.c.a.a.s.controller.ThreadController  : Request received for GET /apps/research_agent/users/user-001/threads/b3a1c699-5bc5-42af-adb4-fdfb51a3143b
2026-01-22T11:11:30.188+08:00 DEBUG --- [nio-8080-exec-2] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#beforeAgent - reason=checking unified intent
2026-01-22T11:11:30.188+08:00 DEBUG --- [nio-8080-exec-2] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#get - reason=session not found, sessionId=b3a1c699-5bc5-42af-adb4-fdfb51a3143b
2026-01-22T11:11:30.189+08:00 DEBUG --- [nio-8080-exec-2] c.a.a.a.p.i.SemanticActionProvider       : SemanticActionProvider#matchActions - reason=matching actions, userInput=我要请假
2026-01-22T11:11:30.877+08:00 DEBUG --- [nio-8080-exec-2] c.a.a.a.p.v.ActionVectorizationService   : ActionVectorizationService#hybridSearch - actionId=erp:product-unit:create, rawScore=1.3716414, maxScore=1.3716414, normalizedScore=0.95
2026-01-22T11:11:30.886+08:00  WARN --- [nio-8080-exec-2] c.a.a.a.p.p.c.ActionEntityConverter      : ActionEntityConverter#parseActionType - reason=unknown action type, type=INTERNAL
2026-01-22T11:11:30.895+08:00  WARN --- [nio-8080-exec-2] c.a.a.a.p.p.c.ActionEntityConverter      : ActionEntityConverter#parseActionType - reason=unknown action type, type=INTERNAL
2026-01-22T11:11:30.898+08:00  INFO --- [nio-8080-exec-2] c.a.a.a.p.i.SemanticActionProvider       : SemanticActionProvider#matchActions - reason=matching completed, userInput=我要请假, matchCount=1
2026-01-22T11:11:30.899+08:00  INFO --- [nio-8080-exec-2] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#beforeAgent - reason=match found, actionId=oa:leave:request, confidence=0.95, matchType=KEYWORD_EXACT
2026-01-22T11:11:30.914+08:00 DEBUG --- [nio-8080-exec-2] .s.p.e.p.ElasticsearchExperienceProvider : ElasticsearchExperienceProvider#query - reason=query completed, type=REACT, text=null, count=0
2026-01-22T11:11:30.914+08:00  INFO --- [nio-8080-exec-2] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#beforeAgent - reason=high confidence, using LLM for param extraction, actionId=oa:leave:request, confidence=0.95
2026-01-22T11:11:30.915+08:00 DEBUG --- [nio-8080-exec-2] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handleLlmParamExtraction - reason=calling LLM, actionId=oa:leave:request
2026-01-22T11:11:34.037+08:00  INFO --- [nio-8080-exec-2] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handleLlmParamExtraction - reason=LLM response received, actionId=oa:leave:request, response=```json
{
  "extractedParams": {},
  "missingParams": ["start_date", "end_date", "types", "reason", "check_uids"],
  "nextQuestion": "请提供请假的开始日期（格式：yyyy-MM-dd HH:mm）、结束日期（格式：yyyy-MM-dd HH:mm）、请假类型（1=事假, 2=病假, 3=年假, 4=调休）、请假理由以及审批人的OA用户ID。"
}
```
2026-01-22T11:11:34.136+08:00  INFO --- [nio-8080-exec-2] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handleLlmParamExtraction - reason=has nextQuestion, returning to user, question=请提供请假的开始日期（格式：yyyy-MM-dd HH:mm）、结束日期（格式：yyyy-MM-dd HH:mm）、请假类型（1=事假, 2=病假, 3=年假, 4=调休）、请假理由以及审批人的OA用户ID。
2026-01-22T11:11:34.137+08:00 DEBUG --- [nio-8080-exec-2] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#save - reason=session saved, sessionId=b3a1c699-5bc5-42af-adb4-fdfb51a3143b, ttl=PT30M
2026-01-22T11:11:34.138+08:00 DEBUG --- [nio-8080-exec-2] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#saveSession - reason=session saved, sessionId=b3a1c699-5bc5-42af-adb4-fdfb51a3143b
2026-01-22T11:11:34.138+08:00  INFO --- [nio-8080-exec-2] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handleNextQuestion - reason=session saved to store, sessionId=b3a1c699-5bc5-42af-adb4-fdfb51a3143b, actionId=oa:leave:request
2026-01-22T11:11:34.138+08:00  INFO --- [nio-8080-exec-2] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handleNextQuestion - reason=returning nextQuestion, actionId=oa:leave:request, question=请提供请假的开始日期（格式：yyyy-MM-dd HH:mm）、结束日期（格式：yyyy-MM-dd HH:mm）、请假类型（1=事假, 2=病假, 3=年假, 4=调休）、请假理由以及审批人的OA用户ID。
2026-01-22T11:11:34.182+08:00 ERROR --- [nio-8080-exec-2] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] threw exception

org.springframework.security.authorization.AuthorizationDeniedException: Access Denied
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:99)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:91)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$4(HandlerMappingIntrospector.java:267)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:612)
	at org.apache.catalina.core.ApplicationDispatcher.doDispatch(ApplicationDispatcher.java:540)
	at org.apache.catalina.core.ApplicationDispatcher.dispatch(ApplicationDispatcher.java:511)
	at org.apache.catalina.core.AsyncContextImpl$AsyncRunnable.run(AsyncContextImpl.java:599)
	at org.apache.catalina.core.AsyncContextImpl.doInternalDispatch(AsyncContextImpl.java:342)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.asyncDispatch(CoyoteAdapter.java:239)
	at org.apache.coyote.AbstractProcessor.dispatch(AbstractProcessor.java:243)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:57)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)

2026-01-22T11:11:34.185+08:00 ERROR --- [nio-8080-exec-2] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Unable to handle the Spring Security Exception because the response is already committed.] with root cause

org.springframework.security.authorization.AuthorizationDeniedException: Access Denied
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:99)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:91)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$4(HandlerMappingIntrospector.java:267)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:612)
	at org.apache.catalina.core.ApplicationDispatcher.doDispatch(ApplicationDispatcher.java:540)
	at org.apache.catalina.core.ApplicationDispatcher.dispatch(ApplicationDispatcher.java:511)
	at org.apache.catalina.core.AsyncContextImpl$AsyncRunnable.run(AsyncContextImpl.java:599)
	at org.apache.catalina.core.AsyncContextImpl.doInternalDispatch(AsyncContextImpl.java:342)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.asyncDispatch(CoyoteAdapter.java:239)
	at org.apache.coyote.AbstractProcessor.dispatch(AbstractProcessor.java:243)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:57)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)

2026-01-22T11:11:34.195+08:00 ERROR --- [nio-8080-exec-2] s.e.ErrorMvcAutoConfiguration$StaticView : Cannot render error page for request [null] as the response has already been committed. As a result, the response may have the wrong status code.
2026-01-22T11:11:46.170+08:00 DEBUG --- [nio-8080-exec-6] c.a.a.a.s.a.s.JwtAuthenticationFilter    : JwtAuthenticationFilter#doFilterInternal - 设置用户认证: username=admin, roles=[ADMIN, USER]
2026-01-22T11:11:46.172+08:00  INFO --- [nio-8080-exec-6] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#loadAgent 加载 agent: research_agent
2026-01-22T11:11:46.172+08:00  INFO --- [nio-8080-exec-6] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#loadAgent 成功加载 agent: research_agent
2026-01-22T11:11:46.186+08:00 DEBUG --- [nio-8080-exec-6] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#beforeAgent - reason=checking unified intent
2026-01-22T11:11:46.187+08:00 DEBUG --- [nio-8080-exec-6] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#get - reason=session found, sessionId=b3a1c699-5bc5-42af-adb4-fdfb51a3143b, active=true
2026-01-22T11:11:46.187+08:00  INFO --- [nio-8080-exec-6] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#beforeAgent - reason=continuing param collection session (from store), sessionId=b3a1c699-5bc5-42af-adb4-fdfb51a3143b, userInput=2026-1-22 2026-1-23 类型 事假 理由 aa 审批人 25明天 类型 事假 理由 aa 审批人 25
2026-01-22T11:11:46.187+08:00  INFO --- [nio-8080-exec-6] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handleParamCollectionContinuation - reason=processing param input, sessionId=b3a1c699-5bc5-42af-adb4-fdfb51a3143b, actionId=oa:leave:request, userInput=2026-1-22 2026-1-23 类型 事假 理由 aa 审批人 25明天 类型 事假 理由 aa 审批人 25
2026-01-22T11:11:46.198+08:00  WARN --- [nio-8080-exec-6] c.a.a.a.p.p.c.ActionEntityConverter      : ActionEntityConverter#parseActionType - reason=unknown action type, type=INTERNAL
2026-01-22T11:11:51.572+08:00  INFO --- [nio-8080-exec-6] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handleParamCollectionContinuation - reason=LLM response, response=```json
{
  "extractedParams": {
    "start_date": "2026-01-22 00:00",
    "end_date": "2026-01-23 00:00",
    "types": "1",
    "reason": "aa",
    "check_uids": "25"
  },
  "missingParams": [],
  "nextQuestion": null
}
```
2026-01-22T11:11:51.572+08:00  INFO --- [nio-8080-exec-6] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handleParamCollectionContinuation - reason=params complete, executing action, actionId=oa:leave:request, params={end_date=2026-01-23 00:00, reason=aa, check_uids=25, types=1, start_date=2026-01-22 00:00}
2026-01-22T11:11:51.572+08:00 DEBUG --- [nio-8080-exec-6] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#close - reason=session closed, sessionId=b3a1c699-5bc5-42af-adb4-fdfb51a3143b
2026-01-22T11:11:51.572+08:00 DEBUG --- [nio-8080-exec-6] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#closeSession - reason=session closed, sessionId=b3a1c699-5bc5-42af-adb4-fdfb51a3143b
2026-01-22T11:11:51.572+08:00  INFO --- [nio-8080-exec-6] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handlePlanningDirectExecution - reason=direct execution, actionId=oa:leave:request
2026-01-22T11:11:51.573+08:00 DEBUG --- [nio-8080-exec-6] c.a.a.a.p.internal.DefaultPlanGenerator  : DefaultPlanGenerator#generate - reason=generating plan, actionId=oa:leave:request, actionName=提交OA请假申请
2026-01-22T11:11:51.576+08:00  INFO --- [nio-8080-exec-6] c.a.a.a.p.internal.DefaultPlanGenerator  : DefaultPlanGenerator#generate - reason=plan generated, planId=a3d90ea6-8375-4097-b5bd-f7859fd3cea5, stepCount=1
2026-01-22T11:11:51.576+08:00  INFO --- [nio-8080-exec-6] c.a.a.a.p.internal.DefaultPlanExecutor   : DefaultPlanExecutor#execute - reason=starting plan execution, planId=a3d90ea6-8375-4097-b5bd-f7859fd3cea5, actionId=oa:leave:request
2026-01-22T11:11:51.576+08:00 DEBUG --- [nio-8080-exec-6] c.a.a.a.p.internal.DefaultPlanExecutor   : DefaultPlanExecutor#executeSteps - reason=executing step, planId=a3d90ea6-8375-4097-b5bd-f7859fd3cea5, stepId=execute, stepIndex=0
2026-01-22T11:11:51.576+08:00 DEBUG --- [nio-8080-exec-6] c.a.a.a.p.i.e.ExecuteStepExecutor        : AbstractStepExecutor#execute - reason=executing step, stepId=execute, type=EXECUTE
2026-01-22T11:11:51.577+08:00 DEBUG --- [nio-8080-exec-6] c.a.a.a.p.i.e.ExecuteStepExecutor        : ExecuteStepExecutor#doExecute - reason=executing execute step, stepId=execute
2026-01-22T11:11:51.577+08:00  INFO --- [nio-8080-exec-6] c.a.a.a.p.i.e.ExecuteStepExecutor        : ExecuteStepExecutor#executeAction - reason=internal call, bean=oaSystemActionService, method=execute
2026-01-22T11:11:51.577+08:00  INFO --- [nio-8080-exec-6] c.a.a.a.p.i.e.ExecuteStepExecutor        : ExecuteStepExecutor#doExecute - reason=step executed successfully, stepId=execute
2026-01-22T11:11:51.577+08:00  INFO --- [nio-8080-exec-6] c.a.a.a.p.internal.DefaultPlanExecutor   : DefaultPlanExecutor#execute - reason=plan completed, planId=a3d90ea6-8375-4097-b5bd-f7859fd3cea5, stepCount=1
2026-01-22T11:11:51.579+08:00  INFO --- [nio-8080-exec-6] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#handlePlanningDirectExecution - reason=execution completed, planId=a3d90ea6-8375-4097-b5bd-f7859fd3cea5, success=true
2026-01-22T11:11:51.591+08:00 ERROR --- [nio-8080-exec-6] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] threw exception

org.springframework.security.authorization.AuthorizationDeniedException: Access Denied
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:99)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:91)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$4(HandlerMappingIntrospector.java:267)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:612)
	at org.apache.catalina.core.ApplicationDispatcher.doDispatch(ApplicationDispatcher.java:540)
	at org.apache.catalina.core.ApplicationDispatcher.dispatch(ApplicationDispatcher.java:511)
	at org.apache.catalina.core.AsyncContextImpl$AsyncRunnable.run(AsyncContextImpl.java:599)
	at org.apache.catalina.core.AsyncContextImpl.doInternalDispatch(AsyncContextImpl.java:342)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.asyncDispatch(CoyoteAdapter.java:239)
	at org.apache.coyote.AbstractProcessor.dispatch(AbstractProcessor.java:243)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:57)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)

2026-01-22T11:11:51.592+08:00 ERROR --- [nio-8080-exec-6] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Unable to handle the Spring Security Exception because the response is already committed.] with root cause

org.springframework.security.authorization.AuthorizationDeniedException: Access Denied
	at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:99)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
	at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:91)
	at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$4(HandlerMappingIntrospector.java:267)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:238)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:101)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:612)
	at org.apache.catalina.core.ApplicationDispatcher.doDispatch(ApplicationDispatcher.java:540)
	at org.apache.catalina.core.ApplicationDispatcher.dispatch(ApplicationDispatcher.java:511)
	at org.apache.catalina.core.AsyncContextImpl$AsyncRunnable.run(AsyncContextImpl.java:599)
	at org.apache.catalina.core.AsyncContextImpl.doInternalDispatch(AsyncContextImpl.java:342)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:165)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.asyncDispatch(CoyoteAdapter.java:239)
	at org.apache.coyote.AbstractProcessor.dispatch(AbstractProcessor.java:243)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:57)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1769)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1189)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:658)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)

2026-01-22T11:11:51.594+08:00 ERROR --- [nio-8080-exec-6] s.e.ErrorMvcAutoConfiguration$StaticView : Cannot render error page for request [null] as the response has already been committed. As a result, the response may have the wrong status code.
2026-01-22T11:16:56.804+08:00 DEBUG --- [session-cleanup] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#delete - reason=session deleted, sessionId=b3a1c699-5bc5-42af-adb4-fdfb51a3143b
2026-01-22T11:16:56.804+08:00  INFO --- [session-cleanup] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#cleanupExpiredSessions - reason=cleaned expired sessions, count=1
2026-01-22T14:33:52.461+08:00  INFO --- [           main] c.a.a.a.start.AssistantAgentApplication  : Starting AssistantAgentApplication using Java 21.0.9 with PID 10140 (D:\devfive\AssistantAgent\assistant-agent-start\target\classes started by zhou_ in D:\devfive\AssistantAgent\assistant-agent-start)
2026-01-22T14:33:52.463+08:00 DEBUG --- [           main] c.a.a.a.start.AssistantAgentApplication  : Running with Spring Boot v3.4.8, Spring v6.2.9
2026-01-22T14:33:52.464+08:00  INFO --- [           main] c.a.a.a.start.AssistantAgentApplication  : No active profile set, falling back to 1 default profile: "default"
2026-01-22T14:33:53.857+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Elasticsearch repositories in DEFAULT mode.
2026-01-22T14:33:53.891+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 24 ms. Found 0 Elasticsearch repository interfaces.
2026-01-22T14:33:53.897+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Reactive Elasticsearch repositories in DEFAULT mode.
2026-01-22T14:33:53.906+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 7 ms. Found 0 Reactive Elasticsearch repository interfaces.
2026-01-22T14:33:54.033+08:00  WARN --- [           main] o.m.s.mapper.ClassPathMapperScanner      : Skipping MapperFactoryBean with name 'learningRecordMapper' and 'com.alibaba.assistant.agent.start.persistence.learning.mapper.LearningRecordMapper' mapperInterface. Bean already defined with the same name!
2026-01-22T14:33:54.033+08:00  WARN --- [           main] o.m.s.mapper.ClassPathMapperScanner      : Skipping MapperFactoryBean with name 'triggerDefinitionMapper' and 'com.alibaba.assistant.agent.start.persistence.trigger.mapper.TriggerDefinitionMapper' mapperInterface. Bean already defined with the same name!
2026-01-22T14:33:54.034+08:00  WARN --- [           main] o.m.s.mapper.ClassPathMapperScanner      : Skipping MapperFactoryBean with name 'triggerExecutionRecordMapper' and 'com.alibaba.assistant.agent.start.persistence.trigger.mapper.TriggerExecutionRecordMapper' mapperInterface. Bean already defined with the same name!
2026-01-22T14:33:54.034+08:00  WARN --- [           main] o.m.s.mapper.ClassPathMapperScanner      : Skipping MapperFactoryBean with name 'actionRegistryMapper' and 'com.alibaba.assistant.agent.planning.persistence.mapper.ActionRegistryMapper' mapperInterface. Bean already defined with the same name!
2026-01-22T14:33:55.270+08:00  INFO --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2026-01-22T14:33:55.288+08:00  INFO --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2026-01-22T14:33:55.288+08:00  INFO --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.43]
2026-01-22T14:33:55.383+08:00  INFO --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2026-01-22T14:33:55.384+08:00  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2858 ms
2026-01-22T14:33:55.408+08:00  INFO --- [           main] c.a.a.a.s.a.security.JwtTokenProvider    : JwtTokenProvider#init - JWT 密钥已初始化
2026-01-22T14:33:55.465+08:00 DEBUG --- [           main] c.a.a.a.s.a.s.JwtAuthenticationFilter    : Filter 'jwtAuthenticationFilter' configured for use
2026-01-22T14:33:55.805+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#init - reason=search extension framework is enabled
2026-01-22T14:33:55.807+08:00  INFO --- [           main] c.a.a.a.s.s.MockBaiduWebSearchProvider   : MockBaiduWebSearchProvider#init - reason=使用简单模式初始化
2026-01-22T14:33:55.810+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#unifiedSearchCodeactTool - reason=创建统一搜索工具, providerCount=3
2026-01-22T14:33:55.856+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#init - reason=planning extension is enabled
2026-01-22T14:33:55.859+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#init - reason=ES configuration class loaded (elasticsearch.enabled=true)
2026-01-22T14:33:55.862+08:00  INFO --- [           main] toConfiguration$MybatisPlusConfiguration : MybatisPlusConfiguration#init - reason=MySQL configuration class loaded (mysql.enabled=true, MyBatisPlus present)
2026-01-22T14:33:55.900+08:00  INFO --- [           main] toConfiguration$MybatisPlusConfiguration : MybatisPlusConfiguration#actionEntityConverter - reason=creating entity converter
2026-01-22T14:33:55.901+08:00  INFO --- [           main] toConfiguration$MybatisPlusConfiguration : MybatisPlusConfiguration#mybatisPlusActionRepository - reason=ActionRegistryMapper found, creating MySQL repository
2026-01-22T14:33:56.414+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#actionVectorizationService - reason=creating ES vectorization service
2026-01-22T14:33:56.502+08:00  INFO --- [           main] c.a.a.a.p.v.ActionVectorizationService   : ActionVectorizationService#init - reason=ES index initialized on startup
2026-01-22T14:33:56.518+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#semanticActionProvider - reason=creating semantic action provider, semanticWeight=0.6, keywordWeight=0.4, matchThreshold=0.5
2026-01-22T14:33:56.521+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#defaultPlanGenerator - reason=creating default plan generator
2026-01-22T14:33:56.524+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#planActionCodeactTool - reason=creating plan_action tool
2026-01-22T14:33:56.528+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#queryStepExecutor - reason=creating query step executor
2026-01-22T14:33:56.529+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#inputStepExecutor - reason=creating input step executor
2026-01-22T14:33:56.531+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#executeStepExecutor - reason=creating execute step executor
2026-01-22T14:33:56.534+08:00  INFO --- [           main] f.a.AutowiredAnnotationBeanPostProcessor : Inconsistent constructor declaration on bean with name 'actionExecutorFactory': single autowire-marked constructor flagged as optional - this constructor is effectively required since there is no default constructor to fall back to: public com.alibaba.assistant.agent.planning.executor.ActionExecutorFactory(java.util.List,com.alibaba.assistant.agent.planning.permission.interceptor.PermissionInterceptor)
2026-01-22T14:33:56.535+08:00  INFO --- [           main] .a.a.a.p.c.ParamOptionsAutoConfiguration : ParamOptionsAutoConfiguration - Parameter options module initialized
2026-01-22T14:33:56.537+08:00  INFO --- [           main] .a.a.a.p.c.ParamOptionsAutoConfiguration : ParamOptionsAutoConfiguration - Creating RestTemplate for HTTP handlers
2026-01-22T14:33:56.545+08:00  INFO --- [           main] c.a.a.a.planning.executor.HttpExecutor   : HttpExecutor#init - initialized
2026-01-22T14:33:56.546+08:00  INFO --- [           main] c.a.a.a.p.executor.InternalExecutor      : InternalExecutor#init - initialized
2026-01-22T14:33:56.553+08:00  INFO --- [           main] c.a.a.a.p.p.a.PermissionAdapterRegistry  : PermissionAdapterRegistry#registerAdapter - registered adapter: system=gov-platform, name=政务服务平台权限适配器
2026-01-22T14:33:56.553+08:00  INFO --- [           main] c.a.a.a.p.p.a.PermissionAdapterRegistry  : PermissionAdapterRegistry#registerAdapter - registered adapter: system=oa-system, name=OA办公系统权限适配器
2026-01-22T14:33:56.553+08:00  INFO --- [           main] c.a.a.a.p.p.a.PermissionAdapterRegistry  : PermissionAdapterRegistry initialized with 2 adapters: [gov-platform, oa-system]
2026-01-22T14:33:56.555+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U001, system=oa-system, externalUser=zhang.san@company.com
2026-01-22T14:33:56.556+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U001, system=gov-platform, externalUser=320102199001011234
2026-01-22T14:33:56.556+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U002, system=oa-system, externalUser=li.si@company.com
2026-01-22T14:33:56.556+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U003, system=oa-system, externalUser=wang.wu@company.com
2026-01-22T14:33:56.556+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U003, system=gov-platform, externalUser=leader_001
2026-01-22T14:33:56.557+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U004, system=gov-platform, externalUser=staff_001
2026-01-22T14:33:56.557+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U005, system=oa-system, externalUser=sun.qi@company.com
2026-01-22T14:33:56.557+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService initialized with demo data
2026-01-22T14:33:56.560+08:00  INFO --- [           main] c.a.a.a.p.c.PermissionAutoConfiguration  : PermissionAutoConfiguration - creating PermissionInterceptor
2026-01-22T14:33:56.561+08:00  INFO --- [           main] c.a.a.a.p.e.ActionExecutorFactory        : ActionExecutorFactory#init - initialized executors: INTERNAL(InternalExecutor), HTTP(HttpExecutor), DATA_AGENT(DataAgentExecutor), MCP(McpExecutor)
2026-01-22T14:33:56.561+08:00  INFO --- [           main] c.a.a.a.p.e.ActionExecutorFactory        : ActionExecutorFactory#init - permission interceptor enabled
2026-01-22T14:33:56.562+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#apiCallStepExecutor - reason=creating api call step executor
2026-01-22T14:33:56.566+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#validationStepExecutor - reason=creating validation step executor
2026-01-22T14:33:56.568+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#stepExecutorRegistry - reason=creating executor registry, executorCount=5
2026-01-22T14:33:56.569+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=QUERY, executorClass=QueryStepExecutor
2026-01-22T14:33:56.569+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=INPUT, executorClass=InputStepExecutor
2026-01-22T14:33:56.569+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=EXECUTE, executorClass=ExecuteStepExecutor
2026-01-22T14:33:56.569+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=API_CALL, executorClass=ApiCallStepExecutor
2026-01-22T14:33:56.569+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=VALIDATION, executorClass=ValidationStepExecutor
2026-01-22T14:33:56.570+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#defaultPlanExecutor - reason=creating default plan executor
2026-01-22T14:33:56.573+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#executeActionCodeactTool - reason=creating execute_action tool
2026-01-22T14:33:56.575+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#listActionsCodeactTool - reason=creating list_actions tool
2026-01-22T14:33:56.577+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#getActionDetailsCodeactTool - reason=creating get_action_details tool
2026-01-22T14:33:56.579+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#executeSystemActionCodeactTool - reason=creating execute_system_action tool
2026-01-22T14:33:56.659+08:00  INFO --- [           main] c.a.a.a.start.config.PersistenceConfig   : PersistenceConfig#init - reason=persistence configuration loaded
2026-01-22T14:33:56.662+08:00  INFO --- [           main] c.a.a.a.start.config.PersistenceConfig   : PersistenceConfig#elasticsearchExperienceProvider - reason=creating Elasticsearch experience provider (PRIMARY), indexName=experiences
2026-01-22T14:33:56.667+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#<init> - reason=初始化默认评估套件配置, experienceProviderAvailable=true
2026-01-22T14:33:56.670+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#evaluatorRegistry - reason=创建 EvaluatorRegistry Bean
2026-01-22T14:33:56.671+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'llm-based' of type LLMBasedEvaluator
2026-01-22T14:33:56.672+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'passthrough' of type RuleBasedEvaluator
2026-01-22T14:33:56.674+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'react_experience_evaluator' of type RuleBasedEvaluator
2026-01-22T14:33:56.674+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createDefaultEvaluatorRegistry - reason=注册 React 阶段经验检索评估器
2026-01-22T14:33:56.674+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'codeact_experience_evaluator' of type RuleBasedEvaluator
2026-01-22T14:33:56.674+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createDefaultEvaluatorRegistry - reason=注册 CodeAct 阶段经验检索评估器
2026-01-22T14:33:56.675+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#evaluationService - reason=创建默认 EvaluationService, sharedRegistryEvaluators=[llm-based, passthrough, codeact_experience_evaluator, react_experience_evaluator]
2026-01-22T14:33:56.676+08:00 DEBUG --- [           main] c.a.a.a.e.e.GraphBasedEvaluationExecutor : Created default ExecutorService for batch processing
2026-01-22T14:33:56.677+08:00  INFO --- [           main] .c.ExperienceEvaluationCriterionProvider : ExperienceEvaluationCriterionProvider#<init> - reason=初始化经验评估 Criterion 提供者
2026-01-22T14:33:56.681+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#structuredParamExtractor - reason=creating structured param extractor
2026-01-22T14:33:56.694+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#parameterValidator - reason=creating parameter validator
2026-01-22T14:33:56.695+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#sessionProvider - reason=creating in-memory session provider
2026-01-22T14:33:56.696+08:00  INFO --- [           main] c.a.a.a.p.s.InMemorySessionProvider      : InMemorySessionProvider#init - initialized
2026-01-22T14:33:56.698+08:00  INFO --- [           main] c.a.a.a.p.s.ParamCollectionService       : ParamCollectionService#init - sessionProvider=InMemory
2026-01-22T14:33:56.699+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'action_intent_evaluator' of type ActionIntentEvaluator
2026-01-22T14:33:56.700+08:00  INFO --- [           main] p.i.PlanningIntegrationAutoConfiguration : PlanningIntegrationAutoConfiguration#actionIntentEvaluator - initialized and registered, paramCollection=true, llmVerification=true, maxCandidates=5
2026-01-22T14:33:56.700+08:00  INFO --- [           main] .p.i.PlanningEvaluationCriterionProvider : PlanningEvaluationCriterionProvider#init - initialized, llmVerificationEnabled=true
2026-01-22T14:33:56.701+08:00  INFO --- [           main] p.i.PlanningIntegrationAutoConfiguration : PlanningIntegrationAutoConfiguration#planningEvaluationCriterionProvider - registered planning evaluation criterion provider
2026-01-22T14:33:56.701+08:00  INFO --- [           main] .c.ExperienceEvaluationCriterionProvider : ExperienceEvaluationCriterionProvider#getReactPhaseCriteria - reason=提供 React 阶段评估 Criteria
2026-01-22T14:33:56.703+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createReactPhaseSuite - reason=添加自定义 Criterion, provider=ExperienceEvaluationCriterionProvider, count=3
2026-01-22T14:33:56.704+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createReactPhaseSuite - reason=添加自定义 Criterion, provider=PlanningEvaluationCriterionProvider, count=2
2026-01-22T14:33:56.706+08:00  INFO --- [           main] a.a.e.a.BatchAggregationStrategyRegistry : Registered batch aggregation strategy: ANY_TRUE
2026-01-22T14:33:56.707+08:00  INFO --- [           main] a.a.e.a.BatchAggregationStrategyRegistry : Registered batch aggregation strategy: ALL_TRUE
2026-01-22T14:33:56.744+08:00  INFO --- [           main] c.a.c.a.g.internal.node.ParallelNode     : Calculated core pool size: 32 (CPU cores: 16)
2026-01-22T14:33:56.744+08:00  INFO --- [           main] c.a.c.a.g.internal.node.ParallelNode     : Calculated maximum pool size: 64 (CPU cores: 16)
2026-01-22T14:33:56.744+08:00  INFO --- [           main] c.a.c.a.g.internal.node.ParallelNode     : Calculated queue capacity: 1000
2026-01-22T14:33:56.745+08:00  INFO --- [           main] c.a.a.a.e.DefaultEvaluationService       : Registered evaluation suite: react-phase-suite
2026-01-22T14:33:56.745+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#evaluationService - reason=注册 React Phase Suite, suiteId=react-phase-suite
2026-01-22T14:33:56.745+08:00  INFO --- [           main] .c.ExperienceEvaluationCriterionProvider : ExperienceEvaluationCriterionProvider#getCodeActPhaseCriteria - reason=提供 CodeAct 阶段评估 Criteria
2026-01-22T14:33:56.746+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createCodeActPhaseSuite - reason=添加自定义 Criterion, provider=ExperienceEvaluationCriterionProvider, count=3
2026-01-22T14:33:56.746+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createCodeActPhaseSuite - reason=添加自定义 Criterion, provider=PlanningEvaluationCriterionProvider, count=2
2026-01-22T14:33:56.746+08:00  INFO --- [           main] a.a.e.a.BatchAggregationStrategyRegistry : Registered batch aggregation strategy: ANY_TRUE
2026-01-22T14:33:56.746+08:00  INFO --- [           main] a.a.e.a.BatchAggregationStrategyRegistry : Registered batch aggregation strategy: ALL_TRUE
2026-01-22T14:33:56.746+08:00  INFO --- [           main] c.a.a.a.e.DefaultEvaluationService       : Registered evaluation suite: codeact-phase-suite
2026-01-22T14:33:56.747+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#evaluationService - reason=注册 CodeAct Phase Suite, suiteId=codeact-phase-suite
2026-01-22T14:33:56.749+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#codeactEvaluationContextFactory - reason=创建 EvaluationContextFactory
2026-01-22T14:33:56.750+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#codeactEvaluationResultAttacher - reason=创建 EvaluationResultAttacher
2026-01-22T14:33:56.755+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#reactPhaseEvaluationHooks - reason=创建 React Phase ModelInputEvaluationHook
2026-01-22T14:33:56.757+08:00  INFO --- [           main] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#<init> - reason=初始化, phase=REACT, providerCount=1
2026-01-22T14:33:56.757+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#reactPhaseEvaluationHooks - reason=创建 React Phase EvaluationPromptInjectionHook, providersCount=2
2026-01-22T14:33:56.759+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#codeactPhaseEvaluationHooks - reason=创建 CodeAct Phase ModelInputEvaluationHook
2026-01-22T14:33:56.759+08:00  INFO --- [           main] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#<init> - reason=初始化, phase=CODEACT, providerCount=1
2026-01-22T14:33:56.759+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#codeactPhaseEvaluationHooks - reason=创建 CodeAct Phase EvaluationPromptInjectionHook, providersCount=2
2026-01-22T14:33:56.761+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#keywordMatcher - reason=creating keyword matcher
2026-01-22T14:33:56.765+08:00  INFO --- [           main] .ParamCollectionSessionAutoConfiguration : ParamCollectionSessionAutoConfiguration#inMemoryParamCollectionSessionStore - reason=creating in-memory session store (Redis not available), ttl=PT30M
2026-01-22T14:33:56.765+08:00  WARN --- [           main] .ParamCollectionSessionAutoConfiguration : ParamCollectionSessionAutoConfiguration#inMemoryParamCollectionSessionStore - reason=WARNING: In-memory session store is not suitable for distributed environment!
2026-01-22T14:33:56.766+08:00  INFO --- [           main] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#<init> - reason=initialized, defaultTtl=PT30M
2026-01-22T14:33:56.766+08:00  WARN --- [           main] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#<init> - reason=WARNING: Using in-memory session store, not suitable for distributed environment!
2026-01-22T14:33:56.770+08:00  INFO --- [           main] iguration$UnifiedIntentHookConfiguration : UnifiedIntentHookConfiguration#unifiedIntentRecognitionHook - reason=creating unified intent hook, experienceProviderPresent=true, chatModelPresent=true, sessionStorePresent=true, directExecuteThreshold=0.95, hintThreshold=0.5
2026-01-22T14:33:56.873+08:00  INFO --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2026-01-22T14:33:57.093+08:00  INFO --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@3fb42ec7
2026-01-22T14:33:57.095+08:00  INFO --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2026-01-22T14:33:57.225+08:00  WARN --- [           main] c.a.a.a.p.p.c.ActionEntityConverter      : ActionEntityConverter#parseActionType - reason=unknown action type, type=INTERNAL
2026-01-22T14:33:57.248+08:00 DEBUG --- [           main] c.a.a.a.planning.intent.KeywordMatcher   : KeywordMatcher#registerAction - actionId=oa:leave:request, keywords=57
2026-01-22T14:33:57.248+08:00  INFO --- [           main] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#initKeywordMatcher - reason=initialized, actionCount=1, keywordIndexSize=57
2026-01-22T14:33:57.253+08:00  INFO --- [           main] c.a.a.a.start.config.PersistenceConfig   : PersistenceConfig#elasticsearchExperienceRepository - reason=creating Elasticsearch experience repository (PRIMARY), indexName=experiences
2026-01-22T14:33:57.260+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#init - reason=reply module enabled
2026-01-22T14:33:57.262+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactToolFactory - reason=创建CodeactTool工厂, channels=1
2026-01-22T14:33:57.262+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#init - reason=工厂初始化完成, channels=1
2026-01-22T14:33:57.272+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=开始创建Reply工具
2026-01-22T14:33:57.276+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#createTools - reason=创建工具成功, toolName=send_success_message, channelCode=IDE_TEXT
2026-01-22T14:33:57.276+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#createTools - reason=创建工具成功, toolName=send_error_message, channelCode=IDE_TEXT
2026-01-22T14:33:57.277+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#createTools - reason=创建工具成功, toolName=send_notification, channelCode=IDE_TEXT
2026-01-22T14:33:57.277+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#createTools - reason=工具创建完成, totalCount=3
2026-01-22T14:33:57.277+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=Reply工具创建完成, count=3
2026-01-22T14:33:57.277+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=创建Reply工具, index=1, name=send_success_message, description=Send a success message to the IDE console
2026-01-22T14:33:57.277+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=创建Reply工具, index=2, name=send_error_message, description=Send an error message to the IDE console
2026-01-22T14:33:57.277+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=创建Reply工具, index=3, name=send_notification, description=Send a notification message
2026-01-22T14:33:57.278+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactToolFactory - reason=创建SearchCodeactTool工厂, providerCount=3
2026-01-22T14:33:57.304+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactToolFactory - reason=创建TriggerCodeactTool工厂
2026-01-22T14:33:57.305+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=开始创建Trigger工具
2026-01-22T14:33:57.306+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=创建SubscribeTriggerCodeactTool成功
2026-01-22T14:33:57.308+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=创建UnsubscribeTriggerCodeactTool成功
2026-01-22T14:33:57.308+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=创建ListTriggersCodeactTool成功
2026-01-22T14:33:57.309+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=创建GetTriggerDetailCodeactTool成功
2026-01-22T14:33:57.310+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=触发器工具创建完成, count=4
2026-01-22T14:33:57.310+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=Trigger工具创建完成, count=4
2026-01-22T14:33:57.310+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=创建Trigger工具, index=1, name=subscribe_trigger, description=创建并订阅一个新的触发器
2026-01-22T14:33:57.310+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=创建Trigger工具, index=2, name=unsubscribe_trigger, description=取消订阅并删除一个触发器
2026-01-22T14:33:57.310+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=创建Trigger工具, index=3, name=list_triggers, description=列出所有触发器
2026-01-22T14:33:57.310+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=创建Trigger工具, index=4, name=get_trigger_detail, description=获取指定触发器的详细信息
2026-01-22T14:33:57.317+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#planningCodeactTools - reason=creating planning tools list
2026-01-22T14:33:57.318+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#planningCodeactTools - reason=created planning tools, count=5
2026-01-22T14:33:57.325+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=创建 CodeactAgent
2026-01-22T14:33:57.325+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=配置 MemorySaver 以支持多轮对话上下文保持
2026-01-22T14:33:57.325+08:00  WARN --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=临时禁用 streaming 模式以排查循环问题
2026-01-22T14:33:57.325+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加UnifiedSearchCodeactTool
2026-01-22T14:33:57.329+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockBaiduWebSearchProvider, toolName=search_web
2026-01-22T14:33:57.330+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockKnowledgeStoreSearchProvider, toolName=search_knowledge
2026-01-22T14:33:57.332+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockProjectContextSearchProvider, toolName=search_project
2026-01-22T14:33:57.333+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=搜索工具创建完成, totalCount=3
2026-01-22T14:33:57.333+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加SearchCodeactTools, count=3
2026-01-22T14:33:57.333+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加ReplyCodeactTools, count=3
2026-01-22T14:33:57.333+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加TriggerCodeactTools, count=4
2026-01-22T14:33:57.333+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加PlanningCodeactTools, count=5
2026-01-22T14:33:57.333+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#createMcpDynamicTools - reason=Creating MCP dynamic tools
2026-01-22T14:33:57.335+08:00  INFO --- [           main] c.a.a.a.e.d.mcp.McpDynamicToolFactory    : McpDynamicToolFactory#createTools - reason=开始创建MCP动态工具
2026-01-22T14:33:57.338+08:00  INFO --- [           main] c.a.a.a.e.d.mcp.McpDynamicToolFactory    : McpDynamicToolFactory#createTools - reason=无可用的MCP工具
2026-01-22T14:33:57.338+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#createMcpDynamicTools - reason=MCP dynamic tools created, count=0
2026-01-22T14:33:57.338+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=Added MCP dynamic tools, count=0
2026-01-22T14:33:57.338+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#createHttpDynamicTools - reason=HTTP dynamic tools disabled by default
2026-01-22T14:33:57.338+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=合并后CodeactTool总数, count=16
2026-01-22T14:33:57.338+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=React阶段使用内置工具(write_code, execute_code, write_condition_code)
2026-01-22T14:33:57.338+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=注入 React Phase 评估 Hooks, count=2
2026-01-22T14:33:57.338+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=注入 CodeAct Phase 评估 Hooks, count=2
2026-01-22T14:33:57.338+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=已准备注入UnifiedIntentRecognitionHook
2026-01-22T14:33:57.340+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 开始构建CodeactAgent
2026-01-22T14:33:57.342+08:00  INFO --- [           main] .a.a.a.c.t.s.DefaultReturnSchemaRegistry : DefaultReturnSchemaRegistry#<init> - reason=创建新实例, hashCode=547525391
2026-01-22T14:33:57.343+08:00 DEBUG --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#<init> - reason=创建注册表, returnSchemaRegistry=DefaultReturnSchemaRegistry
2026-01-22T14:33:57.343+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=创建默认CodeactToolRegistry
2026-01-22T14:33:57.343+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=开始注册CodeactTool, count=16
2026-01-22T14:33:57.344+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=unified_search
2026-01-22T14:33:57.344+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=unified_search
2026-01-22T14:33:57.344+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=search_web
2026-01-22T14:33:57.344+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=search_web
2026-01-22T14:33:57.344+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=search_knowledge
2026-01-22T14:33:57.344+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=search_knowledge
2026-01-22T14:33:57.344+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=search_project
2026-01-22T14:33:57.344+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=search_project
2026-01-22T14:33:57.344+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=send_success_message
2026-01-22T14:33:57.344+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=send_success_message
2026-01-22T14:33:57.344+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=send_error_message
2026-01-22T14:33:57.344+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=send_error_message
2026-01-22T14:33:57.344+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=send_notification
2026-01-22T14:33:57.344+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=send_notification
2026-01-22T14:33:57.344+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=subscribe_trigger
2026-01-22T14:33:57.344+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=subscribe_trigger
2026-01-22T14:33:57.344+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=unsubscribe_trigger
2026-01-22T14:33:57.344+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=unsubscribe_trigger
2026-01-22T14:33:57.344+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=list_triggers
2026-01-22T14:33:57.344+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=list_triggers
2026-01-22T14:33:57.344+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=get_trigger_detail
2026-01-22T14:33:57.345+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=get_trigger_detail
2026-01-22T14:33:57.347+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=plan_action
2026-01-22T14:33:57.347+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=plan_action
2026-01-22T14:33:57.347+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=execute_action
2026-01-22T14:33:57.348+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=execute_action
2026-01-22T14:33:57.348+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=list_actions
2026-01-22T14:33:57.348+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=list_actions
2026-01-22T14:33:57.349+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=get_action_details
2026-01-22T14:33:57.349+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=get_action_details
2026-01-22T14:33:57.349+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=execute_system_action
2026-01-22T14:33:57.349+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=execute_system_action
2026-01-22T14:33:57.349+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册完成, count=16
2026-01-22T14:33:57.350+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 创建默认CodeContext: language=PYTHON
2026-01-22T14:33:57.351+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 创建默认RuntimeEnvironmentManager: language=PYTHON
2026-01-22T14:33:57.352+08:00 DEBUG --- [           main] c.a.a.a.c.e.bridge.AgentToolBridge       : AgentToolBridge#<init> 初始化: 注册了0个工具
2026-01-22T14:33:57.353+08:00 DEBUG --- [           main] c.a.a.a.c.executor.bridge.StateBridge    : StateBridge#<init> 初始化完成
2026-01-22T14:33:57.353+08:00  INFO --- [           main] c.a.a.a.core.executor.GraalCodeExecutor  : GraalCodeExecutor#<init> 初始化完成: language=PYTHON, allowIO=false, timeout=30000ms, executableTools=true, customBridgeFactory=false
2026-01-22T14:33:57.353+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#createCodeactSubAgentInterceptor 创建子Agent拦截器
2026-01-22T14:33:57.357+08:00  INFO --- [           main] c.a.a.a.a.subagent.CodeactSubAgent       : CodeactSubAgent#<init> 初始化: name=code-generator
2026-01-22T14:33:57.357+08:00  INFO --- [           main] c.a.a.a.a.subagent.CodeactSubAgent       : CodeactSubAgent#<init> 初始化: name=condition-code-generator
2026-01-22T14:33:57.357+08:00  INFO --- [           main] c.a.a.a.a.s.CodeactSubAgentInterceptor   : CodeactSubAgentInterceptor#<init> 创建默认代码生成子Agent
2026-01-22T14:33:57.509+08:00  INFO --- [           main] c.a.a.a.a.s.CodeactSubAgentInterceptor   : CodeactSubAgentInterceptor#<init> 初始化完成: subAgentCount=2
2026-01-22T14:33:57.511+08:00  INFO --- [           main] c.a.a.a.a.tools.ExecuteCodeTool          : ExecuteCodeTool#<init> 初始化完成
2026-01-22T14:33:57.514+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 拦截器分类完成: modelInterceptors=1, toolInterceptors=0
2026-01-22T14:33:57.514+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 从拦截器提取工具: interceptor=CodeactSubAgent, toolCount=2
2026-01-22T14:33:57.524+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 工具收集完成: interceptorTools=2, regularTools=3, total=6
2026-01-22T14:33:57.525+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 设置ModelInterceptors到LlmNode: count=1
2026-01-22T14:33:57.526+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build CodeactAgent构建完成
2026-01-22T14:33:57.526+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=开始罗列已注册的工具
2026-01-22T14:33:57.526+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct阶段工具数量, count=16
2026-01-22T14:33:57.526+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=1, name=send_success_message, description=Send a success message to the IDE console
2026-01-22T14:33:57.526+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=2, name=get_trigger_detail, description=获取指定触发器的详细信息
2026-01-22T14:33:57.526+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=3, name=get_action_details, description=获取指定动作的完整定义，包括参数、步骤等详细信息。
2026-01-22T14:33:57.526+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=4, name=search_project, description=搜索项目上下文信息，包括代码、配置、文档等
2026-01-22T14:33:57.526+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=5, name=subscribe_trigger, description=创建并订阅一个新的触发器
2026-01-22T14:33:57.526+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=6, name=search_knowledge, description=搜索团队知识库，包括FAQ、规范、最佳实践等
2026-01-22T14:33:57.526+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=7, name=unified_search, description=统一搜索工具，可同时搜索项目、知识库、Web等多个数据源
2026-01-22T14:33:57.526+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=8, name=unsubscribe_trigger, description=取消订阅并删除一个触发器
2026-01-22T14:33:57.526+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=9, name=search_web, description=执行Web搜索，获取公开互联网信息
2026-01-22T14:33:57.526+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=10, name=list_actions, description=列出所有可用的动作，支持按分类和标签筛选。
2026-01-22T14:33:57.526+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=11, name=plan_action, description=根据用户输入匹配动作并生成执行计划。返回匹配的动作列表和生成的执行计划。
2026-01-22T14:33:57.526+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=12, name=execute_system_action, description=执行系统Action（如OA请假、ERP操作等）。根据action_id调用相应的系统Handler。
2026-01-22T14:33:57.526+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=13, name=send_error_message, description=Send an error message to the IDE console
2026-01-22T14:33:57.526+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=14, name=execute_action, description=执行指定的执行计划，返回执行结果。支持继续执行等待用户输入的计划。
2026-01-22T14:33:57.526+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=15, name=send_notification, description=Send a notification message
2026-01-22T14:33:57.527+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=16, name=list_triggers, description=列出所有触发器
2026-01-22T14:33:57.527+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React阶段工具数量, count=6
2026-01-22T14:33:57.527+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=1, name=write_code, description=Generate and register a new function with specified name and parameters. IMPORTANT: You MUST provide both 'functionName' and 'parameters' fields. Example: write_code(requirement='calculate sum', functionName='calculate_sum', parameters=['a', 'b'])
2026-01-22T14:33:57.527+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=2, name=write_condition_code, description=Generate and register a condition check function for triggers. This function MUST return a boolean value (True/False). Example: write_condition_code(requirement='check if it is a working day', functionName='check_is_working_day', parameters=['date'])
2026-01-22T14:33:57.527+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=3, name=send_success_message, description=Send a success message to the IDE console
2026-01-22T14:33:57.527+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=4, name=send_error_message, description=Send an error message to the IDE console
2026-01-22T14:33:57.527+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=5, name=send_notification, description=Send a notification message
2026-01-22T14:33:57.527+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=6, name=execute_code, description=Execute a previously generated function by its exact name with matching parameters. CRITICAL: The functionName MUST exactly match the name used in write_code. The 'args' parameter names MUST exactly match the 'parameters' specified in write_code. Example: If you called write_code with functionName='calculate_sum' and parameters=['a', 'b'], then you must call execute_code with functionName='calculate_sum' and args={'a': 10, 'b': 20}. Parameter value types supported: String, Number, Boolean, List, Map/Object.
2026-01-22T14:33:57.527+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=工具罗列完成
2026-01-22T14:33:57.529+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgent#<init> 初始化完成: language=PYTHON
2026-01-22T14:33:57.534+08:00  INFO --- [           main] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#<init> 初始化 Agent 加载器
2026-01-22T14:33:57.554+08:00 DEBUG --- [           main] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#<init> Agent 图结构:
@startuml CodeactAgent
skinparam usecaseFontSize 14
skinparam usecaseStereotypeFontSize 12
skinparam hexagonFontSize 14
skinparam hexagonStereotypeFontSize 12
title "CodeactAgent"
footer

powered by spring-ai-alibaba
end footer
circle start<<input>> as __START__
circle stop as __END__
usecase "_AGENT_MODEL_"<<Node>>
usecase "_AGENT_TOOL_"<<Node>>
usecase "_AGENT_HOOK_UnifiedIntentRecognitionHook.before"<<Node>>
usecase "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"<<Node>>
usecase "_AGENT_HOOK_EvaluationPromptInjectionHook-REACT.beforeModel"<<Node>>
hexagon "check state" as condition1<<Condition>>
hexagon "check state" as condition2<<Condition>>
hexagon "check state" as condition3<<Condition>>
"__START__" -down-> "_AGENT_HOOK_UnifiedIntentRecognitionHook.before"
"_AGENT_HOOK_UnifiedIntentRecognitionHook.before" .down.> "condition1"
"condition1" .down.> "__END__"
'"_AGENT_HOOK_UnifiedIntentRecognitionHook.before" .down.> "__END__"
"condition1" .down.> "_AGENT_TOOL_"
'"_AGENT_HOOK_UnifiedIntentRecognitionHook.before" .down.> "_AGENT_TOOL_"
"condition1" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
'"_AGENT_HOOK_UnifiedIntentRecognitionHook.before" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
"_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel" -down-> "_AGENT_HOOK_EvaluationPromptInjectionHook-REACT.beforeModel"
"_AGENT_HOOK_EvaluationPromptInjectionHook-REACT.beforeModel" -down-> "_AGENT_MODEL_"
"_AGENT_MODEL_" .down.> "condition2"
"condition2" .down.> "__END__"
'"_AGENT_MODEL_" .down.> "__END__"
"condition2" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
'"_AGENT_MODEL_" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
"condition2" .down.> "_AGENT_TOOL_"
'"_AGENT_MODEL_" .down.> "_AGENT_TOOL_"
"_AGENT_TOOL_" .down.> "condition3"
"condition3" .down.> "__END__"
'"_AGENT_TOOL_" .down.> "__END__"
"condition3" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
'"_AGENT_TOOL_" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
@enduml

2026-01-22T14:33:57.554+08:00  INFO --- [           main] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#<init> 已注册 agent: grayscale_agent
2026-01-22T14:33:57.567+08:00  INFO --- [           main] .a.a.a.p.c.ParamOptionsAutoConfiguration : ParamOptionsAutoConfiguration - Creating OptionsCache with TTL: 300000ms
2026-01-22T14:33:57.568+08:00  INFO --- [           main] a.a.a.p.s.DefaultParameterOptionsService : DefaultParameterOptionsService initialized with 3 handlers
2026-01-22T14:33:57.575+08:00  INFO --- [           main] c.a.a.a.planning.system.OaSystemHandler  : OaSystemHandler#init - initialized
2026-01-22T14:33:57.588+08:00 DEBUG --- [           main] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#listAgents 列出所有 agent
2026-01-22T14:33:57.588+08:00  INFO --- [           main] c.a.c.a.a.s.controller.AgentController   : AgentController initialized with 1 dynamic agents: [grayscale_agent]
2026-01-22T14:33:57.652+08:00  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: 431b8d45-c8c2-4ebc-a488-2a794cb47124

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2026-01-22T14:33:57.671+08:00  INFO --- [           main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2026-01-22T14:33:57.990+08:00  INFO --- [           main] e.e.c.CodeactEvaluationAutoConfiguration : CodeactEvaluationAutoConfiguration#inputRoutingEvaluationHook - reason=创建输入路由评估 Hook
2026-01-22T14:33:57.992+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchFacade - reason=creating search facade with 3 providers
2026-01-22T14:33:57.993+08:00  INFO --- [           main] c.a.a.a.e.s.i.DefaultSearchFacade        : DefaultSearchFacade#init - reason=initialized with 3 providers
2026-01-22T14:33:57.994+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=开始创建Search工具
2026-01-22T14:33:57.995+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockBaiduWebSearchProvider, toolName=search_web
2026-01-22T14:33:57.996+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockKnowledgeStoreSearchProvider, toolName=search_knowledge
2026-01-22T14:33:57.997+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockProjectContextSearchProvider, toolName=search_project
2026-01-22T14:33:57.997+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=搜索工具创建完成, totalCount=3
2026-01-22T14:33:57.997+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=Search工具创建完成, count=3
2026-01-22T14:33:57.997+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=创建Search工具, index=1, name=search_web, description=执行Web搜索，获取公开互联网信息
2026-01-22T14:33:57.997+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=创建Search工具, index=2, name=search_knowledge, description=搜索团队知识库，包括FAQ、规范、最佳实践等
2026-01-22T14:33:57.997+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=创建Search工具, index=3, name=search_project, description=搜索项目上下文信息，包括代码、配置、文档等
2026-01-22T14:33:58.001+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#diagnostics - reason=ElasticsearchClient bean found
2026-01-22T14:33:58.001+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#diagnostics - reason=EmbeddingModel bean found
2026-01-22T14:33:58.002+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#diagnostics - Planning module status:
2026-01-22T14:33:58.002+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration :   - ActionRepository: MybatisPlusActionRepository
2026-01-22T14:33:58.002+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration :   - ActionProvider: SemanticActionProvider
2026-01-22T14:33:58.002+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration :   - PlanGenerator: DefaultPlanGenerator
2026-01-22T14:33:58.002+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration :   - PlanExecutor: DefaultPlanExecutor
2026-01-22T14:33:58.130+08:00  INFO --- [           main] c.a.a.a.c.c.CodeactCoreAutoConfiguration : CodeactCoreAutoConfiguration#returnSchemaRegistry - reason=创建ReturnSchemaRegistry单例Bean
2026-01-22T14:33:58.130+08:00  INFO --- [           main] .a.a.a.c.t.s.DefaultReturnSchemaRegistry : DefaultReturnSchemaRegistry#<init> - reason=创建新实例, hashCode=492749549
2026-01-22T14:33:58.527+08:00  WARN --- [           main] o.s.m.p.s.SyncMcpSamplingProvider        : No sampling methods found
2026-01-22T14:33:58.529+08:00  WARN --- [           main] o.s.m.p.e.SyncMcpElicitationProvider     : No elicitation methods found
2026-01-22T14:33:58.543+08:00  WARN --- [           main] ConfigServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.context.ApplicationContextException: Failed to start bean 'webServerStartStop'
2026-01-22T14:33:58.549+08:00  INFO --- [           main] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#shutdown - reason=shutdown completed
2026-01-22T14:33:58.550+08:00  INFO --- [           main] c.a.a.a.e.e.GraphBasedEvaluationExecutor : Shutting down ExecutorService
2026-01-22T14:33:58.553+08:00  INFO --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2026-01-22T14:33:58.564+08:00  INFO --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2026-01-22T14:33:58.578+08:00  INFO --- [           main] .s.b.a.l.ConditionEvaluationReportLogger : 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2026-01-22T14:33:58.596+08:00 ERROR --- [           main] o.s.b.d.LoggingFailureAnalysisReporter   : 

***************************
APPLICATION FAILED TO START
***************************

Description:

Web server failed to start. Port 8080 was already in use.

Action:

Identify and stop the process that's listening on port 8080 or configure this application to listen on another port.

2026-01-22T14:33:58.598+08:00  INFO --- [r-shutdown-hook] c.a.c.a.g.internal.node.ParallelNode     : Shutting down ParallelNode default executor
2026-01-22T14:33:58.598+08:00  INFO --- [r-shutdown-hook] c.a.c.a.g.internal.node.ParallelNode     : ParallelNode default thread pool terminated
2026-01-22T14:33:58.598+08:00  INFO --- [r-shutdown-hook] c.a.c.a.g.internal.node.ParallelNode     : ParallelNode default executor shut down successfully
2026-01-22T14:37:51.323+08:00  INFO --- [           main] c.a.a.a.start.AssistantAgentApplication  : Starting AssistantAgentApplication using Java 21.0.9 with PID 11100 (D:\devfive\AssistantAgent\assistant-agent-start\target\classes started by zhou_ in D:\devfive\AssistantAgent\assistant-agent-start)
2026-01-22T14:37:51.324+08:00 DEBUG --- [           main] c.a.a.a.start.AssistantAgentApplication  : Running with Spring Boot v3.4.8, Spring v6.2.9
2026-01-22T14:37:51.325+08:00  INFO --- [           main] c.a.a.a.start.AssistantAgentApplication  : No active profile set, falling back to 1 default profile: "default"
2026-01-22T14:37:52.606+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Elasticsearch repositories in DEFAULT mode.
2026-01-22T14:37:52.637+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 23 ms. Found 0 Elasticsearch repository interfaces.
2026-01-22T14:37:52.643+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Reactive Elasticsearch repositories in DEFAULT mode.
2026-01-22T14:37:52.652+08:00  INFO --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 7 ms. Found 0 Reactive Elasticsearch repository interfaces.
2026-01-22T14:37:52.762+08:00  WARN --- [           main] o.m.s.mapper.ClassPathMapperScanner      : Skipping MapperFactoryBean with name 'learningRecordMapper' and 'com.alibaba.assistant.agent.start.persistence.learning.mapper.LearningRecordMapper' mapperInterface. Bean already defined with the same name!
2026-01-22T14:37:52.763+08:00  WARN --- [           main] o.m.s.mapper.ClassPathMapperScanner      : Skipping MapperFactoryBean with name 'triggerDefinitionMapper' and 'com.alibaba.assistant.agent.start.persistence.trigger.mapper.TriggerDefinitionMapper' mapperInterface. Bean already defined with the same name!
2026-01-22T14:37:52.763+08:00  WARN --- [           main] o.m.s.mapper.ClassPathMapperScanner      : Skipping MapperFactoryBean with name 'triggerExecutionRecordMapper' and 'com.alibaba.assistant.agent.start.persistence.trigger.mapper.TriggerExecutionRecordMapper' mapperInterface. Bean already defined with the same name!
2026-01-22T14:37:52.763+08:00  WARN --- [           main] o.m.s.mapper.ClassPathMapperScanner      : Skipping MapperFactoryBean with name 'actionRegistryMapper' and 'com.alibaba.assistant.agent.planning.persistence.mapper.ActionRegistryMapper' mapperInterface. Bean already defined with the same name!
2026-01-22T14:37:53.807+08:00  INFO --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port 8080 (http)
2026-01-22T14:37:53.823+08:00  INFO --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]
2026-01-22T14:37:53.824+08:00  INFO --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.43]
2026-01-22T14:37:53.915+08:00  INFO --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext
2026-01-22T14:37:53.916+08:00  INFO --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 2535 ms
2026-01-22T14:37:53.940+08:00  INFO --- [           main] c.a.a.a.s.a.security.JwtTokenProvider    : JwtTokenProvider#init - JWT 密钥已初始化
2026-01-22T14:37:53.990+08:00 DEBUG --- [           main] c.a.a.a.s.a.s.JwtAuthenticationFilter    : Filter 'jwtAuthenticationFilter' configured for use
2026-01-22T14:37:54.289+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#init - reason=search extension framework is enabled
2026-01-22T14:37:54.291+08:00  INFO --- [           main] c.a.a.a.s.s.MockBaiduWebSearchProvider   : MockBaiduWebSearchProvider#init - reason=使用简单模式初始化
2026-01-22T14:37:54.295+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#unifiedSearchCodeactTool - reason=创建统一搜索工具, providerCount=3
2026-01-22T14:37:54.342+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#init - reason=planning extension is enabled
2026-01-22T14:37:54.344+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#init - reason=ES configuration class loaded (elasticsearch.enabled=true)
2026-01-22T14:37:54.346+08:00  INFO --- [           main] toConfiguration$MybatisPlusConfiguration : MybatisPlusConfiguration#init - reason=MySQL configuration class loaded (mysql.enabled=true, MyBatisPlus present)
2026-01-22T14:37:54.382+08:00  INFO --- [           main] toConfiguration$MybatisPlusConfiguration : MybatisPlusConfiguration#actionEntityConverter - reason=creating entity converter
2026-01-22T14:37:54.383+08:00  INFO --- [           main] toConfiguration$MybatisPlusConfiguration : MybatisPlusConfiguration#mybatisPlusActionRepository - reason=ActionRegistryMapper found, creating MySQL repository
2026-01-22T14:37:54.839+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#actionVectorizationService - reason=creating ES vectorization service
2026-01-22T14:37:54.905+08:00  INFO --- [           main] c.a.a.a.p.v.ActionVectorizationService   : ActionVectorizationService#init - reason=ES index initialized on startup
2026-01-22T14:37:54.919+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#semanticActionProvider - reason=creating semantic action provider, semanticWeight=0.6, keywordWeight=0.4, matchThreshold=0.5
2026-01-22T14:37:54.923+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#defaultPlanGenerator - reason=creating default plan generator
2026-01-22T14:37:54.925+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#planActionCodeactTool - reason=creating plan_action tool
2026-01-22T14:37:54.929+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#queryStepExecutor - reason=creating query step executor
2026-01-22T14:37:54.931+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#inputStepExecutor - reason=creating input step executor
2026-01-22T14:37:54.933+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#executeStepExecutor - reason=creating execute step executor
2026-01-22T14:37:54.935+08:00  INFO --- [           main] f.a.AutowiredAnnotationBeanPostProcessor : Inconsistent constructor declaration on bean with name 'actionExecutorFactory': single autowire-marked constructor flagged as optional - this constructor is effectively required since there is no default constructor to fall back to: public com.alibaba.assistant.agent.planning.executor.ActionExecutorFactory(java.util.List,com.alibaba.assistant.agent.planning.permission.interceptor.PermissionInterceptor)
2026-01-22T14:37:54.938+08:00  INFO --- [           main] .a.a.a.p.c.ParamOptionsAutoConfiguration : ParamOptionsAutoConfiguration - Parameter options module initialized
2026-01-22T14:37:54.939+08:00  INFO --- [           main] .a.a.a.p.c.ParamOptionsAutoConfiguration : ParamOptionsAutoConfiguration - Creating RestTemplate for HTTP handlers
2026-01-22T14:37:54.948+08:00  INFO --- [           main] c.a.a.a.planning.executor.HttpExecutor   : HttpExecutor#init - initialized
2026-01-22T14:37:54.949+08:00  INFO --- [           main] c.a.a.a.p.executor.InternalExecutor      : InternalExecutor#init - initialized
2026-01-22T14:37:54.957+08:00  INFO --- [           main] c.a.a.a.p.p.a.PermissionAdapterRegistry  : PermissionAdapterRegistry#registerAdapter - registered adapter: system=gov-platform, name=政务服务平台权限适配器
2026-01-22T14:37:54.957+08:00  INFO --- [           main] c.a.a.a.p.p.a.PermissionAdapterRegistry  : PermissionAdapterRegistry#registerAdapter - registered adapter: system=oa-system, name=OA办公系统权限适配器
2026-01-22T14:37:54.958+08:00  INFO --- [           main] c.a.a.a.p.p.a.PermissionAdapterRegistry  : PermissionAdapterRegistry initialized with 2 adapters: [gov-platform, oa-system]
2026-01-22T14:37:54.960+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U001, system=oa-system, externalUser=zhang.san@company.com
2026-01-22T14:37:54.961+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U001, system=gov-platform, externalUser=320102199001011234
2026-01-22T14:37:54.962+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U002, system=oa-system, externalUser=li.si@company.com
2026-01-22T14:37:54.962+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U003, system=oa-system, externalUser=wang.wu@company.com
2026-01-22T14:37:54.963+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U003, system=gov-platform, externalUser=leader_001
2026-01-22T14:37:54.963+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U004, system=gov-platform, externalUser=staff_001
2026-01-22T14:37:54.963+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService#bindIdentity - bound: platformUser=U005, system=oa-system, externalUser=sun.qi@company.com
2026-01-22T14:37:54.963+08:00  INFO --- [           main] a.a.p.p.s.InMemoryIdentityMappingService : InMemoryIdentityMappingService initialized with demo data
2026-01-22T14:37:54.965+08:00  INFO --- [           main] c.a.a.a.p.c.PermissionAutoConfiguration  : PermissionAutoConfiguration - creating PermissionInterceptor
2026-01-22T14:37:54.967+08:00  INFO --- [           main] c.a.a.a.p.e.ActionExecutorFactory        : ActionExecutorFactory#init - initialized executors: INTERNAL(InternalExecutor), HTTP(HttpExecutor), DATA_AGENT(DataAgentExecutor), MCP(McpExecutor)
2026-01-22T14:37:54.967+08:00  INFO --- [           main] c.a.a.a.p.e.ActionExecutorFactory        : ActionExecutorFactory#init - permission interceptor enabled
2026-01-22T14:37:54.968+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#apiCallStepExecutor - reason=creating api call step executor
2026-01-22T14:37:54.973+08:00 DEBUG --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#validationStepExecutor - reason=creating validation step executor
2026-01-22T14:37:54.975+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#stepExecutorRegistry - reason=creating executor registry, executorCount=5
2026-01-22T14:37:54.976+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=QUERY, executorClass=QueryStepExecutor
2026-01-22T14:37:54.976+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=INPUT, executorClass=InputStepExecutor
2026-01-22T14:37:54.976+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=EXECUTE, executorClass=ExecuteStepExecutor
2026-01-22T14:37:54.976+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=API_CALL, executorClass=ApiCallStepExecutor
2026-01-22T14:37:54.976+08:00  INFO --- [           main] c.a.a.a.p.internal.StepExecutorRegistry  : StepExecutorRegistry#register - reason=registered executor, type=VALIDATION, executorClass=ValidationStepExecutor
2026-01-22T14:37:54.977+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#defaultPlanExecutor - reason=creating default plan executor
2026-01-22T14:37:54.980+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#executeActionCodeactTool - reason=creating execute_action tool
2026-01-22T14:37:54.983+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#listActionsCodeactTool - reason=creating list_actions tool
2026-01-22T14:37:54.985+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#getActionDetailsCodeactTool - reason=creating get_action_details tool
2026-01-22T14:37:54.987+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#executeSystemActionCodeactTool - reason=creating execute_system_action tool
2026-01-22T14:37:55.065+08:00  INFO --- [           main] c.a.a.a.start.config.PersistenceConfig   : PersistenceConfig#init - reason=persistence configuration loaded
2026-01-22T14:37:55.067+08:00  INFO --- [           main] c.a.a.a.start.config.PersistenceConfig   : PersistenceConfig#elasticsearchExperienceProvider - reason=creating Elasticsearch experience provider (PRIMARY), indexName=experiences
2026-01-22T14:37:55.073+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#<init> - reason=初始化默认评估套件配置, experienceProviderAvailable=true
2026-01-22T14:37:55.076+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#evaluatorRegistry - reason=创建 EvaluatorRegistry Bean
2026-01-22T14:37:55.078+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'llm-based' of type LLMBasedEvaluator
2026-01-22T14:37:55.078+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'passthrough' of type RuleBasedEvaluator
2026-01-22T14:37:55.080+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'react_experience_evaluator' of type RuleBasedEvaluator
2026-01-22T14:37:55.080+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createDefaultEvaluatorRegistry - reason=注册 React 阶段经验检索评估器
2026-01-22T14:37:55.080+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'codeact_experience_evaluator' of type RuleBasedEvaluator
2026-01-22T14:37:55.080+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createDefaultEvaluatorRegistry - reason=注册 CodeAct 阶段经验检索评估器
2026-01-22T14:37:55.081+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#evaluationService - reason=创建默认 EvaluationService, sharedRegistryEvaluators=[llm-based, passthrough, codeact_experience_evaluator, react_experience_evaluator]
2026-01-22T14:37:55.083+08:00 DEBUG --- [           main] c.a.a.a.e.e.GraphBasedEvaluationExecutor : Created default ExecutorService for batch processing
2026-01-22T14:37:55.084+08:00  INFO --- [           main] .c.ExperienceEvaluationCriterionProvider : ExperienceEvaluationCriterionProvider#<init> - reason=初始化经验评估 Criterion 提供者
2026-01-22T14:37:55.087+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#structuredParamExtractor - reason=creating structured param extractor
2026-01-22T14:37:55.097+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#parameterValidator - reason=creating parameter validator
2026-01-22T14:37:55.098+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#sessionProvider - reason=creating in-memory session provider
2026-01-22T14:37:55.099+08:00  INFO --- [           main] c.a.a.a.p.s.InMemorySessionProvider      : InMemorySessionProvider#init - initialized
2026-01-22T14:37:55.101+08:00  INFO --- [           main] c.a.a.a.p.s.ParamCollectionService       : ParamCollectionService#init - sessionProvider=InMemory
2026-01-22T14:37:55.103+08:00 DEBUG --- [           main] c.a.a.a.e.evaluator.EvaluatorRegistry    : Registered evaluator 'action_intent_evaluator' of type ActionIntentEvaluator
2026-01-22T14:37:55.103+08:00  INFO --- [           main] p.i.PlanningIntegrationAutoConfiguration : PlanningIntegrationAutoConfiguration#actionIntentEvaluator - initialized and registered, paramCollection=true, llmVerification=true, maxCandidates=5
2026-01-22T14:37:55.104+08:00  INFO --- [           main] .p.i.PlanningEvaluationCriterionProvider : PlanningEvaluationCriterionProvider#init - initialized, llmVerificationEnabled=true
2026-01-22T14:37:55.104+08:00  INFO --- [           main] p.i.PlanningIntegrationAutoConfiguration : PlanningIntegrationAutoConfiguration#planningEvaluationCriterionProvider - registered planning evaluation criterion provider
2026-01-22T14:37:55.105+08:00  INFO --- [           main] .c.ExperienceEvaluationCriterionProvider : ExperienceEvaluationCriterionProvider#getReactPhaseCriteria - reason=提供 React 阶段评估 Criteria
2026-01-22T14:37:55.107+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createReactPhaseSuite - reason=添加自定义 Criterion, provider=ExperienceEvaluationCriterionProvider, count=3
2026-01-22T14:37:55.108+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createReactPhaseSuite - reason=添加自定义 Criterion, provider=PlanningEvaluationCriterionProvider, count=2
2026-01-22T14:37:55.110+08:00  INFO --- [           main] a.a.e.a.BatchAggregationStrategyRegistry : Registered batch aggregation strategy: ANY_TRUE
2026-01-22T14:37:55.110+08:00  INFO --- [           main] a.a.e.a.BatchAggregationStrategyRegistry : Registered batch aggregation strategy: ALL_TRUE
2026-01-22T14:37:55.146+08:00  INFO --- [           main] c.a.c.a.g.internal.node.ParallelNode     : Calculated core pool size: 32 (CPU cores: 16)
2026-01-22T14:37:55.146+08:00  INFO --- [           main] c.a.c.a.g.internal.node.ParallelNode     : Calculated maximum pool size: 64 (CPU cores: 16)
2026-01-22T14:37:55.146+08:00  INFO --- [           main] c.a.c.a.g.internal.node.ParallelNode     : Calculated queue capacity: 1000
2026-01-22T14:37:55.148+08:00  INFO --- [           main] c.a.a.a.e.DefaultEvaluationService       : Registered evaluation suite: react-phase-suite
2026-01-22T14:37:55.148+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#evaluationService - reason=注册 React Phase Suite, suiteId=react-phase-suite
2026-01-22T14:37:55.148+08:00  INFO --- [           main] .c.ExperienceEvaluationCriterionProvider : ExperienceEvaluationCriterionProvider#getCodeActPhaseCriteria - reason=提供 CodeAct 阶段评估 Criteria
2026-01-22T14:37:55.148+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createCodeActPhaseSuite - reason=添加自定义 Criterion, provider=ExperienceEvaluationCriterionProvider, count=3
2026-01-22T14:37:55.148+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#createCodeActPhaseSuite - reason=添加自定义 Criterion, provider=PlanningEvaluationCriterionProvider, count=2
2026-01-22T14:37:55.148+08:00  INFO --- [           main] a.a.e.a.BatchAggregationStrategyRegistry : Registered batch aggregation strategy: ANY_TRUE
2026-01-22T14:37:55.148+08:00  INFO --- [           main] a.a.e.a.BatchAggregationStrategyRegistry : Registered batch aggregation strategy: ALL_TRUE
2026-01-22T14:37:55.150+08:00  INFO --- [           main] c.a.a.a.e.DefaultEvaluationService       : Registered evaluation suite: codeact-phase-suite
2026-01-22T14:37:55.150+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#evaluationService - reason=注册 CodeAct Phase Suite, suiteId=codeact-phase-suite
2026-01-22T14:37:55.152+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#codeactEvaluationContextFactory - reason=创建 EvaluationContextFactory
2026-01-22T14:37:55.154+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#codeactEvaluationResultAttacher - reason=创建 EvaluationResultAttacher
2026-01-22T14:37:55.158+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#reactPhaseEvaluationHooks - reason=创建 React Phase ModelInputEvaluationHook
2026-01-22T14:37:55.159+08:00  INFO --- [           main] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#<init> - reason=初始化, phase=REACT, providerCount=1
2026-01-22T14:37:55.160+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#reactPhaseEvaluationHooks - reason=创建 React Phase EvaluationPromptInjectionHook, providersCount=2
2026-01-22T14:37:55.171+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#codeactPhaseEvaluationHooks - reason=创建 CodeAct Phase ModelInputEvaluationHook
2026-01-22T14:37:55.171+08:00  INFO --- [           main] .a.a.e.e.p.EvaluationPromptInjectionHook : EvaluationPromptInjectionHook#<init> - reason=初始化, phase=CODEACT, providerCount=1
2026-01-22T14:37:55.171+08:00  INFO --- [           main] c.a.a.a.a.e.DefaultEvaluationSuiteConfig : DefaultEvaluationSuiteConfig#codeactPhaseEvaluationHooks - reason=创建 CodeAct Phase EvaluationPromptInjectionHook, providersCount=2
2026-01-22T14:37:55.174+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#keywordMatcher - reason=creating keyword matcher
2026-01-22T14:37:55.177+08:00  INFO --- [           main] .ParamCollectionSessionAutoConfiguration : ParamCollectionSessionAutoConfiguration#inMemoryParamCollectionSessionStore - reason=creating in-memory session store (Redis not available), ttl=PT30M
2026-01-22T14:37:55.177+08:00  WARN --- [           main] .ParamCollectionSessionAutoConfiguration : ParamCollectionSessionAutoConfiguration#inMemoryParamCollectionSessionStore - reason=WARNING: In-memory session store is not suitable for distributed environment!
2026-01-22T14:37:55.178+08:00  INFO --- [           main] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#<init> - reason=initialized, defaultTtl=PT30M
2026-01-22T14:37:55.179+08:00  WARN --- [           main] .p.s.InMemoryParamCollectionSessionStore : InMemoryParamCollectionSessionStore#<init> - reason=WARNING: Using in-memory session store, not suitable for distributed environment!
2026-01-22T14:37:55.182+08:00  INFO --- [           main] iguration$UnifiedIntentHookConfiguration : UnifiedIntentHookConfiguration#unifiedIntentRecognitionHook - reason=creating unified intent hook, experienceProviderPresent=true, chatModelPresent=true, sessionStorePresent=true, directExecuteThreshold=0.95, hintThreshold=0.5
2026-01-22T14:37:55.274+08:00  INFO --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...
2026-01-22T14:37:55.476+08:00  INFO --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@5f596a1a
2026-01-22T14:37:55.478+08:00  INFO --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.
2026-01-22T14:37:55.605+08:00  WARN --- [           main] c.a.a.a.p.p.c.ActionEntityConverter      : ActionEntityConverter#parseActionType - reason=unknown action type, type=INTERNAL
2026-01-22T14:37:55.628+08:00 DEBUG --- [           main] c.a.a.a.planning.intent.KeywordMatcher   : KeywordMatcher#registerAction - actionId=oa:leave:request, keywords=57
2026-01-22T14:37:55.629+08:00  INFO --- [           main] c.a.a.a.p.i.UnifiedIntentRecognitionHook : UnifiedIntentRecognitionHook#initKeywordMatcher - reason=initialized, actionCount=1, keywordIndexSize=57
2026-01-22T14:37:55.634+08:00  INFO --- [           main] c.a.a.a.start.config.PersistenceConfig   : PersistenceConfig#elasticsearchExperienceRepository - reason=creating Elasticsearch experience repository (PRIMARY), indexName=experiences
2026-01-22T14:37:55.641+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#init - reason=reply module enabled
2026-01-22T14:37:55.644+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactToolFactory - reason=创建CodeactTool工厂, channels=1
2026-01-22T14:37:55.645+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#init - reason=工厂初始化完成, channels=1
2026-01-22T14:37:55.657+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=开始创建Reply工具
2026-01-22T14:37:55.662+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#createTools - reason=创建工具成功, toolName=send_success_message, channelCode=IDE_TEXT
2026-01-22T14:37:55.663+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#createTools - reason=创建工具成功, toolName=send_error_message, channelCode=IDE_TEXT
2026-01-22T14:37:55.663+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#createTools - reason=创建工具成功, toolName=send_notification, channelCode=IDE_TEXT
2026-01-22T14:37:55.663+08:00  INFO --- [           main] c.a.a.a.e.r.t.ReplyCodeactToolFactory    : ReplyCodeactToolFactory#createTools - reason=工具创建完成, totalCount=3
2026-01-22T14:37:55.663+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=Reply工具创建完成, count=3
2026-01-22T14:37:55.663+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=创建Reply工具, index=1, name=send_success_message, description=Send a success message to the IDE console
2026-01-22T14:37:55.663+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=创建Reply工具, index=2, name=send_error_message, description=Send an error message to the IDE console
2026-01-22T14:37:55.664+08:00  INFO --- [           main] .a.e.r.c.ReplyExtensionAutoConfiguration : ReplyExtensionAutoConfiguration#replyCodeactTools - reason=创建Reply工具, index=3, name=send_notification, description=Send a notification message
2026-01-22T14:37:55.665+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactToolFactory - reason=创建SearchCodeactTool工厂, providerCount=3
2026-01-22T14:37:55.691+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactToolFactory - reason=创建TriggerCodeactTool工厂
2026-01-22T14:37:55.692+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=开始创建Trigger工具
2026-01-22T14:37:55.694+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=创建SubscribeTriggerCodeactTool成功
2026-01-22T14:37:55.695+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=创建UnsubscribeTriggerCodeactTool成功
2026-01-22T14:37:55.697+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=创建ListTriggersCodeactTool成功
2026-01-22T14:37:55.698+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=创建GetTriggerDetailCodeactTool成功
2026-01-22T14:37:55.698+08:00  INFO --- [           main] c.a.a.a.e.t.t.TriggerCodeactToolFactory  : TriggerCodeactToolFactory#createTools - reason=触发器工具创建完成, count=4
2026-01-22T14:37:55.698+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=Trigger工具创建完成, count=4
2026-01-22T14:37:55.698+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=创建Trigger工具, index=1, name=subscribe_trigger, description=创建并订阅一个新的触发器
2026-01-22T14:37:55.698+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=创建Trigger工具, index=2, name=unsubscribe_trigger, description=取消订阅并删除一个触发器
2026-01-22T14:37:55.698+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=创建Trigger工具, index=3, name=list_triggers, description=列出所有触发器
2026-01-22T14:37:55.698+08:00  INFO --- [           main] c.a.a.a.e.t.c.TriggerAutoConfiguration   : TriggerAutoConfiguration#triggerCodeactTools - reason=创建Trigger工具, index=4, name=get_trigger_detail, description=获取指定触发器的详细信息
2026-01-22T14:37:55.704+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#planningCodeactTools - reason=creating planning tools list
2026-01-22T14:37:55.705+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#planningCodeactTools - reason=created planning tools, count=5
2026-01-22T14:37:55.710+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=创建 CodeactAgent
2026-01-22T14:37:55.711+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=配置 MemorySaver 以支持多轮对话上下文保持
2026-01-22T14:37:55.711+08:00  WARN --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=临时禁用 streaming 模式以排查循环问题
2026-01-22T14:37:55.711+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加UnifiedSearchCodeactTool
2026-01-22T14:37:55.713+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockBaiduWebSearchProvider, toolName=search_web
2026-01-22T14:37:55.715+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockKnowledgeStoreSearchProvider, toolName=search_knowledge
2026-01-22T14:37:55.716+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockProjectContextSearchProvider, toolName=search_project
2026-01-22T14:37:55.716+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=搜索工具创建完成, totalCount=3
2026-01-22T14:37:55.716+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加SearchCodeactTools, count=3
2026-01-22T14:37:55.717+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加ReplyCodeactTools, count=3
2026-01-22T14:37:55.717+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加TriggerCodeactTools, count=4
2026-01-22T14:37:55.717+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=添加PlanningCodeactTools, count=5
2026-01-22T14:37:55.717+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#createMcpDynamicTools - reason=Creating MCP dynamic tools
2026-01-22T14:37:55.719+08:00  INFO --- [           main] c.a.a.a.e.d.mcp.McpDynamicToolFactory    : McpDynamicToolFactory#createTools - reason=开始创建MCP动态工具
2026-01-22T14:37:55.721+08:00  INFO --- [           main] c.a.a.a.e.d.mcp.McpDynamicToolFactory    : McpDynamicToolFactory#createTools - reason=无可用的MCP工具
2026-01-22T14:37:55.721+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#createMcpDynamicTools - reason=MCP dynamic tools created, count=0
2026-01-22T14:37:55.721+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=Added MCP dynamic tools, count=0
2026-01-22T14:37:55.721+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#createHttpDynamicTools - reason=HTTP dynamic tools disabled by default
2026-01-22T14:37:55.721+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=合并后CodeactTool总数, count=16
2026-01-22T14:37:55.721+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=React阶段使用内置工具(write_code, execute_code, write_condition_code)
2026-01-22T14:37:55.721+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=注入 React Phase 评估 Hooks, count=2
2026-01-22T14:37:55.722+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=注入 CodeAct Phase 评估 Hooks, count=2
2026-01-22T14:37:55.722+08:00  INFO --- [           main] c.a.a.a.start.config.CodeactAgentConfig  : CodeactAgentConfig#grayscaleCodeactAgent - reason=已准备注入UnifiedIntentRecognitionHook
2026-01-22T14:37:55.723+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 开始构建CodeactAgent
2026-01-22T14:37:55.725+08:00  INFO --- [           main] .a.a.a.c.t.s.DefaultReturnSchemaRegistry : DefaultReturnSchemaRegistry#<init> - reason=创建新实例, hashCode=696327501
2026-01-22T14:37:55.726+08:00 DEBUG --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#<init> - reason=创建注册表, returnSchemaRegistry=DefaultReturnSchemaRegistry
2026-01-22T14:37:55.726+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=创建默认CodeactToolRegistry
2026-01-22T14:37:55.726+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=开始注册CodeactTool, count=16
2026-01-22T14:37:55.726+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=unified_search
2026-01-22T14:37:55.726+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=unified_search
2026-01-22T14:37:55.727+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=search_web
2026-01-22T14:37:55.727+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=search_web
2026-01-22T14:37:55.727+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=search_knowledge
2026-01-22T14:37:55.727+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=search_knowledge
2026-01-22T14:37:55.727+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=search_project
2026-01-22T14:37:55.727+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=search_project
2026-01-22T14:37:55.727+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=send_success_message
2026-01-22T14:37:55.727+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=send_success_message
2026-01-22T14:37:55.727+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=send_error_message
2026-01-22T14:37:55.727+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=send_error_message
2026-01-22T14:37:55.727+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=send_notification
2026-01-22T14:37:55.727+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=send_notification
2026-01-22T14:37:55.727+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=subscribe_trigger
2026-01-22T14:37:55.727+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=subscribe_trigger
2026-01-22T14:37:55.727+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=unsubscribe_trigger
2026-01-22T14:37:55.727+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=unsubscribe_trigger
2026-01-22T14:37:55.727+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=list_triggers
2026-01-22T14:37:55.727+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=list_triggers
2026-01-22T14:37:55.727+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=get_trigger_detail
2026-01-22T14:37:55.727+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=get_trigger_detail
2026-01-22T14:37:55.729+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=plan_action
2026-01-22T14:37:55.729+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=plan_action
2026-01-22T14:37:55.730+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=execute_action
2026-01-22T14:37:55.730+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=execute_action
2026-01-22T14:37:55.731+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=list_actions
2026-01-22T14:37:55.731+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=list_actions
2026-01-22T14:37:55.732+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=get_action_details
2026-01-22T14:37:55.732+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=get_action_details
2026-01-22T14:37:55.733+08:00  INFO --- [           main] c.a.a.a.c.t.DefaultCodeactToolRegistry   : DefaultCodeactToolRegistry#register - reason=工具注册成功, name=execute_system_action
2026-01-22T14:37:55.733+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册成功, name=execute_system_action
2026-01-22T14:37:55.733+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build - reason=CodeactTool注册完成, count=16
2026-01-22T14:37:55.733+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 创建默认CodeContext: language=PYTHON
2026-01-22T14:37:55.735+08:00 DEBUG --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 创建默认RuntimeEnvironmentManager: language=PYTHON
2026-01-22T14:37:55.736+08:00 DEBUG --- [           main] c.a.a.a.c.e.bridge.AgentToolBridge       : AgentToolBridge#<init> 初始化: 注册了0个工具
2026-01-22T14:37:55.737+08:00 DEBUG --- [           main] c.a.a.a.c.executor.bridge.StateBridge    : StateBridge#<init> 初始化完成
2026-01-22T14:37:55.738+08:00  INFO --- [           main] c.a.a.a.core.executor.GraalCodeExecutor  : GraalCodeExecutor#<init> 初始化完成: language=PYTHON, allowIO=false, timeout=30000ms, executableTools=true, customBridgeFactory=false
2026-01-22T14:37:55.738+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#createCodeactSubAgentInterceptor 创建子Agent拦截器
2026-01-22T14:37:55.744+08:00  INFO --- [           main] c.a.a.a.a.subagent.CodeactSubAgent       : CodeactSubAgent#<init> 初始化: name=code-generator
2026-01-22T14:37:55.744+08:00  INFO --- [           main] c.a.a.a.a.subagent.CodeactSubAgent       : CodeactSubAgent#<init> 初始化: name=condition-code-generator
2026-01-22T14:37:55.744+08:00  INFO --- [           main] c.a.a.a.a.s.CodeactSubAgentInterceptor   : CodeactSubAgentInterceptor#<init> 创建默认代码生成子Agent
2026-01-22T14:37:55.877+08:00  INFO --- [           main] c.a.a.a.a.s.CodeactSubAgentInterceptor   : CodeactSubAgentInterceptor#<init> 初始化完成: subAgentCount=2
2026-01-22T14:37:55.879+08:00  INFO --- [           main] c.a.a.a.a.tools.ExecuteCodeTool          : ExecuteCodeTool#<init> 初始化完成
2026-01-22T14:37:55.882+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 拦截器分类完成: modelInterceptors=1, toolInterceptors=0
2026-01-22T14:37:55.882+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 从拦截器提取工具: interceptor=CodeactSubAgent, toolCount=2
2026-01-22T14:37:55.895+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 工具收集完成: interceptorTools=2, regularTools=3, total=6
2026-01-22T14:37:55.896+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build 设置ModelInterceptors到LlmNode: count=1
2026-01-22T14:37:55.897+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#build CodeactAgent构建完成
2026-01-22T14:37:55.897+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=开始罗列已注册的工具
2026-01-22T14:37:55.897+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct阶段工具数量, count=16
2026-01-22T14:37:55.897+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=1, name=send_success_message, description=Send a success message to the IDE console
2026-01-22T14:37:55.897+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=2, name=get_trigger_detail, description=获取指定触发器的详细信息
2026-01-22T14:37:55.897+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=3, name=get_action_details, description=获取指定动作的完整定义，包括参数、步骤等详细信息。
2026-01-22T14:37:55.897+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=4, name=search_project, description=搜索项目上下文信息，包括代码、配置、文档等
2026-01-22T14:37:55.898+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=5, name=subscribe_trigger, description=创建并订阅一个新的触发器
2026-01-22T14:37:55.898+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=6, name=search_knowledge, description=搜索团队知识库，包括FAQ、规范、最佳实践等
2026-01-22T14:37:55.898+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=7, name=unified_search, description=统一搜索工具，可同时搜索项目、知识库、Web等多个数据源
2026-01-22T14:37:55.898+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=8, name=unsubscribe_trigger, description=取消订阅并删除一个触发器
2026-01-22T14:37:55.898+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=9, name=search_web, description=执行Web搜索，获取公开互联网信息
2026-01-22T14:37:55.898+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=10, name=list_actions, description=列出所有可用的动作，支持按分类和标签筛选。
2026-01-22T14:37:55.898+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=11, name=plan_action, description=根据用户输入匹配动作并生成执行计划。返回匹配的动作列表和生成的执行计划。
2026-01-22T14:37:55.898+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=12, name=execute_system_action, description=执行系统Action（如OA请假、ERP操作等）。根据action_id调用相应的系统Handler。
2026-01-22T14:37:55.898+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=13, name=send_error_message, description=Send an error message to the IDE console
2026-01-22T14:37:55.898+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=14, name=execute_action, description=执行指定的执行计划，返回执行结果。支持继续执行等待用户输入的计划。
2026-01-22T14:37:55.898+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=15, name=send_notification, description=Send a notification message
2026-01-22T14:37:55.898+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=CodeAct工具详情, index=16, name=list_triggers, description=列出所有触发器
2026-01-22T14:37:55.898+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React阶段工具数量, count=6
2026-01-22T14:37:55.898+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=1, name=write_code, description=Generate and register a new function with specified name and parameters. IMPORTANT: You MUST provide both 'functionName' and 'parameters' fields. Example: write_code(requirement='calculate sum', functionName='calculate_sum', parameters=['a', 'b'])
2026-01-22T14:37:55.898+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=2, name=write_condition_code, description=Generate and register a condition check function for triggers. This function MUST return a boolean value (True/False). Example: write_condition_code(requirement='check if it is a working day', functionName='check_is_working_day', parameters=['date'])
2026-01-22T14:37:55.898+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=3, name=send_success_message, description=Send a success message to the IDE console
2026-01-22T14:37:55.898+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=4, name=send_error_message, description=Send an error message to the IDE console
2026-01-22T14:37:55.898+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=5, name=send_notification, description=Send a notification message
2026-01-22T14:37:55.898+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=React工具详情, index=6, name=execute_code, description=Execute a previously generated function by its exact name with matching parameters. CRITICAL: The functionName MUST exactly match the name used in write_code. The 'args' parameter names MUST exactly match the 'parameters' specified in write_code. Example: If you called write_code with functionName='calculate_sum' and parameters=['a', 'b'], then you must call execute_code with functionName='calculate_sum' and args={'a': 10, 'b': 20}. Parameter value types supported: String, Number, Boolean, List, Map/Object.
2026-01-22T14:37:55.898+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgentBuilder#logRegisteredTools - reason=工具罗列完成
2026-01-22T14:37:55.901+08:00  INFO --- [           main] c.a.a.agent.autoconfigure.CodeactAgent   : CodeactAgent#<init> 初始化完成: language=PYTHON
2026-01-22T14:37:55.906+08:00  INFO --- [           main] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#<init> 初始化 Agent 加载器
2026-01-22T14:37:55.917+08:00 DEBUG --- [           main] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#<init> Agent 图结构:
@startuml CodeactAgent
skinparam usecaseFontSize 14
skinparam usecaseStereotypeFontSize 12
skinparam hexagonFontSize 14
skinparam hexagonStereotypeFontSize 12
title "CodeactAgent"
footer

powered by spring-ai-alibaba
end footer
circle start<<input>> as __START__
circle stop as __END__
usecase "_AGENT_MODEL_"<<Node>>
usecase "_AGENT_TOOL_"<<Node>>
usecase "_AGENT_HOOK_UnifiedIntentRecognitionHook.before"<<Node>>
usecase "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"<<Node>>
usecase "_AGENT_HOOK_EvaluationPromptInjectionHook-REACT.beforeModel"<<Node>>
hexagon "check state" as condition1<<Condition>>
hexagon "check state" as condition2<<Condition>>
hexagon "check state" as condition3<<Condition>>
"__START__" -down-> "_AGENT_HOOK_UnifiedIntentRecognitionHook.before"
"_AGENT_HOOK_UnifiedIntentRecognitionHook.before" .down.> "condition1"
"condition1" .down.> "__END__"
'"_AGENT_HOOK_UnifiedIntentRecognitionHook.before" .down.> "__END__"
"condition1" .down.> "_AGENT_TOOL_"
'"_AGENT_HOOK_UnifiedIntentRecognitionHook.before" .down.> "_AGENT_TOOL_"
"condition1" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
'"_AGENT_HOOK_UnifiedIntentRecognitionHook.before" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
"_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel" -down-> "_AGENT_HOOK_EvaluationPromptInjectionHook-REACT.beforeModel"
"_AGENT_HOOK_EvaluationPromptInjectionHook-REACT.beforeModel" -down-> "_AGENT_MODEL_"
"_AGENT_MODEL_" .down.> "condition2"
"condition2" .down.> "_AGENT_TOOL_"
'"_AGENT_MODEL_" .down.> "_AGENT_TOOL_"
"condition2" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
'"_AGENT_MODEL_" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
"condition2" .down.> "__END__"
'"_AGENT_MODEL_" .down.> "__END__"
"_AGENT_TOOL_" .down.> "condition3"
"condition3" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
'"_AGENT_TOOL_" .down.> "_AGENT_HOOK_ModelInputEvaluationHook-REACT.beforeModel"
"condition3" .down.> "__END__"
'"_AGENT_TOOL_" .down.> "__END__"
@enduml

2026-01-22T14:37:55.917+08:00  INFO --- [           main] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#<init> 已注册 agent: grayscale_agent
2026-01-22T14:37:55.924+08:00  INFO --- [           main] .a.a.a.p.c.ParamOptionsAutoConfiguration : ParamOptionsAutoConfiguration - Creating OptionsCache with TTL: 300000ms
2026-01-22T14:37:55.926+08:00  INFO --- [           main] a.a.a.p.s.DefaultParameterOptionsService : DefaultParameterOptionsService initialized with 3 handlers
2026-01-22T14:37:55.928+08:00  INFO --- [           main] c.a.a.a.planning.system.OaSystemHandler  : OaSystemHandler#init - initialized
2026-01-22T14:37:55.939+08:00 DEBUG --- [           main] c.a.a.a.autoconfigure.AgentStaticLoader  : AgentStaticLoader#listAgents 列出所有 agent
2026-01-22T14:37:55.939+08:00  INFO --- [           main] c.a.c.a.a.s.controller.AgentController   : AgentController initialized with 1 dynamic agents: [grayscale_agent]
2026-01-22T14:37:56.027+08:00  WARN --- [           main] .s.s.UserDetailsServiceAutoConfiguration : 

Using generated security password: a7b3b384-bb64-4775-866b-71a6e2c363a0

This generated password is for development use only. Your security configuration must be updated before running your application in production.

2026-01-22T14:37:56.048+08:00  INFO --- [           main] r$InitializeUserDetailsManagerConfigurer : Global AuthenticationManager configured with UserDetailsService bean with name inMemoryUserDetailsManager
2026-01-22T14:37:56.353+08:00  INFO --- [           main] e.e.c.CodeactEvaluationAutoConfiguration : CodeactEvaluationAutoConfiguration#inputRoutingEvaluationHook - reason=创建输入路由评估 Hook
2026-01-22T14:37:56.354+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchFacade - reason=creating search facade with 3 providers
2026-01-22T14:37:56.355+08:00  INFO --- [           main] c.a.a.a.e.s.i.DefaultSearchFacade        : DefaultSearchFacade#init - reason=initialized with 3 providers
2026-01-22T14:37:56.356+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=开始创建Search工具
2026-01-22T14:37:56.357+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockBaiduWebSearchProvider, toolName=search_web
2026-01-22T14:37:56.358+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockKnowledgeStoreSearchProvider, toolName=search_knowledge
2026-01-22T14:37:56.359+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=创建搜索工具成功, providerName=MockProjectContextSearchProvider, toolName=search_project
2026-01-22T14:37:56.359+08:00  INFO --- [           main] c.a.a.a.e.s.t.SearchCodeactToolFactory   : SearchCodeactToolFactory#createTools - reason=搜索工具创建完成, totalCount=3
2026-01-22T14:37:56.359+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=Search工具创建完成, count=3
2026-01-22T14:37:56.359+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=创建Search工具, index=1, name=search_web, description=执行Web搜索，获取公开互联网信息
2026-01-22T14:37:56.359+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=创建Search工具, index=2, name=search_knowledge, description=搜索团队知识库，包括FAQ、规范、最佳实践等
2026-01-22T14:37:56.359+08:00  INFO --- [           main] a.e.s.c.SearchExtensionAutoConfiguration : SearchExtensionAutoConfiguration#searchCodeactTools - reason=创建Search工具, index=3, name=search_project, description=搜索项目上下文信息，包括代码、配置、文档等
2026-01-22T14:37:56.362+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#diagnostics - reason=ElasticsearchClient bean found
2026-01-22T14:37:56.362+08:00  INFO --- [           main] Configuration$ElasticsearchConfiguration : ElasticsearchConfiguration#diagnostics - reason=EmbeddingModel bean found
2026-01-22T14:37:56.363+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration : PlanningExtensionAutoConfiguration#diagnostics - Planning module status:
2026-01-22T14:37:56.364+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration :   - ActionRepository: MybatisPlusActionRepository
2026-01-22T14:37:56.364+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration :   - ActionProvider: SemanticActionProvider
2026-01-22T14:37:56.364+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration :   - PlanGenerator: DefaultPlanGenerator
2026-01-22T14:37:56.364+08:00  INFO --- [           main] a.p.c.PlanningExtensionAutoConfiguration :   - PlanExecutor: DefaultPlanExecutor
2026-01-22T14:37:56.483+08:00  INFO --- [           main] c.a.a.a.c.c.CodeactCoreAutoConfiguration : CodeactCoreAutoConfiguration#returnSchemaRegistry - reason=创建ReturnSchemaRegistry单例Bean
2026-01-22T14:37:56.483+08:00  INFO --- [           main] .a.a.a.c.t.s.DefaultReturnSchemaRegistry : DefaultReturnSchemaRegistry#<init> - reason=创建新实例, hashCode=1920021004
2026-01-22T14:37:56.885+08:00  WARN --- [           main] o.s.m.p.s.SyncMcpSamplingProvider        : No sampling methods found
2026-01-22T14:37:56.886+08:00  WARN --- [           main] o.s.m.p.e.SyncMcpElicitationProvider     : No elicitation methods found
2026-01-22T14:37:56.912+08:00  INFO --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port 8080 (http) with context path '/'
2026-01-22T14:37:56.922+08:00  INFO --- [           main] c.a.a.a.start.AssistantAgentApplication  : Started AssistantAgentApplication in 6.28 seconds (process running for 6.779)
2026-01-22T14:37:56.925+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#run - reason=Starting experience module validation
2026-01-22T14:37:56.989+08:00 DEBUG --- [           main] .p.e.r.ElasticsearchExperienceRepository : ElasticsearchExperienceRepository#count - reason=count completed, count=0
2026-01-22T14:37:57.016+08:00 DEBUG --- [           main] .p.e.r.ElasticsearchExperienceRepository : ElasticsearchExperienceRepository#countByTypeAndScope - reason=count completed, type=CODE, scope=null, count=0
2026-01-22T14:37:57.031+08:00 DEBUG --- [           main] .p.e.r.ElasticsearchExperienceRepository : ElasticsearchExperienceRepository#countByTypeAndScope - reason=count completed, type=REACT, scope=null, count=0
2026-01-22T14:37:57.042+08:00 DEBUG --- [           main] .p.e.r.ElasticsearchExperienceRepository : ElasticsearchExperienceRepository#countByTypeAndScope - reason=count completed, type=COMMON, scope=null, count=0
2026-01-22T14:37:57.042+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testExperienceCount - reason=Experience stats: total=0, code=0, react=0, common=0
2026-01-22T14:37:57.043+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCommonExperienceQuery - reason=Testing common experience query
2026-01-22T14:37:57.228+08:00 DEBUG --- [           main] .s.p.e.p.ElasticsearchExperienceProvider : ElasticsearchExperienceProvider#query - reason=query completed, type=COMMON, text=null, count=0
2026-01-22T14:37:57.229+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCommonExperienceQuery - reason=Found 0 common experiences
2026-01-22T14:37:57.229+08:00  WARN --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCommonExperienceQuery - reason=❌ MoLiHong identity experience not found
2026-01-22T14:37:57.229+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCodeExperienceQuery - reason=Testing code experience query (demo keyword)
2026-01-22T14:37:57.243+08:00 DEBUG --- [           main] .s.p.e.p.ElasticsearchExperienceProvider : ElasticsearchExperienceProvider#query - reason=query completed, type=CODE, text=null, count=0
2026-01-22T14:37:57.243+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCodeExperienceQuery - reason=Found 0 demo code experiences
2026-01-22T14:37:57.243+08:00  WARN --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testCodeExperienceQuery - reason=❌ Demo code experience not found
2026-01-22T14:37:57.243+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testReactExperienceQuery - reason=Testing react experience query
2026-01-22T14:37:57.254+08:00 DEBUG --- [           main] .s.p.e.p.ElasticsearchExperienceProvider : ElasticsearchExperienceProvider#query - reason=query completed, type=REACT, text=null, count=0
2026-01-22T14:37:57.255+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testReactExperienceQuery - reason=Found 0 react experiences
2026-01-22T14:37:57.255+08:00  WARN --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#testReactExperienceQuery - reason=❌ Ambiguous intent strategy not found
2026-01-22T14:37:57.255+08:00  INFO --- [           main] c.a.a.a.s.v.ExperienceTestValidator      : ExperienceTestValidator#run - reason=Experience module validation completed
2026-01-22T14:37:57.255+08:00  INFO --- [           main] c.a.a.a.s.a.config.AuthInitialization    : AuthInitialization#run - 初始化认证系统
2026-01-22T14:37:57.267+08:00 DEBUG --- [           main] c.a.a.a.s.a.s.AuthenticationService      : AuthenticationService#initDefaultAdmin - 管理员账户已存在
2026-01-22T14:37:57.267+08:00  INFO --- [           main] c.a.a.a.s.a.config.AuthInitialization    : AuthInitialization#run - 认证系统初始化完成
