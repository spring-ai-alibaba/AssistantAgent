# ============================================================================
# Assistant Agent - Full Example Configuration
# ============================================================================
# This configuration demonstrates all available options with customizations.
# ============================================================================

spring:
  application:
    name: assistant-agent-full

server:
  port: 8080

# ============================================================================
# DashScope Configuration
# ============================================================================
spring.ai.dashscope:
  api-key: ${DASHSCOPE_API_KEY:sk-aa53c23886144d71a6128763863288e1}
  chat:
    options:
      model: qwen-max
  # Embedding model for vectorization
  embedding:
    options:
      model: text-embedding-v3

# ============================================================================
# Experience Module - FastIntent disabled to avoid conflict with Planning Intent
# ============================================================================
spring.ai.alibaba.codeact.extension.experience:
  enabled: true
  in-memory:
    enabled: false  # Disable InMemory, use Elasticsearch instead
  fast-intent-enabled: false
  fast-intent-react-enabled: false
  fast-intent-code-enabled: false
  fast-intent-allowed-tools:
    - send_success_message
    - send_error_message
    - send_notification
    - write_code
    - write_condition_code
  logging:
    enabled: true

# ============================================================================
# Learning Module - with after-agent learning
# ============================================================================
spring.ai.alibaba.codeact.extension.learning:
  enabled: true
  online:
    enabled: true
    after-agent:
      enabled: true
      learning-types:
        - experience

# ============================================================================
# Reply Module - with custom tools
# ============================================================================
spring.ai.alibaba.codeact.extension.reply:
  enabled: true
  tools:
    - toolName: send_success_message
      channelCode: IDE_TEXT
      description: Send a success message to the IDE console
      reactEnabled: true
      codeActEnabled: true
      parameters:
        - name: text
          type: STRING
          required: true
          description: The success message text
    - toolName: send_error_message
      channelCode: IDE_TEXT
      description: Send an error message to the IDE console
      reactEnabled: true
      codeActEnabled: true
      parameters:
        - name: text
          type: STRING
          required: true
          description: The error message text
    - toolName: send_notification
      channelCode: IDE_TEXT
      description: Send a notification message
      reactEnabled: true
      codeActEnabled: true
      parameters:
        - name: text
          type: STRING
          required: true
          description: The notification text

# ============================================================================
# Evaluation Module - with input routing
# ============================================================================
spring.ai.alibaba.codeact.extension.evaluation:
  enabled: true
  input-routing:
    enabled: true
    suite-id: input_routing_suite
  code-generation-input:
    enabled: true
    suite-id: code_generation_input_suite

# ============================================================================
# MySQL DataSource Configuration
# ============================================================================
spring.datasource:
  url: jdbc:mysql://localhost:3306/assistant_agent?useUnicode=true&characterEncoding=utf8&useSSL=false&serverTimezone=Asia/Shanghai
  username: root
  password: ${MYSQL_PASSWORD:StrongRootPwd}
  driver-class-name: com.mysql.cj.jdbc.Driver

# ============================================================================
# MyBatis Plus Configuration
# ============================================================================
mybatis-plus:
  configuration:
    map-underscore-to-camel-case: true
    log-impl: org.apache.ibatis.logging.stdout.StdOutImpl
  global-config:
    db-config:
      id-type: auto

# ============================================================================
# Elasticsearch Configuration
# ============================================================================
spring.elasticsearch:
  uris: http://localhost:9200
  username: elastic
  password: XWuH_rhjfz5ZD+Brrn0D

# Experience ES index name
spring.ai.alibaba.codeact.extension.experience.elasticsearch:
  index-name: experiences

# ============================================================================
# Planning Module - with Elasticsearch for SemanticActionProvider
# ============================================================================
spring.ai.alibaba.codeact.extension.planning:
  enabled: true
  elasticsearch:
    enabled: true

# ============================================================================
# Logging - Debug level for development
# ============================================================================
logging:
  level:
    com.alibaba.assistant.agent: DEBUG

